<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Azure Entra - In a Nutshell</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 18 18'%3E%3Cdefs%3E%3ClinearGradient id='a' x1='9' y1='16.82' x2='9' y2='1.18'%3E%3Cstop offset='0' stop-color='%23198ab3'/%3E%3Cstop offset='0.09' stop-color='%231f9dc4'/%3E%3Cstop offset='0.24' stop-color='%2328b5d9'/%3E%3Cstop offset='0.4' stop-color='%232dc6e9'/%3E%3Cstop offset='0.57' stop-color='%2331d1f2'/%3E%3Cstop offset='0.78' stop-color='%2332d4f5'/%3E%3C/linearGradient%3E%3ClinearGradient id='b' x1='8.36' y1='11.35' x2='8.36' y2='14.46'%3E%3Cstop offset='0' stop-color='%23c69aeb'/%3E%3Cstop offset='1' stop-color='%236f4bb2'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath d='M14.18,5.89A4.85,4.85,0,0,0,9.23,1.18,5,5,0,0,0,4.48,4.47,4.61,4.61,0,0,0,.5,9,4.67,4.67,0,0,0,5.29,13.5a3,3,0,0,0,.42,0h1.2a1.47,1.47,0,0,1-.11-.56v0A1.51,1.51,0,0,1,7,12.21H5.6l-.31,0A3.41,3.41,0,0,1,1.77,9,3.33,3.33,0,0,1,4.68,5.73l.76-.12.25-.73A3.73,3.73,0,0,1,9.23,2.45,3.6,3.6,0,0,1,12.91,5.9V7L14,7.15a2.59,2.59,0,0,1,2.26,2.49,2.63,2.63,0,0,1-2.62,2.54h-.15l-.08,0h-1A3.92,3.92,0,0,0,8.54,9a.64.64,0,1,0,0,1.27,2.65,2.65,0,0,1,0,5.29.64.64,0,1,0,0,1.27,3.92,3.92,0,0,0,3.87-3.34h1.05a.64.64,0,0,0,.2,0A3.91,3.91,0,0,0,17.5,9.64,3.86,3.86,0,0,0,14.18,5.89Z' fill='url(%23a)'/%3E%3Crect x='6.8' y='11.35' width='3.12' height='3.12' rx='1.54' fill='url(%23b)'/%3E%3C/svg%3E" />
  <meta name="description" content="A comprehensive guide to Azure Entra." />
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root{
      --bg: #ffffff;
      --fg: #0f172a;
      --muted: #64748b;
      --accent: #3b82f6;
      --accent-light: #dbeafe;
      --border: #e2e8f0;
      --sidebar-bg: #ffffff;
      --sidebar-fg: #0f172a;
      --code-bg: linear-gradient(90deg, rgba(59, 130, 246, 0.08) 0%, rgba(59, 130, 246, 0.12) 100%);
      --focus: #10b981;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
      --shadow-md: 0 4px 6px rgba(0,0,0,0.1), 0 2px 4px rgba(0,0,0,0.06);
      --shadow-lg: 0 10px 20px rgba(0,0,0,0.12), 0 6px 6px rgba(0,0,0,0.08);
      --gradient: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    }
    
    /* Bootstrap Gradient Utility Classes */
    .bg-gradient-blue { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%) !important; }
    .bg-gradient-green { background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%) !important; }
    .bg-gradient-yellow { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%) !important; }
    .bg-gradient-pink { background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%) !important; }
    .bg-gradient-purple { background: linear-gradient(135deg, #e9d5ff 0%, #d8b4fe 100%) !important; }
    .bg-gradient-teal { background: linear-gradient(135deg, #ccfbf1 0%, #99f6e4 100%) !important; }
    .bg-gradient-blue-dark { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important; }
    .bg-gradient-gray { background: linear-gradient(135deg, #64748b 0%, #475569 100%) !important; }
    .bg-gradient-purple-dark { background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%) !important; }
    .bg-gradient-teal-dark { background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%) !important; }
    .bg-gradient-green-dark { background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important; }
    .bg-gradient-red { background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%) !important; }
    .bg-gradient-green-light { background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%) !important; }
    .bg-gradient-blue-sky { background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%) !important; }
    .bg-gradient-red-dark { background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%) !important; }
    .bg-gradient-indigo { background: linear-gradient(135deg, #4f46e5 0%, #4338ca 100%) !important; }
    .bg-gradient-green-medium { background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important; }
    .bg-gradient-orange { background: linear-gradient(135deg, #f97316 0%, #ea580c 100%) !important; }
    .bg-gradient-violet { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%) !important; }
    .bg-gradient-lime { background: linear-gradient(135deg, #84cc16 0%, #65a30d 100%) !important; }
    .bg-gradient-sky { background: linear-gradient(135deg, #0284c7 0%, #0369a1 100%) !important; }
    
    /* Apply theme colors to Bootstrap elements */
    body { background-color: var(--bg); color: var(--fg); overflow: hidden; }
    .navbar { background-color: var(--fg) !important; border-bottom: none !important; box-shadow: var(--shadow-md) !important; }
    .navbar-brand { cursor: pointer; color: var(--bg) !important; font-weight: 600; letter-spacing: 0px; }
    .navbar-toggler-icon { 
      filter: invert(1);
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%2896, 165, 250, 0.9%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
    }
    
    .btn-outline-secondary { border-color: var(--border) !important; color: var(--fg) !important; }
    .btn-outline-secondary:hover { background-color: var(--accent-light) !important; border-color: var(--accent) !important; color: var(--accent) !important; }
    
    /* Sidebar - Modern Design */
    nav.sidebar { 
      background: linear-gradient(180deg, #f3f4f6 0%, #e5e7eb 100%); 
      border-right: 1px solid rgba(0, 0, 0, 0.05) !important;  
      overflow-y: auto; 
      box-shadow: 4px 0 16px rgba(0, 0, 0, 0.06);
      padding-top: 0;
    }
    
    .menu-header {  
      background: linear-gradient(135deg, rgba(0, 0, 0, 0.15), rgba(0, 0, 0, 0.1) 100%);
      font-weight: bold; 
      padding: 1.25rem 1.25rem; 
      letter-spacing: 0px; 
      font-size: 1.1rem;
      position: relative;
      overflow: hidden;
      border: none;
      border-bottom: 2px solid #a5aab3;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);
      color: #0c346c;
      text-shadow: none;
      margin: 0;
      text-transform: none;
    }
    .menu-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
      transition: left 0.6s ease;
    }
    .menu-header:hover::before {
      left: 100%;
    }
    .menu-header::after {
      content: 'üìã';
      position: absolute;
      right: 1.5rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.3rem;
      opacity: 0.9;
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
    }
    
    .toc { 
      list-style: none; 
      padding: 0rem 0; 
      margin: 0; 
      background: transparent;
    }
    .toc li { 
      margin: 0; 
    }
    
    /* Section grouping */
    .toc li[data-group="overview"] { margin-bottom: 0.75rem; }
    .toc li[data-group="solid"]:first-of-type { 
      margin-top: 1rem; 
      border-top: 2px solid rgba(59, 130, 246, 0.15);
      padding-top: 1rem;
    }
    .toc li[data-group="other-principles"]:first-of-type { 
      margin-top: 1rem; 
      border-top: 2px solid rgba(16, 185, 129, 0.15);
      padding-top: 1rem;
    }
    .toc li[data-group="resources"] { 
      margin-top: 1rem; 
      border-top: 2px solid rgba(100, 116, 139, 0.15);
      padding-top: 1rem;
    }
    
    .list-group-item { 
      background: transparent; 
      border-color: transparent; 
      padding: 0; 
      margin: 0.25rem 0.75rem; 
      border-radius: 0rem;
      transition: all 0.2s ease;
    }
    .list-group-item a { 
      color: #1f2937; 
      text-decoration: none; 
      display: flex; 
      flex-direction: column; 
      align-items: flex-start; 
      gap: 0.4rem; 
      border-left: 3px solid transparent; 
      padding: 0.85rem 1.25rem; 
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
      font-weight: 500; 
      border-radius: 0rem;
      font-size: 0.95rem;
      position: relative;
      overflow: hidden;
      background: linear-gradient(90deg, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0.1) 100%);
      border: 1px solid rgba(0, 0, 0, 0.06);
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }
    .list-group-item a::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 4px;
      background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%);
      transform: scaleY(0);
      transition: transform 0.3s ease;
      border-radius: 0 0px 0px 0;
    }
    .list-group-item a::after {
      content: '‚ñ∂';
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%) scale(0.7);
      font-size: 0.7rem;
      color: #9ca3af;
      opacity: 0;
      transition: all 0.3s ease;
    }
    .list-group-item a:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.08) 100%); 
      border-left-color: transparent;
      color: #1e40af;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2), 0 2px 4px rgba(0, 0, 0, 0.08);
      border-color: rgba(59, 130, 246, 0.2);
      text-decoration: none;
    }
    .list-group-item a:hover::before {
      transform: scaleY(1);
    }
    .list-group-item a:hover::after {
      opacity: 1;
      transform: translateY(-50%) scale(1);
      color: #3b82f6;
    }
    .list-group-item a.active { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.22) 0%, rgba(59, 130, 246, 0.12) 100%); 
      color: #1e40af; 
      font-weight: 600; 
      border-left-color: transparent;
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.3);
      border-color: rgba(59, 130, 246, 0.3);
    }
    .list-group-item a.active::before {
      transform: scaleY(1);
      background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%);
      width: 5px;
      box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
    }
    .list-group-item a.active::after {
      opacity: 1;
      color: #2563eb;
      transform: translateY(-50%) scale(1);
    }
    .list-group-item a.active:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.28) 0%, rgba(59, 130, 246, 0.16) 100%); 
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }
    
    /* Sub-items tree connectors */
    .list-group-sub-item a::before { 
      content: '‚îú‚îÄ';
      font-size: 0.85rem;
      margin-right: 0.5rem;
      color: #6b7280;
      z-index: 1;
      position: relative;
    }
    
    /* Sub-items styling - similar to main items but smaller and indented */
    .list-group-sub-item {
      background: transparent; 
      border-color: transparent; 
      padding: 0px; 
      margin: 0.2rem 0.75rem 0.2rem 1.5rem;
      border-radius: 0rem;
      transition: all 0.2s ease;
      position: relative;
      list-style-type: none;
    }
    .list-group-sub-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 4px;
      background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%);
      transform: scaleY(0);
      transition: transform 0.3s ease;
      border-radius: 0 0px 0px 0;
      z-index: 1;
    }
    .list-group-sub-item a {
      color: #1f2937; 
      text-decoration: none; 
      display: block;
      border-left: 3px solid transparent; 
      padding: 0.65rem 1rem 0.65rem 2.00rem;
      transition: all 0.2s ease; 
      font-weight: 500; 
      border-radius: 0rem;
      font-size: 0.8125rem;
      line-height: 1.4;
      position: relative;
      overflow: hidden;
      background: rgba(255, 255, 255, 0.5);
      border: 1px solid rgba(0, 0, 0, 0.04);
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
    }
    
    /* Sub-items hover and active states - same as main items */
    .list-group-sub-item a::after {
      content: '‚ñ∂';
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%) scale(0.7);
      font-size: 0.7rem;
      color: #9ca3af;
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .list-group-sub-item:hover::before {
      transform: scaleY(1);
    }
    .list-group-sub-item a:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.08) 100%); 
      border-left-color: transparent;
      color: #1e40af;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2), 0 2px 4px rgba(0, 0, 0, 0.08);
      border-color: rgba(59, 130, 246, 0.2);
      text-decoration: none;
    }
    .list-group-sub-item a:hover::after {
      opacity: 1;
      transform: translateY(-50%) scale(1);
      color: #3b82f6;
    }
    
    .list-group-sub-item.active::before {
      transform: scaleY(1);
      width: 5px;
      box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
    }
    .list-group-sub-item a.active { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.22) 0%, rgba(59, 130, 246, 0.12) 100%); 
      color: #1e40af; 
      font-weight: 600; 
      border-left-color: transparent;
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.3);
      border-color: rgba(59, 130, 246, 0.3);
    }
    .list-group-sub-item a.active::after {
      opacity: 1;
      color: #2563eb;
      transform: translateY(-50%) scale(1);
    }
    .list-group-sub-item a.active:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.28) 0%, rgba(59, 130, 246, 0.16) 100%); 
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }
    
    .list-group-item a::after {
      content: '‚ñ∂';
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%) scale(0.7);
      font-size: 0.7rem;
      color: #9ca3af;
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .list-group-item a:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.08) 100%); 
      border-left-color: transparent;
      color: #1e40af;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2), 0 2px 4px rgba(0, 0, 0, 0.08);
      border-color: rgba(59, 130, 246, 0.2);
      text-decoration: none;
    }
    .list-group-item a:hover::before {
      transform: scaleY(1);
    }
    .list-group-item a:hover::after {
      opacity: 1;
      transform: translateY(-50%) scale(1);
      color: #3b82f6;
    }
    .list-group-item a.active { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.22) 0%, rgba(59, 130, 246, 0.12) 100%); 
      color: #1e40af; 
      font-weight: 600; 
      border-left-color: transparent;
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.3);
      border-color: rgba(59, 130, 246, 0.3);
    }
    .list-group-item a.active::after {
      opacity: 1;
      color: #2563eb;
      transform: translateY(-50%) scale(1);
    }
    .list-group-item a.active:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.28) 0%, rgba(59, 130, 246, 0.16) 100%); 
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }
    
    /* Badge styling */
    .badge { font-size: 0.8rem; padding: 0.15rem 0.4rem; background: var(--accent-light); color: var(--accent); border: 1px solid var(--accent); font-weight: 600; border-radius: 0.25rem; font-style: normal; line-height: 1.2; opacity: 0.9; }
    .badge { background: var(--accent); color: white; border: none; font-size: 0.6rem; padding: 0.25rem 0.5rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; display: inline-block; margin-top: 0.5rem; margin-right: 0.35rem; }
    .list-group-item a:hover .badge { opacity: 1; background: var(--accent); color: white; }
    .list-group-item a.active .badge { background: rgba(255, 255, 255, 0.3); color: white; border-color: rgba(255, 255, 255, 0.6); font-weight: 600; opacity: 1; }
        
    /* Content */
    .content { width: 100%; max-width: 100%; margin: 0 auto; background: #ffffff; padding: 2rem; border-radius: 0.75rem; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); }
    section { display: none !important; margin-bottom: 2rem; }
    section.active { display: block !important; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    
    h1 { font-size: 2rem; font-weight: 700; margin: 1rem 0 0.25rem 0; letter-spacing: -0.5px; color: var(--fg); display: block; border: none; }
    h2 { font-size: 1.5rem; font-weight: 600; margin: 1.5rem 0 0.75rem 0; color: var(--fg); border-bottom: 2px solid var(--accent-light); padding-bottom: 0.5rem; }
    h3 { font-size: 1.1rem; color: var(--accent); font-weight: 600; margin: 1rem 0 0.5rem 0; }
    h4 { font-size: 0.8rem; color: var(--fg); font-weight: 600; margin: 0.75rem 0 0.4rem 0; }
    p { margin: 1rem 0; line-height: 1.65; color: var(--fg); }
    ul, ol { margin: 1rem 0; padding-left: 2rem; }
    li { margin: 0.5rem 0; color: var(--fg); }
    
    code { background: var(--code-bg); border: 1px solid var(--border); padding: 0.2rem 0.5rem; font-family: ui-monospace, 'Cascadia Code', 'Source Code Pro', monospace; font-size: 0.9em; color: var(--accent); border-radius: 0.5rem; }
    pre { background: var(--code-bg); border: 0px solid var(--border); padding: 1rem; border-radius: 0.5rem; overflow: auto; box-shadow: var(--shadow-sm); margin: 1rem 0; }
    pre code { padding: 0; background: transparent; border: none; color: var(--fg); }
    
    .callout { border-left: 5px solid var(--accent); background: var(--accent-light); padding: 1rem 1.2rem; margin: 1.5rem 0; border-radius: 0.5rem; box-shadow: var(--shadow-sm); font-weight: 500; color: var(--fg); }
    
    /* Table styling */
    .table { color: var(--fg); }
    .table thead th { background: var(--accent-light); color: var(--accent); border-color: var(--border); font-weight: 600; }
    .table tbody td { border-color: var(--border); }
    .table-striped tbody tr:nth-of-type(odd) { background-color: rgba(0,0,0,0.02); }
    .table-striped tbody tr:hover { background-color: var(--accent-light); }
    
    /* Controls/Pagination */
    .controls { opacity: 0.5; position: fixed; bottom: 0.25rem; right: 1rem; width: auto; z-index: 1000; background: transparent; display: flex; align-items: center; justify-content: center; gap: 0rem; padding: 0; min-height: 40px; }
    @media (max-width: 991px) {
      .controls { bottom: 0.25rem; right: 1rem; }
      .menu-header { color: var(--focus); }
    }
    .controls:hover { opacity: 1; }
    
    .page-indicator { color: var(--accent); font-weight: 600; font-size: 0.875rem; }
    .btn-group .btn { margin: 0px 2px; padding: 0.2rem 0.5rem; background: var(--accent); color: white; border-color: var(--accent); font-size: 1rem; font-weight: bold; }
    .btn-group .btn:hover { background: var(--accent); }
    .btn-group .btn + .btn { margin-left: -1px; }
    
    /* Mobile/Offcanvas */
    .offcanvas { background: var(--bg) !important; }
    .offcanvas-header { border-bottom: 1px solid var(--border); }
    .offcanvas-title { color: var(--fg); font-weight: 600; }
    .btn-close { color: var(--fg); }
    
    /* Scrollbar */
    nav.sidebar::-webkit-scrollbar { width: 6px; }
    nav.sidebar::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.05); }
    nav.sidebar::-webkit-scrollbar-thumb { background: rgba(0, 0, 0, 0.2); border-radius: 0px; }
    nav.sidebar::-webkit-scrollbar-thumb:hover { background: rgba(0, 0, 0, 0.3); }
    
    /* Mermaid Diagrams */
    .mermaid {
      background: #ffffff;
      border: 1px solid #e2e8f0;
      border-radius: 0.5rem;
      padding: 2rem;
      margin: 1.5rem 0;
      min-height: 400px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: visible;
      position: relative;
    }
    .mermaid.rendered {
      min-height: 0;
    }
    .mermaid svg {
      max-width: 100%;
      height: auto;
      min-height: 300px;
      transition: transform 0.3s ease;
      transform-origin: center center;
    }
    .mermaid.zoomed {
      overflow: auto;
      cursor: grab;
    }
    .mermaid.zoomed:active {
      cursor: grabbing;
    }
    .mermaid svg text {
      font-size: 14px !important;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif !important;
    }
    
    /* Mermaid title styling */
    .mermaid svg text, .diagram-modal-content svg text {
      font-size: 1rem !important;
      font-weight: bold !important;
      fill: var(--fg) !important;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif !important;
    }

    .mermaid svg *
    {
        color: #333;
    }

    .mermaid[data-processed="true"] {
      min-height: 0;
    }
    
    .mermaid svg {
      max-width: 100%;
      height: auto;
      display: inline-block;
    }
    
    /* Zoom controls */
    .zoom-controls {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 10;
      opacity: 0.5;
      transition: opacity 0.3s ease;
    }
    .mermaid:hover .zoom-controls {
      opacity: 1;
    }
    .zoom-btn {
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 0.25rem;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      transition: all 0.2s ease;
    }
    .zoom-btn:hover {
      background: #2563eb;
      transform: scale(1.1);
    }

    /* Modal for diagram zoom */
    .diagram-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.95);
      z-index: 9999;
      align-items: center;
      justify-content: center;
      padding: 0;
    }
    .diagram-modal.active {
      display: flex;
    }
    .diagram-modal-content {
      position: relative;
      width: 100%;
      height: 100%;
      background: white;
      border-radius: 0;
      padding: 3rem 3rem 3rem 3rem;
      overflow: auto;
      display: flex;
      align-items: flex-start;
      justify-content: center;
    }
    .diagram-modal-content svg {
      max-width: 100%;
      height: auto;
    }
    .modal-close {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      background: #ef4444;
      color: white;
      border: none;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      transition: all 0.2s ease;
      z-index: 10000;
    }
    .modal-close:hover {
      background: #dc2626;
      transform: scale(1.1);
    }
    .modal-zoom-controls {
      position: fixed;
      bottom: 1.5rem;
      right: 1.5rem;
      display: flex;
      gap: 0.5rem;
      z-index: 10000;
      padding: 0rem;
      border-radius: 0.4rem;
    }
    .modal-zoom-btn {
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 0.25rem;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      transition: all 0.2s ease;
    }
    .modal-zoom-btn:hover {
      background: #2563eb;
      transform: scale(1.1);
    }
    
    /* Utilities */
    .search { height: 0; overflow: hidden; padding: 0 !important; }
    .search input { display: none; }
    .min-vh-100 { min-height: 100vh; }
    .skip-link { position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden; }
    .skip-link:focus { position: static; width: auto; height: auto; padding: 0.4rem 0.6rem; background: var(--accent); color: white; border-radius: 0.4rem; }
    
    /* Override Bootstrap defaults for theme */
    a { color: var(--accent); }
    a:hover { color: var(--accent); text-decoration: underline; }
    
    /* Responsive - keep sidebar visible on desktop, offcanvas on mobile */
    @media (max-width: 991px) {
      nav.sidebar { display: none; }
      #main { width: 100%; }
      .row { --bs-gutter-x: 0; }
    }
    
    /* Layout - prevent unnecessary scrolling */
    html, body { height: 100%; margin: 0; }
    #appContainer { display: flex; flex-direction: column; height: calc(100vh - 50px); }
    #mainRow { flex: 1; overflow: hidden; display: flex; }
    nav.sidebar { overflow-y: auto; max-height: 100%; position: relative; padding-bottom: 0px; }
    #main { overflow: hidden; display: flex; flex-direction: column; height: 100%; -webkit-tap-highlight-color: transparent; outline: none; border: none; }
    #main:focus { outline: none; }
    .content { overflow-y: auto; flex: 1; width: 100%; min-height: 0; padding: 0rem 1.5rem 0rem 1.5rem; }
    
    /* Contact Info */
    .contact-info {
      font-weight: 400 !important;
      padding: 0.5rem 0.75rem;
      font-size: 0.75rem;
      color: var(--accent-light);
      margin: 0;
      opacity: 0.5;
      white-space: nowrap;
      cursor: pointer;
    }
    .contact-info:hover {
      opacity: 0.9;
      text-decoration: none;
    }
    @media (max-width: 991px) {
      .navbar-brand {
        font-size: 1rem !important;
        flex: 1;
      }
      .contact-info {
        font-size: 0.7rem;
        padding: 0.25rem 0.5rem;
      }
    }
    @media (max-width: 576px) {
      .navbar-brand {
        font-size: 0.9rem !important;
      }
      .contact-info {
        font-size: 0.65rem;
        padding: 0.2rem 0.4rem;
      }
    }

    .list-style-none {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    /* JSON Syntax Highlighting */
    pre code.language-json {
      display: block;
      white-space: pre;
      font-family: 'Cascadia Code', 'Consolas', 'Monaco', 'Courier New', monospace;
    }

    pre code.language-json .json-key {
      color: #0451a5;
      font-weight: 500;
    }

    pre code.language-json .json-string {
      color: #a31515;
    }

    pre code.language-json .json-number {
      color: #098658;
    }

    pre code.language-json .json-boolean {
      color: #0000ff;
      font-weight: 600;
    }

    pre code.language-json .json-null {
      color: #0000ff;
      font-weight: 600;
    }

    pre code.language-json .json-punctuation {
      color: #333;
    }

    /* SQL Syntax Highlighting */
    pre code.language-sql {
      display: block;
      white-space: pre;
      font-family: 'Cascadia Code', 'Consolas', 'Monaco', 'Courier New', monospace;
    }

    pre code.language-sql .sql-keyword {
      color: #0000ff;
      font-weight: 600;
      text-transform: uppercase;
    }

    pre code.language-sql .sql-string {
      color: #a31515;
    }

    pre code.language-sql .sql-number {
      color: #098658;
    }

    pre code.language-sql .sql-comment {
      color: #008000;
      font-style: italic;
    }

    pre code.language-sql .sql-function {
      color: #795e26;
      font-weight: 500;
    }

    pre code.language-sql .sql-operator {
      color: #666;
      font-weight: 500;
    }

    /* Language Label for Code Blocks */
    pre[data-language]::before {
      content: attr(data-language);
      position: absolute;
      top: 8px;
      right: 12px;
      font-size: 0.75em;
      color: #6a737d;
      text-transform: uppercase;
      font-weight: 600;
      letter-spacing: 0.5px;
      background: var(--bg);
      padding: 0.2rem 0.5rem;
      border-radius: 0.25rem;
      border: 1px solid var(--border);
    }

    /* Enhanced pre/code styling for syntax highlighted blocks */
    pre.syntax-highlighted {
      position: relative;
      background: var(--code-bg);
      border: 1px solid var(--border);
      padding: 1.5rem 1rem 1rem 1rem;
      border-radius: 0.5rem;
      overflow-x: auto;
      box-shadow: var(--shadow-sm);
      margin: 1rem 0;
    }

    pre.syntax-highlighted code {
      background: transparent;
      padding: 0;
      border: none;
      color: var(--fg);
      font-size: 0.875rem;
      line-height: 1.6;
    }

    ul
    {
        list-style-type: none;
    }
  /* Document Footer */
    .document-footer {
      text-align: center;
      padding: 20px;
      background-color: #f8f9fa;
      border-radius: 8px;
      margin-top: 20px;
    }
    .document-footer p {
      margin: 0;
      font-size: 14px;
      color: #6c757d;
      line-height: 1.6;
    }
    .document-footer strong {
      color: #495057;
    }  
  </style>
  <!-- Mermaid.js for diagrams -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
  <script>
    // Initialize Mermaid with proper configuration
    document.addEventListener('DOMContentLoaded', function() {

      mermaid.initialize({
        startOnLoad: false,
        theme: 'base',
        securityLevel: 'loose',
        logLevel: 'error',
        flowchart: {
          useMaxWidth: true,
          htmlLabels: true,
          curve: 'basis',
        },
        sequence: {
          useMaxWidth: false,
          htmlLabels: true,
          diagramMarginX: 50,
          diagramMarginY: 10
        }
      });
      
      // Render all diagrams
      renderMermaidDiagrams();
    });
    
    async function renderMermaidDiagrams() {
      const diagrams = document.querySelectorAll('.mermaid');
      
      for (let i = 0; i < diagrams.length; i++) {
        const diagram = diagrams[i];
        const code = diagram.textContent.trim();
        
        // Store original code
        if (!diagram.hasAttribute('data-original-code')) {
          diagram.setAttribute('data-original-code', code);
        }
        
        try {
          const { svg } = await mermaid.render('mermaid-diagram-' + i, code);
          diagram.innerHTML = svg;
          diagram.setAttribute('data-processed', 'true');
          
          // Add zoom controls
          addZoomControls(diagram);
        } catch (error) {
          console.error('Mermaid rendering error for diagram ' + i + ':', error);
          diagram.innerHTML = '<div style="color: red; padding: 1rem; border: 2px solid red; border-radius: 0.5rem;">Error rendering diagram: ' + error.message + '</div>';
        }
      }
    }
    
    // Add zoom controls to mermaid diagrams
    function addZoomControls(diagram) {
      const controls = document.createElement('div');
      controls.className = 'zoom-controls';
      controls.innerHTML = `
        <button class="zoom-btn" data-action="expand" title="Expand View">‚õ∂</button>
      `;
      
      diagram.style.position = 'relative';
      diagram.insertBefore(controls, diagram.firstChild);
      
      // Expand to modal
      controls.addEventListener('click', (e) => {
        const btn = e.target.closest('.zoom-btn');
        if (!btn) return;
        
        openDiagramModal(diagram);
      });
    }

    // Open diagram in modal
    function openDiagramModal(diagram) {
      // Create modal if it doesn't exist
      let modal = document.getElementById('diagram-modal');
      if (!modal) {
        modal = document.createElement('div');
        modal.id = 'diagram-modal';
        modal.className = 'diagram-modal';
        modal.innerHTML = `
          <button class="modal-close" id="modal-close">√ó</button>
          <div class="diagram-modal-content" id="modal-diagram-content"></div>
          <div class="modal-zoom-controls">
            <button class="modal-zoom-btn" data-action="zoom-in" title="Zoom In">+</button>
            <button class="modal-zoom-btn" data-action="zoom-out" title="Zoom Out">‚àí</button>
            <button class="modal-zoom-btn" data-action="reset" title="Reset Zoom">‚ü≤</button>
          </div>
        `;
        document.body.appendChild(modal);
        
        // Close modal handlers
        modal.querySelector('#modal-close').addEventListener('click', closeDiagramModal);
        modal.addEventListener('click', (e) => {
          if (e.target === modal) closeDiagramModal();
        });
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeDiagramModal();
          }
        });
        
        // Zoom controls in modal
        let scale = 1;
        let translateX = 0;
        let translateY = 0;
        
        modal.querySelector('.modal-zoom-controls').addEventListener('click', (e) => {
          const btn = e.target.closest('.modal-zoom-btn');
          if (!btn) return;
          
          const action = btn.dataset.action;
          const svg = modal.querySelector('svg');
          if (!svg) return;
          
          if (action === 'zoom-in') {
            scale = Math.min(scale + 0.1, 5);
          } else if (action === 'zoom-out') {
            scale = Math.max(scale - 0.1, 0.5);
          } else if (action === 'reset') {
            scale = 1;
            translateX = 0;
            translateY = 0;
          }
          
          svg.style.transform = `scale(${scale}) translate(${translateX / scale}px, ${translateY / scale}px)`;
        });
      }
      
      // Clone diagram content
      const svg = diagram.querySelector('svg');
      if (svg) {
        const content = modal.querySelector('#modal-diagram-content');
        content.innerHTML = '';
        const clonedSvg = svg.cloneNode(true);
        clonedSvg.style.transform = 'scale(1)';
        clonedSvg.style.maxWidth = '100%';
        clonedSvg.style.height = 'auto';
        content.appendChild(clonedSvg);
      }
      
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeDiagramModal() {
      const modal = document.getElementById('diagram-modal');
      if (modal) {
        modal.classList.remove('active');
        document.body.style.overflow = '';
      }
    }
    
    // Re-render on theme change
    window.rerenderMermaid = async function() {
      const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
      
      mermaid.initialize({
        startOnLoad: false,
        theme: isDark ? 'base' : 'base',
        securityLevel: 'loose',
        flowchart: {
          useMaxWidth: true,
          htmlLabels: true,
          curve: 'basis',
        },
        sequence: {
          useMaxWidth: false,
          htmlLabels: true,
          diagramMarginX: 50,
          diagramMarginY: 10
        }
      });
      
      const diagrams = document.querySelectorAll('.mermaid[data-processed="true"]');
      for (let i = 0; i < diagrams.length; i++) {
        const diagram = diagrams[i];
        const code = diagram.getAttribute('data-original-code');
        
        if (code) {
          try {
            const { svg } = await mermaid.render('mermaid-diagram-rerender-' + i + '-' + Date.now(), code);
            diagram.innerHTML = svg;
          } catch (error) {
            console.error('Mermaid re-rendering error:', error);
          }
        }
      }
    };
  </script>
</head>
<body>
  <nav class="navbar navbar-expand-lg sticky-top" aria-label="Top bar">
    <div class="container-fluid d-flex align-items-center">
      <button class="navbar-toggler me-2" id="toggleSidebar" type="button" aria-label="Toggle sidebar">
        <span class="navbar-toggler-icon"></span>
      </button>
<span class="navbar-brand mb-0 h1 me-auto">Azure Entra - In a Nutshell</span>
<span class="contact-info mb-0">ü§ù Curated by Murthy Vepa</span>
    </div>      
  </nav>

  <div id="appContainer">
    <div class="row g-0" id="mainRow">
      <nav class="col-lg-3 border-end sidebar" id="sidebar" aria-label="Table of contents">
        <div class="menu-header py-2">Contents</div>
        <ul class="list-group list-group-flush toc" id="toc"></ul>
      </nav>

      <main id="main" class="col-lg-9 d-flex flex-column" tabindex="-1">
        <div class="content" id="content">
        <!-- Overview Section -->
        <section id="overview" role="article">
          <h1>What is Azure Entra?</h1>
          <span class="badge">intro</span>
          <span class="badge">overview</span>
          <span class="badge">basics</span>
          <span class="badge">identity</span>
          
          <p>Microsoft Entra (formerly Azure Active Directory) is a <strong>cloud-based identity and access management (IAM) solution</strong> that helps organizations secure access to resources across cloud and on-premises environments. It serves as the foundation for identity security in Microsoft's cloud services and beyond.</p>
          
          <div class="callout">
            <strong>üéØ Core Purpose</strong><br />
            Microsoft Entra provides a unified identity platform that enables secure access to applications and resources while protecting organizations from identity-based threats. It supports modern authentication protocols and Zero Trust security principles.
          </div>

          <h2>What is Microsoft Entra?</h2>
          <p>Microsoft Entra is a family of identity and access products that includes:</p>
          <ul>
            <li><strong>Microsoft Entra ID</strong> (formerly Azure AD) - Core cloud identity service</li>
            <li><strong>Microsoft Entra ID Protection</strong> - Risk-based conditional access</li>
            <li><strong>Microsoft Entra ID Governance</strong> - Identity lifecycle and access governance</li>
            <li><strong>Microsoft Entra External ID</strong> - B2B and B2C identity solutions</li>
            <li><strong>Microsoft Entra Verified ID</strong> - Decentralized identity verification</li>
            <li><strong>Microsoft Entra Permissions Management</strong> - Cloud infrastructure entitlement management</li>
          </ul>

          <h2>Why Azure Entra ID?</h2>
          
          <h3>üîê Single Sign-On (SSO)</h3>
          <p>Users sign in once with a single identity to access multiple applications‚Äîboth cloud SaaS apps and on-premises applications. This improves user experience and reduces password fatigue.</p>

          <h3>üõ°Ô∏è Enhanced Security</h3>
          <p>Protect your organization with multi-factor authentication (MFA), conditional access policies, identity protection, and advanced threat detection powered by machine learning.</p>

          <h3>‚òÅÔ∏è Cloud & Hybrid Ready</h3>
          <p>Seamlessly integrate with thousands of SaaS applications, Microsoft 365, and on-premises Active Directory through Azure AD Connect. Support hybrid identity scenarios with ease.</p>

          <h3>üë• Developer-Friendly</h3>
          <p>Support for modern authentication protocols (OAuth 2.0, OpenID Connect, SAML) and comprehensive SDKs (MSAL) make it easy to integrate identity into custom applications.</p>

          <h3>‚öñÔ∏è Identity Governance</h3>
          <p>Automate identity lifecycle management, access reviews, entitlement management, and privileged access management to ensure compliance and reduce risk.</p>

          <h2>Common Use Cases</h2>
          
          <h3>üè¢ Enterprise Identity Management</h3>
          <ul>
            <li>Centralized identity management for all users</li>
            <li>SSO across cloud and on-premises apps</li>
            <li>Self-service password reset and account management</li>
            <li>Group-based access management</li>
          </ul>

          <h3>üîí Zero Trust Security</h3>
          <ul>
            <li>Verify explicitly with MFA and risk-based authentication</li>
            <li>Use least privilege access with conditional access policies</li>
            <li>Assume breach with continuous monitoring and identity protection</li>
            <li>Real-time risk detection and automated remediation</li>
          </ul>

          <h3>üåê B2B Collaboration</h3>
          <ul>
            <li>Secure collaboration with external partners and vendors</li>
            <li>Guest user access with conditional policies</li>
            <li>Cross-organization identity federation</li>
            <li>Maintain control while enabling collaboration</li>
          </ul>

          <h3>üë®‚Äçüíª Application Development</h3>
          <ul>
            <li>Add authentication to custom applications</li>
            <li>Secure APIs with OAuth 2.0 access tokens</li>
            <li>Implement role-based access control (RBAC)</li>
            <li>Support for web apps, mobile apps, and APIs</li>
          </ul>

          <h3>üõ†Ô∏è DevOps & Service Accounts</h3>
          <ul>
            <li>Managed identities for Azure resources (no credentials in code)</li>
            <li>Service principals for application automation</li>
            <li>Workload identities for GitHub Actions, Kubernetes pods</li>
            <li>Certificate-based authentication for services</li>
          </ul>

          <h2>Key Benefits</h2>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Benefit</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>üîê Enhanced Security</strong></td>
                <td>MFA, conditional access, identity protection, and risk-based policies protect against 99.9% of identity attacks</td>
              </tr>
              <tr>
                <td><strong>‚ö° Improved Productivity</strong></td>
                <td>SSO, self-service capabilities, and seamless access reduce friction and help desk tickets by up to 30%</td>
              </tr>
              <tr>
                <td><strong>üí∞ Cost Reduction</strong></td>
                <td>Cloud-based solution eliminates infrastructure costs; automated provisioning reduces manual overhead</td>
              </tr>
              <tr>
                <td><strong>üìä Compliance</strong></td>
                <td>Built-in governance, access reviews, and audit logs help meet regulatory requirements (SOC, ISO, GDPR)</td>
              </tr>
              <tr>
                <td><strong>üåç Global Scale</strong></td>
                <td>Microsoft's global infrastructure ensures 99.99% SLA with automatic failover and disaster recovery</td>
              </tr>
              <tr>
                <td><strong>üîó Integration</strong></td>
                <td>Pre-integrated with 7,000+ SaaS apps, Microsoft 365, Azure services, and custom applications</td>
              </tr>
            </tbody>
          </table>

          <h2>Evolution: Azure AD ‚Üí Microsoft Entra</h2>
          <p>In 2023, Microsoft rebranded Azure Active Directory to <strong>Microsoft Entra ID</strong> as part of the broader Microsoft Entra family. This change:</p>
          <ul>
            <li>‚úÖ Does <strong>not</strong> change functionality or features</li>
            <li>‚úÖ Does <strong>not</strong> require code changes or reconfiguration</li>
            <li>‚úÖ Reflects the expanded product family beyond traditional directories</li>
            <li>‚úÖ Emphasizes modern identity and Zero Trust security</li>
            <li>‚ö†Ô∏è Terms "Azure AD" and "Entra ID" are used interchangeably during transition</li>
          </ul>

          <div class="callout">
            <strong>üí° Did You Know?</strong><br />
            Microsoft Entra ID processes over <strong>425 billion authentication requests per month</strong> and protects more than <strong>1.2 billion users</strong> worldwide. It blocks over 300 million fraudulent sign-in attempts daily using advanced AI and machine learning.
          </div>
        </section>

        <!-- Key Concepts Section -->
        <section id="key-concepts" role="article">
          <h1>Key Concepts</h1>
          <span class="badge">concepts</span>
          <span class="badge">fundamentals</span>
          <span class="badge">terminology</span>
          <span class="badge">tokens</span>
          <span class="badge">claims</span>
          
          <p>Understanding core Azure Entra ID concepts is essential for effectively implementing identity and access management solutions.</p>

          <h2>üè¢ Tenant & Directory</h2>

          <h3>What is a Tenant?</h3>
          <ul>
            <li><strong>Definition:</strong> A dedicated instance of Azure Entra ID (Azure Active Directory)</li>
            <li><strong>Created When:</strong> Organization signs up for Microsoft cloud service (Azure, Microsoft 365, Dynamics 365)</li>
            <li><strong>Unique Identity:</strong> Each tenant has a unique domain (e.g., contoso.onmicrosoft.com)</li>
            <li><strong>Isolation:</strong> Tenants are logically isolated from each other</li>
            <li><strong>Trust Boundary:</strong> Security and compliance policies are enforced at tenant level</li>
          </ul>

          <h3>Tenant vs Subscription</h3>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Aspect</th>
                <th>Tenant (Azure AD)</th>
                <th>Subscription (Azure)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Purpose</strong></td>
                <td>Identity and access management</td>
                <td>Billing and resource management</td>
              </tr>
              <tr>
                <td><strong>Contains</strong></td>
                <td>Users, groups, apps, policies</td>
                <td>Resource groups, VMs, databases, etc.</td>
              </tr>
              <tr>
                <td><strong>Relationship</strong></td>
                <td>1 tenant can have multiple subscriptions</td>
                <td>1 subscription belongs to 1 tenant</td>
              </tr>
              <tr>
                <td><strong>Trust</strong></td>
                <td>Subscriptions trust a tenant for authentication</td>
                <td>Uses tenant's identities for RBAC</td>
              </tr>
            </tbody>
          </table>

          <h2>üîê Authentication vs Authorization</h2>

          <div class="callout">
            <strong>üìå Simple Definition</strong><br />
            <strong>Authentication:</strong> "Who are you?" - Proving your identity<br />
            <strong>Authorization:</strong> "What can you do?" - Determining your permissions
          </div>

          <h3>Authentication</h3>
          <ul>
            <li><strong>Process:</strong> Verifying the identity of a user or application</li>
            <li><strong>Methods:</strong> Password, MFA, biometrics, certificate, FIDO2 key</li>
            <li><strong>Result:</strong> Authenticated identity (user or service principal)</li>
            <li><strong>Token Issued:</strong> ID token (contains user identity claims)</li>
            <li><strong>Example:</strong> Signing in with username/password + MFA code</li>
          </ul>

          <h3>Authorization</h3>
          <ul>
            <li><strong>Process:</strong> Determining what resources a user can access</li>
            <li><strong>Mechanisms:</strong> RBAC, permissions, claims, policies</li>
            <li><strong>Result:</strong> Allow or deny access to resources</li>
            <li><strong>Token Issued:</strong> Access token (contains permissions/scopes)</li>
            <li><strong>Example:</strong> User can read files but cannot delete them</li>
          </ul>

          <h2>üé´ Tokens Explained</h2>

          <h3>ID Token</h3>
          <pre data-language="json" class="syntax-highlighted"><code>{
  "aud": "your-client-id",
  "iss": "https://login.microsoftonline.com/{tenant-id}/v2.0",
  "iat": 1701360000,
  "exp": 1701363600,
  "name": "John Doe",
  "preferred_username": "john.doe@contoso.com",
  "oid": "00000000-0000-0000-0000-000000000000",
  "sub": "unique-subject-identifier",
  "tid": "tenant-id"
}
</code></pre>
          <ul>
            <li><strong>Purpose:</strong> Proves the user's identity</li>
            <li><strong>Format:</strong> JWT (JSON Web Token)</li>
            <li><strong>Contains:</strong> User claims (name, email, roles, etc.)</li>
            <li><strong>Used By:</strong> Application to know who signed in</li>
            <li><strong>Lifetime:</strong> Typically 1 hour</li>
            <li><strong>Validation:</strong> Verify signature, issuer, audience, expiration</li>
          </ul>

          <h3>Access Token</h3>
          <pre data-language="json" class="syntax-highlighted"><code>{
  "aud": "https://graph.microsoft.com",
  "iss": "https://sts.windows.net/{tenant-id}/",
  "iat": 1701360000,
  "exp": 1701363600,
  "scp": "User.Read Mail.Read",
  "roles": ["Admin"],
  "appid": "your-client-id",
  "oid": "user-object-id"
}
</code></pre>
          <ul>
            <li><strong>Purpose:</strong> Grants access to specific resources</li>
            <li><strong>Format:</strong> JWT (opaque to client, validated by resource)</li>
            <li><strong>Contains:</strong> Scopes/permissions granted</li>
            <li><strong>Used By:</strong> Passed to APIs (Microsoft Graph, custom APIs)</li>
            <li><strong>Lifetime:</strong> Typically 1 hour (configurable)</li>
            <li><strong>Audience:</strong> Specific to the resource being accessed</li>
          </ul>

          <h3>Refresh Token</h3>
          <ul>
            <li><strong>Purpose:</strong> Obtain new access tokens without re-authentication</li>
            <li><strong>Format:</strong> Opaque string (not JWT)</li>
            <li><strong>Lifetime:</strong> Up to 90 days (or until revoked)</li>
            <li><strong>Storage:</strong> Must be stored securely (never in browser localStorage)</li>
            <li><strong>Usage:</strong> Sent to token endpoint to get fresh access/ID tokens</li>
            <li><strong>Revocation:</strong> Can be revoked by admin or when password changes</li>
            <li><strong>Single Use:</strong> Each refresh returns new refresh token (token rotation)</li>
          </ul>

          <h3>Token Lifecycle</h3>
          <div class="mermaid">
sequenceDiagram
    participant User
    participant App
    participant EntraID as Azure Entra ID
    participant API as Microsoft Graph

    User->>App: 1. Sign in
    App->>EntraID: 2. Authorization request
    EntraID->>User: 3. Authenticate (MFA)
    User->>EntraID: 4. Consent to permissions
    EntraID->>App: 5. Return tokens:<br/>- ID token<br/>- Access token<br/>- Refresh token
    
    App->>API: 6. Call API with access token
    API->>App: 7. Return data
    
    Note over App: Access token expires after 1 hour
    
    App->>EntraID: 8. Send refresh token
    EntraID->>App: 9. Return new tokens
    App->>API: 10. Call API with new access token
          </div>

          <h2>üé≠ Claims & Scopes</h2>

          <h3>Claims</h3>
          <ul>
            <li><strong>Definition:</strong> Key-value pairs about a user or app in a token</li>
            <li><strong>Standard Claims:</strong> name, email, roles, groups, oid (object ID)</li>
            <li><strong>Custom Claims:</strong> Application-specific attributes (employee ID, department)</li>
            <li><strong>Optional Claims:</strong> Additional info not included by default</li>
            <li><strong>Use Case:</strong> Authorization decisions, personalization, audit logging</li>
          </ul>

          <h4>Common ID Token Claims</h4>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Claim</th>
                <th>Description</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>name</code></td>
                <td>Display name of user</td>
                <td>"John Doe"</td>
              </tr>
              <tr>
                <td><code>preferred_username</code></td>
                <td>User's email/UPN</td>
                <td>"john.doe@contoso.com"</td>
              </tr>
              <tr>
                <td><code>oid</code></td>
                <td>Object ID (unique identifier)</td>
                <td>"00000000-0000-0000-0000-000000000000"</td>
              </tr>
              <tr>
                <td><code>tid</code></td>
                <td>Tenant ID</td>
                <td>"tenant-guid"</td>
              </tr>
              <tr>
                <td><code>roles</code></td>
                <td>App roles assigned to user</td>
                <td>["Admin", "User"]</td>
              </tr>
              <tr>
                <td><code>groups</code></td>
                <td>Group memberships</td>
                <td>["group-id-1", "group-id-2"]</td>
              </tr>
            </tbody>
          </table>

          <h3>Scopes (Permissions)</h3>
          <ul>
            <li><strong>Definition:</strong> What actions an app can perform on behalf of a user</li>
            <li><strong>Format:</strong> Resource.Action (e.g., User.Read, Mail.Send)</li>
            <li><strong>Delegated:</strong> App acts on behalf of signed-in user</li>
            <li><strong>Application:</strong> App acts with its own identity (no user)</li>
            <li><strong>Consent:</strong> User or admin must grant permission</li>
          </ul>

          <h4>Scope Examples</h4>
          <pre data-language="text" class="syntax-highlighted"><code>Microsoft Graph Scopes:
  User.Read              ‚Üí Read user's profile
  User.ReadWrite         ‚Üí Read and update user's profile
  Mail.Read              ‚Üí Read user's email
  Mail.Send              ‚Üí Send email as user
  Files.ReadWrite.All    ‚Üí Read/write all files user can access
  Directory.Read.All     ‚Üí Read directory data (admin consent)

Custom API Scopes:
  api://your-api-id/access_as_user
  api://your-api-id/Read
  api://your-api-id/Write
</code></pre>

          <h2>üë• Identity Types</h2>

          <h3>User Identity</h3>
          <ul>
            <li><strong>Member Users:</strong> Employees in your organization (native to tenant)</li>
            <li><strong>Guest Users:</strong> External collaborators (B2B, from other tenants)</li>
            <li><strong>Consumer Users:</strong> Customers in B2C tenant</li>
            <li><strong>Cloud-Only:</strong> Created directly in Azure AD</li>
            <li><strong>Synced:</strong> Synchronized from on-premises AD</li>
          </ul>

          <h3>Service Principal</h3>
          <ul>
            <li><strong>Definition:</strong> Identity for an application or service</li>
            <li><strong>Local Representation:</strong> Instance of app registration in a specific tenant</li>
            <li><strong>Purpose:</strong> Apps use this identity to access resources</li>
            <li><strong>Credentials:</strong> Client secret or certificate</li>
            <li><strong>Permissions:</strong> Granted via app roles or API permissions</li>
          </ul>

          <h3>Managed Identity</h3>
          <ul>
            <li><strong>Definition:</strong> Special type of service principal managed by Azure</li>
            <li><strong>No Credentials:</strong> Azure manages authentication automatically</li>
            <li><strong>System-Assigned:</strong> Tied to Azure resource lifecycle</li>
            <li><strong>User-Assigned:</strong> Standalone, can be shared across resources</li>
            <li><strong>Best Practice:</strong> Use instead of storing secrets in code</li>
          </ul>

          <h2>üé≠ Roles & Permissions</h2>

          <h3>Azure AD Roles vs Azure RBAC Roles</h3>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Aspect</th>
                <th>Azure AD Roles</th>
                <th>Azure RBAC Roles</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Scope</strong></td>
                <td>Azure AD tenant (identity plane)</td>
                <td>Azure resources (data/control plane)</td>
              </tr>
              <tr>
                <td><strong>Manages</strong></td>
                <td>Users, groups, apps, licenses</td>
                <td>VMs, storage, databases, networks</td>
              </tr>
              <tr>
                <td><strong>Examples</strong></td>
                <td>Global Admin, User Admin, Security Admin</td>
                <td>Owner, Contributor, Reader</td>
              </tr>
              <tr>
                <td><strong>Assignment</strong></td>
                <td>At tenant or administrative unit level</td>
                <td>At subscription, resource group, or resource level</td>
              </tr>
              <tr>
                <td><strong>Portal</strong></td>
                <td>Azure AD / Entra admin center</td>
                <td>Azure portal IAM blade</td>
              </tr>
            </tbody>
          </table>

          <h3>Common Azure AD Roles</h3>
          <ul>
            <li><strong>Global Administrator:</strong> Full access to all Azure AD features (most powerful)</li>
            <li><strong>User Administrator:</strong> Create/manage users and groups</li>
            <li><strong>Security Administrator:</strong> Manage security features (Conditional Access, Identity Protection)</li>
            <li><strong>Application Administrator:</strong> Manage app registrations and enterprise apps</li>
            <li><strong>Groups Administrator:</strong> Create and manage groups</li>
            <li><strong>Helpdesk Administrator:</strong> Reset passwords for non-admin users</li>
          </ul>

          <h2>üîó Single Sign-On (SSO)</h2>

          <h3>What is SSO?</h3>
          <ul>
            <li><strong>Definition:</strong> Sign in once, access multiple applications</li>
            <li><strong>User Benefit:</strong> No need to remember multiple passwords</li>
            <li><strong>Security Benefit:</strong> Centralized authentication and MFA enforcement</li>
            <li><strong>Session:</strong> Azure AD maintains session across applications</li>
            <li><strong>Protocols:</strong> SAML 2.0, OpenID Connect, WS-Federation</li>
          </ul>

          <h3>SSO Flow</h3>
          <div class="mermaid">
sequenceDiagram
    participant User
    participant App1 as App 1
    participant App2 as App 2
    participant EntraID as Azure Entra ID

    User->>App1: 1. Access App 1
    App1->>EntraID: 2. Redirect to sign-in
    EntraID->>User: 3. Authenticate (MFA)
    User->>EntraID: 4. Provide credentials
    EntraID->>EntraID: 5. Create SSO session
    EntraID->>App1: 6. Return token
    App1->>User: 7. Grant access
    
    Note over User,EntraID: Later, user accesses App 2
    
    User->>App2: 8. Access App 2
    App2->>EntraID: 9. Redirect to sign-in
    EntraID->>EntraID: 10. Detect existing session
    EntraID->>App2: 11. Return token (no re-auth!)
    App2->>User: 12. Grant access
          </div>

          <h2>üåê Federation</h2>

          <h3>What is Federation?</h3>
          <ul>
            <li><strong>Definition:</strong> Trust relationship between identity providers</li>
            <li><strong>Scenario:</strong> User from Organization A accesses resources in Organization B</li>
            <li><strong>Home IdP:</strong> Where user's identity is stored (their organization)</li>
            <li><strong>Resource IdP:</strong> Where resource is located (your organization)</li>
            <li><strong>Trust:</strong> Resource IdP trusts authentication from home IdP</li>
          </ul>

          <h3>Federation Scenarios</h3>
          <ul>
            <li><strong>B2B Collaboration:</strong> Guest users from partner organizations</li>
            <li><strong>ADFS:</strong> On-premises AD federated with Azure AD</li>
            <li><strong>External IdPs:</strong> Google, Facebook for consumer scenarios (B2C)</li>
            <li><strong>SAML/WS-Fed:</strong> Legacy applications federated with Azure AD</li>
          </ul>

          <h2>üèóÔ∏è Multi-Tenancy</h2>

          <h3>Single-Tenant Application</h3>
          <ul>
            <li><strong>Registration:</strong> App registered in one tenant</li>
            <li><strong>Users:</strong> Only users from that tenant can sign in</li>
            <li><strong>Use Case:</strong> Internal line-of-business apps</li>
            <li><strong>Account Type:</strong> "Accounts in this organizational directory only"</li>
          </ul>

          <h3>Multi-Tenant Application</h3>
          <ul>
            <li><strong>Registration:</strong> App registered in home tenant</li>
            <li><strong>Users:</strong> Users from any Azure AD tenant can sign in</li>
            <li><strong>Service Principal:</strong> Created in each tenant when first user signs in</li>
            <li><strong>Use Case:</strong> SaaS applications (Salesforce, Zoom, etc.)</li>
            <li><strong>Account Type:</strong> "Accounts in any organizational directory"</li>
            <li><strong>Consent:</strong> Admin or user consent required per tenant</li>
          </ul>

          <h2>üìú Conditional Access Concepts</h2>

          <h3>Policy Components</h3>
          <pre data-language="text" class="syntax-highlighted"><code>IF: (Conditions)
  - WHO: Users/groups/roles
  - WHAT: Cloud apps
  - WHERE: Locations/IPs
  - HOW: Device platforms/states
  - WHEN: Real-time risk signals

THEN: (Controls)
  - GRANT: MFA, compliant device, approved app
  - BLOCK: Deny access
  - SESSION: Sign-in frequency, persistent browser
</code></pre>

          <h3>Signal ‚Üí Decision ‚Üí Enforcement</h3>
          <ul>
            <li><strong>Signals:</strong> User, location, device, risk level, app</li>
            <li><strong>Decision:</strong> Allow, block, or require additional verification</li>
            <li><strong>Enforcement:</strong> Applied before granting access to resource</li>
          </ul>

          <h2>üîí Security Concepts</h2>

          <h3>Zero Trust Principles</h3>
          <ul>
            <li><strong>Verify Explicitly:</strong> Always authenticate and authorize</li>
            <li><strong>Least Privilege:</strong> Just-in-time, just-enough access</li>
            <li><strong>Assume Breach:</strong> Minimize blast radius, segment access</li>
          </ul>

          <h3>Defense in Depth</h3>
          <ol>
            <li><strong>Identity:</strong> MFA, risk-based authentication</li>
            <li><strong>Device:</strong> Compliant and managed devices</li>
            <li><strong>Application:</strong> App-level permissions and consent</li>
            <li><strong>Network:</strong> Conditional Access based on location</li>
            <li><strong>Data:</strong> Sensitivity labels and encryption</li>
          </ol>

          <h2>üéØ Key Takeaways</h2>

          <div class="callout">
            <strong>üí° Essential Concepts Summary</strong>
            <ul style="margin-bottom: 0;">
              <li><strong>Tenant:</strong> Your organization's dedicated Azure AD instance</li>
              <li><strong>Authentication:</strong> Prove who you are (ID token)</li>
              <li><strong>Authorization:</strong> Determine what you can do (access token)</li>
              <li><strong>Tokens:</strong> ID (identity), Access (permissions), Refresh (renewal)</li>
              <li><strong>Claims:</strong> Attributes about the user in tokens</li>
              <li><strong>Scopes:</strong> Permissions requested by application</li>
              <li><strong>Service Principal:</strong> Identity for applications</li>
              <li><strong>SSO:</strong> Sign in once, access many apps</li>
              <li><strong>Federation:</strong> Trust between identity providers</li>
              <li><strong>Conditional Access:</strong> IF conditions THEN controls</li>
            </ul>
          </div>

          <h2>üìö Learning Resources</h2>
          <ul>
            <li><strong>JWT Decoder:</strong> <a href="https://jwt.io" target="_blank">jwt.io</a> - Decode and inspect tokens</li>
            <li><strong>OAuth 2.0 Playground:</strong> <a href="https://oauth.net/2/" target="_blank">oauth.net</a> - Understand OAuth flows</li>
            <li><strong>Microsoft Identity Platform:</strong> <a href="https://learn.microsoft.com/entra/identity-platform" target="_blank">Official documentation</a></li>
            <li><strong>Graph Explorer:</strong> <a href="https://developer.microsoft.com/graph/graph-explorer" target="_blank">Test Graph API calls</a></li>
          </ul>
        </section>

        <!-- Key Components Section -->
        <section id="key-components" role="article">
          <h1>Key Components</h1>
          <span class="badge">architecture</span>
          <span class="badge">components</span>
          <span class="badge">structure</span>
          <span class="badge">entra-id</span>
          
          <p>Azure Entra ID is built on several core components that work together to provide comprehensive identity and access management:</p>

          <div class="mermaid">
%%{ init: { 
    "theme": "base", 
    "themeVariables": {
      "fontFamily": "Segoe UI"
    }, 
    "flowchart": { 
      "useMaxWidth": true, 
      "htmlLabels": true, 
      "curve": "basis" 
    } 
  } 
}%%
graph TB
    subgraph "`**Users & Applications**`"
        USERS[End Users]
        APPS[Applications]
        DEVICES[Devices]
    end
    
    subgraph "`**Azure Entra ID Core**`"
        TENANT[Tenant/Directory]
        AUTH[Authentication Service]
        AUTHZ[Authorization Service]
        TOKEN[Token Service]
    end
    
    subgraph "`**Identity Objects**`"
        USERSOBJ[Users]
        GROUPS[Groups]
        SP[Service Principals]
        MI[Managed Identities]
        APPREG[App Registrations]
    end
    
    subgraph "`**Security & Governance**`"
        CA[Conditional Access]
        MFA[Multi-Factor Auth]
        PIM[Privileged Identity]
        IDP[Identity Protection]
    end
    
    subgraph "`**Resources**`"
        M365[Microsoft 365]
        AZURE[Azure Resources]
        SAAS[SaaS Apps]
        CUSTOM[Custom Apps]
    end
    
    USERS --> AUTH
    APPS --> AUTH
    DEVICES --> AUTH
    
    AUTH --> TENANT
    TENANT --> USERSOBJ
    TENANT --> GROUPS
    TENANT --> SP
    TENANT --> MI
    TENANT --> APPREG
    
    AUTH --> CA
    CA --> MFA
    CA --> IDP
    
    AUTH --> TOKEN
    TOKEN --> AUTHZ
    
    AUTHZ --> M365
    AUTHZ --> AZURE
    AUTHZ --> SAAS
    AUTHZ --> CUSTOM
    
    style TENANT fill:#3b82f6,color:#fff
    style AUTH fill:#10b981,color:#fff
    style CA fill:#ef4444,color:#fff
    style TOKEN fill:#8b5cf6,color:#fff
          </div>

          <h2>1Ô∏è‚É£ Tenant (Directory)</h2>
          <p>The fundamental building block of Azure Entra ID:</p>
          <ul>
            <li><strong>Definition:</strong> A dedicated instance of Azure Entra ID representing an organization</li>
            <li><strong>Domain:</strong> Each tenant has a unique domain (e.g., contoso.onmicrosoft.com)</li>
            <li><strong>Custom Domains:</strong> Add and verify custom domain names (e.g., contoso.com)</li>
            <li><strong>Isolation:</strong> Tenants are logically isolated from each other</li>
            <li><strong>Default Tenant:</strong> Automatically created when you sign up for Azure or Microsoft 365</li>
          </ul>

          <div class="callout">
            <strong>üè¢ Tenant Best Practice</strong><br />
            Most organizations use a single production tenant for all users and resources. Use separate tenants for development/testing or if you need strict organizational isolation (e.g., separate subsidiaries).
          </div>

          <h2>2Ô∏è‚É£ Identity Objects</h2>
          <p>Core objects that represent different types of identities:</p>

          <h3>üë§ Users</h3>
          <ul>
            <li><strong>Member Users:</strong> Employees within your organization</li>
            <li><strong>Guest Users:</strong> External users invited for B2B collaboration</li>
            <li><strong>Attributes:</strong> UPN, display name, email, job title, department, etc.</li>
            <li><strong>Authentication:</strong> Password, passwordless (FIDO2, Windows Hello), federated</li>
          </ul>

          <h3>üë• Groups</h3>
          <ul>
            <li><strong>Security Groups:</strong> Manage access to resources</li>
            <li><strong>Microsoft 365 Groups:</strong> Collaboration groups with email, SharePoint, Teams</li>
            <li><strong>Assignment Types:</strong> Assigned (manual) or Dynamic (rule-based)</li>
            <li><strong>Nested Groups:</strong> Groups can contain other groups</li>
          </ul>

          <h3>üîß Service Principals</h3>
          <ul>
            <li><strong>Purpose:</strong> Identity for applications and services</li>
            <li><strong>Authentication:</strong> Secrets (client secrets) or certificates</li>
            <li><strong>Permissions:</strong> Can be granted API permissions and Azure RBAC roles</li>
            <li><strong>Use Cases:</strong> Automation scripts, CI/CD pipelines, third-party integrations</li>
          </ul>

          <h3>üé≠ Managed Identities</h3>
          <ul>
            <li><strong>System-Assigned:</strong> Lifecycle tied to Azure resource (VM, App Service, etc.)</li>
            <li><strong>User-Assigned:</strong> Standalone identity shared across resources</li>
            <li><strong>Key Benefit:</strong> No credentials to manage‚ÄîAzure handles rotation automatically</li>
            <li><strong>Best Practice:</strong> Always prefer managed identities over service principals for Azure workloads</li>
          </ul>

          <h3>üì± Application Registrations</h3>
          <ul>
            <li><strong>Definition:</strong> Blueprint that defines how an app integrates with Azure Entra ID</li>
            <li><strong>Components:</strong> Client ID, redirect URIs, API permissions, credentials</li>
            <li><strong>Types:</strong> Web apps, single-page apps (SPA), mobile/desktop, APIs, daemons</li>
            <li><strong>Multi-Tenant:</strong> Can be configured to work across multiple Azure AD tenants</li>
          </ul>

          <h2>3Ô∏è‚É£ Authentication Services</h2>
          <p>Mechanisms that verify identity:</p>

          <h3>üîê Authentication Methods</h3>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Method</th>
                <th>Security Level</th>
                <th>Use Case</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Password + MFA</strong></td>
                <td>‚≠ê‚≠ê‚≠ê</td>
                <td>Standard baseline for all users</td>
              </tr>
              <tr>
                <td><strong>Passwordless (FIDO2, Windows Hello)</strong></td>
                <td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
                <td>Phishing-resistant authentication</td>
              </tr>
              <tr>
                <td><strong>Certificate-based Auth</strong></td>
                <td>‚≠ê‚≠ê‚≠ê‚≠ê</td>
                <td>Smart cards, PIV/CAC, device certificates</td>
              </tr>
              <tr>
                <td><strong>Federation (SAML/WS-Fed)</strong></td>
                <td>‚≠ê‚≠ê‚≠ê‚≠ê</td>
                <td>Enterprise SSO with on-prem AD FS</td>
              </tr>
              <tr>
                <td><strong>OAuth 2.0 / OpenID Connect</strong></td>
                <td>‚≠ê‚≠ê‚≠ê‚≠ê</td>
                <td>Modern apps, APIs, mobile apps</td>
              </tr>
            </tbody>
          </table>

          <h3>üõ°Ô∏è Multi-Factor Authentication (MFA)</h3>
          <ul>
            <li><strong>Methods:</strong> Authenticator app, SMS, phone call, hardware tokens (OATH)</li>
            <li><strong>Microsoft Authenticator:</strong> Push notifications, passwordless sign-in</li>
            <li><strong>Enforcement:</strong> Per-user, security defaults, or conditional access policies</li>
            <li><strong>Coverage:</strong> Blocks 99.9% of automated attacks</li>
          </ul>

          <h2>4Ô∏è‚É£ Authorization Components</h2>
          
          <h3>üé´ Tokens</h3>
          <ul>
            <li><strong>Access Tokens:</strong> JWT tokens for API authorization (typically 1-hour lifetime)</li>
            <li><strong>ID Tokens:</strong> User identity information (name, email, claims)</li>
            <li><strong>Refresh Tokens:</strong> Long-lived tokens to obtain new access tokens</li>
            <li><strong>SAML Tokens:</strong> XML-based tokens for enterprise apps</li>
          </ul>

          <h3>üîë Permissions Model</h3>
          <ul>
            <li><strong>Delegated Permissions:</strong> App acts on behalf of signed-in user</li>
            <li><strong>Application Permissions:</strong> App acts with its own identity (daemon scenarios)</li>
            <li><strong>Admin Consent:</strong> Required for high-privilege permissions</li>
            <li><strong>Least Privilege:</strong> Request only permissions the app actually needs</li>
          </ul>

          <h3>üëÆ Azure RBAC (Role-Based Access Control)</h3>
          <ul>
            <li><strong>Scope:</strong> Management group, subscription, resource group, or resource level</li>
            <li><strong>Built-in Roles:</strong> Owner, Contributor, Reader, and 100+ specialized roles</li>
            <li><strong>Custom Roles:</strong> Define granular permissions for specific needs</li>
            <li><strong>Assignment:</strong> Assign roles to users, groups, service principals, managed identities</li>
          </ul>

          <h2>5Ô∏è‚É£ Directory Synchronization</h2>
          
          <h3>‚òÅÔ∏è Azure AD Connect</h3>
          <p>Synchronizes on-premises Active Directory with Azure Entra ID:</p>
          <ul>
            <li><strong>Password Hash Sync (PHS):</strong> Sync password hashes for cloud authentication</li>
            <li><strong>Pass-through Auth (PTA):</strong> Validate passwords against on-prem AD</li>
            <li><strong>Federation:</strong> Redirect authentication to AD FS or third-party IdP</li>
            <li><strong>Attributes:</strong> Sync user attributes, groups, and group memberships</li>
            <li><strong>Hybrid Join:</strong> Devices registered in both AD and Azure AD</li>
          </ul>

          <h3>‚òÅÔ∏è Azure AD Connect Cloud Sync</h3>
          <ul>
            <li><strong>Lightweight Agent:</strong> Runs on-premises, no complex server needed</li>
            <li><strong>High Availability:</strong> Multiple agents for resilience</li>
            <li><strong>Use Case:</strong> Multi-forest scenarios, simpler deployments</li>
          </ul>

          <h2>6Ô∏è‚É£ Enterprise Integration</h2>
          
          <h3>üì¶ Enterprise Applications</h3>
          <ul>
            <li><strong>Gallery Apps:</strong> 7,000+ pre-integrated SaaS applications</li>
            <li><strong>Custom Apps:</strong> Integrate your own SAML or OAuth applications</li>
            <li><strong>SSO:</strong> SAML, OpenID Connect, password-based, linked</li>
            <li><strong>Provisioning:</strong> Automatic user provisioning and deprovisioning (SCIM)</li>
          </ul>

          <h3>üîå Application Proxy</h3>
          <ul>
            <li><strong>Purpose:</strong> Secure remote access to on-premises web applications</li>
            <li><strong>No VPN Required:</strong> Publish apps externally without opening firewall ports</li>
            <li><strong>SSO:</strong> Azure AD authentication with Kerberos Constrained Delegation</li>
            <li><strong>Pre-authentication:</strong> Conditional access before reaching the app</li>
          </ul>

          <div class="callout">
            <strong>üèóÔ∏è Architecture Principle</strong><br />
            Azure Entra ID follows a <strong>Zero Trust architecture</strong>‚Äîevery request is verified regardless of origin, combining strong identity verification, device compliance, and least-privilege access to protect resources.
          </div>
        </section>

        <!-- Authentication & Authorization Section -->
        <section id="authentication" role="article">
          <h1>Authentication & Authorization</h1>
          <span class="badge">auth</span>
          <span class="badge">authentication</span>
          <span class="badge">authorization</span>
          <span class="badge">oauth</span>
          <span class="badge">saml</span>
          <span class="badge">sso</span>
          
          <p>Understanding the distinction between <strong>authentication</strong> and <strong>authorization</strong> is fundamental to working with Azure Entra ID:</p>

          <table class="table table-striped">
            <thead>
              <tr>
                <th>Aspect</th>
                <th>Authentication</th>
                <th>Authorization</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Question</strong></td>
                <td>Who are you?</td>
                <td>What can you do?</td>
              </tr>
              <tr>
                <td><strong>Purpose</strong></td>
                <td>Verify identity</td>
                <td>Grant access to resources</td>
              </tr>
              <tr>
                <td><strong>Process</strong></td>
                <td>User provides credentials</td>
                <td>System checks permissions</td>
              </tr>
              <tr>
                <td><strong>Result</strong></td>
                <td>Identity confirmed (tokens issued)</td>
                <td>Access granted or denied</td>
              </tr>
              <tr>
                <td><strong>Example</strong></td>
                <td>Sign in with username/password</td>
                <td>Read file, delete resource, call API</td>
              </tr>
            </tbody>
          </table>

          <h2>Modern Authentication Protocols</h2>
          <p>Azure Entra ID supports industry-standard protocols for authentication and authorization:</p>

          <div class="mermaid">
%%{ init: { 
    "theme": "base", 
    "themeVariables": {
      "fontFamily": "Segoe UI"
    }, 
    "flowchart": { 
      "useMaxWidth": true, 
      "htmlLabels": true, 
      "curve": "basis" 
    } 
  } 
}%%
graph LR
    subgraph "`**Modern Protocols**`"
        OIDC[OpenID Connect<br/>Identity Layer]
        OAUTH[OAuth 2.0<br/>Authorization]
    end
    
    subgraph "`**Legacy Protocols**`"
        SAML[SAML 2.0<br/>Enterprise SSO]
        WSFED[WS-Federation<br/>Windows Apps]
    end
    
    subgraph "`**Use Cases**`"
        WEB[Web Apps]
        SPA[Single Page Apps]
        MOBILE[Mobile Apps]
        API[APIs/Services]
        ENTERPRISE[Enterprise Apps]
    end
    
    OIDC --> WEB
    OIDC --> SPA
    OIDC --> MOBILE
    OAUTH --> API
    SAML --> ENTERPRISE
    WSFED --> ENTERPRISE
    
    style OIDC fill:#10b981,color:#fff
    style OAUTH fill:#3b82f6,color:#fff
    style SAML fill:#f59e0b,color:#fff
          </div>

          <h2>OAuth 2.0 & OpenID Connect (OIDC)</h2>
          <p>The recommended protocols for modern applications:</p>

          <h3>üîê OAuth 2.0</h3>
          <ul>
            <li><strong>Purpose:</strong> Authorization framework for delegated access</li>
            <li><strong>Access Tokens:</strong> JWT tokens that grant access to protected resources (APIs)</li>
            <li><strong>Scopes:</strong> Define what the app can do (e.g., User.Read, Mail.Send)</li>
            <li><strong>Grant Types:</strong> Authorization code, client credentials, device code, refresh token</li>
          </ul>

          <h3>üÜî OpenID Connect (OIDC)</h3>
          <ul>
            <li><strong>Purpose:</strong> Identity layer built on top of OAuth 2.0</li>
            <li><strong>ID Tokens:</strong> JWT tokens containing user identity claims (name, email, sub)</li>
            <li><strong>UserInfo Endpoint:</strong> Retrieve additional user profile information</li>
            <li><strong>Standard:</strong> Industry standard supported by all major identity providers</li>
          </ul>

          <h3>üîÑ OAuth 2.0 Flows</h3>

          <h4>Authorization Code Flow (Web Apps)</h4>
          <p>Most secure flow for server-side web applications:</p>
          <div class="mermaid">
sequenceDiagram
    participant User
    participant App as Web App
    participant Browser
    participant EntraID as Azure Entra ID
    participant API

    User->>App: 1. Access protected page
    App->>Browser: 2. Redirect to login
    Browser->>EntraID: 3. GET /authorize (client_id, redirect_uri, scope)
    EntraID->>User: 4. Show login page
    User->>EntraID: 5. Enter credentials + MFA
    EntraID->>Browser: 6. Redirect with authorization code
    Browser->>App: 7. POST code to callback
    App->>EntraID: 8. POST /token (code + client_secret)
    EntraID->>App: 9. Return access_token + id_token + refresh_token
    App->>API: 10. Call API with access_token
    API->>App: 11. Return data
    App->>User: 12. Show protected page
          </div>

          <h4>Authorization Code Flow with PKCE (Single Page Apps & Mobile)</h4>
          <ul>
            <li><strong>PKCE:</strong> Proof Key for Code Exchange - prevents authorization code interception</li>
            <li><strong>No Client Secret:</strong> Public clients can't securely store secrets</li>
            <li><strong>Code Verifier:</strong> Random string generated by client</li>
            <li><strong>Code Challenge:</strong> SHA-256 hash of verifier sent with authorization request</li>
            <li><strong>Security:</strong> Prevents man-in-the-middle attacks</li>
          </ul>

          <h4>Client Credentials Flow (Service-to-Service)</h4>
          <ul>
            <li><strong>Purpose:</strong> Daemon apps, background services, automated processes</li>
            <li><strong>No User Context:</strong> App acts with its own identity</li>
            <li><strong>Authentication:</strong> Client ID + client secret or certificate</li>
            <li><strong>Permissions:</strong> Application permissions (not delegated)</li>
            <li><strong>Token:</strong> Access token only (no ID token)</li>
          </ul>

          <h4>Device Code Flow (Devices without Browser)</h4>
          <ul>
            <li><strong>Purpose:</strong> CLI tools, IoT devices, smart TVs</li>
            <li><strong>Process:</strong> Display code for user to enter on another device</li>
            <li><strong>User Experience:</strong> User visits URL and enters code</li>
            <li><strong>Polling:</strong> Device polls token endpoint until user completes auth</li>
          </ul>

          <h2>SAML 2.0 (Security Assertion Markup Language)</h2>
          <p>Enterprise SSO protocol commonly used for SaaS applications:</p>

          <h3>üè¢ SAML Components</h3>
          <ul>
            <li><strong>Identity Provider (IdP):</strong> Azure Entra ID authenticates users</li>
            <li><strong>Service Provider (SP):</strong> The application user wants to access</li>
            <li><strong>SAML Assertion:</strong> XML document containing user identity and attributes</li>
            <li><strong>Trust Relationship:</strong> Established via metadata exchange</li>
          </ul>

          <h3>üîÑ SAML SSO Flow</h3>
          <div class="mermaid">
sequenceDiagram
    participant User
    participant App as SaaS Application<br/>(Service Provider)
    participant EntraID as Azure Entra ID<br/>(Identity Provider)

    User->>App: 1. Access application
    App->>User: 2. Not authenticated
    App->>EntraID: 3. SAML AuthnRequest (redirect)
    EntraID->>User: 4. Show login page
    User->>EntraID: 5. Enter credentials
    EntraID->>EntraID: 6. Authenticate user
    EntraID->>App: 7. SAML Response with assertion (POST)
    App->>App: 8. Validate signature & assertion
    App->>User: 9. Grant access to application
          </div>

          <h3>‚úÖ When to Use SAML</h3>
          <ul>
            <li>Enterprise SaaS applications require SAML</li>
            <li>Legacy applications that don't support OAuth/OIDC</li>
            <li>Need to pass custom user attributes (claims) to application</li>
            <li>Organization has existing SAML infrastructure</li>
          </ul>

          <h2>Single Sign-On (SSO)</h2>
          <p>Users sign in once and access multiple applications without re-authenticating:</p>

          <h3>üîë How SSO Works</h3>
          <ol>
            <li>User authenticates to Azure Entra ID (once)</li>
            <li>Azure AD creates a session with a cookie in the browser</li>
            <li>When accessing another app, Azure AD recognizes the existing session</li>
            <li>User is automatically signed in without entering credentials again</li>
            <li>Session remains active based on configured policies</li>
          </ol>

          <h3>üéØ SSO Benefits</h3>
          <ul>
            <li><strong>User Experience:</strong> Reduced password fatigue, faster access</li>
            <li><strong>Security:</strong> Fewer passwords to remember = less likely to reuse or write down</li>
            <li><strong>Productivity:</strong> 30% reduction in help desk password reset tickets</li>
            <li><strong>Compliance:</strong> Centralized audit logs for all application access</li>
          </ul>

          <h3>‚öôÔ∏è SSO Configuration Options</h3>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>SSO Method</th>
                <th>Protocol</th>
                <th>Best For</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Federated SSO</strong></td>
                <td>SAML, OIDC</td>
                <td>SaaS apps, custom web apps</td>
              </tr>
              <tr>
                <td><strong>Password-based SSO</strong></td>
                <td>Form-based login</td>
                <td>Apps without federation support</td>
              </tr>
              <tr>
                <td><strong>Linked SSO</strong></td>
                <td>Deep link</td>
                <td>Redirect to external IdP</td>
              </tr>
              <tr>
                <td><strong>Disabled</strong></td>
                <td>N/A</td>
                <td>App in directory but SSO not configured</td>
              </tr>
            </tbody>
          </table>

          <h2>Token Types & Claims</h2>

          <h3>üé´ Access Token</h3>
          <ul>
            <li><strong>Purpose:</strong> Authorize access to APIs and resources</li>
            <li><strong>Format:</strong> JWT (JSON Web Token)</li>
            <li><strong>Lifetime:</strong> Typically 1 hour (configurable)</li>
            <li><strong>Audience:</strong> The API/resource the token is intended for</li>
            <li><strong>Claims:</strong> User ID, roles, scopes, permissions</li>
            <li><strong>Validation:</strong> API validates signature, expiration, audience, issuer</li>
          </ul>

          <h3>üÜî ID Token</h3>
          <ul>
            <li><strong>Purpose:</strong> Provide user identity information to the application</li>
            <li><strong>Format:</strong> JWT with identity claims</li>
            <li><strong>Claims:</strong> sub (user ID), name, email, preferred_username, tid (tenant ID)</li>
            <li><strong>Validation:</strong> App validates signature, expiration, nonce, issuer</li>
            <li><strong>Not for API calls:</strong> Only for identity‚Äîuse access tokens for APIs</li>
          </ul>

          <h3>üîÑ Refresh Token</h3>
          <ul>
            <li><strong>Purpose:</strong> Obtain new access tokens without user interaction</li>
            <li><strong>Format:</strong> Opaque string (not JWT)</li>
            <li><strong>Lifetime:</strong> Days to months (configurable, can be revoked)</li>
            <li><strong>Security:</strong> Store securely, never expose to client-side code</li>
            <li><strong>Rotation:</strong> New refresh token issued with each use (best practice)</li>
          </ul>

          <h3>üìã Common Token Claims</h3>
          <pre data-language="json" class="syntax-highlighted"><code class="language-json">{
  <span class="json-key">"aud"</span>: <span class="json-string">"api://your-api-client-id"</span>,           <span style="color: #008000;">// Audience</span>
  <span class="json-key">"iss"</span>: <span class="json-string">"https://login.microsoftonline.com/tenant-id/"</span>, <span style="color: #008000;">// Issuer</span>
  <span class="json-key">"iat"</span>: <span class="json-number">1703462400</span>,                           <span style="color: #008000;">// Issued at</span>
  <span class="json-key">"exp"</span>: <span class="json-number">1703466000</span>,                           <span style="color: #008000;">// Expiration</span>
  <span class="json-key">"sub"</span>: <span class="json-string">"unique-user-id"</span>,                     <span style="color: #008000;">// Subject (user ID)</span>
  <span class="json-key">"name"</span>: <span class="json-string">"John Doe"</span>,                          <span style="color: #008000;">// Display name</span>
  <span class="json-key">"preferred_username"</span>: <span class="json-string">"john@contoso.com"</span>,    <span style="color: #008000;">// Email/UPN</span>
  <span class="json-key">"oid"</span>: <span class="json-string">"object-id"</span>,                          <span style="color: #008000;">// Object ID in Azure AD</span>
  <span class="json-key">"tid"</span>: <span class="json-string">"tenant-id"</span>,                          <span style="color: #008000;">// Tenant ID</span>
  <span class="json-key">"roles"</span>: [<span class="json-string">"Admin"</span>, <span class="json-string">"User"</span>],                    <span style="color: #008000;">// App roles</span>
  <span class="json-key">"scp"</span>: <span class="json-string">"User.Read Mail.Send"</span>                 <span style="color: #008000;">// Scopes (delegated permissions)</span>
}</code></pre>

          <h2>Best Practices</h2>

          <div class="callout">
            <strong>üîí Security Recommendations</strong><br />
            <ul style="margin-bottom: 0;">
              <li><strong>Always use HTTPS:</strong> Tokens must be transmitted over secure channels</li>
              <li><strong>Validate tokens:</strong> Check signature, expiration, audience, and issuer</li>
              <li><strong>Use PKCE:</strong> Required for SPAs and mobile apps</li>
              <li><strong>Short-lived access tokens:</strong> Keep lifetime to 1 hour or less</li>
              <li><strong>Secure storage:</strong> Never store tokens in localStorage (use httpOnly cookies or session storage)</li>
              <li><strong>Use MSAL libraries:</strong> Microsoft Authentication Library handles complexity correctly</li>
            </ul>
          </div>

          <h3>üéØ Protocol Selection Guide</h3>
          <ul>
            <li><strong>New Applications:</strong> Use OAuth 2.0 + OpenID Connect (OIDC)</li>
            <li><strong>Web APIs:</strong> OAuth 2.0 with Bearer tokens</li>
            <li><strong>Enterprise SaaS:</strong> SAML 2.0 (if required by vendor)</li>
            <li><strong>Legacy Windows:</strong> WS-Federation (only if necessary)</li>
            <li><strong>Mobile/SPA:</strong> OAuth 2.0 with PKCE</li>
            <li><strong>Daemon/Service:</strong> OAuth 2.0 Client Credentials flow</li>
          </ul>
        </section>

        <!-- Identity Types Section -->
        <section id="identity-types" role="article">
          <h1>Identity Types</h1>
          <span class="badge">users</span>
          <span class="badge">groups</span>
          <span class="badge">service-principals</span>
          <span class="badge">managed-identity</span>
          <span class="badge">identities</span>
          
          <p>Azure Entra ID supports multiple types of identities to represent different entities in your organization:</p>

          <div class="mermaid">
%%{ init: { 
    "theme": "base", 
    "themeVariables": {
      "fontFamily": "Segoe UI"
    }, 
    "flowchart": { 
      "useMaxWidth": true, 
      "htmlLabels": true, 
      "curve": "basis" 
    } 
  } 
}%%
graph TB
    subgraph "`**Azure Entra ID Tenant**`"
        TENANT[Tenant Directory]
    end
    
    subgraph "`**User Identities**`"
        MEMBER[Member Users<br/>Employees]
        GUEST[Guest Users<br/>External Partners]
    end
    
    subgraph "`**Group Identities**`"
        SECGRP[Security Groups]
        M365GRP[Microsoft 365 Groups]
        DYNAMIC[Dynamic Groups]
    end
    
    subgraph "`**Service Identities**`"
        SP[Service Principals<br/>App Identity]
        MI_SYS[System-Assigned<br/>Managed Identity]
        MI_USER[User-Assigned<br/>Managed Identity]
    end
    
    subgraph "`**Device Identities**`"
        AADJ[Azure AD Joined]
        HYBRID[Hybrid Joined]
        AADR[Azure AD Registered]
    end
    
    TENANT --> MEMBER
    TENANT --> GUEST
    TENANT --> SECGRP
    TENANT --> M365GRP
    TENANT --> DYNAMIC
    TENANT --> SP
    TENANT --> MI_SYS
    TENANT --> MI_USER
    TENANT --> AADJ
    TENANT --> HYBRID
    TENANT --> AADR
    
    style MEMBER fill:#10b981,color:#fff
    style GUEST fill:#3b82f6,color:#fff
    style SP fill:#f59e0b,color:#fff
    style MI_SYS fill:#8b5cf6,color:#fff
    style MI_USER fill:#ec4899,color:#fff
          </div>

          <h2>1Ô∏è‚É£ User Identities</h2>

          <h3>üë§ Member Users (Internal Users)</h3>
          <p>Employees and internal users within your organization:</p>
          <ul>
            <li><strong>Created in:</strong> Azure Entra ID or synced from on-premises AD</li>
            <li><strong>UPN Format:</strong> user@contoso.com or user@contoso.onmicrosoft.com</li>
            <li><strong>Full Access:</strong> Can be assigned licenses, roles, and permissions</li>
            <li><strong>Self-Service:</strong> Password reset, profile updates, MFA management</li>
            <li><strong>Lifecycle:</strong> Managed via HR systems, provisioning, or manual creation</li>
          </ul>

          <h3>üåê Guest Users (External Users)</h3>
          <p>External partners, vendors, or collaborators invited for B2B access:</p>
          <ul>
            <li><strong>User Type:</strong> Marked as "Guest" in Azure AD</li>
            <li><strong>Authentication:</strong> Use their own organization's credentials (federation)</li>
            <li><strong>Email Domains:</strong> Can be from any email provider (gmail.com, partner.com, etc.)</li>
            <li><strong>Limited Access:</strong> Restricted permissions by default (can be customized)</li>
            <li><strong>Invitation Process:</strong> Receive email invitation to redeem access</li>
            <li><strong>Use Cases:</strong> Project collaboration, vendor access, consultant engagement</li>
          </ul>

          <table class="table table-striped">
            <thead>
              <tr>
                <th>Aspect</th>
                <th>Member User</th>
                <th>Guest User</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Source</strong></td>
                <td>Internal organization</td>
                <td>External organization</td>
              </tr>
              <tr>
                <td><strong>Authentication</strong></td>
                <td>Your Azure AD</td>
                <td>Their home directory</td>
              </tr>
              <tr>
                <td><strong>User Type</strong></td>
                <td>Member</td>
                <td>Guest</td>
              </tr>
              <tr>
                <td><strong>Default Permissions</strong></td>
                <td>Full directory access</td>
                <td>Restricted directory access</td>
              </tr>
              <tr>
                <td><strong>Licensing</strong></td>
                <td>Requires Azure AD license</td>
                <td>Often included in External ID pricing</td>
              </tr>
              <tr>
                <td><strong>Typical Use</strong></td>
                <td>Employees, full-time staff</td>
                <td>Partners, vendors, consultants</td>
              </tr>
            </tbody>
          </table>

          <h2>2Ô∏è‚É£ Group Identities</h2>

          <h3>üõ°Ô∏è Security Groups</h3>
          <ul>
            <li><strong>Purpose:</strong> Manage access to resources (apps, SharePoint sites, Azure resources)</li>
            <li><strong>Membership:</strong> Users, service principals, devices, other groups (nesting)</li>
            <li><strong>Assignment Types:</strong> Assigned (manual) or Dynamic (rule-based)</li>
            <li><strong>Email Enabled:</strong> No (not a distribution list)</li>
            <li><strong>Azure RBAC:</strong> Can be assigned roles for Azure resource management</li>
          </ul>

          <h3>üìß Microsoft 365 Groups</h3>
          <ul>
            <li><strong>Purpose:</strong> Collaboration groups with shared resources</li>
            <li><strong>Includes:</strong> Email inbox, calendar, SharePoint site, Teams, OneNote, Planner</li>
            <li><strong>Membership:</strong> Users only (not service principals or devices)</li>
            <li><strong>Visibility:</strong> Public (anyone can join) or Private (invitation only)</li>
            <li><strong>Integration:</strong> Automatically creates resources in multiple Microsoft 365 services</li>
          </ul>

          <h3>‚ö° Dynamic Groups</h3>
          <ul>
            <li><strong>Purpose:</strong> Automate group membership based on user/device attributes</li>
            <li><strong>Rules:</strong> Define membership criteria using attribute expressions</li>
            <li><strong>Examples:</strong> All users in Sales department, all Windows 11 devices</li>
            <li><strong>Processing:</strong> Azure AD evaluates rules and updates membership automatically</li>
            <li><strong>License Required:</strong> Azure AD Premium P1 or higher</li>
          </ul>

          <pre data-language="text" class="syntax-highlighted"><code>Example Dynamic Group Rules:

# All users in the Marketing department
(user.department -eq "Marketing")

# All users in specific locations
(user.city -eq "Seattle") -or (user.city -eq "New York")

# All Windows 11 devices
(device.deviceOSType -eq "Windows") -and (device.deviceOSVersion -startsWith "10.0.22")

# All users with specific job title
(user.jobTitle -contains "Manager")
</code></pre>

          <h2>3Ô∏è‚É£ Service Identities</h2>

          <h3>üîß Service Principals</h3>
          <p>Application identity used for automation and programmatic access:</p>
          <ul>
            <li><strong>Created from:</strong> App Registration or Enterprise Application</li>
            <li><strong>Authentication:</strong> Client secret (password) or certificate</li>
            <li><strong>Permissions:</strong> API permissions and Azure RBAC roles</li>
            <li><strong>Use Cases:</strong> CI/CD pipelines, automation scripts, third-party integrations</li>
            <li><strong>Lifetime:</strong> Secrets expire (max 2 years), certificates expire (up to 3 years)</li>
          </ul>

          <div class="callout">
            <strong>‚ö†Ô∏è Security Warning</strong><br />
            Service principal credentials are sensitive! Store in Azure Key Vault, never in code. Rotate secrets regularly and use certificate-based authentication when possible. For Azure workloads, always prefer Managed Identities.
          </div>

          <h3>üé≠ Managed Identities</h3>
          <p>Azure-managed service identity with automatic credential rotation:</p>

          <h4>System-Assigned Managed Identity</h4>
          <ul>
            <li><strong>Lifecycle:</strong> Tied to the Azure resource (VM, App Service, Function, etc.)</li>
            <li><strong>Creation:</strong> Enable on the resource‚ÄîAzure creates identity automatically</li>
            <li><strong>Deletion:</strong> Automatically deleted when resource is deleted</li>
            <li><strong>One-to-One:</strong> Each resource has its own unique identity</li>
            <li><strong>Use When:</strong> Identity is specific to a single resource</li>
          </ul>

          <h4>User-Assigned Managed Identity</h4>
          <ul>
            <li><strong>Lifecycle:</strong> Independent Azure resource with its own lifecycle</li>
            <li><strong>Creation:</strong> Create as standalone resource, then assign to resources</li>
            <li><strong>Deletion:</strong> Must be explicitly deleted‚Äîsurvives resource deletion</li>
            <li><strong>One-to-Many:</strong> Single identity can be shared across multiple resources</li>
            <li><strong>Use When:</strong> Multiple resources need the same identity/permissions</li>
          </ul>

          <table class="table table-striped">
            <thead>
              <tr>
                <th>Aspect</th>
                <th>System-Assigned</th>
                <th>User-Assigned</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Creation</strong></td>
                <td>Part of resource creation</td>
                <td>Standalone resource</td>
              </tr>
              <tr>
                <td><strong>Lifecycle</strong></td>
                <td>Tied to parent resource</td>
                <td>Independent</td>
              </tr>
              <tr>
                <td><strong>Sharing</strong></td>
                <td>Cannot be shared</td>
                <td>Can be shared across resources</td>
              </tr>
              <tr>
                <td><strong>Deletion</strong></td>
                <td>Auto-deleted with resource</td>
                <td>Must delete manually</td>
              </tr>
              <tr>
                <td><strong>Use Case</strong></td>
                <td>Single resource needs identity</td>
                <td>Multiple resources share identity</td>
              </tr>
            </tbody>
          </table>

          <h3>üîë Benefits of Managed Identities</h3>
          <ul>
            <li><strong>‚úÖ No Credentials in Code:</strong> Eliminate secrets, connection strings, keys</li>
            <li><strong>‚úÖ Automatic Rotation:</strong> Azure manages credential lifecycle</li>
            <li><strong>‚úÖ Azure RBAC:</strong> Grant permissions using standard roles</li>
            <li><strong>‚úÖ Zero Maintenance:</strong> No expiration management or renewals</li>
            <li><strong>‚úÖ Supported Services:</strong> 60+ Azure services support managed identities</li>
          </ul>

          <pre data-language="csharp" class="syntax-highlighted"><code>// Managed Identity Example (C# with Azure SDK)
var credential = new DefaultAzureCredential(); // Automatically uses managed identity
var client = new SecretClient(new Uri("https://keyvault.vault.azure.net"), credential);
KeyVaultSecret secret = await client.GetSecretAsync("DatabasePassword");
</code></pre>

          <h2>4Ô∏è‚É£ Device Identities</h2>

          <h3>üíª Azure AD Joined Devices</h3>
          <ul>
            <li><strong>Definition:</strong> Devices joined directly to Azure AD (cloud-only)</li>
            <li><strong>Sign-In:</strong> Users sign in with Azure AD credentials</li>
            <li><strong>Management:</strong> Intune, MDM, or configuration profiles</li>
            <li><strong>SSO:</strong> Automatic SSO to cloud and on-premises apps</li>
            <li><strong>Use Case:</strong> Cloud-first organizations, modern workplaces</li>
          </ul>

          <h3>üîó Hybrid Azure AD Joined Devices</h3>
          <ul>
            <li><strong>Definition:</strong> Joined to both on-premises AD and Azure AD</li>
            <li><strong>Sign-In:</strong> Users sign in with domain credentials</li>
            <li><strong>Synchronization:</strong> Device objects synced via Azure AD Connect</li>
            <li><strong>Management:</strong> Group Policy + Intune co-management</li>
            <li><strong>Use Case:</strong> Organizations with existing AD infrastructure</li>
          </ul>

          <h3>üì± Azure AD Registered Devices</h3>
          <ul>
            <li><strong>Definition:</strong> Personal devices (BYOD) registered with Azure AD</li>
            <li><strong>Sign-In:</strong> Users add work account to personal device</li>
            <li><strong>Access:</strong> Work apps and resources from personal device</li>
            <li><strong>Limited Control:</strong> Organization has minimal management rights</li>
            <li><strong>Use Case:</strong> BYOD scenarios, mobile device access</li>
          </ul>

          <h2>Identity Management Best Practices</h2>

          <h3>üë• Users & Groups</h3>
          <ul>
            <li><strong>Naming Conventions:</strong> Establish clear standards for UPNs and display names</li>
            <li><strong>Group Strategy:</strong> Use groups for access management, not individual assignments</li>
            <li><strong>Dynamic Groups:</strong> Automate membership for consistent access patterns</li>
            <li><strong>Guest Access:</strong> Review guest users quarterly, remove inactive accounts</li>
            <li><strong>Lifecycle:</strong> Integrate with HR systems for automated provisioning/deprovisioning</li>
          </ul>

          <h3>üîß Service Identities</h3>
          <ul>
            <li><strong>Prefer Managed Identities:</strong> Always use for Azure resources</li>
            <li><strong>Minimize Service Principals:</strong> Only create when managed identities aren't supported</li>
            <li><strong>Certificate-Based:</strong> Use certificates over secrets for service principals</li>
            <li><strong>Short Lifetimes:</strong> Set secret expiration to 6-12 months maximum</li>
            <li><strong>Audit Regularly:</strong> Review service principal usage and permissions quarterly</li>
          </ul>
        </section>

        <!-- Conditional Access Section -->
        <section id="conditional-access" role="article">
          <h1>Conditional Access</h1>
          <span class="badge">conditional-access</span>
          <span class="badge">policies</span>
          <span class="badge">security</span>
          <span class="badge">mfa</span>
          <span class="badge">zero-trust</span>
          
          <p>Conditional Access is Azure Entra ID's <strong>policy-driven access control engine</strong> that enables Zero Trust security by evaluating signals and enforcing access decisions based on conditions.</p>

          <div class="callout">
            <strong>üéØ Zero Trust Principle</strong><br />
            "Never trust, always verify" ‚Äî Conditional Access implements this by continuously evaluating risk signals and enforcing appropriate access controls for every access request.
          </div>

          <h2>How Conditional Access Works</h2>

          <div class="mermaid">
%%{ init: { 
    "theme": "base", 
    "themeVariables": {
      "fontFamily": "Segoe UI"
    }, 
    "flowchart": { 
      "useMaxWidth": true, 
      "htmlLabels": true, 
      "curve": "basis" 
    } 
  } 
}%%
graph TB
    START[User Sign-In Request]
    
    subgraph "`**Signals (IF)**`"
        USER[User/Group<br/>Who?]
        APP[Application<br/>What?]
        DEVICE[Device State<br/>Compliant?]
        LOCATION[Location<br/>Trusted IP?]
        RISK[Risk Level<br/>Sign-in Risk?]
    end
    
    subgraph "`**Policy Engine**`"
        EVAL[Evaluate<br/>Conditions]
        DECISION{Access Decision}
    end
    
    subgraph "`**Controls (THEN)**`"
        BLOCK[Block Access]
        MFA[Require MFA]
        COMPLIANT[Require Compliant Device]
        APPROVED[Require Approved App]
        TOU[Accept Terms of Use]
        GRANT[Grant Access]
    end
    
    START --> USER
    START --> APP
    START --> DEVICE
    START --> LOCATION
    START --> RISK
    
    USER --> EVAL
    APP --> EVAL
    DEVICE --> EVAL
    LOCATION --> EVAL
    RISK --> EVAL
    
    EVAL --> DECISION
    
    DECISION -->|Block| BLOCK
    DECISION -->|Challenge| MFA
    DECISION -->|Challenge| COMPLIANT
    DECISION -->|Challenge| APPROVED
    DECISION -->|Challenge| TOU
    DECISION -->|Allow| GRANT
    
    style EVAL fill:#3b82f6,color:#fff
    style DECISION fill:#f59e0b,color:#fff
    style BLOCK fill:#ef4444,color:#fff
    style GRANT fill:#10b981,color:#fff
          </div>

          <h2>Policy Components</h2>

          <h3>üìã IF: Assignments (Conditions)</h3>
          <p>Define who and what the policy applies to:</p>

          <h4>üë• Users and Groups</h4>
          <ul>
            <li><strong>Include:</strong> All users, specific users, groups, directory roles</li>
            <li><strong>Exclude:</strong> Break-glass accounts, service accounts (always exclude emergency access!)</li>
            <li><strong>Guest Users:</strong> Can target internal vs external users separately</li>
          </ul>

          <h4>üì± Cloud Apps or Actions</h4>
          <ul>
            <li><strong>All Apps:</strong> Apply to every application</li>
            <li><strong>Specific Apps:</strong> Microsoft 365, Azure Portal, custom apps</li>
            <li><strong>User Actions:</strong> Register security info, register devices</li>
            <li><strong>Authentication Context:</strong> Step-up authentication for sensitive operations</li>
          </ul>

          <h4>üì° Conditions</h4>
          <ul>
            <li><strong>Sign-in Risk:</strong> Low, medium, high (requires Azure AD Identity Protection)</li>
            <li><strong>User Risk:</strong> Compromised credentials detected</li>
            <li><strong>Device Platforms:</strong> Windows, macOS, iOS, Android, Linux</li>
            <li><strong>Locations:</strong> Named locations, trusted IPs, country/region</li>
            <li><strong>Client Apps:</strong> Browser, mobile apps, desktop clients, legacy authentication</li>
            <li><strong>Device State:</strong> Hybrid joined, compliant (requires Intune)</li>
          </ul>

          <h3>‚öôÔ∏è THEN: Access Controls</h3>

          <h4>‚úÖ Grant Access (with requirements)</h4>
          <ul>
            <li><strong>Require MFA:</strong> Force multi-factor authentication</li>
            <li><strong>Require Compliant Device:</strong> Device must meet Intune compliance policies</li>
            <li><strong>Require Hybrid Joined Device:</strong> Device joined to on-prem and cloud AD</li>
            <li><strong>Require Approved Client App:</strong> Only allow specific mobile apps</li>
            <li><strong>Require App Protection Policy:</strong> Intune app protection required</li>
            <li><strong>Require Password Change:</strong> Force password reset</li>
            <li><strong>Require Terms of Use:</strong> User must accept legal terms</li>
            <li><strong>Multiple Controls:</strong> Require ALL or ANY of the selected controls</li>
          </ul>

          <h4>‚ùå Block Access</h4>
          <ul>
            <li><strong>Complete Block:</strong> Deny access entirely</li>
            <li><strong>Use Cases:</strong> High-risk users, legacy protocols, untrusted locations</li>
          </ul>

          <h4>üìä Session Controls</h4>
          <ul>
            <li><strong>Sign-in Frequency:</strong> Require re-authentication after period</li>
            <li><strong>Persistent Browser Session:</strong> Control "Stay signed in" option</li>
            <li><strong>App Enforced Restrictions:</strong> Limited access mode (SharePoint, Exchange)</li>
            <li><strong>Conditional Access App Control:</strong> Real-time monitoring with Defender for Cloud Apps</li>
          </ul>

          <h2>Common Policy Examples</h2>

          <h3>üîê Require MFA for All Users</h3>
          <pre data-language="text" class="syntax-highlighted"><code>IF:
  Users: All users (exclude break-glass accounts)
  Apps: All cloud apps
THEN:
  Grant access ‚Üí Require multi-factor authentication
</code></pre>

          <h3>üåç Block Access from Untrusted Countries</h3>
          <pre data-language="text" class="syntax-highlighted"><code>IF:
  Users: All users
  Apps: All cloud apps
  Location: Countries outside USA, Canada, UK
THEN:
  Block access
</code></pre>

          <h3>üíª Require Compliant Device for Admins</h3>
          <pre data-language="text" class="syntax-highlighted"><code>IF:
  Users: Directory role = Global Administrator
  Apps: Azure portal, Microsoft Admin Portals
THEN:
  Grant access ‚Üí Require ALL of:
    - Multi-factor authentication
    - Compliant device
    - Hybrid Azure AD joined device
</code></pre>

          <h3>‚ö†Ô∏è Block Legacy Authentication</h3>
          <pre data-language="text" class="syntax-highlighted"><code>IF:
  Users: All users (exclude service accounts)
  Apps: All cloud apps
  Client apps: Exchange ActiveSync, Other clients (legacy)
THEN:
  Block access
</code></pre>

          <h3>üéØ Step-Up MFA for Sensitive Apps</h3>
          <pre data-language="text" class="syntax-highlighted"><code>IF:
  Users: All users
  Apps: Finance app, HR system
THEN:
  Grant access ‚Üí Require multi-factor authentication
  Session: Sign-in frequency = Every time
</code></pre>

          <h2>Risk-Based Conditional Access</h2>
          <p>Leverage AI and machine learning to detect risky behavior (requires Azure AD Identity Protection):</p>

          <h3>üîç Sign-in Risk</h3>
          <p>Detected during authentication attempt:</p>
          <ul>
            <li><strong>Anonymous IP:</strong> Tor browser, anonymous VPN</li>
            <li><strong>Atypical Travel:</strong> Sign-in from geographically distant location</li>
            <li><strong>Malware-linked IP:</strong> Known botnet or malware IP address</li>
            <li><strong>Unfamiliar Properties:</strong> New device, browser, location</li>
            <li><strong>Password Spray:</strong> Multiple failed sign-ins detected</li>
          </ul>

          <h3>üë§ User Risk</h3>
          <p>Detected over time based on user behavior:</p>
          <ul>
            <li><strong>Leaked Credentials:</strong> Password found in dark web breach</li>
            <li><strong>Azure AD Threat Intelligence:</strong> Unusual user activity patterns</li>
            <li><strong>Anomalous User Activity:</strong> Behavioral anomalies detected</li>
          </ul>

          <h3>üìã Risk-Based Policy Example</h3>
          <pre data-language="text" class="syntax-highlighted"><code>IF:
  Users: All users
  Apps: All cloud apps
  Sign-in risk: Medium or High
THEN:
  Grant access ‚Üí Require multi-factor authentication

IF:
  Users: All users
  Apps: All cloud apps
  User risk: High
THEN:
  Grant access ‚Üí Require password change + MFA
</code></pre>

          <h2>Best Practices</h2>

          <div class="callout">
            <strong>‚ö†Ô∏è Critical Recommendations</strong><br />
            <ul style="margin-bottom: 0;">
              <li><strong>Break-Glass Accounts:</strong> Always exclude 2+ emergency admin accounts from CA policies</li>
              <li><strong>Report-Only Mode:</strong> Test policies in report-only before enforcement</li>
              <li><strong>Start Simple:</strong> Begin with MFA for all users, then layer additional controls</li>
              <li><strong>Monitor Impact:</strong> Review sign-in logs to understand policy effects</li>
              <li><strong>Document Policies:</strong> Maintain clear documentation of policy intent and scope</li>
            </ul>
          </div>

          <h3>üéØ Policy Strategy</h3>
          <ul>
            <li><strong>Baseline Protection:</strong> Start with security defaults or baseline policies</li>
            <li><strong>Layered Approach:</strong> Build policies progressively (all users ‚Üí admins ‚Üí sensitive apps)</li>
            <li><strong>User Experience:</strong> Balance security with usability‚Äîdon't over-challenge users</li>
            <li><strong>Testing:</strong> Use report-only mode for 1-2 weeks before enabling</li>
            <li><strong>Exclusions:</strong> Minimize exclusions; review regularly</li>
          </ul>

          <h3>üöÄ Rollout Plan</h3>
          <ol>
            <li><strong>Phase 1:</strong> Enable MFA for all administrators</li>
            <li><strong>Phase 2:</strong> Enable MFA for all users</li>
            <li><strong>Phase 3:</strong> Block legacy authentication</li>
            <li><strong>Phase 4:</strong> Require compliant devices for sensitive apps</li>
            <li><strong>Phase 5:</strong> Implement risk-based policies with Identity Protection</li>
            <li><strong>Phase 6:</strong> Add location-based and device-based restrictions</li>
          </ol>

          <h2>Licensing Requirements</h2>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Feature</th>
                <th>License Required</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Conditional Access Policies</td>
                <td>Azure AD Premium P1</td>
              </tr>
              <tr>
                <td>Sign-in Risk Detection</td>
                <td>Azure AD Premium P2</td>
              </tr>
              <tr>
                <td>User Risk Detection</td>
                <td>Azure AD Premium P2</td>
              </tr>
              <tr>
                <td>Report-Only Mode</td>
                <td>Azure AD Premium P1</td>
              </tr>
              <tr>
                <td>What If Tool</td>
                <td>Azure AD Premium P1</td>
              </tr>
            </tbody>
          </table>

          <div class="callout">
            <strong>üí° Free Alternative</strong><br />
            Organizations without Premium licenses can use <strong>Security Defaults</strong>‚Äîa free baseline security configuration that enables MFA for all users, blocks legacy auth, and requires MFA for privileged operations.
          </div>
        </section>

        <!-- Application Integration Section -->
        <section id="app-integration" role="article">
          <h1>Application Integration</h1>
          <span class="badge">app-registration</span>
          <span class="badge">integration</span>
          <span class="badge">spa</span>
          <span class="badge">web-api</span>
          <span class="badge">enterprise-apps</span>
          
          <p>Azure Entra ID enables secure authentication and authorization for all types of applications‚Äîfrom modern single-page apps to legacy enterprise applications.</p>

          <h2>Application Types</h2>

          <div class="mermaid">
%%{ init: { 
    "theme": "base", 
    "themeVariables": {
      "fontFamily": "Segoe UI"
    }, 
    "flowchart": { 
      "useMaxWidth": true, 
      "htmlLabels": true, 
      "curve": "basis" 
    } 
  } 
}%%
graph TB
    subgraph "`**Application Types**`"
        WEB[Web Applications<br/>Server-side]
        SPA[Single Page Apps<br/>Browser-based]
        MOBILE[Mobile & Desktop<br/>Native Apps]
        API[Web APIs<br/>Protected Resources]
        DAEMON[Daemon/Service<br/>Background Jobs]
    end
    
    subgraph "`**Azure Entra ID**`"
        APPREG[App Registration]
        TOKEN[Token Service]
    end
    
    subgraph "`**Authentication Flow**`"
        AUTH_CODE[Authorization Code<br/>+ Client Secret]
        PKCE[Authorization Code<br/>+ PKCE]
        CLIENT_CRED[Client Credentials<br/>Secret/Certificate]
    end
    
    WEB --> AUTH_CODE
    SPA --> PKCE
    MOBILE --> PKCE
    DAEMON --> CLIENT_CRED
    
    AUTH_CODE --> APPREG
    PKCE --> APPREG
    CLIENT_CRED --> APPREG
    
    APPREG --> TOKEN
    TOKEN --> API
    
    style WEB fill:#10b981,color:#fff
    style SPA fill:#3b82f6,color:#fff
    style MOBILE fill:#8b5cf6,color:#fff
    style API fill:#f59e0b,color:#fff
    style DAEMON fill:#ef4444,color:#fff
          </div>

          <h2>App Registration vs Enterprise Application</h2>
          
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Aspect</th>
                <th>App Registration</th>
                <th>Enterprise Application</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Purpose</strong></td>
                <td>Define how app integrates with Azure AD</td>
                <td>Control access and SSO for users in your org</td>
              </tr>
              <tr>
                <td><strong>Scope</strong></td>
                <td>Global blueprint (all tenants for multi-tenant)</td>
                <td>Tenant-specific instance</td>
              </tr>
              <tr>
                <td><strong>Configuration</strong></td>
                <td>Redirect URIs, API permissions, credentials</td>
                <td>User assignments, SSO settings, provisioning</td>
              </tr>
              <tr>
                <td><strong>When Created</strong></td>
                <td>When you register an app you develop</td>
                <td>Auto-created with app registration or gallery app</td>
              </tr>
              <tr>
                <td><strong>Relationship</strong></td>
                <td>1 app registration ‚Üí N enterprise apps (multi-tenant)</td>
                <td>Each tenant has its own enterprise app instance</td>
              </tr>
              <tr>
                <td><strong>Service Principal</strong></td>
                <td>Defines the app</td>
                <td>IS the service principal in the tenant</td>
              </tr>
            </tbody>
          </table>

          <h2>Registering an Application</h2>

          <h3>üìù Registration Steps</h3>
          <ol>
            <li><strong>Navigate:</strong> Azure Portal ‚Üí Entra ID ‚Üí App Registrations ‚Üí New Registration</li>
            <li><strong>Name:</strong> Provide application display name</li>
            <li><strong>Account Types:</strong> Choose supported account types (single/multi-tenant, personal accounts)</li>
            <li><strong>Redirect URI:</strong> Specify where tokens are sent after authentication</li>
            <li><strong>Register:</strong> Azure AD creates app registration and service principal</li>
          </ol>

          <h3>üîß Key Configuration Settings</h3>

          <h4>Supported Account Types</h4>
          <ul>
            <li><strong>Single tenant:</strong> Only accounts in your organization's directory</li>
            <li><strong>Multi-tenant:</strong> Accounts in any Azure AD directory</li>
            <li><strong>Multi-tenant + Personal:</strong> Any Azure AD or personal Microsoft accounts</li>
            <li><strong>Personal accounts only:</strong> Only personal Microsoft accounts (Xbox, Outlook.com)</li>
          </ul>

          <h4>Redirect URIs (Reply URLs)</h4>
          <ul>
            <li><strong>Purpose:</strong> Where Azure AD sends authentication responses</li>
            <li><strong>Web:</strong> Server-side apps (https://app.contoso.com/auth/callback)</li>
            <li><strong>SPA:</strong> Single-page apps (https://app.contoso.com)</li>
            <li><strong>Mobile/Desktop:</strong> Platform-specific URIs (http://localhost, custom schemes)</li>
            <li><strong>Wildcard:</strong> Limited support (http://localhost:* for development only)</li>
          </ul>

          <h4>Client Credentials (Secrets & Certificates)</h4>
          <ul>
            <li><strong>Client Secrets:</strong> Password-like strings, max 2-year expiration</li>
            <li><strong>Certificates:</strong> X.509 certificates, more secure, up to 3-year expiration</li>
            <li><strong>Federated Credentials:</strong> Workload identity federation (GitHub Actions, Kubernetes)</li>
            <li><strong>Best Practice:</strong> Use certificates for production, rotate regularly</li>
          </ul>

          <h2>Application Patterns</h2>

          <h3>üåê Web Application (Server-Side)</h3>
          <p>Traditional web apps that run on a server (ASP.NET, Node.js, Python):</p>

          <h4>Configuration</h4>
          <ul>
            <li><strong>Platform:</strong> Web</li>
            <li><strong>Flow:</strong> Authorization Code with client secret</li>
            <li><strong>Redirect URI:</strong> https://yourapp.com/signin-oidc</li>
            <li><strong>Implicit Grant:</strong> Disabled (not recommended)</li>
          </ul>

          <pre data-language="csharp" class="syntax-highlighted"><code>// ASP.NET Core Web App Example
services.AddAuthentication(OpenIdConnectDefaults.AuthenticationScheme)
    .AddMicrosoftIdentityWebApp(options =>
    {
        options.ClientId = "your-client-id";
        options.TenantId = "your-tenant-id";
        options.ClientSecret = "your-client-secret";
        options.Instance = "https://login.microsoftonline.com/";
    });
</code></pre>

          <h3>‚ö° Single Page Application (SPA)</h3>
          <p>JavaScript frameworks running in browser (React, Angular, Vue):</p>

          <h4>Configuration</h4>
          <ul>
            <li><strong>Platform:</strong> Single-page application</li>
            <li><strong>Flow:</strong> Authorization Code with PKCE (no client secret)</li>
            <li><strong>Redirect URI:</strong> https://yourapp.com, http://localhost:3000</li>
            <li><strong>Implicit Grant:</strong> Disabled (deprecated, use PKCE)</li>
          </ul>

          <pre data-language="javascript" class="syntax-highlighted"><code>// React with MSAL.js Example
const msalConfig = {
    auth: {
        clientId: "your-client-id",
        authority: "https://login.microsoftonline.com/your-tenant-id",
        redirectUri: "http://localhost:3000",
    }
};

const msalInstance = new PublicClientApplication(msalConfig);

// Sign in
const loginRequest = {
    scopes: ["User.Read"]
};
await msalInstance.loginPopup(loginRequest);
</code></pre>

          <h3>üì± Mobile & Desktop Applications</h3>
          <p>Native applications on iOS, Android, Windows, macOS:</p>

          <h4>Configuration</h4>
          <ul>
            <li><strong>Platform:</strong> Mobile and desktop applications</li>
            <li><strong>Flow:</strong> Authorization Code with PKCE</li>
            <li><strong>Redirect URI:</strong> Platform-specific (msauth://callback, http://localhost)</li>
            <li><strong>Broker Support:</strong> Use system browser or authentication broker (Authenticator app)</li>
          </ul>

          <pre data-language="swift" class="syntax-highlighted"><code>// iOS Swift with MSAL
let config = MSALPublicClientApplicationConfig(clientId: "your-client-id")
let application = try MSALPublicClientApplication(configuration: config)

let parameters = MSALInteractiveTokenParameters(scopes: ["User.Read"])
application.acquireToken(with: parameters) { (result, error) in
    // Handle result
}
</code></pre>

          <h3>üîå Web API (Protected Resource)</h3>
          <p>Backend APIs that validate access tokens:</p>

          <h4>Configuration</h4>
          <ul>
            <li><strong>Expose an API:</strong> Define Application ID URI (api://your-api-id)</li>
            <li><strong>Scopes:</strong> Create custom scopes (e.g., access_as_user)</li>
            <li><strong>Validation:</strong> Verify token signature, audience, issuer, expiration</li>
            <li><strong>Authorization:</strong> Check scopes and roles in token claims</li>
          </ul>

          <pre data-language="csharp" class="syntax-highlighted"><code>// ASP.NET Core Web API Example
services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme)
    .AddMicrosoftIdentityWebApi(options =>
    {
        options.Audience = "api://your-api-id";
        options.Instance = "https://login.microsoftonline.com/";
        options.TenantId = "your-tenant-id";
    }, options => { });

// Protect endpoints
[Authorize]
[RequiredScope("access_as_user")]
public IActionResult Get()
{
    return Ok(data);
}
</code></pre>

          <h3>ü§ñ Daemon/Service Application</h3>
          <p>Background services, scheduled jobs, automation without user interaction:</p>

          <h4>Configuration</h4>
          <ul>
            <li><strong>Platform:</strong> Web (confidential client)</li>
            <li><strong>Flow:</strong> Client Credentials</li>
            <li><strong>Credentials:</strong> Client secret or certificate</li>
            <li><strong>Permissions:</strong> Application permissions (not delegated)</li>
            <li><strong>No Redirect URI:</strong> Not needed for client credentials flow</li>
          </ul>

          <pre data-language="python" class="syntax-highlighted"><code># Python Daemon Example
from msal import ConfidentialClientApplication

app = ConfidentialClientApplication(
    client_id="your-client-id",
    client_credential="your-client-secret",
    authority="https://login.microsoftonline.com/your-tenant-id"
)

# Acquire token for Microsoft Graph
result = app.acquire_token_for_client(scopes=["https://graph.microsoft.com/.default"])
access_token = result["access_token"]
</code></pre>

          <h2>Enterprise Applications (Gallery Apps)</h2>
          <p>Pre-integrated SaaS applications with SSO configured:</p>

          <h3>üéØ Adding Gallery Apps</h3>
          <ol>
            <li>Navigate to Entra ID ‚Üí Enterprise Applications ‚Üí New Application</li>
            <li>Browse gallery (7,000+ apps: Salesforce, ServiceNow, AWS, etc.)</li>
            <li>Select app and configure SSO (SAML, OIDC, or password-based)</li>
            <li>Assign users/groups who can access the application</li>
            <li>Configure provisioning (optional) to sync users automatically</li>
          </ol>

          <h3>‚úÖ SSO Methods for Enterprise Apps</h3>
          <ul>
            <li><strong>SAML-based:</strong> Most common for enterprise SaaS apps</li>
            <li><strong>OIDC/OAuth:</strong> Modern apps using OpenID Connect</li>
            <li><strong>Password-based:</strong> Azure AD auto-fills credentials (requires browser extension)</li>
            <li><strong>Linked:</strong> Just provide a link (no SSO)</li>
            <li><strong>Header-based:</strong> Use Application Proxy for header-based auth</li>
          </ul>

          <h2>Application Proxy</h2>
          <p>Publish on-premises web apps externally without VPN:</p>

          <h3>üîí How It Works</h3>
          <ol>
            <li>Install lightweight connector on on-premises server</li>
            <li>Connector establishes outbound connection to Azure AD</li>
            <li>Publish internal app with external URL (e.g., https://intranet-contoso.msappproxy.net)</li>
            <li>Users access via Azure AD authentication</li>
            <li>Connector proxies requests to internal application</li>
          </ol>

          <h3>‚úÖ Benefits</h3>
          <ul>
            <li>No VPN required‚Äîaccess from anywhere</li>
            <li>No inbound firewall rules</li>
            <li>Pre-authentication with Azure AD</li>
            <li>Conditional access policies apply</li>
            <li>Kerberos Constrained Delegation for SSO</li>
          </ul>

          <h2>Microsoft Authentication Library (MSAL)</h2>
          <p>Official libraries for integrating Azure AD authentication:</p>

          <h3>üìö MSAL Features</h3>
          <ul>
            <li><strong>Token Management:</strong> Acquire, cache, and refresh tokens automatically</li>
            <li><strong>Multiple Flows:</strong> Interactive, silent, client credentials, device code</li>
            <li><strong>Cross-Platform:</strong> JavaScript, .NET, Python, Java, iOS, Android</li>
            <li><strong>Token Cache:</strong> Secure in-memory or persistent caching</li>
            <li><strong>Account Management:</strong> Handle multiple accounts and tenants</li>
            <li><strong>Best Practices:</strong> Built-in PKCE, token validation, error handling</li>
          </ul>

          <h3>üåê MSAL Libraries</h3>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Platform</th>
                <th>Library</th>
                <th>Package</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>JavaScript / React / Angular</td>
                <td>MSAL.js 2.x</td>
                <td>@azure/msal-browser, @azure/msal-react, @azure/msal-angular</td>
              </tr>
              <tr>
                <td>.NET / ASP.NET Core</td>
                <td>MSAL.NET</td>
                <td>Microsoft.Identity.Client, Microsoft.Identity.Web</td>
              </tr>
              <tr>
                <td>Python</td>
                <td>MSAL Python</td>
                <td>msal</td>
              </tr>
              <tr>
                <td>Java</td>
                <td>MSAL Java</td>
                <td>msal4j</td>
              </tr>
              <tr>
                <td>iOS / macOS</td>
                <td>MSAL iOS</td>
                <td>MSAL</td>
              </tr>
              <tr>
                <td>Android</td>
                <td>MSAL Android</td>
                <td>com.microsoft.identity.client</td>
              </tr>
            </tbody>
          </table>

          <h2>Best Practices</h2>

          <div class="callout">
            <strong>üîí Security Best Practices</strong><br />
            <ul style="margin-bottom: 0;">
              <li><strong>Use MSAL:</strong> Always use official Microsoft libraries (not custom implementations)</li>
              <li><strong>PKCE Required:</strong> SPAs and mobile apps must use PKCE</li>
              <li><strong>No Implicit Flow:</strong> Deprecated‚Äîuse Authorization Code with PKCE</li>
              <li><strong>Secure Storage:</strong> Never store tokens in localStorage (use httpOnly cookies or session storage)</li>
              <li><strong>Token Validation:</strong> Always validate signature, audience, issuer, expiration</li>
              <li><strong>Least Privilege:</strong> Request only the permissions your app needs</li>
              <li><strong>Managed Identity:</strong> Use for Azure-hosted apps instead of service principals</li>
            </ul>
          </div>

          <h3>üéØ Development Recommendations</h3>
          <ul>
            <li><strong>Separate Registrations:</strong> Use different app registrations for dev, staging, production</li>
            <li><strong>Test Tenants:</strong> Create a test Azure AD tenant for development</li>
            <li><strong>Monitor Logs:</strong> Enable sign-in logs to debug authentication issues</li>
            <li><strong>Handle Errors:</strong> Implement proper error handling and retry logic</li>
            <li><strong>Silent Token Refresh:</strong> Use refresh tokens or cached tokens before prompting user</li>
          </ul>
        </section>

        <!-- Permissions & Consent Section -->
        <section id="permissions" role="article">
          <h1>Permissions & Consent</h1>
          <span class="badge">permissions</span>
          <span class="badge">consent</span>
          <span class="badge">scopes</span>
          <span class="badge">roles</span>
          <span class="badge">delegated</span>
          <span class="badge">application</span>
          
          <p>Understanding permissions and consent is crucial for secure application integration with Azure Entra ID and Microsoft APIs like Microsoft Graph.</p>

          <h2>Permission Types</h2>

          <div class="mermaid">
%%{ init: { 
    "theme": "base", 
    "themeVariables": {
      "fontFamily": "Segoe UI"
    }, 
    "flowchart": { 
      "useMaxWidth": true, 
      "htmlLabels": true, 
      "curve": "basis" 
    } 
  } 
}%%
graph TB
    subgraph "`**Delegated Permissions**`"
        USER[Signed-in User]
        APP1[Application]
        CONTEXT1[Acts on behalf of user]
    end
    
    subgraph "`**Application Permissions**`"
        APP2[Application]
        NOUSER[No user context]
        CONTEXT2[Acts with app identity]
    end
    
    subgraph "`**Microsoft Graph API**`"
        GRAPH[Graph API]
    end
    
    USER --> APP1
    APP1 --> CONTEXT1
    CONTEXT1 --> GRAPH
    
    APP2 --> CONTEXT2
    NOUSER --> APP2
    CONTEXT2 --> GRAPH
    
    style USER fill:#10b981,color:#fff
    style APP1 fill:#3b82f6,color:#fff
    style APP2 fill:#f59e0b,color:#fff
    style GRAPH fill:#8b5cf6,color:#fff
          </div>

          <table class="table table-striped">
            <thead>
              <tr>
                <th>Aspect</th>
                <th>Delegated Permissions</th>
                <th>Application Permissions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>User Context</strong></td>
                <td>Requires signed-in user</td>
                <td>No user‚Äîapp acts alone</td>
              </tr>
              <tr>
                <td><strong>Effective Permissions</strong></td>
                <td>Least privilege of user + app</td>
                <td>Full permission granted to app</td>
              </tr>
              <tr>
                <td><strong>Consent Required</strong></td>
                <td>User or admin consent</td>
                <td>Admin consent only</td>
              </tr>
              <tr>
                <td><strong>OAuth Flow</strong></td>
                <td>Authorization code, implicit</td>
                <td>Client credentials</td>
              </tr>
              <tr>
                <td><strong>Use Case</strong></td>
                <td>Interactive apps (web, mobile, SPA)</td>
                <td>Daemons, background services, automation</td>
              </tr>
              <tr>
                <td><strong>Example</strong></td>
                <td>User.Read, Mail.Send, Files.ReadWrite</td>
                <td>User.Read.All, Mail.Read.All, Directory.ReadWrite.All</td>
              </tr>
            </tbody>
          </table>

          <h2>Delegated Permissions (Scopes)</h2>
          <p>App acts on behalf of a signed-in user‚Äîeffective permissions are intersection of app + user permissions:</p>

          <h3>üìã How It Works</h3>
          <ol>
            <li>App requests specific scopes during sign-in (e.g., User.Read, Mail.Send)</li>
            <li>User (or admin) consents to grant those permissions</li>
            <li>Token contains scopes (scp claim) the app can use</li>
            <li>API checks if token has required scope</li>
            <li>Effective access = MIN(user permissions, app permissions)</li>
          </ol>

          <h3>‚úÖ Example Scenarios</h3>
          <ul>
            <li><strong>User.Read:</strong> App can read basic profile of signed-in user</li>
            <li><strong>Mail.Send:</strong> App can send email as the signed-in user</li>
            <li><strong>Files.ReadWrite:</strong> App can read/write user's OneDrive files</li>
            <li><strong>Calendars.Read:</strong> App can read user's calendar</li>
          </ul>

          <div class="callout">
            <strong>üîí Least Privilege in Action</strong><br />
            If a standard user (not admin) signs in to an app with User.ReadWrite.All delegated permission, the app can only read/write that user's profile‚Äînot other users‚Äîbecause the user doesn't have admin rights.
          </div>

          <h2>Application Permissions</h2>
          <p>App acts with its own identity‚Äîno user context, requires admin consent:</p>

          <h3>ü§ñ How It Works</h3>
          <ol>
            <li>Admin grants application permissions to the app (pre-consented)</li>
            <li>App authenticates using client credentials (secret or certificate)</li>
            <li>Token contains roles (roles claim) granted to the app</li>
            <li>App has full permission regardless of user</li>
            <li>No user context‚Äîapp operates as itself</li>
          </ol>

          <h3>‚úÖ Example Scenarios</h3>
          <ul>
            <li><strong>User.Read.All:</strong> App can read all users in the directory</li>
            <li><strong>Mail.Read.All:</strong> App can read mail from all mailboxes</li>
            <li><strong>Directory.ReadWrite.All:</strong> App can modify directory objects</li>
            <li><strong>Sites.ReadWrite.All:</strong> App can read/write all SharePoint sites</li>
          </ul>

          <h2>Consent Framework</h2>

          <h3>üë§ User Consent</h3>
          <p>Individual users grant permission for low-privilege delegated permissions:</p>
          <ul>
            <li><strong>Enabled By Default:</strong> For low-risk permissions (User.Read, profile, openid, offline_access)</li>
            <li><strong>Admin Control:</strong> Admins can disable user consent or limit to specific apps</li>
            <li><strong>Consent Prompt:</strong> User sees what permissions app is requesting</li>
            <li><strong>Per-User:</strong> Each user consents individually</li>
          </ul>

          <h3>üë®‚Äçüíº Admin Consent</h3>
          <p>Admin grants permission on behalf of entire organization:</p>
          <ul>
            <li><strong>Required For:</strong> Application permissions, high-privilege delegated permissions</li>
            <li><strong>Org-Wide:</strong> All users in organization can use the app</li>
            <li><strong>Admin Roles:</strong> Global Administrator, Cloud Application Administrator, Application Administrator</li>
            <li><strong>Consent URL:</strong> Can share pre-consent URL with admin</li>
          </ul>

          <h3>üîÑ Consent Flow</h3>
          <div class="mermaid">
sequenceDiagram
    participant User
    participant App
    participant EntraID as Azure Entra ID
    participant Admin
    participant API as Microsoft Graph

    User->>App: 1. Access app
    App->>EntraID: 2. Redirect to login with scopes
    EntraID->>User: 3. Show consent dialog
    
    alt User can consent
        User->>EntraID: 4. Grant consent
        EntraID->>App: 5. Return authorization code
    else Requires admin consent
        EntraID->>User: 4. "Admin approval required"
        User->>Admin: 5. Request admin approval
        Admin->>EntraID: 6. Admin grants consent
        EntraID->>App: 7. All users can now use app
    end
    
    App->>EntraID: 8. Exchange code for token
    EntraID->>App: 9. Access token with permissions
    App->>API: 10. Call API with token
    API->>App: 11. Return data
          </div>

          <h2>Microsoft Graph Permissions</h2>
          <p>Microsoft Graph is the gateway to data in Microsoft 365, and permissions control access:</p>

          <h3>üìä Common Permission Scopes</h3>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Scenario</th>
                <th>Delegated</th>
                <th>Application</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Read user profile</strong></td>
                <td>User.Read</td>
                <td>User.Read.All</td>
              </tr>
              <tr>
                <td><strong>Read all users</strong></td>
                <td>User.ReadBasic.All</td>
                <td>User.Read.All</td>
              </tr>
              <tr>
                <td><strong>Send email</strong></td>
                <td>Mail.Send</td>
                <td>Mail.Send</td>
              </tr>
              <tr>
                <td><strong>Read user's files</strong></td>
                <td>Files.Read</td>
                <td>Files.Read.All</td>
              </tr>
              <tr>
                <td><strong>Read calendar</strong></td>
                <td>Calendars.Read</td>
                <td>Calendars.Read</td>
              </tr>
              <tr>
                <td><strong>Manage groups</strong></td>
                <td>Group.ReadWrite.All</td>
                <td>Group.ReadWrite.All</td>
              </tr>
              <tr>
                <td><strong>Access directory</strong></td>
                <td>Directory.Read.All</td>
                <td>Directory.Read.All</td>
              </tr>
            </tbody>
          </table>

          <h3>üîç Permission Naming Convention</h3>
          <pre data-language="text" class="syntax-highlighted"><code>Pattern: {Resource}.{Operation}.{Constraint}

Examples:
  User.Read              ‚Üí Read the signed-in user's profile
  User.Read.All          ‚Üí Read all users' profiles
  Mail.Send              ‚Üí Send mail as the signed-in user
  Mail.ReadWrite         ‚Üí Read and write signed-in user's mail
  Files.ReadWrite.All    ‚Üí Read/write all files user can access
  Directory.ReadWrite.All ‚Üí Read/write directory objects
</code></pre>

          <h2>App Roles</h2>
          <p>Define custom roles within your application for role-based access control:</p>

          <h3>üé≠ How App Roles Work</h3>
          <ol>
            <li>Define roles in app manifest (Admin, User, Reader, etc.)</li>
            <li>Assign users/groups to roles in Enterprise Application</li>
            <li>Roles appear in token (roles claim)</li>
            <li>Application checks roles claim for authorization</li>
          </ol>

          <h3>üìã App Manifest Example</h3>
          <pre data-language="json" class="syntax-highlighted"><code>{
  <span class="json-key">"appRoles"</span>: [
    {
      <span class="json-key">"allowedMemberTypes"</span>: [<span class="json-string">"User"</span>],
      <span class="json-key">"description"</span>: <span class="json-string">"Administrators have full access"</span>,
      <span class="json-key">"displayName"</span>: <span class="json-string">"Admin"</span>,
      <span class="json-key">"id"</span>: <span class="json-string">"unique-guid-1"</span>,
      <span class="json-key">"isEnabled"</span>: <span class="json-boolean">true</span>,
      <span class="json-key">"value"</span>: <span class="json-string">"Admin"</span>
    },
    {
      <span class="json-key">"allowedMemberTypes"</span>: [<span class="json-string">"User"</span>],
      <span class="json-key">"description"</span>: <span class="json-string">"Standard users with read access"</span>,
      <span class="json-key">"displayName"</span>: <span class="json-string">"User"</span>,
      <span class="json-key">"id"</span>: <span class="json-string">"unique-guid-2"</span>,
      <span class="json-key">"isEnabled"</span>: <span class="json-boolean">true</span>,
      <span class="json-key">"value"</span>: <span class="json-string">"User"</span>
    }
  ]
}
</code></pre>

          <h3>üîí Authorization in Code</h3>
          <pre data-language="csharp" class="syntax-highlighted"><code>// ASP.NET Core - Check app roles
[Authorize(Roles = "Admin")]
public IActionResult AdminOnly()
{
    return View();
}

[Authorize(Roles = "Admin,User")]
public IActionResult UserAccess()
{
    return View();
}
</code></pre>

          <h2>Admin Consent Workflow</h2>
          <p>Request admin consent in a controlled, auditable manner:</p>

          <h3>‚öôÔ∏è Enable Admin Consent Workflow</h3>
          <ol>
            <li>Navigate to Entra ID ‚Üí User Settings ‚Üí Enterprise Applications</li>
            <li>Enable "Users can request admin consent to apps they are unable to consent to"</li>
            <li>Configure reviewers (who can approve requests)</li>
            <li>Set expiration for consent requests</li>
          </ol>

          <h3>üìù How It Works</h3>
          <ol>
            <li>User tries to access app requiring admin consent</li>
            <li>User sees "Approval required" and clicks "Request approval"</li>
            <li>User provides justification for needing the app</li>
            <li>Designated reviewers receive notification</li>
            <li>Admin reviews request and approves/denies</li>
            <li>User notified of decision</li>
          </ol>

          <h2>Permissions Best Practices</h2>

          <div class="callout">
            <strong>üîí Security Recommendations</strong><br />
            <ul style="margin-bottom: 0;">
              <li><strong>Least Privilege:</strong> Request only permissions your app needs</li>
              <li><strong>Just-in-Time:</strong> Request permissions when needed, not all at sign-in</li>
              <li><strong>Prefer Delegated:</strong> Use delegated permissions with user context when possible</li>
              <li><strong>Audit Regularly:</strong> Review granted permissions quarterly</li>
              <li><strong>Document Purpose:</strong> Clearly explain why each permission is needed</li>
              <li><strong>Incremental Consent:</strong> Request basic permissions first, additional permissions later</li>
              <li><strong>Review App Roles:</strong> Periodically review role assignments</li>
            </ul>
          </div>

          <h3>üéØ Development Recommendations</h3>
          <ul>
            <li><strong>Test Consent:</strong> Test consent flows with both user and admin accounts</li>
            <li><strong>Handle Denial:</strong> Gracefully handle consent denial by users</li>
            <li><strong>Consent Documentation:</strong> Provide clear documentation on why permissions are needed</li>
            <li><strong>Minimize Scope:</strong> .ReadBasic over .Read.All, .Read over .ReadWrite</li>
            <li><strong>Monitor Changes:</strong> Set up alerts for permission changes in production apps</li>
          </ul>

          <h2>Conditional Access & Permissions</h2>
          <p>Permissions can trigger conditional access policies:</p>
          <ul>
            <li><strong>Authentication Context:</strong> Require MFA for sensitive API calls</li>
            <li><strong>Step-Up Auth:</strong> Re-authenticate for high-privilege operations</li>
            <li><strong>Claims Challenge:</strong> Request additional claims at runtime</li>
            <li><strong>Continuous Access Evaluation:</strong> Revoke tokens immediately on policy changes</li>
          </ul>
        </section>

        <!-- Identity Governance Section -->
        <section id="governance" role="article">
          <h1>Identity Governance</h1>
          <span class="badge">governance</span>
          <span class="badge">lifecycle</span>
          <span class="badge">access-reviews</span>
          <span class="badge">entitlement</span>
          <span class="badge">pim</span>
          
          <p>Identity Governance ensures that the right people have the right access to the right resources at the right time‚Äîwhile maintaining security, compliance, and audit requirements.</p>

          <div class="callout">
            <strong>üéØ Core Purpose</strong><br />
            Identity Governance automates identity lifecycle management, access reviews, and privileged access management to reduce risk, ensure compliance, and improve operational efficiency.
          </div>

          <h2>Identity Governance Components</h2>

          <div class="mermaid">
%%{ init: { 
    "theme": "base", 
    "themeVariables": {
      "fontFamily": "Segoe UI"
    }, 
    "flowchart": { 
      "useMaxWidth": true, 
      "htmlLabels": true, 
      "curve": "basis" 
    } 
  } 
}%%
graph TB
    subgraph "`**Identity Lifecycle**`"
        JOINER[New Employee<br/>Joiner]
        MOVER[Role Change<br/>Mover]
        LEAVER[Termination<br/>Leaver]
    end
    
    subgraph "`**Governance Features**`"
        ELM[Entitlement<br/>Management]
        ACCESS_REV[Access<br/>Reviews]
        PIM[Privileged Identity<br/>Management]
        LIFECYCLE[Lifecycle<br/>Workflows]
    end
    
    subgraph "`**Resources**`"
        APPS[Applications]
        GROUPS[Groups]
        TEAMS[Teams]
        SHAREPOINT[SharePoint]
        AZURE[Azure Resources]
    end
    
    JOINER --> LIFECYCLE
    MOVER --> LIFECYCLE
    LEAVER --> LIFECYCLE
    
    LIFECYCLE --> ELM
    ELM --> ACCESS_REV
    ACCESS_REV --> PIM
    
    ELM --> APPS
    ELM --> GROUPS
    ELM --> TEAMS
    ELM --> SHAREPOINT
    
    PIM --> AZURE
    
    style ELM fill:#10b981,color:#fff
    style ACCESS_REV fill:#3b82f6,color:#fff
    style PIM fill:#ef4444,color:#fff
    style LIFECYCLE fill:#8b5cf6,color:#fff
          </div>

          <h2>1Ô∏è‚É£ Entitlement Management</h2>
          <p>Self-service access request and approval workflows for apps, groups, Teams, and SharePoint:</p>

          <h3>üì¶ Access Packages</h3>
          <p>Bundle of resources users can request together:</p>
          <ul>
            <li><strong>Definition:</strong> Collection of groups, apps, Teams, SharePoint sites</li>
            <li><strong>Policies:</strong> Who can request, approval workflow, access duration</li>
            <li><strong>Self-Service:</strong> Users request access via My Access portal</li>
            <li><strong>Automatic Expiration:</strong> Access expires after defined period</li>
            <li><strong>Recertification:</strong> Periodic reviews to ensure continued need</li>
          </ul>

          <h3>üîÑ Access Package Workflow</h3>
          <div class="mermaid">
sequenceDiagram
    participant User
    participant MyAccess as My Access Portal
    participant Approver
    participant EntraID as Azure Entra ID
    participant Resources

    User->>MyAccess: 1. Browse available access packages
    User->>MyAccess: 2. Request "Sales Team Access"
    MyAccess->>Approver: 3. Send approval request
    Approver->>MyAccess: 4. Review & approve request
    MyAccess->>EntraID: 5. Process approval
    EntraID->>Resources: 6. Grant access (add to groups, assign apps)
    EntraID->>User: 7. Notify access granted
    
    Note over EntraID: Access expires after 90 days
    
    EntraID->>User: 8. Request recertification
    User->>MyAccess: 9. Justify continued access
    Approver->>MyAccess: 10. Re-approve or deny
          </div>

          <h3>‚öôÔ∏è Access Package Components</h3>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Component</th>
                <th>Purpose</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Resources</strong></td>
                <td>What user gets access to</td>
                <td>Sales group, Salesforce app, Teams team</td>
              </tr>
              <tr>
                <td><strong>Policies</strong></td>
                <td>Who can request and how</td>
                <td>All employees, manager approval required</td>
              </tr>
              <tr>
                <td><strong>Approval Stages</strong></td>
                <td>Multi-stage approval workflow</td>
                <td>Manager ‚Üí Resource owner ‚Üí Security team</td>
              </tr>
              <tr>
                <td><strong>Lifecycle</strong></td>
                <td>When access expires</td>
                <td>90 days, then review required</td>
              </tr>
              <tr>
                <td><strong>Connected Organizations</strong></td>
                <td>External users who can request</td>
                <td>Partner organizations, vendors</td>
              </tr>
            </tbody>
          </table>

          <h3>üåê My Access Portal</h3>
          <p>Self-service portal for users to manage their access:</p>
          <ul>
            <li><strong>URL:</strong> https://myaccess.microsoft.com</li>
            <li><strong>Request Access:</strong> Browse and request access packages</li>
            <li><strong>View Access:</strong> See current access and expiration dates</li>
            <li><strong>Extend Access:</strong> Request renewal before expiration</li>
            <li><strong>Approvals:</strong> Approve/deny access requests if you're an approver</li>
          </ul>

          <h2>2Ô∏è‚É£ Access Reviews</h2>
          <p>Periodic attestation to ensure users still need their access:</p>

          <h3>üîç Review Types</h3>
          <ul>
            <li><strong>Group Membership:</strong> Review who belongs to security/M365 groups</li>
            <li><strong>Application Access:</strong> Review who has access to specific apps</li>
            <li><strong>Azure Resource Roles:</strong> Review Azure RBAC role assignments</li>
            <li><strong>Azure AD Roles:</strong> Review directory role assignments (Global Admin, etc.)</li>
            <li><strong>Access Package Assignments:</strong> Review access package membership</li>
          </ul>

          <h3>üìã Review Configuration</h3>
          <ul>
            <li><strong>Frequency:</strong> One-time, weekly, monthly, quarterly, annually</li>
            <li><strong>Reviewers:</strong> Managers, resource owners, selected reviewers, self-review</li>
            <li><strong>Duration:</strong> How long reviewers have to complete (e.g., 30 days)</li>
            <li><strong>Auto-Apply:</strong> Automatically remove access if denied or no response</li>
            <li><strong>Notifications:</strong> Email reminders to reviewers</li>
            <li><strong>Recommendations:</strong> AI-powered recommendations based on sign-in activity</li>
          </ul>

          <h3>üéØ Review Workflow</h3>
          <ol>
            <li><strong>Create Review:</strong> Admin sets up review schedule and scope</li>
            <li><strong>Launch Review:</strong> Reviewers receive notification</li>
            <li><strong>Review Access:</strong> Reviewers approve or deny each user</li>
            <li><strong>Recommendations:</strong> System suggests based on last sign-in, MFA status</li>
            <li><strong>Complete Review:</strong> Admin applies results (remove access, leave as-is)</li>
            <li><strong>Audit Trail:</strong> Complete history of decisions and reasoning</li>
          </ol>

          <h3>üìä Review Insights</h3>
          <pre data-language="text" class="syntax-highlighted"><code>Example Recommendations:

‚úÖ Approve: User signed in within last 30 days
‚ö†Ô∏è Deny: User hasn't signed in for 90+ days
‚ö†Ô∏è Deny: User missing MFA enrollment
‚úÖ Approve: User manager confirmed need for access
</code></pre>

          <h2>3Ô∏è‚É£ Privileged Identity Management (PIM)</h2>
          <p>Just-in-time privileged access to Azure AD and Azure resources:</p>

          <h3>üîê Core Concepts</h3>
          <ul>
            <li><strong>Eligible Assignment:</strong> User can activate role when needed</li>
            <li><strong>Active Assignment:</strong> User has permanent role (not recommended)</li>
            <li><strong>Time-Bound:</strong> Activate for limited duration (1-8 hours)</li>
            <li><strong>Approval Required:</strong> Optional approval before activation</li>
            <li><strong>MFA Required:</strong> Enforce MFA at activation time</li>
            <li><strong>Justification:</strong> Require business reason for activation</li>
          </ul>

          <h3>üîÑ PIM Activation Flow</h3>
          <div class="mermaid">
sequenceDiagram
    participant User
    participant PIM as PIM Portal
    participant Approver
    participant EntraID as Azure Entra ID
    participant Resources

    User->>PIM: 1. Request to activate "Global Admin" role
    User->>PIM: 2. Provide justification & ticket number
    PIM->>User: 3. Challenge for MFA
    User->>PIM: 4. Complete MFA
    
    alt Approval Required
        PIM->>Approver: 5. Send activation request
        Approver->>PIM: 6. Approve activation
    end
    
    PIM->>EntraID: 7. Grant role temporarily
    EntraID->>User: 8. Role active for 4 hours
    User->>Resources: 9. Perform admin tasks
    
    Note over PIM: After 4 hours
    
    PIM->>EntraID: 10. Automatically revoke role
    EntraID->>User: 11. Notify role deactivated
          </div>

          <h3>‚öôÔ∏è PIM Role Settings</h3>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Setting</th>
                <th>Purpose</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Activation Duration</strong></td>
                <td>How long role is active</td>
                <td>1-8 hours (default: 8 hours)</td>
              </tr>
              <tr>
                <td><strong>Require Approval</strong></td>
                <td>Approval before activation</td>
                <td>Yes for Global Admin, No for Helpdesk Admin</td>
              </tr>
              <tr>
                <td><strong>Require MFA</strong></td>
                <td>Force MFA on activation</td>
                <td>Always for privileged roles</td>
              </tr>
              <tr>
                <td><strong>Require Justification</strong></td>
                <td>Business reason required</td>
                <td>"Incident INC123456" or "User account unlock"</td>
              </tr>
              <tr>
                <td><strong>Require Ticket</strong></td>
                <td>Reference number from ITSM</td>
                <td>ServiceNow ticket number</td>
              </tr>
              <tr>
                <td><strong>Notification</strong></td>
                <td>Alert on activation</td>
                <td>Email security team when Global Admin activates</td>
              </tr>
            </tbody>
          </table>

          <h3>‚úÖ PIM Benefits</h3>
          <ul>
            <li><strong>Zero Standing Access:</strong> No permanent admin rights</li>
            <li><strong>Time-Limited:</strong> Access automatically expires</li>
            <li><strong>Audit Trail:</strong> Complete history of who activated what and when</li>
            <li><strong>Reduced Risk:</strong> Compromised credentials don't have standing admin access</li>
            <li><strong>Compliance:</strong> Meet least-privilege requirements</li>
            <li><strong>Alerting:</strong> Detect suspicious activation patterns</li>
          </ul>

          <h3>üì± PIM for Azure Resources</h3>
          <p>Manage Azure RBAC roles with PIM:</p>
          <ul>
            <li><strong>Scope:</strong> Subscription, resource group, or individual resources</li>
            <li><strong>Roles:</strong> Owner, Contributor, Reader, custom roles</li>
            <li><strong>Activation:</strong> Same workflow as Azure AD roles</li>
            <li><strong>Use Cases:</strong> Production access, emergency access, temporary privileges</li>
          </ul>

          <h2>4Ô∏è‚É£ Lifecycle Workflows</h2>
          <p>Automate joiner, mover, leaver processes:</p>

          <h3>üëî Employee Lifecycle Stages</h3>

          <h4>üéâ Joiner (New Employee)</h4>
          <ul>
            <li>Create user account (from HR system)</li>
            <li>Assign licenses (Microsoft 365, Teams)</li>
            <li>Add to groups (department, location)</li>
            <li>Send welcome email with setup instructions</li>
            <li>Create Teams account and mailbox</li>
            <li>Assign temporary access package</li>
            <li>Schedule tasks for manager (assign equipment, onboarding)</li>
          </ul>

          <h4>üîÑ Mover (Role Change)</h4>
          <ul>
            <li>Remove from old department groups</li>
            <li>Add to new department groups</li>
            <li>Update access packages</li>
            <li>Notify manager of access changes</li>
            <li>Trigger access reviews for sensitive access</li>
          </ul>

          <h4>üëã Leaver (Termination)</h4>
          <ul>
            <li>Disable account immediately</li>
            <li>Revoke all access (apps, groups, resources)</li>
            <li>Remove from all Teams</li>
            <li>Delete account after retention period (30-90 days)</li>
            <li>Transfer OneDrive and mailbox to manager</li>
            <li>Generate access report for audit</li>
            <li>Remove MFA methods and devices</li>
          </ul>

          <h3>‚öôÔ∏è Workflow Templates</h3>
          <pre data-language="text" class="syntax-highlighted"><code>Pre-Built Templates:

üì• Onboard Pre-Hire
  - Send welcome email 7 days before start date
  - Create account on first day
  - Assign temporary access password

üéØ Onboard New Hire
  - Add to groups
  - Assign licenses
  - Generate Temporary Access Pass (TAP)
  - Send welcome email

üöÄ Post-Onboarding
  - Request manager confirmation after 30 days
  - Run access review after 90 days

üîÑ Offboard Employee
  - Remove all access
  - Disable account
  - Delete after 30 days
  - Archive mailbox
</code></pre>

          <h2>5Ô∏è‚É£ Terms of Use</h2>
          <p>Require users to accept terms before accessing resources:</p>
          <ul>
            <li><strong>Custom PDFs:</strong> Upload company policies, agreements, disclaimers</li>
            <li><strong>Frequency:</strong> One-time, annually, or every access</li>
            <li><strong>Conditional Access:</strong> Enforce via conditional access policies</li>
            <li><strong>Audit Reports:</strong> Track who accepted and when</li>
            <li><strong>Multi-Language:</strong> Display different versions by user locale</li>
          </ul>

          <h2>Best Practices</h2>

          <div class="callout">
            <strong>‚öñÔ∏è Governance Recommendations</strong><br />
            <ul style="margin-bottom: 0;">
              <li><strong>Start with Access Reviews:</strong> Begin with quarterly reviews of privileged access</li>
              <li><strong>Automate Lifecycle:</strong> Integrate with HR system for joiner/mover/leaver</li>
              <li><strong>Use PIM for All Admins:</strong> No permanent Global Admin assignments</li>
              <li><strong>Access Packages:</strong> Create self-service access for common requests</li>
              <li><strong>Regular Cleanup:</strong> Schedule quarterly reviews of inactive accounts</li>
              <li><strong>Document Processes:</strong> Maintain governance policy documentation</li>
            </ul>
          </div>

          <h3>üéØ Implementation Roadmap</h3>
          <ol>
            <li><strong>Phase 1:</strong> Enable PIM for Global Admins (reduce standing access)</li>
            <li><strong>Phase 2:</strong> Create access reviews for privileged roles (quarterly)</li>
            <li><strong>Phase 3:</strong> Build access packages for common access requests</li>
            <li><strong>Phase 4:</strong> Implement lifecycle workflows for joiners/leavers</li>
            <li><strong>Phase 5:</strong> Expand access reviews to all groups and apps</li>
            <li><strong>Phase 6:</strong> Enable terms of use for sensitive applications</li>
          </ol>

          <h2>Licensing Requirements</h2>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Feature</th>
                <th>License Required</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Entitlement Management</td>
                <td>Azure AD Premium P2</td>
              </tr>
              <tr>
                <td>Access Reviews</td>
                <td>Azure AD Premium P2</td>
              </tr>
              <tr>
                <td>Privileged Identity Management (PIM)</td>
                <td>Azure AD Premium P2</td>
              </tr>
              <tr>
                <td>Lifecycle Workflows</td>
                <td>Azure AD Premium P2</td>
              </tr>
              <tr>
                <td>Terms of Use</td>
                <td>Azure AD Premium P1</td>
              </tr>
            </tbody>
          </table>

          <div class="callout">
            <strong>üí° Compliance Impact</strong><br />
            Identity Governance helps organizations meet regulatory requirements including SOC 2, ISO 27001, GDPR, HIPAA, and PCI DSS by providing automated access controls, audit trails, and periodic attestation of access rights.
          </div>
        </section>

        <!-- External Identities Section -->
        <section id="external-identities" role="article">
          <h1>External Identities (B2B/B2C)</h1>
          <span class="badge">b2b</span>
          <span class="badge">b2c</span>
          <span class="badge">external</span>
          <span class="badge">guest</span>
          <span class="badge">customers</span>
          
          <p>Microsoft Entra External ID enables secure collaboration with external partners (B2B) and customer identity management (B2C) using the same platform.</p>

          <h2>External Identity Types</h2>

          <div class="mermaid">
%%{ init: { 
    "theme": "base", 
    "themeVariables": {
      "fontFamily": "Segoe UI"
    }, 
    "flowchart": { 
      "useMaxWidth": true, 
      "htmlLabels": true, 
      "curve": "basis" 
    } 
  } 
}%%
graph TB
    subgraph "`**B2B Collaboration**`"
        PARTNER[Business Partners]
        VENDOR[Vendors]
        CONSULTANT[Consultants]
    end
    
    subgraph "`**B2C Customer Identity**`"
        CONSUMER[Consumers]
        CITIZEN[Citizens]
        CUSTOMER[Customers]
    end
    
    subgraph "`**Azure Entra ID**`"
        B2B[B2B Guest Users<br/>Your Tenant]
        B2C[B2C Tenant<br/>Separate Tenant]
    end
    
    subgraph "`**Resources**`"
        TEAMS[Teams]
        SHAREPOINT[SharePoint]
        APPS[Enterprise Apps]
        PORTAL[Customer Portal]
        ECOMMERCE[E-Commerce]
        MOBILE[Mobile Apps]
    end
    
    PARTNER --> B2B
    VENDOR --> B2B
    CONSULTANT --> B2B
    
    B2B --> TEAMS
    B2B --> SHAREPOINT
    B2B --> APPS
    
    CONSUMER --> B2C
    CITIZEN --> B2C
    CUSTOMER --> B2C
    
    B2C --> PORTAL
    B2C --> ECOMMERCE
    B2C --> MOBILE
    
    style B2B fill:#10b981,color:#fff
    style B2C fill:#3b82f6,color:#fff
          </div>

          <h2>Azure AD B2B Collaboration</h2>
          <p>Enable external partners to access your organization's resources:</p>

          <h3>üë• Guest User Model</h3>
          <ul>
            <li><strong>Guest Account:</strong> External user represented as guest in your directory</li>
            <li><strong>Home Directory:</strong> User authenticates with their own organization's credentials</li>
            <li><strong>No Password Management:</strong> You don't manage their passwords</li>
            <li><strong>Invitation Required:</strong> Users must be invited to your tenant</li>
            <li><strong>User Type:</strong> Marked as "Guest" (not "Member")</li>
          </ul>

          <h3>üìß Invitation Process</h3>
          <div class="mermaid">
sequenceDiagram
    participant Internal as Internal User
    participant EntraID as Your Azure AD
    participant Email as Email System
    participant External as External User
    participant PartnerAD as Partner's Azure AD

    Internal->>EntraID: 1. Invite partner@company.com
    EntraID->>Email: 2. Send invitation email
    Email->>External: 3. Deliver invitation
    External->>EntraID: 4. Click redemption link
    EntraID->>External: 5. Show consent screen
    External->>EntraID: 6. Accept consent
    EntraID->>PartnerAD: 7. Redirect to partner's login
    PartnerAD->>External: 8. User signs in with their credentials
    PartnerAD->>EntraID: 9. Return authentication
    EntraID->>External: 10. Grant access to resources
          </div>

          <h3>üîê Guest Authentication Methods</h3>
          <ul>
            <li><strong>Azure AD Account:</strong> User from another Azure AD tenant</li>
            <li><strong>Microsoft Account:</strong> Personal Microsoft account (Outlook.com, Xbox)</li>
            <li><strong>Google Federation:</strong> Gmail accounts (@gmail.com)</li>
            <li><strong>Facebook:</strong> Facebook login (B2C scenarios)</li>
            <li><strong>Email One-Time Passcode (OTP):</strong> Fallback for any email address</li>
            <li><strong>SAML/WS-Fed IdP:</strong> Direct federation with external identity provider</li>
          </ul>

          <h3>‚öôÔ∏è B2B Collaboration Settings</h3>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Setting</th>
                <th>Options</th>
                <th>Impact</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Guest Invitations</strong></td>
                <td>Anyone, Admins only, No one</td>
                <td>Who can invite external users</td>
              </tr>
              <tr>
                <td><strong>Guest Permissions</strong></td>
                <td>Limited, Same as members</td>
                <td>What guests can see in directory</td>
              </tr>
              <tr>
                <td><strong>Collaboration Restrictions</strong></td>
                <td>Allow all, Block list, Allow list</td>
                <td>Which domains can be invited</td>
              </tr>
              <tr>
                <td><strong>Email OTP</strong></td>
                <td>Enabled, Disabled</td>
                <td>Fallback authentication method</td>
              </tr>
              <tr>
                <td><strong>Self-Service Sign-Up</strong></td>
                <td>Enabled, Disabled</td>
                <td>External users can request access</td>
              </tr>
            </tbody>
          </table>

          <h3>‚úÖ B2B Use Cases</h3>
          <ul>
            <li><strong>Project Collaboration:</strong> Vendors working on shared documents in SharePoint</li>
            <li><strong>Teams Collaboration:</strong> External consultants joining Teams channels</li>
            <li><strong>Application Access:</strong> Partners accessing your internal applications</li>
            <li><strong>Temporary Access:</strong> Contractors needing limited-time access</li>
            <li><strong>Customer Support:</strong> Support teams from partner organizations</li>
          </ul>

          <h2>Azure AD B2C (Customer Identity)</h2>
          <p>Customer-facing identity and access management for consumer applications:</p>

          <h3>üéØ Key Differences from B2B</h3>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Aspect</th>
                <th>B2B</th>
                <th>B2C</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Target Users</strong></td>
                <td>Business partners</td>
                <td>Consumers/customers</td>
              </tr>
              <tr>
                <td><strong>Tenant</strong></td>
                <td>Your existing Azure AD</td>
                <td>Separate B2C tenant</td>
              </tr>
              <tr>
                <td><strong>Authentication</strong></td>
                <td>Partner's credentials</td>
                <td>Social, local, or enterprise IdP</td>
              </tr>
              <tr>
                <td><strong>Self-Registration</strong></td>
                <td>Invitation-based</td>
                <td>Self-service sign-up</td>
              </tr>
              <tr>
                <td><strong>Scale</strong></td>
                <td>Hundreds to thousands</td>
                <td>Millions of consumers</td>
              </tr>
              <tr>
                <td><strong>Customization</strong></td>
                <td>Limited</td>
                <td>Fully branded UI</td>
              </tr>
            </tbody>
          </table>

          <h3>üîê B2C Identity Providers</h3>
          <ul>
            <li><strong>Local Accounts:</strong> Email/password or username/password managed by Azure AD B2C</li>
            <li><strong>Social Accounts:</strong> Microsoft, Google, Facebook, Twitter, LinkedIn, GitHub</li>
            <li><strong>Enterprise IdP:</strong> Azure AD, SAML, OpenID Connect providers</li>
            <li><strong>Custom Providers:</strong> Any OAuth 2.0 or OpenID Connect provider</li>
            <li><strong>Phone Sign-In:</strong> SMS-based authentication</li>
          </ul>

          <h3>üé® User Flows vs Custom Policies</h3>

          <h4>User Flows (Recommended for Most Scenarios)</h4>
          <ul>
            <li><strong>Pre-Built Templates:</strong> Sign-up, sign-in, profile editing, password reset</li>
            <li><strong>Easy Configuration:</strong> Point-and-click UI setup</li>
            <li><strong>Social Accounts:</strong> Built-in integration with Facebook, Google, etc.</li>
            <li><strong>Customization:</strong> Branding, language, page layout</li>
            <li><strong>Use Cases:</strong> Standard authentication scenarios (90% of apps)</li>
          </ul>

          <h4>Custom Policies (Advanced Scenarios)</h4>
          <ul>
            <li><strong>XML-Based:</strong> Define custom authentication journeys</li>
            <li><strong>Full Control:</strong> Complete flexibility over logic and flow</li>
            <li><strong>Complex Scenarios:</strong> Multi-step verification, attribute-based access</li>
            <li><strong>Integration:</strong> Call external REST APIs during authentication</li>
            <li><strong>Use Cases:</strong> Complex requirements, legacy system integration</li>
          </ul>

          <h3>üåê Customization Options</h3>
          <ul>
            <li><strong>Page Layouts:</strong> Custom HTML templates for sign-up/sign-in pages</li>
            <li><strong>Branding:</strong> Logo, colors, CSS styling</li>
            <li><strong>Localization:</strong> 36+ languages supported</li>
            <li><strong>Custom Domains:</strong> login.yourbrand.com instead of .b2clogin.com</li>
            <li><strong>JavaScript:</strong> Add custom client-side logic</li>
          </ul>

          <h3>üìã B2C User Attributes</h3>
          <pre data-language="text" class="syntax-highlighted"><code>Built-in Attributes:
  - Email Address
  - Display Name
  - Given Name (First Name)
  - Surname (Last Name)
  - City, State/Province, Postal Code, Country
  - Job Title
  - Street Address

Custom Attributes:
  - Loyalty Number
  - Membership Tier
  - Preferences (newsletter, notifications)
  - Date of Birth
  - Phone Number
  - Any custom data (up to 100 attributes)
</code></pre>

          <h2>B2B Direct Connect</h2>
          <p>New collaboration model for deeper integration:</p>
          <ul>
            <li><strong>Mutual Trust:</strong> Both organizations agree to collaborate</li>
            <li><strong>No Guest Accounts:</strong> Users stay in their home tenant</li>
            <li><strong>Shared Channels:</strong> Teams shared channels across organizations</li>
            <li><strong>Zero Trust:</strong> Both organizations apply their own conditional access</li>
            <li><strong>No Invitation:</strong> Users auto-discover shared resources</li>
          </ul>

          <h2>Cross-Tenant Access Settings</h2>
          <p>Control collaboration with specific organizations:</p>

          <h3>‚öôÔ∏è Inbound Settings (External ‚Üí Your Org)</h3>
          <ul>
            <li><strong>Allow/Block Organizations:</strong> Control which tenants can access your resources</li>
            <li><strong>Automatic Redemption:</strong> Skip consent for trusted organizations</li>
            <li><strong>Trust MFA:</strong> Accept MFA claims from partner tenant</li>
            <li><strong>Trust Device:</strong> Accept compliant device claims</li>
          </ul>

          <h3>‚öôÔ∏è Outbound Settings (Your Org ‚Üí External)</h3>
          <ul>
            <li><strong>Allow/Block Users:</strong> Control who can be invited to external tenants</li>
            <li><strong>Allow/Block Apps:</strong> Control which external apps users can access</li>
            <li><strong>B2B Direct Connect:</strong> Enable shared channels with partners</li>
          </ul>

          <h2>Best Practices</h2>

          <div class="callout">
            <strong>üîí External Identity Security</strong><br />
            <ul style="margin-bottom: 0;">
              <li><strong>Conditional Access:</strong> Apply MFA and device compliance to guest users</li>
              <li><strong>Access Reviews:</strong> Quarterly reviews of guest user access</li>
              <li><strong>Expiration:</strong> Set automatic guest account expiration (90-180 days)</li>
              <li><strong>Domain Restrictions:</strong> Use allow/block lists for invited domains</li>
              <li><strong>Least Privilege:</strong> Guests should have limited directory permissions</li>
              <li><strong>Monitor Activity:</strong> Enable sign-in logs for guest users</li>
            </ul>
          </div>

          <h3>üéØ B2B Recommendations</h3>
          <ul>
            <li><strong>Self-Service Sign-Up:</strong> Enable for approved domains to reduce admin overhead</li>
            <li><strong>Invitation Templates:</strong> Create standard invitation messages</li>
            <li><strong>Sponsorship:</strong> Assign internal sponsors for external users</li>
            <li><strong>Guest Cleanup:</strong> Automate removal of inactive guests (120+ days no sign-in)</li>
            <li><strong>Terms of Use:</strong> Require guests to accept collaboration terms</li>
          </ul>

          <h3>üéØ B2C Recommendations</h3>
          <ul>
            <li><strong>Start with User Flows:</strong> Only use custom policies if absolutely needed</li>
            <li><strong>Social Login:</strong> Offer Google, Facebook, Microsoft for better UX</li>
            <li><strong>Progressive Profiling:</strong> Collect attributes over time, not all at once</li>
            <li><strong>Custom Domains:</strong> Use branded domains for trust</li>
            <li><strong>Rate Limiting:</strong> Protect against brute force attacks</li>
            <li><strong>Test Thoroughly:</strong> Test all flows in non-production environment</li>
          </ul>

          <h2>Licensing</h2>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Feature</th>
                <th>License</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>B2B Guest Users (basic)</td>
                <td>Free (5 guests per internal user)</td>
              </tr>
              <tr>
                <td>B2B with MAU Billing</td>
                <td>External Identities Premium P1/P2</td>
              </tr>
              <tr>
                <td>B2C (up to 50k MAU)</td>
                <td>Free</td>
              </tr>
              <tr>
                <td>B2C (50k+ MAU)</td>
                <td>Pay-per-use (MAU-based pricing)</td>
              </tr>
              <tr>
                <td>B2C with Premium Features</td>
                <td>External Identities Premium P1/P2</td>
              </tr>
            </tbody>
          </table>

          <div class="callout">
            <strong>üí° MAU Pricing</strong><br />
            B2C pricing is based on Monthly Active Users (MAU)‚Äîusers who authenticate at least once in a month. First 50,000 MAU are free, then pay-per-use pricing applies. This model is highly cost-effective for consumer-scale applications.
          </div>
        </section>

        <!-- Identity Protection Section -->
        <section id="protection" role="article">
          <h1>Identity Protection</h1>
          <span class="badge">protection</span>
          <span class="badge">risk</span>
          <span class="badge">detection</span>
          <span class="badge">security</span>
          <span class="badge">threat</span>
          
          <p>Azure AD Identity Protection uses advanced machine learning and heuristics to detect identity-based risks and protect your organization from compromise.</p>

          <div class="callout">
            <strong>üõ°Ô∏è AI-Powered Security</strong><br />
            Identity Protection analyzes over 65 billion signals per day across Microsoft's ecosystem to detect anomalous behavior, compromised credentials, and potential identity attacks in real-time.
          </div>

          <h2>How Identity Protection Works</h2>

          <div class="mermaid">
%%{ init: { 
    "theme": "base", 
    "themeVariables": {
      "fontFamily": "Segoe UI"
    }, 
    "flowchart": { 
      "useMaxWidth": true, 
      "htmlLabels": true, 
      "curve": "basis" 
    } 
  } 
}%%
graph TB
    subgraph "`**Risk Detection**`"
        SIGNIN[Sign-In Event]
        SIGNALS[Microsoft<br/>65B+ Signals/Day]
        ML[Machine Learning<br/>Risk Analysis]
    end
    
    subgraph "`**Risk Levels**`"
        LOW[Low Risk]
        MEDIUM[Medium Risk]
        HIGH[High Risk]
    end
    
    subgraph "`**Automated Response**`"
        ALLOW[Allow Access]
        MFA[Require MFA]
        BLOCK[Block Access]
        PWDCHANGE[Require Password Change]
    end
    
    subgraph "`**Admin Actions**`"
        INVESTIGATE[Investigate]
        CONFIRM[Confirm Compromise]
        DISMISS[Dismiss Risk]
        REMEDIATE[Remediate User]
    end
    
    SIGNIN --> SIGNALS
    SIGNALS --> ML
    
    ML --> LOW
    ML --> MEDIUM
    ML --> HIGH
    
    LOW --> ALLOW
    MEDIUM --> MFA
    HIGH --> BLOCK
    HIGH --> PWDCHANGE
    
    MEDIUM --> INVESTIGATE
    HIGH --> INVESTIGATE
    INVESTIGATE --> CONFIRM
    INVESTIGATE --> DISMISS
    CONFIRM --> REMEDIATE
    
    style ML fill:#3b82f6,color:#fff
    style HIGH fill:#ef4444,color:#fff
    style BLOCK fill:#ef4444,color:#fff
    style PWDCHANGE fill:#f59e0b,color:#fff
          </div>

          <h2>Risk Types</h2>

          <h3>üî¥ Sign-In Risk</h3>
          <p>Real-time risk detected during authentication attempt:</p>

          <table class="table table-striped">
            <thead>
              <tr>
                <th>Detection</th>
                <th>Description</th>
                <th>Risk Level</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Anonymous IP</strong></td>
                <td>Sign-in from anonymous IP (Tor, VPN)</td>
                <td>Medium</td>
              </tr>
              <tr>
                <td><strong>Atypical Travel</strong></td>
                <td>Impossible travel between geographic locations</td>
                <td>Medium/High</td>
              </tr>
              <tr>
                <td><strong>Malware-Linked IP</strong></td>
                <td>Sign-in from known botnet or malware IP</td>
                <td>Medium</td>
              </tr>
              <tr>
                <td><strong>Unfamiliar Sign-In Properties</strong></td>
                <td>New device, browser, location for this user</td>
                <td>Medium</td>
              </tr>
              <tr>
                <td><strong>Password Spray</strong></td>
                <td>Multiple usernames attacked with common passwords</td>
                <td>Medium</td>
              </tr>
              <tr>
                <td><strong>Azure AD Threat Intelligence</strong></td>
                <td>Microsoft internal/external threat intelligence</td>
                <td>High</td>
              </tr>
              <tr>
                <td><strong>Verified Threat Actor IP</strong></td>
                <td>IP address associated with known threat actors</td>
                <td>High</td>
              </tr>
              <tr>
                <td><strong>Suspicious Browser</strong></td>
                <td>Anomalous browser characteristics</td>
                <td>Medium</td>
              </tr>
              <tr>
                <td><strong>Token Issuer Anomaly</strong></td>
                <td>Suspicious token characteristics</td>
                <td>Medium/High</td>
              </tr>
            </tbody>
          </table>

          <h3>üü† User Risk</h3>
          <p>Offline risk detected through behavioral analysis:</p>

          <table class="table table-striped">
            <thead>
              <tr>
                <th>Detection</th>
                <th>Description</th>
                <th>Risk Level</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Leaked Credentials</strong></td>
                <td>Username/password found in breach database</td>
                <td>High</td>
              </tr>
              <tr>
                <td><strong>Azure AD Threat Intelligence</strong></td>
                <td>Unusual activity patterns detected</td>
                <td>High</td>
              </tr>
              <tr>
                <td><strong>Anomalous User Activity</strong></td>
                <td>Behavioral anomalies over time</td>
                <td>High</td>
              </tr>
              <tr>
                <td><strong>Suspicious Inbox Manipulation</strong></td>
                <td>Unusual inbox rules or forwarding</td>
                <td>Medium</td>
              </tr>
              <tr>
                <td><strong>Suspicious API Traffic</strong></td>
                <td>Unusual API patterns (Graph, PowerShell)</td>
                <td>Medium/High</td>
              </tr>
            </tbody>
          </table>

          <h2>Risk Detection Workflow</h2>

          <div class="mermaid">
sequenceDiagram
    participant User
    participant EntraID as Azure Entra ID
    participant IDP as Identity Protection
    participant CA as Conditional Access
    participant Admin

    User->>EntraID: 1. Sign-in attempt
    EntraID->>IDP: 2. Analyze sign-in signals
    IDP->>IDP: 3. Calculate risk score
    
    alt Low Risk
        IDP->>EntraID: 4. No risk detected
        EntraID->>User: 5. Grant access
    else Medium Risk
        IDP->>CA: 4. Medium sign-in risk
        CA->>User: 5. Challenge with MFA
        User->>CA: 6. Complete MFA
        CA->>EntraID: 7. Risk remediated
        EntraID->>User: 8. Grant access
    else High Risk
        IDP->>CA: 4. High sign-in risk
        CA->>User: 5. Block access
        User->>Admin: 6. Contact helpdesk
        Admin->>IDP: 7. Investigate risk
        Admin->>IDP: 8. Confirm or dismiss
    end
    
    IDP->>Admin: 9. Risk event logged
    Admin->>IDP: 10. Review weekly report
          </div>

          <h2>Risk Policies</h2>

          <h3>üîí Sign-In Risk Policy</h3>
          <p>Automatically respond to risky sign-in attempts:</p>

          <pre data-language="text" class="syntax-highlighted"><code>Policy Configuration:

IF: Sign-in risk is Medium or High
THEN: 
  - Require multi-factor authentication
  - Grant access if MFA succeeds
  - Risk automatically remediated on successful MFA

Users: All users (exclude break-glass accounts)
Enforcement: Report-only ‚Üí Enabled
</code></pre>

          <h3>üõ°Ô∏è User Risk Policy</h3>
          <p>Respond to compromised user accounts:</p>

          <pre data-language="text" class="syntax-highlighted"><code>Policy Configuration:

IF: User risk is High
THEN:
  - Require password change
  - Require multi-factor authentication
  - Risk remediated after secure password change

Users: All users (exclude break-glass accounts)
Enforcement: Report-only ‚Üí Enabled
</code></pre>

          <h2>Investigation & Remediation</h2>

          <h3>üìä Risk Events Dashboard</h3>
          <p>Azure Portal ‚Üí Entra ID ‚Üí Security ‚Üí Identity Protection:</p>
          <ul>
            <li><strong>Risky Users:</strong> Users flagged with active risk</li>
            <li><strong>Risky Sign-Ins:</strong> Individual sign-in events with detected risk</li>
            <li><strong>Risk Detections:</strong> All detected risk events (online and offline)</li>
            <li><strong>Risk History:</strong> Historical view of risk over time</li>
          </ul>

          <h3>üîç Admin Actions</h3>

          <h4>Confirm User Compromised</h4>
          <ul>
            <li><strong>Effect:</strong> Sets user risk to high, blocks sign-in</li>
            <li><strong>Use When:</strong> Confirmed that account is compromised</li>
            <li><strong>Auto-Actions:</strong> Triggers user risk policy (require password change)</li>
            <li><strong>Audit:</strong> Logged for compliance</li>
          </ul>

          <h4>Confirm Sign-In Compromised</h4>
          <ul>
            <li><strong>Effect:</strong> Marks sign-in as confirmed compromise</li>
            <li><strong>Use When:</strong> Sign-in was definitely malicious</li>
            <li><strong>Learning:</strong> Improves ML model accuracy</li>
          </ul>

          <h4>Dismiss User Risk</h4>
          <ul>
            <li><strong>Effect:</strong> Clears user risk (false positive)</li>
            <li><strong>Use When:</strong> Investigated and determined to be safe</li>
            <li><strong>Caution:</strong> User can immediately sign in again</li>
          </ul>

          <h4>Confirm Sign-In Safe</h4>
          <ul>
            <li><strong>Effect:</strong> Marks sign-in as legitimate</li>
            <li><strong>Use When:</strong> Verified with user that sign-in was them</li>
            <li><strong>Learning:</strong> Improves ML accuracy (reduces false positives)</li>
          </ul>

          <h4>Block User</h4>
          <ul>
            <li><strong>Effect:</strong> Immediately revokes all tokens and blocks sign-in</li>
            <li><strong>Use When:</strong> Emergency response to active compromise</li>
            <li><strong>Manual Action:</strong> Not automated by policy</li>
          </ul>

          <h4>Reset Password</h4>
          <ul>
            <li><strong>Effect:</strong> Forces password change at next sign-in</li>
            <li><strong>Use When:</strong> Credentials may be compromised</li>
            <li><strong>Best Practice:</strong> Combine with MFA re-enrollment</li>
          </ul>

          <h2>Integration with Conditional Access</h2>
          <p>Risk-based conditional access for automated protection:</p>

          <h3>üìã Example Policies</h3>

          <pre data-language="text" class="syntax-highlighted"><code># Policy 1: Medium Sign-In Risk ‚Üí Require MFA
IF:
  Users: All users
  Sign-in risk: Medium or High
THEN:
  Grant access ‚Üí Require MFA

# Policy 2: High User Risk ‚Üí Block Until Remediated
IF:
  Users: All users
  User risk: High
THEN:
  Grant access ‚Üí Require ALL:
    - Password change
    - Multi-factor authentication

# Policy 3: High Risk from Untrusted Location ‚Üí Block
IF:
  Users: All users
  Sign-in risk: High
  Location: Not trusted network
THEN:
  Block access
</code></pre>

          <h2>Workbook & Reporting</h2>

          <h3>üìà Identity Protection Workbook</h3>
          <p>Pre-built Azure Monitor workbook for analysis:</p>
          <ul>
            <li><strong>Risk Trends:</strong> User and sign-in risk over time</li>
            <li><strong>Top Risky Users:</strong> Users with most risk events</li>
            <li><strong>Detection Breakdown:</strong> Most common detection types</li>
            <li><strong>Geographic View:</strong> Risk by location</li>
            <li><strong>Remediation Time:</strong> How quickly risks are addressed</li>
          </ul>

          <h3>üìß Weekly Digest Email</h3>
          <ul>
            <li>Sent to Global Admins and Security Admins</li>
            <li>Summary of new risky users and sign-ins</li>
            <li>Trend analysis vs. previous week</li>
            <li>Link to portal for investigation</li>
          </ul>

          <h2>API Integration</h2>
          <p>Automate risk detection and response:</p>

          <h3>üîå Microsoft Graph API</h3>
          <pre data-language="text" class="syntax-highlighted"><code>Endpoints:

# Get risky users
GET https://graph.microsoft.com/v1.0/identityProtection/riskyUsers

# Get risk detections
GET https://graph.microsoft.com/v1.0/identityProtection/riskDetections

# Confirm user compromised
POST https://graph.microsoft.com/v1.0/identityProtection/riskyUsers/confirmCompromised

# Dismiss user risk
POST https://graph.microsoft.com/v1.0/identityProtection/riskyUsers/dismiss
</code></pre>

          <h3>üìä Export to SIEM</h3>
          <ul>
            <li><strong>Azure Sentinel:</strong> Native integration for correlation</li>
            <li><strong>Splunk:</strong> Export via Azure Monitor</li>
            <li><strong>QRadar:</strong> Stream logs via Event Hub</li>
            <li><strong>ArcSight:</strong> Custom connector or API integration</li>
          </ul>

          <h2>Self-Service Risk Remediation</h2>
          <p>Empower users to remediate their own risks:</p>

          <h3>üîê Self-Service Password Reset (SSPR)</h3>
          <ul>
            <li><strong>Triggered By:</strong> User risk policy requiring password change</li>
            <li><strong>MFA Required:</strong> User must complete MFA before reset</li>
            <li><strong>Security Info:</strong> Must have registered phone/email</li>
            <li><strong>Risk Remediated:</strong> Automatically after successful reset</li>
          </ul>

          <h3>üì± Combined Registration</h3>
          <ul>
            <li>Register MFA and SSPR methods in one experience</li>
            <li>Interrupt-driven during sign-in (if not registered)</li>
            <li>Security defaults require registration within 14 days</li>
          </ul>

          <h2>Advanced Threat Analytics</h2>

          <h3>üß† Machine Learning Models</h3>
          <ul>
            <li><strong>Continuous Learning:</strong> Models improve with every detection</li>
            <li><strong>Behavioral Baseline:</strong> Establishes normal patterns per user</li>
            <li><strong>Anomaly Detection:</strong> Flags deviations from baseline</li>
            <li><strong>Threat Intelligence:</strong> Microsoft's global threat database</li>
            <li><strong>False Positive Reduction:</strong> Admin feedback trains models</li>
          </ul>

          <h3>üåê Global Threat Signals</h3>
          <ul>
            <li>Dark web credential monitoring</li>
            <li>Known botnet IP addresses</li>
            <li>Threat actor activity patterns</li>
            <li>Compromised device indicators</li>
            <li>Suspicious application behavior</li>
          </ul>

          <h2>Best Practices</h2>

          <div class="callout">
            <strong>üõ°Ô∏è Protection Recommendations</strong><br />
            <ul style="margin-bottom: 0;">
              <li><strong>Enable Risk Policies:</strong> Start in report-only mode, then enforce</li>
              <li><strong>Require MFA:</strong> Critical for risk remediation to work</li>
              <li><strong>Monitor Weekly:</strong> Review risky users and sign-ins every week</li>
              <li><strong>Investigate High Risk:</strong> Never auto-dismiss high-risk events</li>
              <li><strong>Feedback Loop:</strong> Confirm/dismiss events to improve accuracy</li>
              <li><strong>Combine with CA:</strong> Use conditional access for automated response</li>
              <li><strong>User Education:</strong> Teach users about suspicious sign-in alerts</li>
            </ul>
          </div>

          <h3>üéØ Implementation Roadmap</h3>
          <ol>
            <li><strong>Phase 1:</strong> Enable Identity Protection (report-only mode)</li>
            <li><strong>Phase 2:</strong> Monitor for 2-4 weeks, understand baseline</li>
            <li><strong>Phase 3:</strong> Create risk-based conditional access policies (report-only)</li>
            <li><strong>Phase 4:</strong> Enable sign-in risk policy (require MFA)</li>
            <li><strong>Phase 5:</strong> Enable user risk policy (require password change)</li>
            <li><strong>Phase 6:</strong> Integrate with SIEM for SOC visibility</li>
          </ol>

          <h3>‚ö†Ô∏è Common Pitfalls</h3>
          <ul>
            <li><strong>No MFA:</strong> Risk policies require MFA to remediate‚Äîenable first</li>
            <li><strong>No SSPR:</strong> Users can't remediate if SSPR isn't configured</li>
            <li><strong>Ignoring Low Risk:</strong> Low risk still signals unusual activity</li>
            <li><strong>No Break-Glass:</strong> Always exclude emergency accounts from risk policies</li>
            <li><strong>False Positive Fatigue:</strong> Users ignore alerts if too many false positives</li>
          </ul>

          <h2>Licensing</h2>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Feature</th>
                <th>License Required</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Risk Detection (view only)</td>
                <td>Azure AD Premium P2</td>
              </tr>
              <tr>
                <td>Sign-In Risk Policy</td>
                <td>Azure AD Premium P2</td>
              </tr>
              <tr>
                <td>User Risk Policy</td>
                <td>Azure AD Premium P2</td>
              </tr>
              <tr>
                <td>Risk Investigation Tools</td>
                <td>Azure AD Premium P2</td>
              </tr>
              <tr>
                <td>API Access</td>
                <td>Azure AD Premium P2</td>
              </tr>
              <tr>
                <td>Workbooks & Reporting</td>
                <td>Azure AD Premium P2</td>
              </tr>
            </tbody>
          </table>

          <div class="callout">
            <strong>üìä Impact Statistics</strong><br />
            Organizations using Identity Protection with risk-based conditional access policies see a <strong>98% reduction</strong> in account compromise incidents and block over <strong>99.9% of automated attacks</strong> before they reach resources.
          </div>
        </section>

        <!-- Tutorials Section -->
        <section id="tutorials" role="article">
          <h1>Getting Started & Tutorials</h1>
          <span class="badge">tutorials</span>
          <span class="badge">quickstart</span>
          <span class="badge">getting-started</span>
          <span class="badge">hands-on</span>
          
          <p>Practical guides to get started with Azure Entra ID and build your identity security foundation.</p>

          <h2>üöÄ Quick Start Guide</h2>

          <h3>Step 1: Set Up Your Azure Entra ID Tenant</h3>
          <ol>
            <li>Sign up for Azure at https://azure.microsoft.com/free</li>
            <li>A default Azure AD tenant is automatically created</li>
            <li>Navigate to Azure Portal ‚Üí Azure Active Directory (or Entra ID)</li>
            <li>Note your tenant ID and domain (e.g., contoso.onmicrosoft.com)</li>
          </ol>

          <h3>Step 2: Add Custom Domain (Optional)</h3>
          <ol>
            <li>Navigate to Custom domain names ‚Üí Add custom domain</li>
            <li>Enter your domain (e.g., contoso.com)</li>
            <li>Copy the TXT record provided by Azure</li>
            <li>Add TXT record to your DNS provider</li>
            <li>Click Verify in Azure portal</li>
            <li>Set as primary domain (optional)</li>
          </ol>

          <h3>Step 3: Configure Security Defaults</h3>
          <ol>
            <li>Go to Azure AD ‚Üí Properties ‚Üí Manage Security Defaults</li>
            <li>Enable Security Defaults (free, baseline security)</li>
            <li>This enables:
              <ul>
                <li>MFA for all users</li>
                <li>Block legacy authentication</li>
                <li>Require MFA for Azure portal access</li>
              </ul>
            </li>
          </ol>

          <div class="callout">
            <strong>‚ö†Ô∏è Important</strong><br />
            Security Defaults provide baseline protection for free. For advanced controls, disable Security Defaults and use Conditional Access (requires Azure AD Premium P1).
          </div>

          <h2>üë• Tutorial: Create and Manage Users</h2>

          <h3>Create a New User</h3>
          <pre data-language="powershell" class="syntax-highlighted"><code># Using Azure Portal
1. Azure AD ‚Üí Users ‚Üí New user
2. Select "Create user"
3. User name: john.doe@contoso.com
4. Name: John Doe
5. Password: Auto-generate or set custom
6. Groups: Add to groups (optional)
7. Roles: Assign directory roles (optional)
8. Usage location: Select country (required for licensing)
9. Click Create

# Using PowerShell
Connect-AzureAD
New-AzureADUser -DisplayName "John Doe" `
  -UserPrincipalName "john.doe@contoso.com" `
  -AccountEnabled $true `
  -MailNickName "john.doe" `
  -PasswordProfile $PasswordProfile `
  -UsageLocation "US"
</code></pre>

          <h3>Bulk Import Users</h3>
          <pre data-language="powershell" class="syntax-highlighted"><code># Bulk import via CSV
1. Azure AD ‚Üí Users ‚Üí Bulk operations ‚Üí Bulk create
2. Download CSV template
3. Fill in user details:
   - UPN (user@domain.com)
   - Display name
   - Department, Job title
   - Usage location
4. Upload completed CSV
5. Azure processes in background
6. Download results report
</code></pre>

          <h2>üë• Tutorial: Create and Use Groups</h2>

          <h3>Create a Security Group</h3>
          <pre data-language="text" class="syntax-highlighted"><code># Static/Assigned Group
1. Azure AD ‚Üí Groups ‚Üí New group
2. Group type: Security
3. Group name: Sales Team
4. Membership type: Assigned
5. Add members manually
6. Click Create

# Dynamic Group (requires Azure AD Premium P1)
1. Azure AD ‚Üí Groups ‚Üí New group
2. Group type: Security
3. Membership type: Dynamic User
4. Add dynamic query:
   (user.department -eq "Sales")
5. Validate query
6. Click Create
</code></pre>

          <h3>Use Groups for Access Management</h3>
          <pre data-language="text" class="syntax-highlighted"><code>Best Practice: Always assign access via groups, not individual users

1. Application Access:
   - Azure AD ‚Üí Enterprise applications ‚Üí [App] ‚Üí Users and groups
   - Assign "Sales Team" group to Salesforce app

2. Azure RBAC:
   - Azure Portal ‚Üí Subscription ‚Üí Access control (IAM)
   - Add role assignment: Contributor ‚Üí "Sales Team"

3. SharePoint/Teams:
   - Use Azure AD groups for Teams/SharePoint permissions
   - Members sync automatically
</code></pre>

          <h2>üîê Tutorial: Register an Application</h2>

          <h3>Web Application Registration</h3>
          <pre data-language="text" class="syntax-highlighted"><code>1. Azure AD ‚Üí App registrations ‚Üí New registration
2. Name: My Web App
3. Supported account types: Single tenant
4. Redirect URI: 
   - Platform: Web
   - URL: https://localhost:5001/signin-oidc
5. Click Register

6. Note Application (client) ID
7. Note Directory (tenant) ID

8. Create Client Secret:
   - Certificates & secrets ‚Üí New client secret
   - Description: Dev Secret
   - Expires: 6 months (recommended)
   - Copy secret value (shown only once!)

9. API Permissions:
   - Add permission ‚Üí Microsoft Graph
   - Delegated: User.Read (default)
   - Application: (none for web apps with users)
   - Grant admin consent (if required)
</code></pre>

          <h3>Single Page Application (React)</h3>
          <pre data-language="javascript" class="syntax-highlighted"><code>// 1. Register app (select "Single-page application" platform)

// 2. Install MSAL.js
npm install @azure/msal-browser @azure/msal-react

// 3. Configure MSAL
// authConfig.js
export const msalConfig = {
    auth: {
        clientId: "your-client-id",
        authority: "https://login.microsoftonline.com/your-tenant-id",
        redirectUri: "http://localhost:3000",
    }
};

// 4. Wrap app with MSAL provider
// index.js
import { MsalProvider } from "@azure/msal-react";
import { PublicClientApplication } from "@azure/msal-browser";
import { msalConfig } from "./authConfig";

const msalInstance = new PublicClientApplication(msalConfig);

ReactDOM.render(
  <MsalProvider instance={msalInstance}>
    <App />
  </MsalProvider>,
  document.getElementById("root")
);

// 5. Sign in
import { useMsal } from "@azure/msal-react";

function App() {
  const { instance } = useMsal();
  
  const handleLogin = () => {
    instance.loginPopup({
      scopes: ["User.Read"]
    });
  };
  
  return <button onClick={handleLogin}>Sign In</button>;
}
</code></pre>

          <h2>üõ°Ô∏è Tutorial: Configure Conditional Access</h2>

          <h3>Policy 1: Require MFA for All Users</h3>
          <pre data-language="text" class="syntax-highlighted"><code>1. Azure AD ‚Üí Security ‚Üí Conditional Access ‚Üí New policy
2. Name: Require MFA for All Users
3. Assignments:
   - Users: All users
   - Exclude: [Break-glass accounts]
   - Cloud apps: All cloud apps
4. Conditions: None
5. Grant:
   - Grant access
   - Require multi-factor authentication
6. Enable policy: Report-only (test first!)
7. After 1-2 weeks testing ‚Üí Enable policy: On
</code></pre>

          <h3>Policy 2: Block Legacy Authentication</h3>
          <pre data-language="text" class="syntax-highlighted"><code>1. New policy
2. Name: Block Legacy Authentication
3. Assignments:
   - Users: All users
   - Exclude: [Service accounts if needed]
   - Cloud apps: All cloud apps
4. Conditions:
   - Client apps: 
     ‚úì Exchange ActiveSync clients
     ‚úì Other clients
5. Grant: Block access
6. Enable policy: Report-only ‚Üí Test ‚Üí Enable
</code></pre>

          <h2>üîë Tutorial: Enable Passwordless Authentication</h2>

          <h3>Microsoft Authenticator Passwordless Sign-In</h3>
          <pre data-language="text" class="syntax-highlighted"><code>1. Enable Method:
   - Azure AD ‚Üí Security ‚Üí Authentication methods
   - Microsoft Authenticator ‚Üí Enable
   - Target: All users
   - Configuration: Allow passwordless

2. User Enrollment:
   - User installs Microsoft Authenticator app
   - Goes to https://aka.ms/mysecurityinfo
   - Add sign-in method ‚Üí Authenticator app
   - Scan QR code
   - Enable phone sign-in
   - Complete verification

3. Sign In:
   - User enters username (no password!)
   - Receives push notification
   - Approve with number match or biometric
   - Signed in
</code></pre>

          <h3>FIDO2 Security Keys</h3>
          <pre data-language="text" class="syntax-highlighted"><code>1. Enable FIDO2:
   - Authentication methods ‚Üí FIDO2 security key ‚Üí Enable
   - Target: All users
   - Allow self-service set up: Yes

2. User Registers Key:
   - Go to https://aka.ms/mysecurityinfo
   - Add method ‚Üí Security key
   - Choose USB or NFC
   - Insert key and follow prompts
   - Set PIN for key

3. Sign In with Key:
   - Enter username
   - Click "Sign in with security key"
   - Insert key and touch
   - Enter key PIN
   - Signed in (phishing-resistant!)
</code></pre>

          <h2>üìä Tutorial: Set Up Access Reviews</h2>

          <h3>Review Group Membership Quarterly</h3>
          <pre data-language="text" class="syntax-highlighted"><code>1. Azure AD ‚Üí Identity Governance ‚Üí Access reviews
2. New access review
3. Review type: Teams + Groups
4. Select group: Sales Team
5. Scope: All members
6. Reviewers: Group owners
7. Duration: 14 days
8. Frequency: Quarterly
9. Upon completion: Auto-apply results
10. If reviewers don't respond: Remove access
11. Recommendations: Show (based on last sign-in)
12. Create review
</code></pre>

          <h2>üîå Tutorial: Call Microsoft Graph API</h2>

          <h3>Get User Profile (Delegated)</h3>
          <pre data-language="python" class="syntax-highlighted"><code># Install MSAL
pip install msal requests

# Python example
from msal import PublicClientApplication
import requests

# Configure
app = PublicClientApplication(
    client_id="your-client-id",
    authority="https://login.microsoftonline.com/your-tenant-id"
)

# Acquire token interactively
result = app.acquire_token_interactive(scopes=["User.Read"])
access_token = result["access_token"]

# Call Microsoft Graph
headers = {"Authorization": f"Bearer {access_token}"}
response = requests.get(
    "https://graph.microsoft.com/v1.0/me",
    headers=headers
)
user = response.json()
print(f"Hello, {user['displayName']}!")
</code></pre>

          <h3>List All Users (Application Permission)</h3>
          <pre data-language="python" class="syntax-highlighted"><code># Configure for daemon app
from msal import ConfidentialClientApplication

app = ConfidentialClientApplication(
    client_id="your-client-id",
    client_credential="your-client-secret",
    authority="https://login.microsoftonline.com/your-tenant-id"
)

# Acquire token with client credentials
result = app.acquire_token_for_client(
    scopes=["https://graph.microsoft.com/.default"]
)
access_token = result["access_token"]

# List all users
response = requests.get(
    "https://graph.microsoft.com/v1.0/users",
    headers={"Authorization": f"Bearer {access_token}"}
)
users = response.json()["value"]
for user in users:
    print(f"{user['displayName']} ({user['userPrincipalName']})")
</code></pre>

          <h2>üìö Learning Path</h2>

          <h3>üéì Recommended Order</h3>
          <ol>
            <li><strong>Week 1:</strong> Set up tenant, add users, enable Security Defaults</li>
            <li><strong>Week 2:</strong> Create groups, assign apps, learn app registration</li>
            <li><strong>Week 3:</strong> Implement conditional access (start with MFA)</li>
            <li><strong>Week 4:</strong> Enable passwordless authentication</li>
            <li><strong>Week 5:</strong> Set up access reviews and governance</li>
            <li><strong>Week 6:</strong> Enable Identity Protection and risk-based policies</li>
            <li><strong>Week 7:</strong> Integrate custom applications with Azure AD</li>
            <li><strong>Week 8:</strong> Advanced: B2B, B2C, PIM, API integration</li>
          </ol>

          <h2>üõ†Ô∏è Common Tasks Cheat Sheet</h2>

          <pre data-language="text" class="syntax-highlighted"><code># Reset User Password
Azure AD ‚Üí Users ‚Üí [User] ‚Üí Reset password

# Assign License
Users ‚Üí [User] ‚Üí Licenses ‚Üí Assign

# Add User to Group
Groups ‚Üí [Group] ‚Üí Members ‚Üí Add members

# Grant App Permission
App registrations ‚Üí [App] ‚Üí API permissions ‚Üí Add permission

# View Sign-In Logs
Azure AD ‚Üí Monitoring ‚Üí Sign-in logs

# Check Conditional Access Impact
Conditional Access ‚Üí Policies ‚Üí [Policy] ‚Üí What If tool

# Activate PIM Role
Azure AD ‚Üí Privileged Identity Management ‚Üí My roles ‚Üí Activate

# Review Risky Users
Security ‚Üí Identity Protection ‚Üí Risky users
</code></pre>

          <div class="callout">
            <strong>üí° Pro Tip</strong><br />
            Use the Azure AD portal's "What If" tool under Conditional Access to test policy impact before enabling them. This helps avoid accidentally locking out users or admins.
          </div>
        </section>

        <!-- Best Practices Section -->
        <section id="best-practices" role="article">
          <h1>Best Practices</h1>
          <span class="badge">best-practices</span>
          <span class="badge">security</span>
          <span class="badge">implementation</span>
          <span class="badge">architecture</span>
          <span class="badge">governance</span>
          
          <p>Essential recommendations and proven patterns for implementing a secure, scalable, and maintainable Azure Entra ID deployment.</p>

          <h2>üõ°Ô∏è Security Best Practices</h2>

          <h3>1. Multi-Factor Authentication (MFA)</h3>
          <div class="callout">
            <strong>üîê Critical Requirement</strong><br />
            Enable MFA for <strong>100% of users</strong>, especially administrators. This single control prevents <strong>99.9%</strong> of account compromise attacks.
          </div>

          <ul>
            <li><strong>‚úÖ DO:</strong> Use Security Defaults for free baseline MFA protection</li>
            <li><strong>‚úÖ DO:</strong> Upgrade to Conditional Access for granular MFA policies</li>
            <li><strong>‚úÖ DO:</strong> Enable MFA for all admin accounts (Global Admin, Security Admin, etc.)</li>
            <li><strong>‚úÖ DO:</strong> Encourage passwordless methods (Authenticator, FIDO2, Windows Hello)</li>
            <li><strong>‚ùå DON'T:</strong> Allow phone call or SMS as only MFA method (vulnerable to SIM swapping)</li>
            <li><strong>‚ùå DON'T:</strong> Exempt users from MFA without strong business justification</li>
          </ul>

          <h3>2. Conditional Access Policies</h3>
          <pre data-language="text" class="syntax-highlighted"><code>Essential Policies (Priority Order):

1. ‚ö° EMERGENCY: Protect Break-Glass Accounts
   - Exclude 2 emergency accounts from ALL policies
   - Store credentials in secure vault
   - Monitor usage with alerts

2. üî¥ HIGH: Require MFA for All Users
   - Users: All users (exclude break-glass)
   - Cloud apps: All cloud apps
   - Grant: Require MFA

3. üî¥ HIGH: Require MFA for Azure Management
   - Users: All users
   - Cloud apps: Microsoft Azure Management
   - Grant: Require MFA + Compliant device

4. üî¥ HIGH: Block Legacy Authentication
   - Users: All users (exclude service accounts if needed)
   - Conditions: Legacy authentication clients
   - Access: Block

5. üü† MEDIUM: Require Compliant/Hybrid Joined Device
   - Users: All users
   - Cloud apps: Office 365
   - Grant: Require compliant OR hybrid joined device

6. üü† MEDIUM: Block Access from Unknown Locations
   - Users: All users
   - Locations: Not trusted locations
   - Cloud apps: Sensitive apps
   - Risk: High sign-in risk
   - Access: Block

7. üü° LOW: Session Controls for Sensitive Apps
   - Users: All users
   - Cloud apps: Finance/HR apps
   - Session: Sign-in frequency = 4 hours
</code></pre>

          <h3>3. Privileged Access Management</h3>
          <ul>
            <li><strong>‚úÖ DO:</strong> Use Privileged Identity Management (PIM) for all admin roles</li>
            <li><strong>‚úÖ DO:</strong> Require justification and approval for role activation</li>
            <li><strong>‚úÖ DO:</strong> Set maximum activation duration (4-8 hours)</li>
            <li><strong>‚úÖ DO:</strong> Enable MFA at activation (not just sign-in)</li>
            <li><strong>‚úÖ DO:</strong> Use Access Reviews to recertify role assignments quarterly</li>
            <li><strong>‚úÖ DO:</strong> Minimize permanent role assignments (prefer eligible)</li>
            <li><strong>‚ùå DON'T:</strong> Share admin credentials between people</li>
            <li><strong>‚ùå DON'T:</strong> Use personal accounts for admin access</li>
          </ul>

          <div class="callout">
            <strong>üö® Break-Glass Accounts</strong><br />
            Create 2 cloud-only Global Admin accounts with:
            <ul style="margin-bottom: 0;">
              <li>No MFA (they're excluded from all CA policies)</li>
              <li>Long random passwords (25+ characters)</li>
              <li>Stored in physical secure vault</li>
              <li>Monitored with Azure Monitor alerts</li>
              <li>Tested quarterly to ensure they work</li>
            </ul>
          </div>

          <h3>4. Identity Protection</h3>
          <ul>
            <li><strong>‚úÖ DO:</strong> Enable Azure AD Identity Protection (requires P2 license)</li>
            <li><strong>‚úÖ DO:</strong> Configure user risk policy (high risk ‚Üí require password change)</li>
            <li><strong>‚úÖ DO:</strong> Configure sign-in risk policy (medium/high ‚Üí require MFA)</li>
            <li><strong>‚úÖ DO:</strong> Review risky users and sign-ins weekly</li>
            <li><strong>‚úÖ DO:</strong> Confirm or dismiss risk detections to train ML models</li>
            <li><strong>‚úÖ DO:</strong> Enable self-service password reset (SSPR) for risk remediation</li>
            <li><strong>‚ùå DON'T:</strong> Ignore high-risk detections</li>
            <li><strong>‚ùå DON'T:</strong> Auto-dismiss all risks (reduces ML accuracy)</li>
          </ul>

          <h3>5. Password and Authentication Policies</h3>
          <pre data-language="text" class="syntax-highlighted"><code>Recommended Settings:

‚úÖ Password Policy:
  - Minimum length: 12 characters (14+ for admins)
  - Complexity: Not required (prefer length over complexity)
  - Password expiration: Disabled (use breached password detection instead)
  - Smart lockout: 10 failed attempts ‚Üí 60 second lockout
  - Custom banned passwords: Add company-specific terms

‚úÖ Authentication Methods Priority:
  1. FIDO2 Security Keys (phishing-resistant)
  2. Windows Hello for Business
  3. Microsoft Authenticator (passwordless)
  4. Microsoft Authenticator (push notification)
  5. OATH hardware tokens
  6. SMS (only as last resort, not recommended)

‚ùå Disable:
  - Phone call authentication (vulnerable to vishing)
  - SMS for admins (vulnerable to SIM swap)
  - Security questions (weak authentication)
</code></pre>

          <h3>6. Monitoring and Alerting</h3>
          <ul>
            <li><strong>‚úÖ DO:</strong> Enable Azure AD audit and sign-in logs</li>
            <li><strong>‚úÖ DO:</strong> Send logs to Log Analytics workspace (90+ day retention)</li>
            <li><strong>‚úÖ DO:</strong> Create alerts for:
              <ul>
                <li>Break-glass account usage</li>
                <li>Changes to Conditional Access policies</li>
                <li>New app registrations with high-privilege permissions</li>
                <li>Multiple failed sign-ins (brute force)</li>
                <li>User risk state changes (low ‚Üí high)</li>
                <li>Role assignments (especially Global Admin)</li>
              </ul>
            </li>
            <li><strong>‚úÖ DO:</strong> Review sign-in logs weekly for anomalies</li>
            <li><strong>‚úÖ DO:</strong> Export logs to SIEM (Sentinel, Splunk, etc.) for correlation</li>
          </ul>

          <h2>üèóÔ∏è Architecture Best Practices</h2>

          <h3>Tenant Design</h3>
          <div class="mermaid">
%%{ init: { 
    "theme": "base", 
    "themeVariables": {
      "fontFamily": "Segoe UI"
    }, 
    "flowchart": { 
      "useMaxWidth": true, 
      "htmlLabels": true, 
      "curve": "basis" 
    } 
  } 
}%%
graph TB
    subgraph "`**Production Tenant**`"
        PROD_ENTRA[Entra ID - contoso.com]
        PROD_USERS[Production Users]
        PROD_APPS[Production Apps]
        PROD_SYNC[AD Connect - Prod]
    end
    
    subgraph "`**Non-Production Tenant**`"
        DEV_ENTRA[Entra ID - contoso-dev.com]
        DEV_USERS[Test Users]
        DEV_APPS[Dev/Test Apps]
        DEV_SYNC[AD Connect - Test]
    end
    
    subgraph "`**On-Premises**`"
        PROD_AD[Production AD]
        DEV_AD[Test AD]
    end
    
    PROD_AD --> PROD_SYNC
    PROD_SYNC --> PROD_ENTRA
    PROD_USERS --> PROD_ENTRA
    PROD_APPS --> PROD_ENTRA
    
    DEV_AD --> DEV_SYNC
    DEV_SYNC --> DEV_ENTRA
    DEV_USERS --> DEV_ENTRA
    DEV_APPS --> DEV_ENTRA
    
    style PROD_ENTRA fill:#3b82f6,color:#fff
    style DEV_ENTRA fill:#10b981,color:#fff
          </div>

          <h3>Tenant Strategy Recommendations</h3>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Scenario</th>
                <th>Recommendation</th>
                <th>Rationale</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Single Organization</strong></td>
                <td>One production tenant</td>
                <td>Simplifies management, licensing, and user experience</td>
              </tr>
              <tr>
                <td><strong>Dev/Test</strong></td>
                <td>Separate dev tenant</td>
                <td>Isolate testing from production; avoid accidental changes</td>
              </tr>
              <tr>
                <td><strong>Multiple Subsidiaries</strong></td>
                <td>Single tenant with groups</td>
                <td>Centralized identity, use groups/administrative units for separation</td>
              </tr>
              <tr>
                <td><strong>Regulatory Isolation</strong></td>
                <td>Separate tenants</td>
                <td>When compliance requires complete separation (rare)</td>
              </tr>
              <tr>
                <td><strong>M&A Transition</strong></td>
                <td>B2B collaboration initially</td>
                <td>Invite users from acquired tenant; migrate later if needed</td>
              </tr>
            </tbody>
          </table>

          <h3>Hybrid Identity Design</h3>
          <ul>
            <li><strong>‚úÖ DO:</strong> Use Password Hash Sync (PHS) for authentication</li>
            <li><strong>‚úÖ DO:</strong> Enable PHS even if using Pass-Through Auth or ADFS (fallback)</li>
            <li><strong>‚úÖ DO:</strong> Use Azure AD Connect Cloud Sync for multi-forest scenarios</li>
            <li><strong>‚úÖ DO:</strong> Filter unnecessary objects (only sync what you need)</li>
            <li><strong>‚úÖ DO:</strong> Use staging mode for testing before prod sync</li>
            <li><strong>‚ùå DON'T:</strong> Sync service accounts or high-privilege accounts</li>
            <li><strong>‚ùå DON'T:</strong> Use ADFS unless absolutely required (adds complexity)</li>
          </ul>

          <h3>Application Integration Design</h3>
          <pre data-language="text" class="syntax-highlighted"><code>Modern Auth Patterns:

1. Web Applications:
   - Use MSAL library (not ADAL - deprecated)
   - Implement authorization code flow with PKCE
   - Store tokens securely (encrypted server-side)
   - Refresh tokens before expiration

2. Single-Page Apps (SPA):
   - Use MSAL.js 2.x
   - Authorization code flow with PKCE (not implicit flow)
   - Never store tokens in localStorage (use memory)

3. Mobile/Native Apps:
   - Use MSAL for iOS/Android
   - System browser for authentication (not WebView)
   - Broker authentication (Authenticator app)

4. APIs/Microservices:
   - Use managed identities (no secrets in code)
   - On-behalf-of flow for delegated calls
   - Client credentials for daemon apps

5. Legacy Apps:
   - Use Azure AD Application Proxy
   - Header-based or SAML SSO
   - Migrate to modern auth over time
</code></pre>

          <h2>üìã Governance Best Practices</h2>

          <h3>Role-Based Access Control (RBAC)</h3>
          <ul>
            <li><strong>‚úÖ DO:</strong> Use groups for access assignments (not individual users)</li>
            <li><strong>‚úÖ DO:</strong> Follow principle of least privilege</li>
            <li><strong>‚úÖ DO:</strong> Use administrative units for delegated administration</li>
            <li><strong>‚úÖ DO:</strong> Document role assignments and ownership</li>
            <li><strong>‚úÖ DO:</strong> Review role assignments quarterly</li>
            <li><strong>‚ùå DON'T:</strong> Grant Global Admin to more than 5 people</li>
            <li><strong>‚ùå DON'T:</strong> Use built-in roles if custom roles are more appropriate</li>
          </ul>

          <h3>Group Naming Convention</h3>
          <pre data-language="text" class="syntax-highlighted"><code>Recommended Format: {Type}-{Department}-{Purpose}-{Environment}

Examples:
  SG-Sales-SalesforceAccess-Prod
  SG-IT-AzureContributors-Prod
  M365-Marketing-SharePointSite-Prod
  DYN-Finance-DeptUsers-Prod
  
Prefixes:
  SG   = Security Group (manual membership)
  DYN  = Dynamic Security Group
  M365 = Microsoft 365 Group
  DIST = Distribution Group
  
Enforce via Azure AD Group Naming Policy:
  - Prefix: [Department]
  - Suffix: -[Environment]
  - Blocked words: Test, Temp (prevent ad-hoc groups)
</code></pre>

          <h3>Lifecycle Management</h3>
          <ul>
            <li><strong>Onboarding:</strong>
              <ul>
                <li>Automated provisioning from HR system (Workday/SuccessFactors)</li>
                <li>Lifecycle workflows for day-1 tasks (assign license, add to groups)</li>
                <li>Welcome email with passwordless registration link</li>
              </ul>
            </li>
            <li><strong>Changes:</strong>
              <ul>
                <li>Dynamic groups for department/location changes</li>
                <li>Automated group membership based on attributes</li>
                <li>Access reviews for role changes</li>
              </ul>
            </li>
            <li><strong>Offboarding:</strong>
              <ul>
                <li>Immediate account disable on termination</li>
                <li>30-day grace period before deletion (for data recovery)</li>
                <li>Lifecycle workflow to remove access, licenses, group memberships</li>
                <li>Manager notified to reassign shared mailbox/OneDrive</li>
              </ul>
            </li>
          </ul>

          <h3>Guest User Management</h3>
          <ul>
            <li><strong>‚úÖ DO:</strong> Enable guest self-service sign-up only for specific apps</li>
            <li><strong>‚úÖ DO:</strong> Require approval for guest invitations</li>
            <li><strong>‚úÖ DO:</strong> Set guest access expiration (90-180 days)</li>
            <li><strong>‚úÖ DO:</strong> Use access reviews for guest recertification</li>
            <li><strong>‚úÖ DO:</strong> Restrict guest permissions (limited directory access)</li>
            <li><strong>‚úÖ DO:</strong> Apply MFA to guest users via Conditional Access</li>
            <li><strong>‚ùå DON'T:</strong> Allow guests to invite other guests</li>
            <li><strong>‚ùå DON'T:</strong> Grant admin roles to guest accounts</li>
          </ul>

          <h2>üöÄ Deployment Best Practices</h2>

          <h3>Phased Rollout Approach</h3>
          <pre data-language="text" class="syntax-highlighted"><code>Phase 1: Foundation (Weeks 1-2)
  ‚úì Enable Security Defaults OR first CA policies (report-only)
  ‚úì Configure MFA methods
  ‚úì Create break-glass accounts
  ‚úì Set up monitoring and alerting
  ‚úì Document processes

Phase 2: Baseline Security (Weeks 3-4)
  ‚úì Enable MFA for admins (enforce)
  ‚úì Block legacy authentication (enforce)
  ‚úì Enable password hash sync
  ‚úì Configure smart lockout
  ‚úì Enable audit logging

Phase 3: Enhanced Security (Weeks 5-8)
  ‚úì Enable MFA for all users
  ‚úì Deploy Conditional Access policies
  ‚úì Enable Identity Protection
  ‚úì Implement PIM for admin roles
  ‚úì Configure device compliance

Phase 4: Advanced Features (Weeks 9-12)
  ‚úì Enable passwordless authentication
  ‚úì Implement access reviews
  ‚úì Deploy lifecycle workflows
  ‚úì Integrate custom apps
  ‚úì Configure B2B/B2C if needed

Phase 5: Optimization (Ongoing)
  ‚úì Review and tune policies
  ‚úì Analyze sign-in logs
  ‚úì Address false positives
  ‚úì User training and communication
  ‚úì Continuous improvement
</code></pre>

          <h3>Testing Strategy</h3>
          <ul>
            <li><strong>Pilot Group:</strong> Create "CA-Pilot-Users" group with IT staff</li>
            <li><strong>Report-Only Mode:</strong> Always test CA policies in report-only first</li>
            <li><strong>What-If Tool:</strong> Use CA "What If" tool to simulate policy impact</li>
            <li><strong>Break-Glass Test:</strong> Test emergency accounts quarterly</li>
            <li><strong>Communication:</strong> Notify users before enforcing new policies</li>
          </ul>

          <h2>üí∞ Licensing Optimization</h2>

          <h3>License Tier Decision Matrix</h3>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Use Case</th>
                <th>Minimum License</th>
                <th>Why</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Basic SSO + MFA</td>
                <td>Free (Security Defaults)</td>
                <td>Baseline protection at no cost</td>
              </tr>
              <tr>
                <td>Conditional Access</td>
                <td>Azure AD Premium P1</td>
                <td>Granular policies based on conditions</td>
              </tr>
              <tr>
                <td>Identity Protection</td>
                <td>Azure AD Premium P2</td>
                <td>Risk-based access and detection</td>
              </tr>
              <tr>
                <td>PIM for Admin Roles</td>
                <td>Azure AD Premium P2</td>
                <td>Just-in-time privileged access</td>
              </tr>
              <tr>
                <td>Access Reviews</td>
                <td>Azure AD Premium P2</td>
                <td>Automated recertification</td>
              </tr>
              <tr>
                <td>Customer Identity (B2C)</td>
                <td>Azure AD B2C</td>
                <td>Pay-per-MAU pricing model</td>
              </tr>
            </tbody>
          </table>

          <h3>Cost Optimization Tips</h3>
          <ul>
            <li><strong>‚úÖ DO:</strong> Assign P2 licenses only to users who need PIM/Identity Protection</li>
            <li><strong>‚úÖ DO:</strong> Use group-based licensing for automatic assignment</li>
            <li><strong>‚úÖ DO:</strong> Review unused licenses monthly and reclaim</li>
            <li><strong>‚úÖ DO:</strong> Consider Microsoft 365 E5 for bundled savings</li>
            <li><strong>‚ùå DON'T:</strong> Buy P2 for everyone if only admins need PIM</li>
            <li><strong>‚ùå DON'T:</strong> Keep licenses assigned to disabled/deleted users</li>
          </ul>

          <h2>üìä Success Metrics (KPIs)</h2>

          <h3>Security Metrics</h3>
          <ul>
            <li><strong>MFA Adoption Rate:</strong> Target 100% (measure weekly)</li>
            <li><strong>Legacy Auth Sign-Ins:</strong> Target 0 (block with CA policy)</li>
            <li><strong>Risky Sign-Ins Blocked:</strong> Track trend over time</li>
            <li><strong>Compromised Accounts:</strong> Target near-zero</li>
            <li><strong>Mean Time to Remediation (MTTR):</strong> < 4 hours for high-risk users</li>
            <li><strong>Conditional Access Coverage:</strong> 100% of cloud apps</li>
          </ul>

          <h3>Operational Metrics</h3>
          <ul>
            <li><strong>Password Reset Rate:</strong> Track reduction after SSPR enablement</li>
            <li><strong>Helpdesk Tickets (Auth):</strong> Target 50% reduction with SSPR/MFA</li>
            <li><strong>Average Sign-In Time:</strong> Monitor for user experience</li>
            <li><strong>CA Policy Denials:</strong> Track false positives</li>
            <li><strong>Access Review Completion:</strong> Target 95% within SLA</li>
          </ul>

          <h2>‚ö†Ô∏è Common Pitfalls to Avoid</h2>

          <div class="callout">
            <strong>üö® Top 10 Mistakes</strong>
            <ol style="margin-bottom: 0;">
              <li><strong>No Break-Glass Accounts:</strong> You lock yourself out during CA policy issues</li>
              <li><strong>Not Testing CA Policies:</strong> Accidentally block all users including admins</li>
              <li><strong>SMS-Only MFA:</strong> Vulnerable to SIM swap attacks</li>
              <li><strong>Syncing Privileged Accounts:</strong> On-prem compromise = cloud compromise</li>
              <li><strong>No PIM for Admins:</strong> Permanent admin access = higher risk</li>
              <li><strong>Ignoring Legacy Auth:</strong> Backdoor for attackers to bypass MFA</li>
              <li><strong>No Log Retention:</strong> Can't investigate incidents or meet compliance</li>
              <li><strong>Over-Privileged App Permissions:</strong> Apps with more permissions than needed</li>
              <li><strong>Not Reviewing Guest Access:</strong> Stale external users with access</li>
              <li><strong>No User Training:</strong> Users don't understand why security controls exist</li>
            </ol>
          </div>

          <h2>üìñ Implementation Checklist</h2>

          <pre data-language="text" class="syntax-highlighted"><code>Foundation Security:
‚òê Enable Security Defaults OR Conditional Access
‚òê Require MFA for all administrators
‚òê Create 2 break-glass accounts
‚òê Block legacy authentication
‚òê Enable password hash sync
‚òê Configure smart lockout
‚òê Enable audit logs (send to Log Analytics)

Enhanced Security:
‚òê Require MFA for all users
‚òê Deploy risk-based Conditional Access
‚òê Enable Identity Protection
‚òê Implement PIM for admin roles
‚òê Enable passwordless authentication
‚òê Configure device compliance policies

Governance:
‚òê Implement group naming policy
‚òê Configure lifecycle workflows
‚òê Set up access reviews (quarterly)
‚òê Document role assignments
‚òê Establish guest user policies

Monitoring:
‚òê Configure alerts for critical events
‚òê Review sign-in logs weekly
‚òê Monitor risky users/sign-ins
‚òê Track MFA adoption
‚òê Review CA policy impact

Applications:
‚òê Inventory all apps using Azure AD
‚òê Migrate legacy apps to modern auth
‚òê Enable app-level Conditional Access
‚òê Review app permissions quarterly
‚òê Use managed identities where possible
</code></pre>
        </section>

        <!-- Resources Section -->
        <section id="resources" role="article">
          <h1>Resources & Learning</h1>
          <span class="badge">resources</span>
          <span class="badge">documentation</span>
          <span class="badge">learning</span>
          <span class="badge">certification</span>
          <span class="badge">community</span>
          
          <p>Comprehensive collection of official documentation, learning resources, tools, and community links for Azure Entra ID.</p>

          <h2>üìö Official Documentation</h2>

          <h3>Core Documentation</h3>
          <ul>
            <li><strong>Microsoft Entra Documentation:</strong> <a href="https://learn.microsoft.com/entra" target="_blank">learn.microsoft.com/entra</a></li>
            <li><strong>Azure AD Documentation (legacy):</strong> <a href="https://learn.microsoft.com/azure/active-directory" target="_blank">learn.microsoft.com/azure/active-directory</a></li>
            <li><strong>What's New in Entra:</strong> <a href="https://learn.microsoft.com/entra/fundamentals/whats-new" target="_blank">Release notes and updates</a></li>
            <li><strong>Architecture Documentation:</strong> <a href="https://learn.microsoft.com/azure/architecture/browse/?terms=entra" target="_blank">Reference architectures</a></li>
            <li><strong>Identity Fundamentals:</strong> <a href="https://learn.microsoft.com/entra/fundamentals" target="_blank">Core concepts and basics</a></li>
          </ul>

          <h3>Feature-Specific Documentation</h3>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Feature</th>
                <th>Documentation Link</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Conditional Access</td>
                <td><a href="https://learn.microsoft.com/entra/identity/conditional-access" target="_blank">learn.microsoft.com/entra/identity/conditional-access</a></td>
              </tr>
              <tr>
                <td>Identity Protection</td>
                <td><a href="https://learn.microsoft.com/entra/id-protection" target="_blank">learn.microsoft.com/entra/id-protection</a></td>
              </tr>
              <tr>
                <td>Privileged Identity Management</td>
                <td><a href="https://learn.microsoft.com/entra/id-governance/privileged-identity-management" target="_blank">learn.microsoft.com/entra/id-governance/pim</a></td>
              </tr>
              <tr>
                <td>B2B Collaboration</td>
                <td><a href="https://learn.microsoft.com/entra/external-id/what-is-b2b" target="_blank">learn.microsoft.com/entra/external-id/b2b</a></td>
              </tr>
              <tr>
                <td>Azure AD B2C</td>
                <td><a href="https://learn.microsoft.com/azure/active-directory-b2c" target="_blank">learn.microsoft.com/azure/ad-b2c</a></td>
              </tr>
              <tr>
                <td>Application Registration</td>
                <td><a href="https://learn.microsoft.com/entra/identity-platform/quickstart-register-app" target="_blank">learn.microsoft.com/entra/identity-platform</a></td>
              </tr>
              <tr>
                <td>Managed Identities</td>
                <td><a href="https://learn.microsoft.com/entra/identity/managed-identities-azure-resources" target="_blank">learn.microsoft.com/entra/managed-identities</a></td>
              </tr>
              <tr>
                <td>Microsoft Graph API</td>
                <td><a href="https://learn.microsoft.com/graph" target="_blank">learn.microsoft.com/graph</a></td>
              </tr>
              <tr>
                <td>MSAL (Auth Libraries)</td>
                <td><a href="https://learn.microsoft.com/entra/identity-platform/msal-overview" target="_blank">learn.microsoft.com/entra/msal</a></td>
              </tr>
              <tr>
                <td>Hybrid Identity</td>
                <td><a href="https://learn.microsoft.com/entra/identity/hybrid" target="_blank">learn.microsoft.com/entra/identity/hybrid</a></td>
              </tr>
            </tbody>
          </table>

          <h2>üéì Learning Paths</h2>

          <h3>Microsoft Learn</h3>
          <ul>
            <li><strong>Secure identities with Azure AD:</strong> <a href="https://learn.microsoft.com/training/paths/manage-identity-and-access" target="_blank">Identity and access fundamentals</a></li>
            <li><strong>Implement and manage identity:</strong> <a href="https://learn.microsoft.com/training/paths/implement-manage-identity" target="_blank">Advanced identity management</a></li>
            <li><strong>Implement authentication and access management:</strong> <a href="https://learn.microsoft.com/training/paths/implement-authentication-access-management" target="_blank">Auth and access patterns</a></li>
            <li><strong>Implement access management for applications:</strong> <a href="https://learn.microsoft.com/training/paths/implement-access-management-for-apps" target="_blank">App integration and SSO</a></li>
            <li><strong>Plan and implement identity governance:</strong> <a href="https://learn.microsoft.com/training/paths/plan-implement-entitlement-management" target="_blank">Governance and compliance</a></li>
          </ul>

          <h3>Microsoft Virtual Training Days (Free)</h3>
          <ul>
            <li><strong>Microsoft Azure Virtual Training Day: Security, Compliance, and Identity Fundamentals</strong></li>
            <li><strong>Microsoft Security Virtual Training Day: Defend Against Threats and Secure Cloud Environments</strong></li>
            <li>Register at: <a href="https://www.microsoft.com/trainingdays" target="_blank">microsoft.com/trainingdays</a></li>
          </ul>

          <h2>üèÜ Certifications</h2>

          <h3>Identity and Access Administrator (SC-300)</h3>
          <ul>
            <li><strong>Certification:</strong> Microsoft Certified: Identity and Access Administrator Associate</li>
            <li><strong>Exam:</strong> SC-300</li>
            <li><strong>Topics Covered:</strong>
              <ul>
                <li>Implement identity management (25-30%)</li>
                <li>Implement authentication and access management (25-30%)</li>
                <li>Implement access management for applications (10-15%)</li>
                <li>Plan and implement identity governance (25-30%)</li>
              </ul>
            </li>
            <li><strong>Study Guide:</strong> <a href="https://learn.microsoft.com/certifications/exams/sc-300" target="_blank">learn.microsoft.com/certifications/sc-300</a></li>
            <li><strong>Practice Assessment:</strong> Free practice test available on Microsoft Learn</li>
          </ul>

          <h3>Security Administrator (SC-200)</h3>
          <ul>
            <li><strong>Certification:</strong> Microsoft Certified: Security Operations Analyst Associate</li>
            <li><strong>Exam:</strong> SC-200</li>
            <li><strong>Identity Topics:</strong> Identity Protection, threat detection, incident response</li>
            <li><strong>Study Guide:</strong> <a href="https://learn.microsoft.com/certifications/exams/sc-200" target="_blank">learn.microsoft.com/certifications/sc-200</a></li>
          </ul>

          <h3>Azure Security Engineer (AZ-500)</h3>
          <ul>
            <li><strong>Certification:</strong> Microsoft Certified: Azure Security Engineer Associate</li>
            <li><strong>Exam:</strong> AZ-500</li>
            <li><strong>Identity Topics:</strong> Azure AD, RBAC, managed identities, PIM</li>
            <li><strong>Study Guide:</strong> <a href="https://learn.microsoft.com/certifications/exams/az-500" target="_blank">learn.microsoft.com/certifications/az-500</a></li>
          </ul>

          <h3>Foundational Certifications</h3>
          <ul>
            <li><strong>SC-900:</strong> Microsoft Security, Compliance, and Identity Fundamentals</li>
            <li><strong>AZ-900:</strong> Microsoft Azure Fundamentals (includes identity basics)</li>
          </ul>

          <div class="callout">
            <strong>üí° Certification Tip</strong><br />
            Microsoft offers free exam vouchers through Virtual Training Days and Cloud Skills Challenges. Check <a href="https://developer.microsoft.com/offers" target="_blank">developer.microsoft.com/offers</a> for current promotions.
          </div>

          <h2>üõ†Ô∏è Tools & SDKs</h2>

          <h3>Developer Tools</h3>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Tool</th>
                <th>Purpose</th>
                <th>Link</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Microsoft Graph Explorer</strong></td>
                <td>Interactive API testing</td>
                <td><a href="https://developer.microsoft.com/graph/graph-explorer" target="_blank">developer.microsoft.com/graph/graph-explorer</a></td>
              </tr>
              <tr>
                <td><strong>MSAL.js</strong></td>
                <td>JavaScript auth library</td>
                <td><a href="https://github.com/AzureAD/microsoft-authentication-library-for-js" target="_blank">GitHub: MSAL.js</a></td>
              </tr>
              <tr>
                <td><strong>MSAL.NET</strong></td>
                <td>.NET auth library</td>
                <td><a href="https://github.com/AzureAD/microsoft-authentication-library-for-dotnet" target="_blank">GitHub: MSAL.NET</a></td>
              </tr>
              <tr>
                <td><strong>MSAL Python</strong></td>
                <td>Python auth library</td>
                <td><a href="https://github.com/AzureAD/microsoft-authentication-library-for-python" target="_blank">GitHub: MSAL Python</a></td>
              </tr>
              <tr>
                <td><strong>MSAL for iOS/macOS</strong></td>
                <td>Native mobile auth</td>
                <td><a href="https://github.com/AzureAD/microsoft-authentication-library-for-objc" target="_blank">GitHub: MSAL iOS</a></td>
              </tr>
              <tr>
                <td><strong>MSAL for Android</strong></td>
                <td>Android auth library</td>
                <td><a href="https://github.com/AzureAD/microsoft-authentication-library-for-android" target="_blank">GitHub: MSAL Android</a></td>
              </tr>
            </tbody>
          </table>

          <h3>PowerShell Modules</h3>
          <pre data-language="powershell" class="syntax-highlighted"><code># Install Azure AD PowerShell (legacy)
Install-Module AzureAD

# Install Microsoft Graph PowerShell (recommended)
Install-Module Microsoft.Graph

# Connect to Azure AD
Connect-AzureAD

# Connect to Microsoft Graph
Connect-MgGraph -Scopes "User.Read.All", "Group.ReadWrite.All"

# Get users
Get-AzureADUser
Get-MgUser
</code></pre>

          <h3>Azure CLI</h3>
          <pre data-language="bash" class="syntax-highlighted"><code># Install Azure CLI
# https://learn.microsoft.com/cli/azure/install-azure-cli

# Sign in
az login

# List users
az ad user list

# Create user
az ad user create --display-name "John Doe" \
  --user-principal-name john@contoso.com \
  --password "P@ssw0rd!"

# List groups
az ad group list
</code></pre>

          <h3>VS Code Extensions</h3>
          <ul>
            <li><strong>Azure Account:</strong> Sign in to Azure from VS Code</li>
            <li><strong>Azure Active Directory:</strong> Manage Azure AD resources</li>
            <li><strong>REST Client:</strong> Test Graph API calls</li>
          </ul>

          <h2>üìñ Sample Code Repositories</h2>

          <h3>Official Microsoft Samples</h3>
          <ul>
            <li><strong>Azure AD Samples (all languages):</strong> <a href="https://github.com/Azure-Samples?q=active-directory" target="_blank">github.com/Azure-Samples</a></li>
            <li><strong>Microsoft Identity Samples:</strong> <a href="https://github.com/AzureAD" target="_blank">github.com/AzureAD</a></li>
            <li><strong>Graph API Samples:</strong> <a href="https://github.com/microsoftgraph" target="_blank">github.com/microsoftgraph</a></li>
          </ul>

          <h3>Popular Sample Applications</h3>
          <ul>
            <li><strong>ASP.NET Core Web App:</strong> <a href="https://github.com/Azure-Samples/active-directory-aspnetcore-webapp-openidconnect-v2" target="_blank">OIDC authentication sample</a></li>
            <li><strong>React SPA:</strong> <a href="https://github.com/Azure-Samples/ms-identity-javascript-react-tutorial" target="_blank">React with MSAL.js</a></li>
            <li><strong>Node.js Web App:</strong> <a href="https://github.com/Azure-Samples/ms-identity-javascript-nodejs-tutorial" target="_blank">Express with MSAL Node</a></li>
            <li><strong>Python Web App:</strong> <a href="https://github.com/Azure-Samples/ms-identity-python-webapp" target="_blank">Flask with MSAL Python</a></li>
            <li><strong>iOS Mobile App:</strong> <a href="https://github.com/Azure-Samples/ms-identity-mobile-apple-swift-objc" target="_blank">Swift with MSAL</a></li>
            <li><strong>Android Mobile App:</strong> <a href="https://github.com/Azure-Samples/ms-identity-android-java" target="_blank">Java with MSAL</a></li>
            <li><strong>Daemon/Service App:</strong> <a href="https://github.com/Azure-Samples/active-directory-dotnetcore-daemon-v2" target="_blank">Client credentials flow</a></li>
          </ul>

          <h2>üì∞ Blogs & News</h2>

          <h3>Official Blogs</h3>
          <ul>
            <li><strong>Microsoft Entra Blog:</strong> <a href="https://techcommunity.microsoft.com/category/microsoft-entra/blog" target="_blank">Product updates and announcements</a></li>
            <li><strong>Azure AD Identity Blog (legacy):</strong> <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/bg-p/Identity" target="_blank">Identity news and tips</a></li>
            <li><strong>Microsoft Security Blog:</strong> <a href="https://www.microsoft.com/security/blog/identity" target="_blank">Identity security insights</a></li>
            <li><strong>Alex Weinert's Blog (VP of Identity Security):</strong> <a href="https://techcommunity.microsoft.com/users/alex%20weinert/152858" target="_blank">Identity security thought leadership</a></li>
          </ul>

          <h3>Community Blogs</h3>
          <ul>
            <li><strong>Daniel Chronlund:</strong> Azure AD automation and PowerShell</li>
            <li><strong>Nicola Suter:</strong> Azure AD and security best practices</li>
            <li><strong>Merill Fernando:</strong> Entra ID deep dives and tools</li>
            <li><strong>Jan Bakker:</strong> Azure AD B2C expertise</li>
          </ul>

          <h2>üë• Community & Support</h2>

          <h3>Forums & Q&A</h3>
          <ul>
            <li><strong>Microsoft Q&A (Azure AD):</strong> <a href="https://learn.microsoft.com/answers/tags/455/entra-id" target="_blank">Official Microsoft Q&A platform</a></li>
            <li><strong>Stack Overflow:</strong> <a href="https://stackoverflow.com/questions/tagged/azure-active-directory" target="_blank">[azure-active-directory] tag</a></li>
            <li><strong>Microsoft Tech Community:</strong> <a href="https://techcommunity.microsoft.com/t5/microsoft-entra/ct-p/MicrosoftEntra" target="_blank">Forums and discussions</a></li>
            <li><strong>Reddit:</strong> <a href="https://www.reddit.com/r/AZURE" target="_blank">r/AZURE subreddit</a></li>
          </ul>

          <h3>User Groups & Events</h3>
          <ul>
            <li><strong>Azure AD User Group:</strong> Monthly virtual meetups</li>
            <li><strong>Microsoft Ignite:</strong> Annual conference (November)</li>
            <li><strong>Microsoft Build:</strong> Developer conference (May)</li>
            <li><strong>Local Azure Meetups:</strong> Find on meetup.com</li>
          </ul>

          <h3>Support Channels</h3>
          <ul>
            <li><strong>Azure Support:</strong> <a href="https://azure.microsoft.com/support/options" target="_blank">Paid support plans</a></li>
            <li><strong>Premier Support:</strong> Dedicated technical account manager</li>
            <li><strong>Community Support:</strong> Free via Microsoft Q&A and forums</li>
            <li><strong>Partner Support:</strong> Through Microsoft partner network</li>
          </ul>

          <h2>üìπ Video Resources</h2>

          <h3>YouTube Channels</h3>
          <ul>
            <li><strong>Microsoft Security:</strong> <a href="https://www.youtube.com/@MicrosoftSecurity" target="_blank">Identity protection and security</a></li>
            <li><strong>Microsoft Developer:</strong> <a href="https://www.youtube.com/@MicrosoftDeveloper" target="_blank">Identity platform tutorials</a></li>
            <li><strong>John Savill's Technical Training:</strong> <a href="https://www.youtube.com/@NTFAQGuy" target="_blank">Azure AD deep dives</a></li>
            <li><strong>Adam Marczak - Azure for Everyone:</strong> <a href="https://www.youtube.com/@Azure4Everyone" target="_blank">Azure tutorials</a></li>
          </ul>

          <h3>Recommended Video Series</h3>
          <ul>
            <li><strong>Azure AD Fundamentals (MS Learn):</strong> Introduction to identity concepts</li>
            <li><strong>Conditional Access Deep Dive:</strong> Policy design and implementation</li>
            <li><strong>Zero Trust Security:</strong> Architecture and implementation</li>
            <li><strong>Microsoft Mechanics:</strong> Latest feature demos and updates</li>
          </ul>

          <h2>üìä Interactive Tools</h2>

          <h3>Azure AD Design Tools</h3>
          <ul>
            <li><strong>Conditional Access What If Tool:</strong> Test policy impact (Azure portal ‚Üí CA ‚Üí What If)</li>
            <li><strong>Sign-In Logs:</strong> Debug authentication issues (Azure portal ‚Üí Sign-in logs)</li>
            <li><strong>Azure AD Connect Health:</strong> Monitor hybrid identity sync health</li>
            <li><strong>Identity Secure Score:</strong> Measure security posture (Microsoft 365 Defender portal)</li>
          </ul>

          <h3>Third-Party Tools</h3>
          <ul>
            <li><strong>JWT.io:</strong> <a href="https://jwt.io" target="_blank">Decode and validate JWT tokens</a></li>
            <li><strong>SAML-tracer (browser extension):</strong> Debug SAML authentication flows</li>
            <li><strong>Fiddler:</strong> Capture and inspect HTTP traffic for auth debugging</li>
            <li><strong>AADInternals (PowerShell):</strong> Advanced Azure AD management (use carefully!)</li>
          </ul>

          <h2>üìã Checklists & Templates</h2>

          <h3>Deployment Checklists</h3>
          <ul>
            <li><strong>Azure AD Security Checklist:</strong> <a href="https://learn.microsoft.com/entra/architecture/security-operations" target="_blank">Security operations guide</a></li>
            <li><strong>Conditional Access Deployment Guide:</strong> <a href="https://learn.microsoft.com/entra/identity/conditional-access/plan-conditional-access" target="_blank">Step-by-step planning</a></li>
            <li><strong>Zero Trust Deployment Guide:</strong> <a href="https://learn.microsoft.com/security/zero-trust/deploy/identity" target="_blank">Identity pillar implementation</a></li>
          </ul>

          <h3>Policy Templates</h3>
          <ul>
            <li><strong>Conditional Access Templates:</strong> Pre-built policies in Azure portal</li>
            <li><strong>Lifecycle Workflow Templates:</strong> Common HR integration scenarios</li>
            <li><strong>Access Package Templates:</strong> Entitlement management starting points</li>
          </ul>

          <h2>üîí Security Resources</h2>

          <h3>Security Guidance</h3>
          <ul>
            <li><strong>Azure Security Baseline for Azure AD:</strong> <a href="https://learn.microsoft.com/security/benchmark/azure/baselines/aad-security-baseline" target="_blank">Security best practices</a></li>
            <li><strong>Securing Privileged Access:</strong> <a href="https://learn.microsoft.com/security/privileged-access-workstations/overview" target="_blank">Admin security roadmap</a></li>
            <li><strong>NIST 800-63B Compliance:</strong> <a href="https://learn.microsoft.com/entra/standards/nist-overview" target="_blank">Federal authentication guidance</a></li>
            <li><strong>GDPR Compliance:</strong> <a href="https://learn.microsoft.com/compliance/regulatory/gdpr" target="_blank">Data protection and privacy</a></li>
          </ul>

          <h3>Threat Intelligence</h3>
          <ul>
            <li><strong>MITRE ATT&CK (Identity):</strong> <a href="https://attack.mitre.org/tactics/TA0006" target="_blank">Credential access tactics</a></li>
            <li><strong>Microsoft Digital Defense Report:</strong> Annual threat landscape report</li>
            <li><strong>Azure AD Security Operations Guide:</strong> Threat detection and response</li>
          </ul>

          <h2>üåê Additional Learning</h2>

          <h3>Books (Recommended)</h3>
          <ul>
            <li><strong>"Exam Ref SC-300 Microsoft Identity and Access Administrator"</strong> by Razi Rais & Jeff Gilbert</li>
            <li><strong>"Azure Active Directory for Secure Application Development"</strong> by Sjoukje Zaal</li>
            <li><strong>"Mastering Identity and Access Management with Microsoft Azure"</strong> by Jochen Nickel</li>
          </ul>

          <h3>Podcasts</h3>
          <ul>
            <li><strong>The Azure Security Podcast:</strong> Weekly security news and interviews</li>
            <li><strong>The Cloud Security Podcast:</strong> Identity and cloud security topics</li>
          </ul>

          <h2>üîó Quick Links</h2>

          <div class="callout">
            <strong>üöÄ Essential Portals</strong><br />
            <ul style="margin-bottom: 0;">
              <li><strong>Azure Portal:</strong> <a href="https://portal.azure.com" target="_blank">portal.azure.com</a></li>
              <li><strong>Entra Admin Center:</strong> <a href="https://entra.microsoft.com" target="_blank">entra.microsoft.com</a></li>
              <li><strong>My Security Info (user):</strong> <a href="https://aka.ms/mysecurityinfo" target="_blank">aka.ms/mysecurityinfo</a></li>
              <li><strong>My Apps (user):</strong> <a href="https://myapps.microsoft.com" target="_blank">myapps.microsoft.com</a></li>
              <li><strong>Graph Explorer:</strong> <a href="https://developer.microsoft.com/graph/graph-explorer" target="_blank">developer.microsoft.com/graph/graph-explorer</a></li>
              <li><strong>Microsoft 365 Defender:</strong> <a href="https://security.microsoft.com" target="_blank">security.microsoft.com</a></li>
            </ul>
          </div>

          <h2>üì© Stay Updated</h2>

          <h3>Subscribe to Notifications</h3>
          <ul>
            <li><strong>Azure Updates (Identity):</strong> <a href="https://azure.microsoft.com/updates/?category=identity" target="_blank">Product announcements</a></li>
            <li><strong>Microsoft 365 Roadmap:</strong> <a href="https://www.microsoft.com/microsoft-365/roadmap" target="_blank">Upcoming features</a></li>
            <li><strong>Service Health:</strong> Monitor via Azure Service Health in portal</li>
            <li><strong>RSS Feeds:</strong> Subscribe to Microsoft Tech Community blog feeds</li>
          </ul>

          <div class="callout">
            <strong>üí° Pro Tip</strong><br />
            Bookmark the <a href="https://learn.microsoft.com/entra/fundamentals/whats-new" target="_blank">What's New in Entra</a> page and check monthly for the latest features, deprecations, and security updates. Microsoft releases identity updates continuously.
          </div>

          <h2>üéØ Next Steps</h2>
          <p>After reviewing these resources, consider:</p>
          <ol>
            <li>Complete a Microsoft Learn path based on your role (admin, developer, architect)</li>
            <li>Set up a free Azure tenant to practice hands-on</li>
            <li>Join the Microsoft Tech Community to ask questions and share knowledge</li>
            <li>Consider certification (SC-300 for identity admins, AZ-500 for security engineers)</li>
            <li>Follow Microsoft security blogs to stay current with threats and mitigations</li>
          </ol>

          <hr />
          <div class="document-footer">
            <p>
              <strong>Last Updated:</strong> January 2026 | 
              <strong>Curated by:</strong> Murthy Vepa with ‚ù§Ô∏è | <strong>Powered by:</strong> GitHub Copilot
            </p>
          </div>
        </section>
        </div>
      </main>
    </div>
    
    <nav class="controls" role="navigation" aria-label="Pagination">
      <div class="btn-group" role="group">
        <button class="btn btn-outline-info btn-sm" id="prevBtn" title="Previous" aria-label="Previous concept">&nbsp;&lt;&nbsp;</button>
        <button class="btn btn-outline-info btn-sm" id="nextBtn" title="Next" aria-label="Next concept">&nbsp;&gt;&nbsp;</button>
      </div>
    </nav>
  </div>  <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarOffcanvas" aria-labelledby="sidebarLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="sidebarLabel">Contents</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body p-0">
      <ul class="list-group list-group-flush w-100" id="tocMobile"></ul>
    </div>
  </div>

  <script>
    // ---- Mermaid Initialization ----
    document.addEventListener('DOMContentLoaded', () => {
      if (window.mermaid) {
        window.mermaid.contentLoaded();
      }
    });

    // ---- Configuration ----
    const sectionConfig = [
      { id: "overview", title: "üìñ What is Azure Entra?", tags: ["intro", "overview", "basics", "identity"] },
      { id: "key-concepts", title: "üí° Key Concepts", tags: ["concepts", "fundamentals", "terminology", "tokens", "claims"] },
      { id: "key-components", title: "üèóÔ∏è Key Components", tags: ["architecture", "components", "structure", "entra-id"] },
      { id: "authentication", title: "üîê Authentication & Authorization", tags: ["auth", "authentication", "authorization", "oauth", "saml", "sso"] },
      { id: "identity-types", title: "üë• Identity Types", tags: ["users", "groups", "service-principals", "managed-identity", "identities"] },
      { id: "conditional-access", title: "üõ°Ô∏è Conditional Access", tags: ["conditional-access", "policies", "security", "mfa", "zero-trust"] },
      { id: "app-integration", title: "üîó Application Integration", tags: ["app-registration", "integration", "spa", "web-api", "enterprise-apps"] },
      { id: "permissions", title: "üîë Permissions & Consent", tags: ["permissions", "consent", "scopes", "roles", "delegated", "application"] },
      { id: "governance", title: "‚öñÔ∏è Identity Governance", tags: ["governance", "lifecycle", "access-reviews", "entitlement", "pim"] },
      { id: "external-identities", title: "üåê External Identities (B2B/B2C)", tags: ["b2b", "b2c", "external", "guest", "customers"] },
      { id: "protection", title: "üõ°Ô∏è Identity Protection", tags: ["protection", "risk", "detection", "security", "threat"] },
      { id: "tutorials", title: "üöÄ Getting Started & Tutorials", tags: ["tutorials", "quickstart", "getting-started", "hands-on"] },
      { id: "best-practices", title: "‚ú® Best Practices", tags: ["best-practices", "recommendations", "patterns", "security"] },
      { id: "resources", title: "üìö Resources", tags: ["docs", "community", "links", "learning"] }
    ];

    // ---- State & rendering ----
    const state = {
      index: 0,
      filtered: sectionConfig.map((_, i) => i), // indices
    };

    const els = {
      toc: document.getElementById('toc'),
      tocMobile: document.getElementById('tocMobile'),
      prev: document.getElementById('prevBtn'),
      next: document.getElementById('nextBtn'),
      toggleSidebar: document.getElementById('toggleSidebar'),
      themeToggle: document.getElementById('themeToggle'),
      main: document.getElementById('main'),
      sidebar: document.querySelector('nav.sidebar'),
      sidebarOffcanvas: document.getElementById('sidebarOffcanvas')
    };

    function buildTOC(){
      // Clear both TOC lists
      els.toc.innerHTML = '';
      els.tocMobile.innerHTML = '';
      
      state.filtered.forEach((idx) => {
        const s = sectionConfig[idx];
        
        // Desktop sidebar
        const liDesktop = document.createElement('li');
        liDesktop.className = 'list-group-item';
        const aDesktop = document.createElement('a');
        aDesktop.href = `#${s.id}`;
        aDesktop.textContent = s.title;
        aDesktop.addEventListener('click', (e) => {
          e.preventDefault();
          navigateToId(s.id);
          closeSidebar();
        });
        liDesktop.appendChild(aDesktop);
        els.toc.appendChild(liDesktop);
        
        // Mobile offcanvas
        const liMobile = document.createElement('li');
        liMobile.className = 'list-group-item';
        const aMobile = document.createElement('a');
        aMobile.href = `#${s.id}`;
        aMobile.textContent = s.title;
        aMobile.addEventListener('click', (e) => {
          e.preventDefault();
          navigateToId(s.id);
          closeSidebar();
        });
        liMobile.appendChild(aMobile);
        els.tocMobile.appendChild(liMobile);
      });
      highlightActiveTOC();
    }

    function setActiveByIndex(i){
      const ids = state.filtered.map(idx => sectionConfig[idx].id);
      document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
      const id = ids[i];
      const active = document.getElementById(id);
      if (active){
        active.classList.add('active');
        active.setAttribute('tabindex', '-1');
        active.focus({preventScroll:true});
      }
      updateControls();
      highlightActiveTOC();
      updateURLHash(id);
    }

    function updateControls(){
      const count = state.filtered.length;
      els.prev.disabled = state.index <= 0;
      els.next.disabled = state.index >= count - 1;
    }

    function filterTOC(query){
      const q = query.trim().toLowerCase();
      state.filtered = sectionConfig
        .map((s, i) => ({s, i}))
        .filter(({s}) => s.title.toLowerCase().includes(q) || s.tags.some(t => t.toLowerCase().includes(q)))
        .map(({i}) => i);

      state.index = Math.min(state.index, Math.max(0, state.filtered.length - 1));
      buildTOC();
      setActiveByIndex(state.index);
    }

    function navigate(delta){
      const count = state.filtered.length;
      const nextIndex = Math.min(Math.max(state.index + delta, 0), count - 1);
      if (nextIndex !== state.index){
        state.index = nextIndex;
        setActiveByIndex(state.index);
        // Scroll content to top
        const contentEl = document.querySelector('.content');
        if (contentEl) contentEl.scrollTop = 0;
      }
    }

    function navigateToId(id){
      const idxInFiltered = state.filtered.findIndex(fi => sectionConfig[fi].id === id);
      if (idxInFiltered !== -1){
        state.index = idxInFiltered;
        setActiveByIndex(state.index);
        // Scroll content to top
        const contentEl = document.querySelector('.content');
        if (contentEl) contentEl.scrollTop = 0;
      } else {
        state.filtered = sectionConfig.map((_, i) => i);
        buildTOC();
        navigateToId(id);
      }
    }

    function updateURLHash(id){
      const url = new URL(window.location);
      url.hash = id;
      history.replaceState(null, '', url);
    }

    function highlightActiveTOC(){
      const ids = state.filtered.map(idx => sectionConfig[idx].id);
      const activeId = ids[state.index];
      // Highlight desktop sidebar
      els.toc.querySelectorAll('a').forEach(a => a.classList.toggle('active', a.getAttribute('href') === `#${activeId}`));
      // Highlight mobile offcanvas
      els.tocMobile.querySelectorAll('a').forEach(a => a.classList.toggle('active', a.getAttribute('href') === `#${activeId}`));
    }

    function openSidebar(){
      const offcanvas = new bootstrap.Offcanvas(document.getElementById('sidebarOffcanvas'));
      offcanvas.show();
    }
    function closeSidebar(){
      const offcanvasElement = document.getElementById('sidebarOffcanvas');
      const offcanvas = bootstrap.Offcanvas.getInstance(offcanvasElement);
      if(offcanvas) offcanvas.hide();
    }

    // ---- Events ----
    els.prev.addEventListener('click', () => navigate(-1));
    els.next.addEventListener('click', () => navigate(1));

    // Keyboard navigation
    window.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') navigate(-1);
      else if (e.key === 'ArrowRight') navigate(1);
      else if (e.key === 'Escape') closeSidebar();
    });

    // Deep linking on load/hash change
    window.addEventListener('hashchange', () => {
      const id = location.hash.replace('#','');
      if (id) navigateToId(id);
    });

    // Sidebar toggle (mobile)
    els.toggleSidebar.addEventListener('click', () => {
      openSidebar();
    });

    // Restore theme
    (function(){
      try {
        const saved = localStorage.getItem('concepts-theme');
        if (saved) { 
          document.documentElement.setAttribute('data-theme', saved);
          els.themeToggle.textContent = saved === 'light' ? 'üåó' : 'üåô';
        }
      } catch {}
    })();

    // Initial render
    buildTOC();

    // Navigate to hash if present, otherwise show first section
    const initialId = location.hash.replace('#','');
    if (initialId){ 
      navigateToId(initialId); 
    } else {
      setActiveByIndex(0);
      // Scroll content to top on initial load
      const contentEl = document.querySelector('.content');
      if (contentEl) contentEl.scrollTop = 0;
    }

  </script>
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>