<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Blazor - In a Nutshell</title>
  <meta name="description" content="A comprehensive guide to Blazor." />
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root{
      --bg: #ffffff;
      --fg: #0f172a;
      --muted: #64748b;
      --accent: #3b82f6;
      --accent-light: #dbeafe;
      --border: #e2e8f0;
      --sidebar-bg: #ffffff;
      --sidebar-fg: #0f172a;
      --code-bg: linear-gradient(90deg, rgba(59, 130, 246, 0.08) 0%, rgba(59, 130, 246, 0.12) 100%);
      --focus: #10b981;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
      --shadow-md: 0 4px 6px rgba(0,0,0,0.1), 0 2px 4px rgba(0,0,0,0.06);
      --shadow-lg: 0 10px 20px rgba(0,0,0,0.12), 0 6px 6px rgba(0,0,0,0.08);
      --gradient: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    }
    
    /* Bootstrap Gradient Utility Classes */
    .bg-gradient-blue { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%) !important; }
    .bg-gradient-green { background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%) !important; }
    .bg-gradient-yellow { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%) !important; }
    .bg-gradient-pink { background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%) !important; }
    .bg-gradient-purple { background: linear-gradient(135deg, #e9d5ff 0%, #d8b4fe 100%) !important; }
    .bg-gradient-teal { background: linear-gradient(135deg, #ccfbf1 0%, #99f6e4 100%) !important; }
    .bg-gradient-blue-dark { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important; }
    .bg-gradient-gray { background: linear-gradient(135deg, #64748b 0%, #475569 100%) !important; }
    .bg-gradient-purple-dark { background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%) !important; }
    .bg-gradient-teal-dark { background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%) !important; }
    .bg-gradient-green-dark { background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important; }
    .bg-gradient-red { background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%) !important; }
    .bg-gradient-green-light { background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%) !important; }
    .bg-gradient-blue-sky { background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%) !important; }
    .bg-gradient-red-dark { background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%) !important; }
    .bg-gradient-indigo { background: linear-gradient(135deg, #4f46e5 0%, #4338ca 100%) !important; }
    .bg-gradient-green-medium { background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important; }
    .bg-gradient-orange { background: linear-gradient(135deg, #f97316 0%, #ea580c 100%) !important; }
    .bg-gradient-violet { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%) !important; }
    .bg-gradient-lime { background: linear-gradient(135deg, #84cc16 0%, #65a30d 100%) !important; }
    .bg-gradient-sky { background: linear-gradient(135deg, #0284c7 0%, #0369a1 100%) !important; }
    
    /* Apply theme colors to Bootstrap elements */
    body { background-color: var(--bg); color: var(--fg); overflow: hidden; }
    .navbar { background-color: var(--fg) !important; border-bottom: none !important; box-shadow: var(--shadow-md) !important; }
    .navbar-brand { cursor: pointer; color: var(--bg) !important; font-weight: 600; letter-spacing: 0px; }
    .navbar-toggler-icon { 
      filter: invert(1);
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%2896, 165, 250, 0.9%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
    }
    
    .btn-outline-secondary { border-color: var(--border) !important; color: var(--fg) !important; }
    .btn-outline-secondary:hover { background-color: var(--accent-light) !important; border-color: var(--accent) !important; color: var(--accent) !important; }
    
    /* Sidebar - Modern Design */
    nav.sidebar { 
      background: linear-gradient(180deg, #f3f4f6 0%, #e5e7eb 100%); 
      border-right: 1px solid rgba(0, 0, 0, 0.05) !important;  
      overflow-y: auto; 
      box-shadow: 4px 0 16px rgba(0, 0, 0, 0.06);
      padding-top: 0;
    }
    
    .menu-header {  
      background: linear-gradient(135deg, rgba(0, 0, 0, 0.15), rgba(0, 0, 0, 0.1) 100%);
      font-weight: bold; 
      padding: 1.25rem 1.25rem; 
      letter-spacing: 0px; 
      font-size: 1.1rem;
      position: relative;
      overflow: hidden;
      border: none;
      border-bottom: 2px solid #a5aab3;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);
      color: #0c346c;
      text-shadow: none;
      margin: 0;
      text-transform: none;
    }
    .menu-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
      transition: left 0.6s ease;
    }
    .menu-header:hover::before {
      left: 100%;
    }
    .menu-header::after {
      content: 'üìã';
      position: absolute;
      right: 1.5rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.3rem;
      opacity: 0.9;
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
    }
    
    .toc { 
      list-style: none; 
      padding: 0rem 0; 
      margin: 0; 
      background: transparent;
    }
    .toc li { 
      margin: 0; 
    }
    
    /* Section grouping */
    .toc li[data-group="overview"] { margin-bottom: 0.75rem; }
    .toc li[data-group="solid"]:first-of-type { 
      margin-top: 1rem; 
      border-top: 2px solid rgba(59, 130, 246, 0.15);
      padding-top: 1rem;
    }
    .toc li[data-group="other-principles"]:first-of-type { 
      margin-top: 1rem; 
      border-top: 2px solid rgba(16, 185, 129, 0.15);
      padding-top: 1rem;
    }
    .toc li[data-group="resources"] { 
      margin-top: 1rem; 
      border-top: 2px solid rgba(100, 116, 139, 0.15);
      padding-top: 1rem;
    }
    
    .list-group-item { 
      background: transparent; 
      border-color: transparent; 
      padding: 0; 
      margin: 0.25rem 0.75rem; 
      border-radius: 0rem;
      transition: all 0.2s ease;
    }
    .list-group-item a { 
      color: #1f2937; 
      text-decoration: none; 
      display: flex; 
      flex-direction: column; 
      align-items: flex-start; 
      gap: 0.4rem; 
      border-left: 3px solid transparent; 
      padding: 0.85rem 1.25rem; 
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
      font-weight: 500; 
      border-radius: 0rem;
      font-size: 0.95rem;
      position: relative;
      overflow: hidden;
      background: linear-gradient(90deg, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0.1) 100%);
      border: 1px solid rgba(0, 0, 0, 0.06);
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }
    .list-group-item a::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 4px;
      background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%);
      transform: scaleY(0);
      transition: transform 0.3s ease;
      border-radius: 0 0px 0px 0;
    }
    .list-group-item a::after {
      content: '‚ñ∂';
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%) scale(0.7);
      font-size: 0.7rem;
      color: #9ca3af;
      opacity: 0;
      transition: all 0.3s ease;
    }
    .list-group-item a:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.08) 100%); 
      border-left-color: transparent;
      color: #1e40af;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2), 0 2px 4px rgba(0, 0, 0, 0.08);
      border-color: rgba(59, 130, 246, 0.2);
      text-decoration: none;
    }
    .list-group-item a:hover::before {
      transform: scaleY(1);
    }
    .list-group-item a:hover::after {
      opacity: 1;
      transform: translateY(-50%) scale(1);
      color: #3b82f6;
    }
    .list-group-item a.active { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.22) 0%, rgba(59, 130, 246, 0.12) 100%); 
      color: #1e40af; 
      font-weight: 600; 
      border-left-color: transparent;
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.3);
      border-color: rgba(59, 130, 246, 0.3);
    }
    .list-group-item a.active::before {
      transform: scaleY(1);
      background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%);
      width: 5px;
      box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
    }
    .list-group-item a.active::after {
      opacity: 1;
      color: #2563eb;
      transform: translateY(-50%) scale(1);
    }
    .list-group-item a.active:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.28) 0%, rgba(59, 130, 246, 0.16) 100%); 
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }
    
    /* Sub-items tree connectors */
    .list-group-sub-item a::before { 
      content: '‚îú‚îÄ';
      font-size: 0.85rem;
      margin-right: 0.5rem;
      color: #6b7280;
      z-index: 1;
      position: relative;
    }
    
    /* Sub-items styling - similar to main items but smaller and indented */
    .list-group-sub-item {
      background: transparent; 
      border-color: transparent; 
      padding: 0px; 
      margin: 0.2rem 0.75rem 0.2rem 1.5rem;
      border-radius: 0rem;
      transition: all 0.2s ease;
      position: relative;
      list-style-type: none;
    }
    .list-group-sub-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 4px;
      background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%);
      transform: scaleY(0);
      transition: transform 0.3s ease;
      border-radius: 0 0px 0px 0;
      z-index: 1;
    }
    .list-group-sub-item a {
      color: #1f2937; 
      text-decoration: none; 
      display: block;
      border-left: 3px solid transparent; 
      padding: 0.65rem 1rem 0.65rem 2.00rem;
      transition: all 0.2s ease; 
      font-weight: 500; 
      border-radius: 0rem;
      font-size: 0.8125rem;
      line-height: 1.4;
      position: relative;
      overflow: hidden;
      background: rgba(255, 255, 255, 0.5);
      border: 1px solid rgba(0, 0, 0, 0.04);
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
    }
    
    /* Sub-items hover and active states - same as main items */
    .list-group-sub-item a::after {
      content: '‚ñ∂';
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%) scale(0.7);
      font-size: 0.7rem;
      color: #9ca3af;
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .list-group-sub-item:hover::before {
      transform: scaleY(1);
    }
    .list-group-sub-item a:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.08) 100%); 
      border-left-color: transparent;
      color: #1e40af;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2), 0 2px 4px rgba(0, 0, 0, 0.08);
      border-color: rgba(59, 130, 246, 0.2);
      text-decoration: none;
    }
    .list-group-sub-item a:hover::after {
      opacity: 1;
      transform: translateY(-50%) scale(1);
      color: #3b82f6;
    }
    
    .list-group-sub-item.active::before {
      transform: scaleY(1);
      width: 5px;
      box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
    }
    .list-group-sub-item a.active { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.22) 0%, rgba(59, 130, 246, 0.12) 100%); 
      color: #1e40af; 
      font-weight: 600; 
      border-left-color: transparent;
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.3);
      border-color: rgba(59, 130, 246, 0.3);
    }
    .list-group-sub-item a.active::after {
      opacity: 1;
      color: #2563eb;
      transform: translateY(-50%) scale(1);
    }
    .list-group-sub-item a.active:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.28) 0%, rgba(59, 130, 246, 0.16) 100%); 
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }
    
    .list-group-item a::after {
      content: '‚ñ∂';
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%) scale(0.7);
      font-size: 0.7rem;
      color: #9ca3af;
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .list-group-item a:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.08) 100%); 
      border-left-color: transparent;
      color: #1e40af;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2), 0 2px 4px rgba(0, 0, 0, 0.08);
      border-color: rgba(59, 130, 246, 0.2);
      text-decoration: none;
    }
    .list-group-item a:hover::before {
      transform: scaleY(1);
    }
    .list-group-item a:hover::after {
      opacity: 1;
      transform: translateY(-50%) scale(1);
      color: #3b82f6;
    }
    .list-group-item a.active { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.22) 0%, rgba(59, 130, 246, 0.12) 100%); 
      color: #1e40af; 
      font-weight: 600; 
      border-left-color: transparent;
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.3);
      border-color: rgba(59, 130, 246, 0.3);
    }
    .list-group-item a.active::after {
      opacity: 1;
      color: #2563eb;
      transform: translateY(-50%) scale(1);
    }
    .list-group-item a.active:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.28) 0%, rgba(59, 130, 246, 0.16) 100%); 
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }
    
    /* Badge styling */
    .badge { font-size: 0.8rem; padding: 0.15rem 0.4rem; background: var(--accent-light); color: var(--accent); border: 1px solid var(--accent); font-weight: 600; border-radius: 0.25rem; font-style: normal; line-height: 1.2; opacity: 0.9; }
    .badge { background: var(--accent); color: white; border: none; font-size: 0.6rem; padding: 0.25rem 0.5rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; display: inline-block; margin-top: 0.5rem; margin-right: 0.35rem; }
    .list-group-item a:hover .badge { opacity: 1; background: var(--accent); color: white; }
    .list-group-item a.active .badge { background: rgba(255, 255, 255, 0.3); color: white; border-color: rgba(255, 255, 255, 0.6); font-weight: 600; opacity: 1; }
        
    /* Content */
    .content { width: 100%; max-width: 100%; margin: 0 auto; background: #ffffff; padding: 2rem; border-radius: 0.75rem; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); }
    section { display: none !important; margin-bottom: 2rem; }
    section.active { display: block !important; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    
    h1 { font-size: 2rem; font-weight: 700; margin: 1rem 0 0.25rem 0; letter-spacing: -0.5px; color: var(--fg); display: block; border: none; }
    h2 { font-size: 1.5rem; font-weight: 600; margin: 1.5rem 0 0.75rem 0; color: var(--fg); border-bottom: 2px solid var(--accent-light); padding-bottom: 0.5rem; }
    h3 { font-size: 1.1rem; color: var(--accent); font-weight: 600; margin: 1rem 0 0.5rem 0; }
    h4 { font-size: 0.8rem; color: var(--fg); font-weight: 600; margin: 0.75rem 0 0.4rem 0; }
    p { margin: 1rem 0; line-height: 1.65; color: var(--fg); }
    ul, ol { margin: 1rem 0; padding-left: 2rem; }
    li { margin: 0.5rem 0; color: var(--fg); }
    
    code { background: var(--code-bg); border: 1px solid var(--border); padding: 0.2rem 0.5rem; font-family: ui-monospace, 'Cascadia Code', 'Source Code Pro', monospace; font-size: 0.9em; color: var(--accent); border-radius: 0.5rem; }
    pre { background: var(--code-bg); border: 0px solid var(--border); padding: 1rem; border-radius: 0.5rem; overflow: auto; box-shadow: var(--shadow-sm); margin: 1rem 0; }
    pre code { padding: 0; background: transparent; border: none; color: var(--fg); }
    
    .callout { border-left: 5px solid var(--accent); background: var(--accent-light); padding: 1rem 1.2rem; margin: 1.5rem 0; border-radius: 0.5rem; box-shadow: var(--shadow-sm); font-weight: 500; color: var(--fg); }
    
    /* Table styling */
    .table { color: var(--fg); }
    .table thead th { background: var(--accent-light); color: var(--accent); border-color: var(--border); font-weight: 600; }
    .table tbody td { border-color: var(--border); }
    .table-striped tbody tr:nth-of-type(odd) { background-color: rgba(0,0,0,0.02); }
    .table-striped tbody tr:hover { background-color: var(--accent-light); }
    
    /* Controls/Pagination */
    .controls { opacity: 0.5; position: fixed; bottom: 0.25rem; right: 1rem; width: auto; z-index: 1000; background: transparent; display: flex; align-items: center; justify-content: center; gap: 0rem; padding: 0; min-height: 40px; }
    @media (max-width: 991px) {
      .controls { bottom: 0.25rem; right: 1rem; }
      .menu-header { color: var(--focus); }
    }
    .controls:hover { opacity: 1; }
    
    .page-indicator { color: var(--accent); font-weight: 600; font-size: 0.875rem; }
    .btn-group .btn { margin: 0px 2px; padding: 0.2rem 0.5rem; background: var(--accent); color: white; border-color: var(--accent); font-size: 1rem; font-weight: bold; }
    .btn-group .btn:hover { background: var(--accent); }
    .btn-group .btn + .btn { margin-left: -1px; }
    
    /* Mobile/Offcanvas */
    .offcanvas { background: var(--bg) !important; }
    .offcanvas-header { border-bottom: 1px solid var(--border); }
    .offcanvas-title { color: var(--fg); font-weight: 600; }
    .btn-close { color: var(--fg); }
    
    /* Scrollbar */
    nav.sidebar::-webkit-scrollbar { width: 6px; }
    nav.sidebar::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.05); }
    nav.sidebar::-webkit-scrollbar-thumb { background: rgba(0, 0, 0, 0.2); border-radius: 0px; }
    nav.sidebar::-webkit-scrollbar-thumb:hover { background: rgba(0, 0, 0, 0.3); }
    
    /* Mermaid Diagrams */
    .mermaid {
      background: #ffffff;
      border: 1px solid #e2e8f0;
      border-radius: 0.5rem;
      padding: 2rem;
      margin: 1.5rem 0;
      min-height: 400px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: visible;
      position: relative;
    }
    .mermaid.rendered {
      min-height: 0;
    }
    .mermaid svg {
      max-width: 100%;
      height: auto;
      min-height: 300px;
      transition: transform 0.3s ease;
      transform-origin: center center;
    }
    .mermaid.zoomed {
      overflow: auto;
      cursor: grab;
    }
    .mermaid.zoomed:active {
      cursor: grabbing;
    }
    .mermaid svg text {
      font-size: 14px !important;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif !important;
    }
    
    /* Mermaid title styling */
    .mermaid svg text, .diagram-modal-content svg text {
      font-size: 1rem !important;
      font-weight: bold !important;
      fill: var(--fg) !important;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif !important;
    }

    .mermaid svg *
    {
        color: #333;
    }

    .mermaid[data-processed="true"] {
      min-height: 0;
    }
    
    .mermaid svg {
      max-width: 100%;
      height: auto;
      display: inline-block;
    }
    
    /* Zoom controls */
    .zoom-controls {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 10;
      opacity: 0.5;
      transition: opacity 0.3s ease;
    }
    .mermaid:hover .zoom-controls {
      opacity: 1;
    }
    .zoom-btn {
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 0.25rem;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      transition: all 0.2s ease;
    }
    .zoom-btn:hover {
      background: #2563eb;
      transform: scale(1.1);
    }

    /* Modal for diagram zoom */
    .diagram-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.95);
      z-index: 9999;
      align-items: center;
      justify-content: center;
      padding: 0;
    }
    .diagram-modal.active {
      display: flex;
    }
    .diagram-modal-content {
      position: relative;
      width: 100%;
      height: 100%;
      background: white;
      border-radius: 0;
      padding: 3rem 3rem 3rem 3rem;
      overflow: auto;
      display: flex;
      align-items: flex-start;
      justify-content: center;
    }
    .diagram-modal-content svg {
      max-width: 100%;
      height: auto;
    }
    .modal-close {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      background: #ef4444;
      color: white;
      border: none;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      transition: all 0.2s ease;
      z-index: 10000;
    }
    .modal-close:hover {
      background: #dc2626;
      transform: scale(1.1);
    }
    .modal-zoom-controls {
      position: fixed;
      bottom: 1.5rem;
      right: 1.5rem;
      display: flex;
      gap: 0.5rem;
      z-index: 10000;
      padding: 0rem;
      border-radius: 0.4rem;
    }
    .modal-zoom-btn {
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 0.25rem;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      transition: all 0.2s ease;
    }
    .modal-zoom-btn:hover {
      background: #2563eb;
      transform: scale(1.1);
    }
    
    /* Utilities */
    .search { height: 0; overflow: hidden; padding: 0 !important; }
    .search input { display: none; }
    .min-vh-100 { min-height: 100vh; }
    .skip-link { position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden; }
    .skip-link:focus { position: static; width: auto; height: auto; padding: 0.4rem 0.6rem; background: var(--accent); color: white; border-radius: 0.4rem; }
    
    /* Override Bootstrap defaults for theme */
    a { color: var(--accent); }
    a:hover { color: var(--accent); text-decoration: underline; }
    
    /* Responsive - keep sidebar visible on desktop, offcanvas on mobile */
    @media (max-width: 991px) {
      nav.sidebar { display: none; }
      #main { width: 100%; }
      .row { --bs-gutter-x: 0; }
    }
    
    /* Layout - prevent unnecessary scrolling */
    html, body { height: 100%; margin: 0; }
    #appContainer { display: flex; flex-direction: column; height: calc(100vh - 50px); }
    #mainRow { flex: 1; overflow: hidden; display: flex; }
    nav.sidebar { overflow-y: auto; max-height: 100%; position: relative; padding-bottom: 0px; }
    #main { overflow: hidden; display: flex; flex-direction: column; height: 100%; -webkit-tap-highlight-color: transparent; outline: none; border: none; }
    #main:focus { outline: none; }
    .content { overflow-y: auto; flex: 1; width: 100%; min-height: 0; padding: 0rem 1.5rem 0rem 1.5rem; }
    
    /* Contact Info */
    .contact-info {
      font-weight: 400 !important;
      padding: 0.5rem 0.75rem;
      font-size: 0.75rem;
      color: var(--accent-light);
      margin: 0;
      opacity: 0.5;
      white-space: nowrap;
      cursor: pointer;
    }
    .contact-info:hover {
      opacity: 0.9;
      text-decoration: none;
    }
    @media (max-width: 991px) {
      .navbar-brand {
        font-size: 1rem !important;
        flex: 1;
      }
      .contact-info {
        font-size: 0.7rem;
        padding: 0.25rem 0.5rem;
      }
    }
    @media (max-width: 576px) {
      .navbar-brand {
        font-size: 0.9rem !important;
      }
      .contact-info {
        font-size: 0.65rem;
        padding: 0.2rem 0.4rem;
      }
    }

    .list-style-none {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    /* JSON Syntax Highlighting */
    pre code.language-json {
      display: block;
      white-space: pre;
      font-family: 'Cascadia Code', 'Consolas', 'Monaco', 'Courier New', monospace;
    }

    pre code.language-json .json-key {
      color: #0451a5;
      font-weight: 500;
    }

    pre code.language-json .json-string {
      color: #a31515;
    }

    pre code.language-json .json-number {
      color: #098658;
    }

    pre code.language-json .json-boolean {
      color: #0000ff;
      font-weight: 600;
    }

    pre code.language-json .json-null {
      color: #0000ff;
      font-weight: 600;
    }

    pre code.language-json .json-punctuation {
      color: #333;
    }

    /* SQL Syntax Highlighting */
    pre code.language-sql {
      display: block;
      white-space: pre;
      font-family: 'Cascadia Code', 'Consolas', 'Monaco', 'Courier New', monospace;
    }

    pre code.language-sql .sql-keyword {
      color: #0000ff;
      font-weight: 600;
      text-transform: uppercase;
    }

    pre code.language-sql .sql-string {
      color: #a31515;
    }

    pre code.language-sql .sql-number {
      color: #098658;
    }

    pre code.language-sql .sql-comment {
      color: #008000;
      font-style: italic;
    }

    pre code.language-sql .sql-function {
      color: #795e26;
      font-weight: 500;
    }

    pre code.language-sql .sql-operator {
      color: #666;
      font-weight: 500;
    }

    /* Language Label for Code Blocks */
    pre[data-language]::before {
      content: attr(data-language);
      position: absolute;
      top: 8px;
      right: 12px;
      font-size: 0.75em;
      color: #6a737d;
      text-transform: uppercase;
      font-weight: 600;
      letter-spacing: 0.5px;
      background: var(--bg);
      padding: 0.2rem 0.5rem;
      border-radius: 0.25rem;
      border: 1px solid var(--border);
    }

    /* Enhanced pre/code styling for syntax highlighted blocks */
    pre.syntax-highlighted {
      position: relative;
      background: var(--code-bg);
      border: 1px solid var(--border);
      padding: 1.5rem 1rem 1rem 1rem;
      border-radius: 0.5rem;
      overflow-x: auto;
      box-shadow: var(--shadow-sm);
      margin: 1rem 0;
    }

    pre.syntax-highlighted code {
      background: transparent;
      padding: 0;
      border: none;
      color: var(--fg);
      font-size: 0.875rem;
      line-height: 1.6;
    }

    ul
    {
        list-style-type: none;
    }

    /* Code Tabs Styling */
    .code-tabs {
      margin: 1.5rem 0;
    }
    .code-tabs .nav-tabs {
      border-bottom: 2px solid var(--border);
      margin-bottom: 0;
    }
    .code-tabs .nav-link {
      color: var(--muted);
      border: none;
      border-bottom: 3px solid transparent;
      padding: 0.75rem 1.5rem;
      font-weight: 600;
      transition: all 0.3s ease;
      background: transparent;
    }
    .code-tabs .nav-link:hover {
      color: var(--accent);
      background: var(--accent-light);
      border-bottom-color: var(--accent);
    }
    .code-tabs .nav-link.active {
      color: var(--accent);
      background: var(--accent-light);
      border-bottom-color: var(--accent);
    }
    .code-tabs .tab-content {
      background: var(--code-bg);
      border: 1px solid var(--border);
      border-top: none;
      border-radius: 0 0 0.5rem 0.5rem;
      padding: 0;
    }
    .code-tabs .tab-pane {
      padding: 0;
    }
    .code-tabs pre {
      margin: 0;
      border: none;
      border-radius: 0 0 0.5rem 0.5rem;
    }

  /* Document Footer */
    .document-footer {
      text-align: center;
      padding: 20px;
      background-color: #f8f9fa;
      border-radius: 8px;
      margin-top: 20px;
    }
    .document-footer p {
      margin: 0;
      font-size: 14px;
      color: #6c757d;
      line-height: 1.6;
    }
    .document-footer strong {
      color: #495057;
    }  
  </style>
  <!-- Mermaid.js for diagrams -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
  <script>
    // Initialize Mermaid with proper configuration
    document.addEventListener('DOMContentLoaded', function() {

      mermaid.initialize({
        startOnLoad: false,
        theme: 'base',
        securityLevel: 'loose',
        logLevel: 'error',
        fontFamily: 'Segoe UI Semibold',
        flowchart: {
          useMaxWidth: true,
          htmlLabels: true,
          curve: 'basis',
        },
        sequence: {
          useMaxWidth: false,
          htmlLabels: true,
          diagramMarginX: 50,
          diagramMarginY: 10
        }
      });
      
      // Render all diagrams
      renderMermaidDiagrams();
    });
    
    async function renderMermaidDiagrams() {
      const diagrams = document.querySelectorAll('.mermaid');
      
      for (let i = 0; i < diagrams.length; i++) {
        const diagram = diagrams[i];
        const code = diagram.textContent.trim();
        
        // Store original code
        if (!diagram.hasAttribute('data-original-code')) {
          diagram.setAttribute('data-original-code', code);
        }
        
        try {
          const { svg } = await mermaid.render('mermaid-diagram-' + i, code);
          diagram.innerHTML = svg;
          diagram.setAttribute('data-processed', 'true');
          
          // Add zoom controls
          addZoomControls(diagram);
        } catch (error) {
          console.error('Mermaid rendering error for diagram ' + i + ':', error);
          diagram.innerHTML = '<div class="alert alert-danger border border-danger rounded p-3">Error rendering diagram: ' + error.message + '</div>';
        }
      }
    }
    
    // Add zoom controls to mermaid diagrams
    function addZoomControls(diagram) {
      const controls = document.createElement('div');
      controls.className = 'zoom-controls';
      controls.innerHTML = `
        <button class="zoom-btn" data-action="expand" title="Expand View">‚õ∂</button>
      `;
      
      diagram.style.position = 'relative';
      diagram.insertBefore(controls, diagram.firstChild);
      
      // Expand to modal
      controls.addEventListener('click', (e) => {
        const btn = e.target.closest('.zoom-btn');
        if (!btn) return;
        
        openDiagramModal(diagram);
      });
    }

    // Open diagram in modal
    function openDiagramModal(diagram) {
      // Create modal if it doesn't exist
      let modal = document.getElementById('diagram-modal');
      if (!modal) {
        modal = document.createElement('div');
        modal.id = 'diagram-modal';
        modal.className = 'diagram-modal';
        modal.innerHTML = `
          <button class="modal-close" id="modal-close">√ó</button>
          <div class="diagram-modal-content" id="modal-diagram-content"></div>
          <div class="modal-zoom-controls">
            <button class="modal-zoom-btn" data-action="zoom-in" title="Zoom In">+</button>
            <button class="modal-zoom-btn" data-action="zoom-out" title="Zoom Out">‚àí</button>
            <button class="modal-zoom-btn" data-action="reset" title="Reset Zoom">‚ü≤</button>
          </div>
        `;
        document.body.appendChild(modal);
        
        // Close modal handlers
        modal.querySelector('#modal-close').addEventListener('click', closeDiagramModal);
        modal.addEventListener('click', (e) => {
          if (e.target === modal) closeDiagramModal();
        });
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeDiagramModal();
          }
        });
        
        // Zoom controls in modal
        let scale = 1;
        let translateX = 0;
        let translateY = 0;
        
        modal.querySelector('.modal-zoom-controls').addEventListener('click', (e) => {
          const btn = e.target.closest('.modal-zoom-btn');
          if (!btn) return;
          
          const action = btn.dataset.action;
          const svg = modal.querySelector('svg');
          if (!svg) return;
          
          if (action === 'zoom-in') {
            scale = Math.min(scale + 0.1, 5);
          } else if (action === 'zoom-out') {
            scale = Math.max(scale - 0.1, 0.5);
          } else if (action === 'reset') {
            scale = 1;
            translateX = 0;
            translateY = 0;
          }
          
          svg.style.transform = `scale(${scale}) translate(${translateX / scale}px, ${translateY / scale}px)`;
        });
      }
      
      // Clone diagram content
      const svg = diagram.querySelector('svg');
      if (svg) {
        const content = modal.querySelector('#modal-diagram-content');
        content.innerHTML = '';
        const clonedSvg = svg.cloneNode(true);
        clonedSvg.style.transform = 'scale(1)';
        clonedSvg.style.maxWidth = '100%';
        clonedSvg.style.height = 'auto';
        content.appendChild(clonedSvg);
      }
      
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeDiagramModal() {
      const modal = document.getElementById('diagram-modal');
      if (modal) {
        modal.classList.remove('active');
        document.body.style.overflow = '';
      }
    }
    
    // Re-render on theme change
    window.rerenderMermaid = async function() {
      const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
      
      mermaid.initialize({
        startOnLoad: false,
        theme: isDark ? 'base' : 'base',
        securityLevel: 'loose',
        flowchart: {
          useMaxWidth: true,
          htmlLabels: true,
          curve: 'basis',
        },
        sequence: {
          useMaxWidth: false,
          htmlLabels: true,
          diagramMarginX: 50,
          diagramMarginY: 10
        }
      });
      
      const diagrams = document.querySelectorAll('.mermaid[data-processed="true"]');
      for (let i = 0; i < diagrams.length; i++) {
        const diagram = diagrams[i];
        const code = diagram.getAttribute('data-original-code');
        
        if (code) {
          try {
            const { svg } = await mermaid.render('mermaid-diagram-rerender-' + i + '-' + Date.now(), code);
            diagram.innerHTML = svg;
          } catch (error) {
            console.error('Mermaid re-rendering error:', error);
          }
        }
      }
    };
  </script>
</head>
<body>
  <nav class="navbar navbar-expand-lg sticky-top" aria-label="Top bar">
    <div class="container-fluid d-flex align-items-center">
      <button class="navbar-toggler me-2" id="toggleSidebar" type="button" aria-label="Toggle sidebar">
        <span class="navbar-toggler-icon"></span>
      </button>
        <span class="navbar-brand mb-0 h1 me-auto">üß± Blazor - In a Nutshell</span>
        <span class="contact-info mb-0">ü§ù Curated by Murthy Vepa</span>
    </div>      
  </nav>

  <div id="appContainer">
    <div class="row g-0" id="mainRow">
      <nav class="col-lg-3 border-end sidebar" id="sidebar" aria-label="Table of contents">
        <div class="menu-header py-2">Contents</div>
        <ul class="list-group list-group-flush toc" id="toc"></ul>
      </nav>

      <main id="main" class="col-lg-9 d-flex flex-column" tabindex="-1">
        <div class="content" id="content">
        <!-- Overview Section -->
        <section id="overview" role="article">
          <h1>üìñ Overview</h1>
          <span class="badge">intro</span>
          <span class="badge">overview</span>
          <span class="badge">basics</span>
          
          <h2>What is Blazor?</h2>
          <p>
            <strong>Blazor</strong> is a modern <strong>.NET frontend web framework</strong> that enables developers to build 
            interactive web UIs using <strong>C#</strong> instead of JavaScript. Blazor supports both server-side rendering 
            and client interactivity in a single programming model, allowing you to write full-stack web applications 
            entirely in .NET.
          </p>
          
          <div class="callout">
            <strong>üí° Key Insight:</strong> Blazor brings the power of .NET to the browser, enabling code sharing between 
            client and server, strong typing, and access to the rich .NET ecosystem.
          </div>

          <h2>Why Choose Blazor?</h2>
          <p>Blazor offers several compelling advantages for web development:</p>
          
          <div class="row g-3">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-blue">
                <div class="card-body">
                  <h3>üéØ Single Language Stack</h3>
                  <p class="mb-0">Write both client and server code in C#, eliminating context switching between languages. Share models, validation logic, and business rules across the entire application.</p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-green">
                <div class="card-body">
                  <h3>üõ°Ô∏è Type Safety</h3>
                  <p class="mb-0">Leverage C#'s strong typing and compile-time checking to catch errors early. IntelliSense and refactoring tools work seamlessly across your entire codebase.</p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-yellow">
                <div class="card-body">
                  <h3>üìö .NET Ecosystem</h3>
                  <p class="mb-0">Access thousands of existing .NET libraries and NuGet packages. Reuse existing .NET skills and code, reducing the learning curve.</p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-pink">
                <div class="card-body">
                  <h3>‚ö° Performance</h3>
                  <p class="mb-0">Benefit from .NET's performance optimizations, including JIT compilation, garbage collection, and efficient memory management.</p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-purple">
                <div class="card-body">
                  <h3>üîÑ Code Reusability</h3>
                  <p class="mb-0">Share components, logic, and models between Blazor Server, WebAssembly, Hybrid, and even desktop applications built with .NET MAUI.</p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-teal">
                <div class="card-body">
                  <h3>üöÄ Modern Development</h3>
                  <p class="mb-0">Hot reload, Visual Studio integration, excellent debugging experience, and modern component-based architecture out of the box.</p>
                </div>
              </div>
            </div>
          </div>

          <h2>Core Features</h2>
          <ul>
            <li><strong>Component-Based Architecture:</strong> Build reusable UI components with Razor syntax that combine HTML markup and C# code</li>
            <li><strong>Flexible Hosting Models:</strong> Choose between Server, WebAssembly, Hybrid, or mixed rendering modes based on your needs</li>
            <li><strong>Rich Interactivity:</strong> Handle user events, manage state, and update UI dynamically without page refreshes</li>
            <li><strong>Forms & Validation:</strong> Built-in form components with data binding and validation using Data Annotations</li>
            <li><strong>Routing:</strong> Client-side routing with parameters, query strings, and navigation guards</li>
            <li><strong>Dependency Injection:</strong> First-class DI support for services and component dependencies</li>
            <li><strong>JavaScript Interop:</strong> Seamlessly call JavaScript from .NET and vice versa when needed</li>
            <li><strong>Progressive Web Apps:</strong> Build installable PWAs with offline support using Blazor WebAssembly</li>
          </ul>

          <h2>Blazor vs Traditional Web Frameworks</h2>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Aspect</th>
                <th>Blazor</th>
                <th>React/Angular/Vue</th>
                <th>Traditional Server (MVC/Razor Pages)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Language</td>
                <td>C# for both client & server</td>
                <td>JavaScript/TypeScript + Server Language</td>
                <td>Server language only</td>
              </tr>
              <tr>
                <td>Rendering</td>
                <td>Server, Client (WASM), or Mixed</td>
                <td>Client-side (SPA)</td>
                <td>Server-side only</td>
              </tr>
              <tr>
                <td>Code Sharing</td>
                <td>Full stack code sharing</td>
                <td>Limited (models/types only)</td>
                <td>Server code only</td>
              </tr>
              <tr>
                <td>Type Safety</td>
                <td>Strong typing everywhere</td>
                <td>TypeScript (optional)</td>
                <td>Strong on server</td>
              </tr>
              <tr>
                <td>Learning Curve</td>
                <td>Low for .NET developers</td>
                <td>Moderate to High</td>
                <td>Low for .NET developers</td>
              </tr>
              <tr>
                <td>Ecosystem</td>
                <td>.NET libraries & NuGet</td>
                <td>npm packages</td>
                <td>.NET libraries & NuGet</td>
              </tr>
              <tr>
                <td>SEO</td>
                <td>Excellent (with SSR)</td>
                <td>Requires SSR setup</td>
                <td>Excellent</td>
              </tr>
              <tr>
                <td>Initial Load</td>
                <td>Fast (Server), Larger (WASM)</td>
                <td>Moderate</td>
                <td>Fast</td>
              </tr>
            </tbody>
          </table>

          <h2>When to Use Blazor</h2>
          <p>Blazor is an excellent choice when:</p>
          <ul>
            <li>Your team has strong .NET/C# expertise and wants to leverage existing skills</li>
            <li>You need to share code and business logic between client and server</li>
            <li>You want type safety and compile-time checking across your entire application</li>
            <li>You're building line-of-business applications with complex forms and validation</li>
            <li>You need to integrate with existing .NET backend services and APIs</li>
            <li>You want to build hybrid apps that work on web, desktop, and mobile from a single codebase</li>
            <li>You need excellent tooling support with Visual Studio and debugging capabilities</li>
          </ul>

          <h2>Simple Blazor Component Example</h2>
          <p>Here's a basic counter component demonstrating Blazor's syntax:</p>
          
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/counter"
@rendermode InteractiveServer

&lt;PageTitle&gt;Counter&lt;/PageTitle&gt;

&lt;h1&gt;Counter&lt;/h1&gt;

&lt;p role="status"&gt;Current count: @currentCount&lt;/p&gt;

&lt;button class="btn btn-primary" @onclick="IncrementCount"&gt;Click me&lt;/button&gt;

@code {
    private int currentCount = 0;

    private void IncrementCount()
    {
        currentCount++;
    }
}</code></pre>

          <div class="callout">
            <strong>üéØ Key Observations:</strong>
            <ul>
              <li><code>@page</code> directive defines the route for this component</li>
              <li><code>@rendermode</code> specifies how the component should be rendered (Server, WebAssembly, etc.)</li>
              <li>HTML markup is mixed with C# code using <code>@</code> syntax</li>
              <li><code>@onclick</code> wires up event handlers to C# methods</li>
              <li><code>@code</code> block contains the component's logic and state</li>
            </ul>
          </div>

          <h2>Getting Started</h2>
          <p>To start building with Blazor, you'll need:</p>
          <ul>
            <li><strong>.NET SDK:</strong> Download and install the latest .NET SDK (8.0 or later recommended)</li>
            <li><strong>IDE:</strong> Visual Studio 2022, Visual Studio Code with C# extension, or JetBrains Rider</li>
            <li><strong>Templates:</strong> Use <code>dotnet new blazor</code> or Visual Studio templates to create a new project</li>
          </ul>

          <pre class="syntax-highlighted" data-language="bash"><code class="language-bash"># Create a new Blazor Web App
dotnet new blazor -n MyBlazorApp

# Navigate to the project
cd MyBlazorApp

# Run the application
dotnet run</code></pre>
        </section>
        
        <!-- Architecture Section -->
        <section id="architecture" role="article">
          <h1>üèóÔ∏è Architecture</h1>
          <span class="badge">architecture</span>
          <span class="badge">components</span>
          <span class="badge">rendering</span>
          
          <h2>Component Model</h2>
          <p>
            At the heart of Blazor is its <strong>component-based architecture</strong>. Everything in Blazor is a component - 
            from entire pages to small reusable UI elements. Components are self-contained units that encapsulate both 
            UI markup and behavior.
          </p>

          <h3>What is a Blazor Component?</h3>
          <p>A Blazor component is a .NET class that:</p>
          <ul>
            <li>Inherits from <code>ComponentBase</code> (either explicitly or implicitly)</li>
            <li>Defines UI rendering logic using Razor syntax</li>
            <li>Handles user events and manages local state</li>
            <li>Can accept parameters from parent components</li>
            <li>Can be nested and composed with other components</li>
          </ul>

          <div class="row g-3 mt-3">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-blue">
                <div class="card-body">
                  <h3>üìÑ Razor Components (.razor)</h3>
                  <p class="mb-2">Most common component type:</p>
                  <ul class="mb-0">
                    <li>Defined in <code>.razor</code> files</li>
                    <li>Mix HTML markup with C# code</li>
                    <li>Use <code>@code</code> block for logic</li>
                    <li>Compiled into .NET classes</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-green">
                <div class="card-body">
                  <h3>üîß Code-Behind Components</h3>
                  <p class="mb-2">Separate markup from logic:</p>
                  <ul class="mb-0">
                    <li><code>MyComponent.razor</code> (markup)</li>
                    <li><code>MyComponent.razor.cs</code> (logic)</li>
                    <li>Better for complex components</li>
                    <li>Easier to test and maintain</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <h3>Component Example with Code-Behind</h3>
          <div class="code-tabs">
            <ul class="nav nav-tabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#component-razor" type="button" role="tab">MyComponent.razor</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#component-cs" type="button" role="tab">MyComponent.razor.cs</button>
              </li>
            </ul>
            <div class="tab-content">
              <div class="tab-pane fade show active" id="component-razor" role="tabpanel">
                <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/products"

&lt;h3&gt;Product List&lt;/h3&gt;

@if (IsLoading)
{
    &lt;p&gt;&lt;em&gt;Loading products...&lt;/em&gt;&lt;/p&gt;
}
else if (Products == null || !Products.Any())
{
    &lt;p&gt;No products found.&lt;/p&gt;
}
else
{
    &lt;table class="table"&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;Name&lt;/th&gt;
                &lt;th&gt;Price&lt;/th&gt;
                &lt;th&gt;Actions&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            @foreach (var product in Products)
            {
                &lt;tr&gt;
                    &lt;td&gt;@product.Name&lt;/td&gt;
                    &lt;td&gt;@product.Price.ToString("C")&lt;/td&gt;
                    &lt;td&gt;
                        &lt;button class="btn btn-primary btn-sm" 
                                @onclick="() => SelectProduct(product)"&gt;
                            Select
                        &lt;/button&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
            }
        &lt;/tbody&gt;
    &lt;/table&gt;

    @if (SelectedProduct != null)
    {
        &lt;div class="alert alert-info"&gt;
            Selected: @SelectedProduct.Name
        &lt;/div&gt;
    }
}</code></pre>
              </div>
              <div class="tab-pane fade" id="component-cs" role="tabpanel">
                <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">using Microsoft.AspNetCore.Components;

namespace MyBlazorApp.Pages;

public partial class MyComponent
{
    [Inject]
    public required IProductService ProductService { get; set; }

    public List&lt;Product&gt;? Products { get; set; }
    public Product? SelectedProduct { get; set; }
    public bool IsLoading { get; set; }

    protected override async Task OnInitializedAsync()
    {
        IsLoading = true;
        Products = await ProductService.GetProductsAsync();
        IsLoading = false;
    }

    private void SelectProduct(Product product)
    {
        SelectedProduct = product;
    }
}</code></pre>
              </div>
            </div>
          </div>

          <h2>Render Tree</h2>
          <p>
            Blazor uses a <strong>render tree</strong> - an in-memory representation of the browser's DOM. This is similar to 
            React's virtual DOM concept. When a component's state changes, Blazor:
          </p>
          <ol>
            <li>Builds a new render tree representation</li>
            <li>Compares it with the previous render tree (diffing)</li>
            <li>Calculates the minimal set of changes needed</li>
            <li>Applies only those changes to the actual DOM</li>
          </ol>

          <div class="callout">
            <strong>‚ö° Performance Benefit:</strong> The render tree approach ensures that only the parts of the UI that actually 
            changed are updated in the DOM, resulting in efficient and fast updates.
          </div>

          <h3>Render Tree Example</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* When count changes from 0 to 1, only the text node updates *@
&lt;div&gt;
    &lt;h1&gt;Counter&lt;/h1&gt;
    &lt;p&gt;Count: @count&lt;/p&gt;  @* Only this text node updates in DOM *@
    &lt;button @onclick="Increment"&gt;Increment&lt;/button&gt;
&lt;/div&gt;

@code {
    private int count = 0;
    
    private void Increment() 
    { 
        count++;  // Triggers re-render
    }
}</code></pre>

          <h2>Razor Syntax</h2>
          <p>
            <strong>Razor</strong> is a markup syntax for embedding .NET code into web pages. It uses the <code>@</code> symbol 
            to transition from HTML to C# code. Razor is compiled into C# at build time, providing type safety and IntelliSense support.
          </p>

          <h3>Core Razor Syntax Features</h3>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Syntax</th>
                <th>Purpose</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>@expression</code></td>
                <td>Output C# expression</td>
                <td><code>@DateTime.Now</code></td>
              </tr>
              <tr>
                <td><code>@{ }</code></td>
                <td>Code block</td>
                <td><code>@{ var x = 10; }</code></td>
              </tr>
              <tr>
                <td><code>@if/else</code></td>
                <td>Conditional rendering</td>
                <td><code>@if (isVisible) { &lt;p&gt;Hi&lt;/p&gt; }</code></td>
              </tr>
              <tr>
                <td><code>@foreach</code></td>
                <td>Loop over collections</td>
                <td><code>@foreach (var item in items) { }</code></td>
              </tr>
              <tr>
                <td><code>@switch</code></td>
                <td>Switch statement</td>
                <td><code>@switch (status) { }</code></td>
              </tr>
              <tr>
                <td><code>@using</code></td>
                <td>Import namespace</td>
                <td><code>@using System.Linq</code></td>
              </tr>
              <tr>
                <td><code>@inject</code></td>
                <td>Inject service</td>
                <td><code>@inject ILogger Logger</code></td>
              </tr>
              <tr>
                <td><code>@page</code></td>
                <td>Define route</td>
                <td><code>@page "/products"</code></td>
              </tr>
              <tr>
                <td><code>@code</code></td>
                <td>Component logic</td>
                <td><code>@code { private int x; }</code></td>
              </tr>
              <tr>
                <td><code>@attribute</code></td>
                <td>Add attribute to class</td>
                <td><code>@attribute [Authorize]</code></td>
              </tr>
            </tbody>
          </table>

          <h3>Razor Syntax Examples</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Single line comment *@
@*  
    Multi-line comment
    Can span multiple lines
*@

@* Output expression *@
&lt;p&gt;Current time: @DateTime.Now.ToString("HH:mm:ss")&lt;/p&gt;

@* Code block *@
@{
    var greeting = "Hello";
    var name = "World";
    var message = $"{greeting}, {name}!";
}
&lt;p&gt;@message&lt;/p&gt;

@* Conditional rendering *@
@if (User.IsAuthenticated)
{
    &lt;p&gt;Welcome, @User.Name!&lt;/p&gt;
}
else
{
    &lt;p&gt;Please &lt;a href="/login"&gt;log in&lt;/a&gt;.&lt;/p&gt;
}

@* Looping *@
&lt;ul&gt;
@foreach (var item in items)
{
    &lt;li&gt;@item.Name - @item.Price.ToString("C")&lt;/li&gt;
}
&lt;/ul&gt;

@* Switch expression (C# 8+) *@
&lt;div class="@(status switch {
    Status.Active => "badge bg-success",
    Status.Pending => "badge bg-warning",
    Status.Inactive => "badge bg-secondary",
    _ => "badge bg-light"
})"&gt;
    @status
&lt;/div&gt;

@* Using directive *@
@using System.Text.Json

&lt;pre&gt;@JsonSerializer.Serialize(data, new JsonSerializerOptions { WriteIndented = true })&lt;/pre&gt;</code></pre>

          <h2>C# Integration</h2>
          <p>
            Blazor components have full access to the entire .NET ecosystem. You can use any C# language features, 
            .NET libraries, and NuGet packages directly in your components.
          </p>

          <h3>C# Features in Blazor</h3>
          <div class="row g-3">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-purple">
                <div class="card-body">
                  <h4>Language Features</h4>
                  <ul class="mb-0">
                    <li>LINQ queries</li>
                    <li>Async/await</li>
                    <li>Pattern matching</li>
                    <li>Records and tuples</li>
                    <li>Nullable reference types</li>
                    <li>Extension methods</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-teal">
                <div class="card-body">
                  <h4>.NET Libraries</h4>
                  <ul class="mb-0">
                    <li>System.Text.Json</li>
                    <li>HttpClient</li>
                    <li>Entity Framework</li>
                    <li>FluentValidation</li>
                    <li>AutoMapper</li>
                    <li>Any NuGet package</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <h3>Advanced C# in Components</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/products-advanced"
@using System.Linq
@inject IProductService ProductService
@inject ILogger&lt;ProductsAdvanced&gt; Logger

&lt;h3&gt;Advanced Product Search&lt;/h3&gt;

&lt;input @bind="searchTerm" @bind:event="oninput" placeholder="Search..." /&gt;

&lt;div class="mt-3"&gt;
    @foreach (var group in FilteredProductsByCategory)
    {
        &lt;h4&gt;@group.Key (@group.Count() items)&lt;/h4&gt;
        &lt;ul&gt;
            @foreach (var product in group)
            {
                &lt;li&gt;@product.Name - @product.Price.ToString("C")&lt;/li&gt;
            }
        &lt;/ul&gt;
    }
&lt;/div&gt;

@code {
    private List&lt;Product&gt; products = new();
    private string searchTerm = string.Empty;

    // LINQ query with grouping
    private IEnumerable&lt;IGrouping&lt;string, Product&gt;&gt; FilteredProductsByCategory =&gt;
        products
            .Where(p => string.IsNullOrEmpty(searchTerm) || 
                       p.Name.Contains(searchTerm, StringComparison.OrdinalIgnoreCase))
            .OrderBy(p => p.Category)
            .ThenBy(p => p.Name)
            .GroupBy(p => p.Category);

    protected override async Task OnInitializedAsync()
    {
        try
        {
            products = await ProductService.GetProductsAsync();
            Logger.LogInformation("Loaded {Count} products", products.Count);
        }
        catch (Exception ex)
        {
            Logger.LogError(ex, "Error loading products");
        }
    }

    // Record type for product (C# 9+)
    public record Product(string Name, decimal Price, string Category);
}</code></pre>

          <div class="callout">
            <strong>üéØ Key Takeaways:</strong>
            <ul>
              <li>Blazor components are .NET classes with full C# capabilities</li>
              <li>The render tree enables efficient DOM updates through diffing</li>
              <li>Razor syntax seamlessly blends HTML markup with C# code</li>
              <li>All .NET libraries and language features are available in components</li>
              <li>Type safety and IntelliSense work throughout your component code</li>
            </ul>
          </div>
        </section>
        
        <!-- Hosting Models Section -->
        <section id="hosting-models" role="article">
          <h1>üéØ Hosting Models</h1>
          <span class="badge">hosting</span>
          <span class="badge">deployment</span>
          <span class="badge">rendering</span>
          
          <h2>Overview of Blazor Hosting Models</h2>
          <p>
            Blazor offers multiple hosting models, each with different characteristics and trade-offs. The choice of hosting 
            model depends on your application requirements, including performance needs, offline capabilities, SEO requirements, 
            and deployment constraints.
          </p>

          <div class="callout">
            <strong>üí° Key Insight:</strong> You can mix and match hosting models in the same application, using the best 
            approach for each component or page. This flexibility is a unique advantage of Blazor.
          </div>

          <h2>Comparison of Hosting Models</h2>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Aspect</th>
                <th>Blazor Server</th>
                <th>Blazor WebAssembly</th>
                <th>Blazor Web App</th>
                <th>Blazor Hybrid</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Execution</strong></td>
                <td>Server-side</td>
                <td>Client-side (browser)</td>
                <td>Mixed (server + client)</td>
                <td>Native app (WebView)</td>
              </tr>
              <tr>
                <td><strong>Connection</strong></td>
                <td>SignalR (persistent)</td>
                <td>HTTP only</td>
                <td>HTTP + optional SignalR</td>
                <td>Local interop</td>
              </tr>
              <tr>
                <td><strong>Download Size</strong></td>
                <td>Small (~250 KB)</td>
                <td>Large (~2-5 MB)</td>
                <td>Variable</td>
                <td>N/A (native)</td>
              </tr>
              <tr>
                <td><strong>Initial Load</strong></td>
                <td>Fast</td>
                <td>Slower (download)</td>
                <td>Fast (SSR)</td>
                <td>Instant</td>
              </tr>
              <tr>
                <td><strong>Subsequent Navigation</strong></td>
                <td>Fast</td>
                <td>Very Fast</td>
                <td>Very Fast</td>
                <td>Instant</td>
              </tr>
              <tr>
                <td><strong>Offline Support</strong></td>
                <td>‚ùå No</td>
                <td>‚úÖ Yes (PWA)</td>
                <td>Partial</td>
                <td>‚úÖ Yes</td>
              </tr>
              <tr>
                <td><strong>SEO</strong></td>
                <td>‚úÖ Excellent</td>
                <td>‚ö†Ô∏è Requires SSR</td>
                <td>‚úÖ Excellent</td>
                <td>N/A</td>
              </tr>
              <tr>
                <td><strong>Scalability</strong></td>
                <td>Server resources per user</td>
                <td>Client resources</td>
                <td>Balanced</td>
                <td>Client resources</td>
              </tr>
              <tr>
                <td><strong>Security</strong></td>
                <td>Code on server</td>
                <td>Code in browser</td>
                <td>Flexible</td>
                <td>Code in app</td>
              </tr>
              <tr>
                <td><strong>Debugging</strong></td>
                <td>Full .NET debugging</td>
                <td>Browser dev tools</td>
                <td>Both</td>
                <td>Full .NET debugging</td>
              </tr>
              <tr>
                <td><strong>Best For</strong></td>
                <td>LOB apps, intranets</td>
                <td>Public apps, PWAs</td>
                <td>Modern web apps</td>
                <td>Desktop/mobile apps</td>
              </tr>
            </tbody>
          </table>

          <h2>Choosing the Right Hosting Model</h2>
          <div class="row g-3">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-blue">
                <div class="card-body">
                  <h3>Choose Blazor Server When:</h3>
                  <ul class="mb-0">
                    <li>You need fast initial load times</li>
                    <li>Building line-of-business applications</li>
                    <li>Users have reliable internet connections</li>
                    <li>You want to keep code on the server</li>
                    <li>Supporting older browsers</li>
                    <li>Minimizing download size is critical</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-green">
                <div class="card-body">
                  <h3>Choose Blazor WebAssembly When:</h3>
                  <ul class="mb-0">
                    <li>You need offline support or PWA capabilities</li>
                    <li>Building public-facing applications</li>
                    <li>Want to reduce server load</li>
                    <li>Need rich client-side interactivity</li>
                    <li>Can accept larger initial download</li>
                    <li>Deploying to static hosting (CDN)</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-purple">
                <div class="card-body">
                  <h3>Choose Blazor Web App When:</h3>
                  <ul class="mb-0">
                    <li>Building modern full-stack applications</li>
                    <li>You want flexibility in rendering modes</li>
                    <li>Need both SSR and client interactivity</li>
                    <li>Want progressive enhancement</li>
                    <li>Optimizing for both SEO and UX</li>
                    <li>Starting new projects (recommended)</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-orange">
                <div class="card-body">
                  <h3>Choose Blazor Hybrid When:</h3>
                  <ul class="mb-0">
                    <li>Building desktop or mobile applications</li>
                    <li>Need native device capabilities</li>
                    <li>Want to reuse web components in apps</li>
                    <li>Targeting Windows, macOS, iOS, Android</li>
                    <li>Migrating WPF/WinForms apps</li>
                    <li>Building cross-platform apps</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <h2>Render Modes in Blazor Web Apps</h2>
          <p>
            Blazor Web Apps (the recommended model for new projects) support multiple render modes that can be applied 
            per component or per page:
          </p>

          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Render Mode</th>
                <th>Syntax</th>
                <th>Description</th>
                <th>Use Case</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Static SSR</strong></td>
                <td><code>@rendermode RenderMode.InteractiveServer</code> (omit)</td>
                <td>Rendered on server, sent as static HTML</td>
                <td>Static content, landing pages</td>
              </tr>
              <tr>
                <td><strong>Interactive Server</strong></td>
                <td><code>@rendermode InteractiveServer</code></td>
                <td>Rendered on server with SignalR connection</td>
                <td>Forms, dashboards, LOB apps</td>
              </tr>
              <tr>
                <td><strong>Interactive WebAssembly</strong></td>
                <td><code>@rendermode InteractiveWebAssembly</code></td>
                <td>Downloaded and runs in browser</td>
                <td>Rich clients, offline scenarios</td>
              </tr>
              <tr>
                <td><strong>Interactive Auto</strong></td>
                <td><code>@rendermode InteractiveAuto</code></td>
                <td>Starts as Server, upgrades to WASM</td>
                <td>Best of both worlds</td>
              </tr>
            </tbody>
          </table>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Apply render mode to entire page *@
@page "/counter"
@rendermode InteractiveServer

&lt;h3&gt;Counter&lt;/h3&gt;
&lt;p&gt;Current count: @currentCount&lt;/p&gt;
&lt;button @onclick="IncrementCount"&gt;Click me&lt;/button&gt;

@code {
    private int currentCount = 0;
    private void IncrementCount() => currentCount++;
}

@* Or apply to specific component *@
&lt;Counter @rendermode="InteractiveWebAssembly" /&gt;</code></pre>
        </section>

        <!-- Blazor Server Section -->
        <section id="blazor-server" role="article">
          <h1>Blazor Server</h1>
          <span class="badge">server</span>
          <span class="badge">interactive-ssr</span>
          <span class="badge">signalr</span>
          
          <h2>What is Blazor Server?</h2>
          <p>
            <strong>Blazor Server</strong> hosts Blazor components on the server and handles UI updates over a real-time 
            SignalR connection. When users interact with the UI, events are sent to the server, processed there, and 
            UI updates are sent back to the browser.
          </p>

          <div class="callout">
            <strong>‚ö° Performance Tip:</strong> Blazor Server provides excellent initial load performance because only 
            a small JavaScript file is downloaded. The .NET runtime and app code stay on the server.
          </div>

          <h2>How Blazor Server Works</h2>
          <p>The architecture of Blazor Server follows this flow:</p>
          <ol>
            <li>Browser requests a page</li>
            <li>Server renders the page and sends HTML to browser</li>
            <li>Browser downloads small Blazor JavaScript (~250 KB)</li>
            <li>JavaScript establishes SignalR connection to server</li>
            <li>User interactions trigger events sent to server over SignalR</li>
            <li>Server processes events, updates component state</li>
            <li>Server calculates UI diff and sends changes via SignalR</li>
            <li>Browser applies changes to DOM</li>
          </ol>

          <h2>Key Features</h2>
          <div class="row g-3">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-blue">
                <div class="card-body">
                  <h3>‚úÖ Advantages</h3>
                  <ul class="mb-0">
                    <li><strong>Fast Initial Load:</strong> Only ~250 KB download</li>
                    <li><strong>Full .NET Runtime:</strong> Access to all .NET APIs</li>
                    <li><strong>Code Security:</strong> App code never leaves server</li>
                    <li><strong>Small Client Footprint:</strong> Works on older devices</li>
                    <li><strong>Easy Debugging:</strong> Full .NET debugging support</li>
                    <li><strong>Database Access:</strong> Direct database connections</li>
                    <li><strong>Browser Support:</strong> Works on older browsers</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-red">
                <div class="card-body">
                  <h3>‚ö†Ô∏è Limitations</h3>
                  <ul class="mb-0">
                    <li><strong>Network Dependency:</strong> Requires constant connection</li>
                    <li><strong>Latency:</strong> Every interaction has network round-trip</li>
                    <li><strong>No Offline:</strong> Cannot work without server connection</li>
                    <li><strong>Scalability:</strong> Server resources per user</li>
                    <li><strong>Connection Issues:</strong> Reconnection logic needed</li>
                    <li><strong>State Management:</strong> Server memory per connection</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <h2>Configuration Example</h2>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Program.cs - Blazor Server configuration
var builder = WebApplication.CreateBuilder(args);

// Add services
builder.Services.AddRazorComponents()
    .AddInteractiveServerComponents();

// Configure SignalR hub options
builder.Services.AddSignalR(options =>
{
    options.MaximumReceiveMessageSize = 128 * 1024; // 128 KB
    options.EnableDetailedErrors = builder.Environment.IsDevelopment();
    options.KeepAliveInterval = TimeSpan.FromSeconds(15);
    options.ClientTimeoutInterval = TimeSpan.FromSeconds(30);
});

var app = builder.Build();

// Configure middleware
if (!app.Environment.IsDevelopment())
{
    app.UseExceptionHandler("/Error");
    app.UseHsts();
}

app.UseHttpsRedirection();
app.UseStaticFiles();
app.UseAntiforgery();

app.MapRazorComponents<App>()
    .AddInteractiveServerRenderMode();

app.Run();</code></pre>

          <h2>Interactive Server Render Mode</h2>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/weather"
@rendermode InteractiveServer
@inject WeatherService WeatherService

&lt;h3&gt;Weather Forecast&lt;/h3&gt;

@if (forecasts == null)
{
    &lt;p&gt;&lt;em&gt;Loading...&lt;/em&gt;&lt;/p&gt;
}
else
{
    &lt;table class="table"&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;Date&lt;/th&gt;
                &lt;th&gt;Temp. (C)&lt;/th&gt;
                &lt;th&gt;Summary&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            @foreach (var forecast in forecasts)
            {
                &lt;tr&gt;
                    &lt;td&gt;@forecast.Date.ToShortDateString()&lt;/td&gt;
                    &lt;td&gt;@forecast.TemperatureC&lt;/td&gt;
                    &lt;td&gt;@forecast.Summary&lt;/td&gt;
                &lt;/tr&gt;
            }
        &lt;/tbody&gt;
    &lt;/table&gt;
}

@code {
    private WeatherForecast[]? forecasts;

    protected override async Task OnInitializedAsync()
    {
        // Runs on server, can directly access database
        forecasts = await WeatherService.GetForecastAsync();
    }
}</code></pre>

          <h2>Connection Resilience</h2>
          <p>Handle connection issues gracefully:</p>
          <pre class="syntax-highlighted" data-language="JavaScript"><code class="language-javascript">// wwwroot/js/blazor-reconnect.js
window.Blazor = {
    reconnect: function() {
        const reconnectModal = document.getElementById('reconnect-modal');
        const reconnectDisplay = document.getElementById('reconnect-display');
        
        Blazor.defaultReconnectionHandler._reconnectCallback = async () => {
            reconnectDisplay.innerText = 'Reconnecting...';
            reconnectModal.style.display = 'block';
            
            // Custom reconnection logic
            const maxRetries = 10;
            let retryCount = 0;
            
            while (retryCount < maxRetries) {
                try {
                    await Blazor.reconnect();
                    reconnectModal.style.display = 'none';
                    return;
                } catch {
                    retryCount++;
                    reconnectDisplay.innerText = `Reconnecting... (${retryCount}/${maxRetries})`;
                    await new Promise(resolve => setTimeout(resolve, 3000));
                }
            }
            
            reconnectDisplay.innerText = 'Connection lost. Please refresh the page.';
        };
    }
};</code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Optimize Circuit Size:</strong> Dispose of large objects and minimize state</li>
            <li><strong>Handle Reconnection:</strong> Implement custom reconnection UI and logic</li>
            <li><strong>Use Streaming Rendering:</strong> For long-running async operations</li>
            <li><strong>Implement Heartbeat:</strong> Monitor connection health</li>
            <li><strong>Limit Message Size:</strong> Configure MaximumReceiveMessageSize appropriately</li>
            <li><strong>Scale Horizontally:</strong> Use Azure SignalR Service for production</li>
            <li><strong>Monitor Circuits:</strong> Track active connections and memory usage</li>
          </ul>
        </section>

        <!-- Blazor WebAssembly Section -->
        <section id="blazor-webassembly" role="article">
          <h1>Blazor WebAssembly</h1>
          <span class="badge">wasm</span>
          <span class="badge">client-side</span>
          <span class="badge">pwa</span>
          
          <h2>What is Blazor WebAssembly?</h2>
          <p>
            <strong>Blazor WebAssembly</strong> runs entirely in the browser using WebAssembly. The .NET runtime, application 
            assemblies, and dependencies are downloaded to the browser and executed client-side. This enables rich 
            interactive experiences without requiring a server connection after initial load.
          </p>

          <div class="callout">
            <strong>üåê Key Benefit:</strong> Blazor WebAssembly apps can work offline, be cached for instant startup, 
            and deployed to static hosting services like Azure Static Web Apps or CDNs.
          </div>

          <h2>How Blazor WebAssembly Works</h2>
          <ol>
            <li>Browser requests the application</li>
            <li>Server sends HTML, CSS, JavaScript, and WebAssembly files</li>
            <li>Browser downloads .NET runtime (~2-3 MB compressed)</li>
            <li>Browser downloads application DLLs (~500 KB - 2 MB)</li>
            <li>.NET runtime boots up in WebAssembly</li>
            <li>Application code executes entirely in browser</li>
            <li>All UI updates happen locally (no server round-trips)</li>
            <li>API calls made via HttpClient to backend services</li>
          </ol>

          <h2>Key Features</h2>
          <div class="row g-3">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-green">
                <div class="card-body">
                  <h3>‚úÖ Advantages</h3>
                  <ul class="mb-0">
                    <li><strong>Offline Capable:</strong> Works without internet connection</li>
                    <li><strong>No Server Required:</strong> After initial download</li>
                    <li><strong>Fast UI Updates:</strong> No network latency</li>
                    <li><strong>Scalable:</strong> Client resources, not server</li>
                    <li><strong>Static Hosting:</strong> Deploy to CDN, Azure Storage</li>
                    <li><strong>PWA Support:</strong> Installable progressive web apps</li>
                    <li><strong>Local Processing:</strong> Heavy computation on client</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-red">
                <div class="card-body">
                  <h3>‚ö†Ô∏è Limitations</h3>
                  <ul class="mb-0">
                    <li><strong>Large Download:</strong> 2-5 MB initial payload</li>
                    <li><strong>Slower Startup:</strong> Initial load takes longer</li>
                    <li><strong>Limited APIs:</strong> Browser sandbox restrictions</li>
                    <li><strong>Debugging:</strong> Browser dev tools only</li>
                    <li><strong>Code Visibility:</strong> DLLs downloaded to client</li>
                    <li><strong>Browser Support:</strong> Modern browsers only</li>
                    <li><strong>SEO Challenges:</strong> Requires prerendering</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <h2>Configuration Example</h2>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Program.cs - Blazor WebAssembly
using Microsoft.AspNetCore.Components.WebAssembly.Hosting;

var builder = WebAssemblyHostBuilder.CreateDefault(args);

// Add root component
builder.RootComponents.Add&lt;App&gt;("#app");
builder.RootComponents.Add&lt;HeadOutlet&gt;("head::after");

// Configure HttpClient for API calls
builder.Services.AddScoped(sp => new HttpClient 
{ 
    BaseAddress = new Uri(builder.HostEnvironment.BaseAddress) 
});

// Add other services
builder.Services.AddScoped&lt;IWeatherService, WeatherService&gt;();

// Configure for PWA
builder.Services.AddScoped&lt;IPwaInstallationService, PwaInstallationService&gt;();

await builder.Build().RunAsync();</code></pre>

          <h2>Progressive Web App (PWA)</h2>
          <p>Turn your Blazor WebAssembly app into an installable PWA:</p>
          
          <pre class="syntax-highlighted" data-language="JSON"><code class="language-json">// wwwroot/manifest.json
{
  "name": "My Blazor PWA",
  "short_name": "BlazorPWA",
  "description": "A Progressive Web App built with Blazor",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#3b82f6",
  "icons": [
    {
      "src": "icon-192.png",
      "type": "image/png",
      "sizes": "192x192"
    },
    {
      "src": "icon-512.png",
      "type": "image/png",
      "sizes": "512x512"
    }
  ]
}</code></pre>

          <pre class="syntax-highlighted" data-language="JavaScript"><code class="language-javascript">// wwwroot/service-worker.js
const CACHE_NAME = 'blazor-pwa-cache-v1';
const urlsToCache = [
    '/',
    '/index.html',
    '/css/app.css',
    '/js/app.js',
    '/_framework/blazor.webassembly.js'
];

self.addEventListener('install', event => {
    event.waitUntil(
        caches.open(CACHE_NAME)
            .then(cache => cache.addAll(urlsToCache))
    );
});

self.addEventListener('fetch', event => {
    event.respondWith(
        caches.match(event.request)
            .then(response => response || fetch(event.request))
    );
});</code></pre>

          <h2>Performance Optimization</h2>
          <h3>Lazy Loading</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Router configuration for lazy loading *@
&lt;Router AppAssembly="@typeof(App).Assembly"
        AdditionalAssemblies="@lazyLoadedAssemblies"
        OnNavigateAsync="@OnNavigateAsync"&gt;
    &lt;!-- Router content --&gt;
&lt;/Router&gt;

@code {
    private List&lt;Assembly&gt; lazyLoadedAssemblies = new();

    private async Task OnNavigateAsync(NavigationContext context)
    {
        if (context.Path == "admin")
        {
            var assemblies = await AssemblyLoader.LoadAssembliesAsync(
                new[] { "Admin.dll" });
            lazyLoadedAssemblies.AddRange(assemblies);
        }
    }
}</code></pre>

          <h3>AOT Compilation</h3>
          <pre class="syntax-highlighted" data-language="XML"><code class="language-xml">&lt;!-- Enable Ahead-of-Time compilation for better runtime performance --&gt;
&lt;PropertyGroup&gt;
    &lt;RunAOTCompilation&gt;true&lt;/RunAOTCompilation&gt;
&lt;/PropertyGroup&gt;</code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Use Compression:</strong> Enable Brotli/Gzip compression on server</li>
            <li><strong>Lazy Load Assemblies:</strong> Split large apps into lazy-loaded modules</li>
            <li><strong>Enable AOT:</strong> Use ahead-of-time compilation for production</li>
            <li><strong>Minimize Dependencies:</strong> Keep NuGet packages lean</li>
            <li><strong>Use PWA:</strong> Enable service workers for offline support and caching</li>
            <li><strong>Trim Unused Code:</strong> Enable IL trimming to reduce size</li>
            <li><strong>CDN Deployment:</strong> Host static files on CDN for global performance</li>
          </ul>
        </section>

        <!-- Blazor Web App Section -->
        <section id="blazor-web-app" role="article">
          <h1>Blazor Web App</h1>
          <span class="badge">full-stack</span>
          <span class="badge">mixed-rendering</span>
          <span class="badge">recommended</span>
          
          <h2>What is Blazor Web App?</h2>
          <p>
            <strong>Blazor Web App</strong> is the recommended hosting model for new Blazor applications. It combines the 
            best of both worlds - server-side rendering for fast initial loads and SEO, with client-side interactivity 
            where needed. You can mix rendering modes within a single application.
          </p>

          <div class="callout">
            <strong>üéØ Best Practice:</strong> Use Static SSR for content pages, Interactive Server for forms and dashboards, 
            and Interactive WebAssembly for rich client experiences. Blazor Web App lets you choose per component.
          </div>

          <h2>Key Features</h2>
          <div class="row g-3">
            <div class="col-md-4">
              <div class="card border-0 shadow-sm h-100 bg-gradient-blue">
                <div class="card-body">
                  <h3>üöÄ Fast Initial Load</h3>
                  <p class="mb-0">Static SSR delivers pre-rendered HTML instantly, with no JavaScript download required for static content.</p>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card border-0 shadow-sm h-100 bg-gradient-green">
                <div class="card-body">
                  <h3>‚ö° Progressive Enhancement</h3>
                  <p class="mb-0">Start with static HTML, progressively enhance with interactivity only where needed.</p>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card border-0 shadow-sm h-100 bg-gradient-purple">
                <div class="card-body">
                  <h3>üîÑ Flexible Rendering</h3>
                  <p class="mb-0">Mix Static SSR, Server, WebAssembly, and Auto modes in the same application.</p>
                </div>
              </div>
            </div>
          </div>

          <h2>Render Modes Explained</h2>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Mode</th>
                <th>When to Use</th>
                <th>Behavior</th>
                <th>Example Use Case</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Static SSR</strong></td>
                <td>Default, no <code>@rendermode</code></td>
                <td>Rendered once on server, sent as HTML</td>
                <td>Blog posts, documentation, landing pages</td>
              </tr>
              <tr>
                <td><strong>Interactive Server</strong></td>
                <td><code>@rendermode InteractiveServer</code></td>
                <td>SignalR connection for interactivity</td>
                <td>Forms, dashboards, data grids</td>
              </tr>
              <tr>
                <td><strong>Interactive WebAssembly</strong></td>
                <td><code>@rendermode InteractiveWebAssembly</code></td>
                <td>Downloads and runs in browser</td>
                <td>Rich editors, games, offline features</td>
              </tr>
              <tr>
                <td><strong>Interactive Auto</strong></td>
                <td><code>@rendermode InteractiveAuto</code></td>
                <td>Server first, WASM on subsequent visits</td>
                <td>Balanced performance and capability</td>
              </tr>
            </tbody>
          </table>

          <h2>Configuration Example</h2>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Program.cs - Blazor Web App (Full Stack)
var builder = WebApplication.CreateBuilder(args);

// Add services to support all render modes
builder.Services.AddRazorComponents()
    .AddInteractiveServerComponents()
    .AddInteractiveWebAssemblyComponents();

// Add additional services
builder.Services.AddScoped&lt;WeatherService&gt;();
builder.Services.AddHttpClient();

var app = builder.Build();

// Configure middleware
if (!app.Environment.IsDevelopment())
{
    app.UseExceptionHandler("/Error");
    app.UseHsts();
}

app.UseHttpsRedirection();
app.UseStaticFiles();
app.UseAntiforgery();

// Map components with all render modes
app.MapRazorComponents&lt;App&gt;()
    .AddInteractiveServerRenderMode()
    .AddInteractiveWebAssemblyRenderMode()
    .AddAdditionalAssemblies(typeof(Counter).Assembly);

app.Run();</code></pre>

          <h2>Mixed Rendering Example</h2>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/products"

&lt;PageTitle&gt;Products&lt;/PageTitle&gt;

@* Static SSR for header (no interactivity needed) *@
&lt;header&gt;
    &lt;h1&gt;Our Products&lt;/h1&gt;
    &lt;p&gt;Browse our catalog of amazing products&lt;/p&gt;
&lt;/header&gt;

@* Interactive Server for search (form with server validation) *@
&lt;ProductSearch @rendermode="InteractiveServer" /&gt;

@* Static SSR for product grid *@
&lt;div class="product-grid"&gt;
    @foreach (var product in Products)
    {
        @* Interactive WebAssembly for rich product card *@
        &lt;ProductCard Product="@product" 
                     @rendermode="InteractiveWebAssembly" /&gt;
    }
&lt;/div&gt;

@* Interactive Auto for shopping cart *@
&lt;ShoppingCart @rendermode="InteractiveAuto" /&gt;

@code {
    // This code runs during static SSR to get initial data
    public List&lt;Product&gt; Products { get; set; } = new();

    protected override async Task OnInitializedAsync()
    {
        // Fetched during SSR, no client download needed
        Products = await ProductService.GetProductsAsync();
    }
}</code></pre>

          <h2>Enhanced Navigation</h2>
          <p>Blazor Web Apps support enhanced navigation that intercepts link clicks for smooth transitions:</p>
          
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* In App.razor *@
&lt;HeadOutlet @rendermode="InteractiveServer" /&gt;

&lt;Router AppAssembly="@typeof(App).Assembly"&gt;
    &lt;Found Context="routeData"&gt;
        &lt;RouteView RouteData="@routeData" DefaultLayout="@typeof(MainLayout)" /&gt;
        &lt;FocusOnNavigate RouteData="@routeData" Selector="h1" /&gt;
    &lt;/Found&gt;
&lt;/Router&gt;

@* Enhanced navigation happens automatically for &lt;a&gt; tags *@
&lt;nav&gt;
    &lt;a href="/"&gt;Home&lt;/a&gt;  @* Enhanced navigation *@
    &lt;a href="/products"&gt;Products&lt;/a&gt;
    &lt;a href="/external" data-enhance-nav="false"&gt;External&lt;/a&gt;  @* Opt-out *@
&lt;/nav&gt;</code></pre>

          <h2>Streaming Rendering</h2>
          <p>Display content immediately while async operations complete in the background:</p>
          
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/streaming-demo"
@attribute [StreamRendering]

&lt;h3&gt;Streaming Rendering Demo&lt;/h3&gt;

&lt;p&gt;This content is shown immediately!&lt;/p&gt;

@if (data == null)
{
    &lt;p&gt;Loading data...&lt;/p&gt;
}
else
{
    &lt;p&gt;Data loaded: @data&lt;/p&gt;
}

@code {
    private string? data;

    protected override async Task OnInitializedAsync()
    {
        // Page is shown immediately, this loads in background
        await Task.Delay(2000);
        data = await LoadDataAsync();
    }

    private async Task&lt;string&gt; LoadDataAsync()
    {
        // Simulate database call
        await Task.Delay(1000);
        return "Important data from database";
    }
}</code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Default to Static SSR:</strong> Use it for content that doesn't need interactivity</li>
            <li><strong>Apply Render Modes Strategically:</strong> Add interactivity only where needed</li>
            <li><strong>Use Interactive Auto:</strong> For components that benefit from both models</li>
            <li><strong>Enable Streaming:</strong> For pages with long-running async operations</li>
            <li><strong>Leverage Enhanced Navigation:</strong> For SPA-like user experience</li>
            <li><strong>Consider Prerendering:</strong> For WebAssembly components that need SEO</li>
            <li><strong>Optimize Data Loading:</strong> Load data during SSR to avoid waterfalls</li>
          </ul>
        </section>

        <!-- Blazor Hybrid Section -->
        <section id="blazor-hybrid" role="article">
          <h1>Blazor Hybrid</h1>
          <span class="badge">hybrid</span>
          <span class="badge">maui</span>
          <span class="badge">desktop</span>
          <span class="badge">mobile</span>
          
          <h2>What is Blazor Hybrid?</h2>
          <p>
            <strong>Blazor Hybrid</strong> enables you to use Blazor components in native desktop and mobile applications. 
            Your Razor components run natively in the .NET process and render web UI to an embedded WebView control. 
            This allows sharing UI code across web, desktop, and mobile platforms.
          </p>

          <div class="callout">
            <strong>üî• Key Advantage:</strong> Write your UI once with Blazor components and reuse them across web apps 
            (Blazor Server/WASM), desktop apps (Windows, macOS, Linux), and mobile apps (iOS, Android).
          </div>

          <h2>Blazor Hybrid Platforms</h2>
          <div class="row g-3">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-blue">
                <div class="card-body">
                  <h3>üé® .NET MAUI</h3>
                  <p><strong>Recommended for new apps</strong></p>
                  <ul class="mb-0">
                    <li>Cross-platform (Windows, macOS, iOS, Android)</li>
                    <li>Modern UI framework</li>
                    <li>Native controls + Blazor components</li>
                    <li>Single codebase for all platforms</li>
                    <li>Hot reload support</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-green">
                <div class="card-body">
                  <h3>üñºÔ∏è WPF (Windows Presentation Foundation)</h3>
                  <p><strong>For existing WPF apps</strong></p>
                  <ul class="mb-0">
                    <li>Windows desktop only</li>
                    <li>Modernize existing WPF apps</li>
                    <li>Mix WPF controls with Blazor</li>
                    <li>Leverage existing XAML skills</li>
                    <li>Enterprise desktop applications</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-purple">
                <div class="card-body">
                  <h3>üìã Windows Forms</h3>
                  <p><strong>For legacy WinForms apps</strong></p>
                  <ul class="mb-0">
                    <li>Windows desktop only</li>
                    <li>Modernize legacy apps</li>
                    <li>Gradual migration path</li>
                    <li>Add Blazor to existing forms</li>
                    <li>Simple integration</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-teal">
                <div class="card-body">
                  <h3>üåê Web View</h3>
                  <p><strong>Custom integrations</strong></p>
                  <ul class="mb-0">
                    <li>Embed in any .NET app</li>
                    <li>Custom WebView integration</li>
                    <li>Maximum flexibility</li>
                    <li>Advanced scenarios</li>
                    <li>Direct WebView control</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <h2>.NET MAUI Blazor Hybrid Example</h2>
          <h3>Project Structure</h3>
          <pre class="syntax-highlighted" data-language="Plain"><code>MyMauiApp/
‚îú‚îÄ‚îÄ MauiProgram.cs          # App configuration
‚îú‚îÄ‚îÄ MainPage.xaml           # MAUI page with BlazorWebView
‚îú‚îÄ‚îÄ MainPage.xaml.cs        # Code-behind
‚îú‚îÄ‚îÄ wwwroot/                # Web assets (CSS, JS)
‚îÇ   ‚îú‚îÄ‚îÄ index.html          # Root HTML
‚îÇ   ‚îî‚îÄ‚îÄ css/app.css
‚îî‚îÄ‚îÄ Components/             # Blazor components
    ‚îú‚îÄ‚îÄ Counter.razor
    ‚îî‚îÄ‚îÄ Weather.razor</code></pre>

          <h3>MauiProgram.cs</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">using Microsoft.Extensions.Logging;

public static class MauiProgram
{
    public static MauiApp CreateMauiApp()
    {
        var builder = MauiApp.CreateBuilder();
        
        builder
            .UseMauiApp&lt;App&gt;()
            .ConfigureFonts(fonts =>
            {
                fonts.AddFont("OpenSans-Regular.ttf", "OpenSansRegular");
            });

        // Add Blazor Hybrid
        builder.Services.AddMauiBlazorWebView();

#if DEBUG
        builder.Services.AddBlazorWebViewDeveloperTools();
        builder.Logging.AddDebug();
#endif

        // Register services
        builder.Services.AddSingleton&lt;WeatherService&gt;();
        builder.Services.AddTransient&lt;IGeolocationService, GeolocationService&gt;();

        return builder.Build();
    }
}</code></pre>

          <h3>MainPage.xaml</h3>
          <pre class="syntax-highlighted" data-language="XML"><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:MyMauiApp"
             x:Class="MyMauiApp.MainPage"&gt;

    &lt;!-- BlazorWebView hosts Blazor components --&gt;
    &lt;BlazorWebView HostPage="wwwroot/index.html"&gt;
        &lt;BlazorWebView.RootComponents&gt;
            &lt;RootComponent Selector="#app" ComponentType="{x:Type local:Main}" /&gt;
        &lt;/BlazorWebView.RootComponents&gt;
    &lt;/BlazorWebView&gt;

&lt;/ContentPage&gt;</code></pre>

          <h3>Accessing Native Features</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/location"
@inject IGeolocationService GeolocationService

&lt;h3&gt;Get Device Location&lt;/h3&gt;

&lt;button class="btn btn-primary" @onclick="GetLocation"&gt;
    Get My Location
&lt;/button&gt;

@if (location != null)
{
    &lt;div class="mt-3"&gt;
        &lt;p&gt;&lt;strong&gt;Latitude:&lt;/strong&gt; @location.Latitude&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;Longitude:&lt;/strong&gt; @location.Longitude&lt;/p&gt;
    &lt;/div&gt;
}

@code {
    private Location? location;

    private async Task GetLocation()
    {
        try
        {
            // Access native device capabilities
            location = await GeolocationService.GetLocationAsync();
        }
        catch (Exception ex)
        {
            // Handle permission errors
            Console.WriteLine($"Error: {ex.Message}");
        }
    }
}</code></pre>

          <h3>Native Service Implementation</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">public interface IGeolocationService
{
    Task&lt;Location&gt; GetLocationAsync();
}

public class GeolocationService : IGeolocationService
{
    public async Task&lt;Location&gt; GetLocationAsync()
    {
        // MAUI provides cross-platform APIs
        var location = await Geolocation.GetLastKnownLocationAsync();
        
        if (location == null)
        {
            var request = new GeolocationRequest(
                GeolocationAccuracy.Medium,
                TimeSpan.FromSeconds(10));
                
            location = await Geolocation.GetLocationAsync(request);
        }

        return location;
    }
}</code></pre>

          <h2>WPF Blazor Hybrid Example</h2>
          <pre class="syntax-highlighted" data-language="XML"><code class="language-xml">&lt;!-- MainWindow.xaml --&gt;
&lt;Window x:Class="WpfBlazor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:blazor="clr-namespace:Microsoft.AspNetCore.Components.WebView.Wpf;assembly=Microsoft.AspNetCore.Components.WebView.Wpf"
        Title="WPF Blazor Hybrid" Height="450" Width="800"&gt;
    
    &lt;Grid&gt;
        &lt;blazor:BlazorWebView HostPage="wwwroot\\index.html" Services="{StaticResource services}"&gt;
            &lt;blazor:BlazorWebView.RootComponents&gt;
                &lt;blazor:RootComponent Selector="#app" ComponentType="{x:Type local:Main}" /&gt;
            &lt;/blazor:BlazorWebView.RootComponents&gt;
        &lt;/blazor:BlazorWebView&gt;
    &lt;/Grid&gt;
&lt;/Window&gt;</code></pre>

          <h2>JavaScript Interop in Hybrid Apps</h2>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@inject IJSRuntime JS

&lt;button @onclick="ShowNativeAlert"&gt;Show Alert&lt;/button&gt;

@code {
    private async Task ShowNativeAlert()
    {
        // Call JavaScript that can access native APIs
        await JS.InvokeVoidAsync("window.alert", "Hello from Blazor Hybrid!");
        
        // Or call custom JavaScript
        var result = await JS.InvokeAsync&lt;string&gt;("getNativeInfo");
    }
}</code></pre>

          <h2>Benefits of Blazor Hybrid</h2>
          <ul>
            <li><strong>Code Sharing:</strong> Reuse Blazor components across web and native apps</li>
            <li><strong>Native Access:</strong> Full access to device features (GPS, camera, file system, etc.)</li>
            <li><strong>Performance:</strong> Native execution speed with .NET runtime</li>
            <li><strong>Offline First:</strong> No network dependency, instant startup</li>
            <li><strong>App Store Distribution:</strong> Publish to app stores (iOS, Android, Microsoft Store)</li>
            <li><strong>Native UI:</strong> Mix Blazor with native controls (XAML, MAUI)</li>
            <li><strong>Desktop Power:</strong> Access to full desktop APIs and capabilities</li>
          </ul>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Use .NET MAUI:</strong> For new cross-platform applications</li>
            <li><strong>Share UI Components:</strong> Create class libraries for shared Blazor components</li>
            <li><strong>Platform-Specific Services:</strong> Use dependency injection for platform features</li>
            <li><strong>Handle Permissions:</strong> Request and check permissions for device features</li>
            <li><strong>Test on Devices:</strong> Always test on physical devices, not just emulators</li>
            <li><strong>Optimize Assets:</strong> Minimize CSS/JS size for faster WebView loading</li>
            <li><strong>Use MVVM:</strong> Leverage MVVM pattern for better separation of concerns</li>
          </ul>
        </section>

        <!-- Fundamentals Section -->
        <section id="fundamentals" role="article">
          <h1>üìö Fundamentals</h1>
          <span class="badge">fundamentals</span>
          <span class="badge">concepts</span>
          <span class="badge">core</span>
          
          <h2>Overview of Blazor Fundamentals</h2>
          <p>
            Understanding Blazor fundamentals is essential for building robust, scalable applications. This section covers 
            core concepts including configuration management, environment handling, logging, error handling, static file 
            serving, and real-time communication with SignalR.
          </p>

          <div class="callout">
            <strong>üí° Foundation First:</strong> Mastering these fundamentals will enable you to build production-ready 
            Blazor applications with proper configuration, diagnostics, and error handling.
          </div>

          <h2>Core Concepts</h2>
          <div class="row g-3">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-blue">
                <div class="card-body">
                  <h3>‚öôÔ∏è Configuration</h3>
                  <p>Manage app settings using <code>appsettings.json</code>, environment variables, and configuration providers.</p>
                  <ul class="mb-0">
                    <li>Environment-specific settings</li>
                    <li>Strongly-typed options</li>
                    <li>Configuration providers</li>
                    <li>Secret management</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-green">
                <div class="card-body">
                  <h3>üåç Environments</h3>
                  <p>Handle different environments (Development, Staging, Production) with appropriate configurations.</p>
                  <ul class="mb-0">
                    <li>ASPNETCORE_ENVIRONMENT variable</li>
                    <li>Conditional middleware</li>
                    <li>Environment-specific files</li>
                    <li>Feature toggles</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-purple">
                <div class="card-body">
                  <h3>üìù Logging</h3>
                  <p>Implement comprehensive logging using <code>ILogger</code> for diagnostics and monitoring.</p>
                  <ul class="mb-0">
                    <li>Log levels and filtering</li>
                    <li>Structured logging</li>
                    <li>Log providers (Console, Debug, etc.)</li>
                    <li>Application Insights integration</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-red">
                <div class="card-body">
                  <h3>üö® Error Handling</h3>
                  <p>Gracefully handle errors with error boundaries, global exception handlers, and custom error pages.</p>
                  <ul class="mb-0">
                    <li>ErrorBoundary component</li>
                    <li>Global error handling</li>
                    <li>Developer exception pages</li>
                    <li>Custom error pages</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-teal">
                <div class="card-body">
                  <h3>üìÅ Static Files</h3>
                  <p>Serve static assets (CSS, JavaScript, images) from the <code>wwwroot</code> folder.</p>
                  <ul class="mb-0">
                    <li>wwwroot folder structure</li>
                    <li>Static file middleware</li>
                    <li>CSS isolation</li>
                    <li>Bundling and minification</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-orange">
                <div class="card-body">
                  <h3>‚ö° SignalR Integration</h3>
                  <p>Enable real-time communication between server and client using SignalR hubs.</p>
                  <ul class="mb-0">
                    <li>Hub implementation</li>
                    <li>Client-server communication</li>
                    <li>Connection management</li>
                    <li>Azure SignalR Service</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <h2>Render Modes Quick Reference</h2>
          <p>Understanding when to use each render mode is fundamental to Blazor development:</p>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Render Mode</th>
                <th>Execution</th>
                <th>Interactivity</th>
                <th>Best For</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Static SSR</strong></td>
                <td>Server (one-time)</td>
                <td>None</td>
                <td>Content pages, documentation, blogs</td>
              </tr>
              <tr>
                <td><strong>Interactive Server</strong></td>
                <td>Server (continuous)</td>
                <td>Full (via SignalR)</td>
                <td>Forms, dashboards, data grids</td>
              </tr>
              <tr>
                <td><strong>Interactive WebAssembly</strong></td>
                <td>Client (browser)</td>
                <td>Full (local)</td>
                <td>Rich editors, games, offline apps</td>
              </tr>
              <tr>
                <td><strong>Interactive Auto</strong></td>
                <td>Server then Client</td>
                <td>Full (hybrid)</td>
                <td>Balanced apps, progressive enhancement</td>
              </tr>
            </tbody>
          </table>

          <div class="callout">
            <strong>üéØ Key Takeaway:</strong> Choose Static SSR by default for optimal performance, and add interactivity 
            only where needed. This approach ensures fast initial loads and efficient resource usage.
          </div>
        </section>

        <!-- Configuration Section -->
        <section id="configuration" role="article">
          <h1>Configuration</h1>
          <span class="badge">configuration</span>
          <span class="badge">appsettings</span>
          <span class="badge">options</span>
          
          <h2>Configuration in Blazor</h2>
          <p>
            Blazor applications use ASP.NET Core's configuration system, which provides a flexible way to manage settings 
            through multiple sources including JSON files, environment variables, command-line arguments, and Azure Key Vault.
          </p>

          <h2>Configuration Files</h2>
          <h3>appsettings.json</h3>
          <pre class="syntax-highlighted" data-language="JSON"><code class="language-json">{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "DefaultConnection": "Server=(localdb)\\mssqllocaldb;Database=MyDb;Trusted_Connection=True;"
  },
  "AppSettings": {
    "ApiBaseUrl": "https://api.example.com",
    "MaxItemsPerPage": 50,
    "EnableFeatureX": true
  },
  "EmailSettings": {
    "SmtpServer": "smtp.example.com",
    "Port": 587,
    "SenderEmail": "noreply@example.com",
    "SenderName": "My Blazor App"
  }
}</code></pre>

          <h3>appsettings.Development.json</h3>
          <pre class="syntax-highlighted" data-language="JSON"><code class="language-json">{
  "Logging": {
    "LogLevel": {
      "Default": "Debug",
      "Microsoft.AspNetCore": "Information"
    }
  },
  "AppSettings": {
    "ApiBaseUrl": "https://localhost:7001",
    "EnableDetailedErrors": true
  }
}</code></pre>

          <h2>Accessing Configuration</h2>
          <h3>Using IConfiguration</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/settings-demo"
@inject IConfiguration Configuration

<h3>Configuration Demo</h3>

<p><strong>API Base URL:</strong> @Configuration["AppSettings:ApiBaseUrl"]</p>
<p><strong>Max Items Per Page:</strong> @Configuration["AppSettings:MaxItemsPerPage"]</p>
<p><strong>Feature X Enabled:</strong> @Configuration.GetValue<bool>("AppSettings:EnableFeatureX")</p>

@code {
    // Access configuration in code
    protected override void OnInitialized()
    {
        var apiUrl = Configuration["AppSettings:ApiBaseUrl"];
        var maxItems = Configuration.GetValue<int>("AppSettings:MaxItemsPerPage");
        var featureEnabled = Configuration.GetValue<bool>("AppSettings:EnableFeatureX");
    }
}</code></pre>

          <h2>Strongly-Typed Configuration (Options Pattern)</h2>
          <h3>Create Options Class</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// AppSettings.cs
public class AppSettings
{
    public string ApiBaseUrl { get; set; } = string.Empty;
    public int MaxItemsPerPage { get; set; } = 50;
    public bool EnableFeatureX { get; set; }
    public bool EnableDetailedErrors { get; set; }
}

public class EmailSettings
{
    public string SmtpServer { get; set; } = string.Empty;
    public int Port { get; set; }
    public string SenderEmail { get; set; } = string.Empty;
    public string SenderName { get; set; } = string.Empty;
    public bool EnableSsl { get; set; } = true;
}</code></pre>

          <h3>Register Options in Program.cs</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Program.cs
var builder = WebApplication.CreateBuilder(args);

// Bind configuration sections to strongly-typed classes
builder.Services.Configure<AppSettings>(builder.Configuration.GetSection("AppSettings"));
builder.Services.Configure<EmailSettings>(builder.Configuration.GetSection("EmailSettings"));

// Register services
builder.Services.AddRazorComponents()
    .AddInteractiveServerComponents();

var app = builder.Build();

// Middleware configuration
app.UseHttpsRedirection();
app.UseStaticFiles();
app.UseAntiforgery();

app.MapRazorComponents<App>()
    .AddInteractiveServerRenderMode();

app.Run();</code></pre>

          <h3>Inject Options in Components</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/products"
@using Microsoft.Extensions.Options
@inject IOptions<AppSettings> AppSettings
@inject ILogger<Products> Logger

<h3>Products</h3>
<p>Loading up to @AppSettings.Value.MaxItemsPerPage items from @AppSettings.Value.ApiBaseUrl</p>

@code {
    protected override async Task OnInitializedAsync()
    {
        var settings = AppSettings.Value;
        Logger.LogInformation("Loading products from {ApiUrl}", settings.ApiBaseUrl);
        
        // Use settings
        if (settings.EnableFeatureX)
        {
            Logger.LogInformation("Feature X is enabled");
        }
    }
}</code></pre>

          <h3>Inject Options in Services</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">public class EmailService : IEmailService
{
    private readonly EmailSettings _settings;
    private readonly ILogger<EmailService> _logger;

    public EmailService(
        IOptions<EmailSettings> options,
        ILogger<EmailService> logger)
    {
        _settings = options.Value;
        _logger = logger;
    }

    public async Task SendEmailAsync(string to, string subject, string body)
    {
        _logger.LogInformation(
            "Sending email via {Server}:{Port}",
            _settings.SmtpServer,
            _settings.Port);

        using var client = new SmtpClient(_settings.SmtpServer, _settings.Port)
        {
            EnableSsl = _settings.EnableSsl
        };

        var message = new MailMessage(
            from: _settings.SenderEmail,
            to: to,
            subject: subject,
            body: body
        );

        await client.SendMailAsync(message);
    }
}</code></pre>

          <h2>Configuration Sources Priority</h2>
          <p>Configuration sources are loaded in this order (later sources override earlier ones):</p>
          <ol>
            <li><code>appsettings.json</code></li>
            <li><code>appsettings.{Environment}.json</code> (e.g., appsettings.Development.json)</li>
            <li>User secrets (Development only, via Secret Manager)</li>
            <li>Environment variables</li>
            <li>Command-line arguments</li>
          </ol>

          <h2>User Secrets (Development)</h2>
          <pre class="syntax-highlighted" data-language="bash"><code class="language-bash"># Initialize user secrets
dotnet user-secrets init

# Set a secret
dotnet user-secrets set "ConnectionStrings:DefaultConnection" "Server=localhost;Database=MyDb;User=admin;Password=secret123"

# List all secrets
dotnet user-secrets list

# Remove a secret
dotnet user-secrets remove "ConnectionStrings:DefaultConnection"</code></pre>

          <h2>Environment Variables</h2>
          <pre class="syntax-highlighted" data-language="bash"><code class="language-bash"># Set environment variables (Windows PowerShell)
$env:AppSettings__ApiBaseUrl = "https://api.production.com"
$env:AppSettings__MaxItemsPerPage = "100"

# Set environment variables (Linux/macOS)
export AppSettings__ApiBaseUrl="https://api.production.com"
export AppSettings__MaxItemsPerPage="100"

# Note: Use double underscore (__) to represent nested configuration sections</code></pre>

          <h2>Azure Key Vault Integration</h2>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Program.cs - Add Azure Key Vault
using Azure.Identity;

var builder = WebApplication.CreateBuilder(args);

// Add Azure Key Vault
if (!builder.Environment.IsDevelopment())
{
    var keyVaultEndpoint = builder.Configuration["KeyVaultEndpoint"];
    if (!string.IsNullOrEmpty(keyVaultEndpoint))
    {
        builder.Configuration.AddAzureKeyVault(
            new Uri(keyVaultEndpoint),
            new DefaultAzureCredential());
    }
}

// Rest of configuration...</code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Use Options Pattern:</strong> Always use strongly-typed configuration classes</li>
            <li><strong>Never Store Secrets in Code:</strong> Use User Secrets for development, Key Vault for production</li>
            <li><strong>Validate Configuration:</strong> Implement validation for critical settings</li>
            <li><strong>Use IOptionsSnapshot:</strong> For configuration that can change at runtime</li>
            <li><strong>Environment-Specific Files:</strong> Keep environment-specific settings separate</li>
            <li><strong>Document Settings:</strong> Add comments to explain configuration options</li>
            <li><strong>Default Values:</strong> Provide sensible defaults in your options classes</li>
          </ul>
        </section>

        <!-- Environments Section -->
        <section id="environments" role="article">
          <h1>Environments</h1>
          <span class="badge">environments</span>
          <span class="badge">development</span>
          <span class="badge">production</span>
          
          <h2>Environment Management in Blazor</h2>
          <p>
            Blazor applications support multiple environments (Development, Staging, Production) allowing you to customize 
            behavior, configuration, and middleware based on where the application is running.
          </p>

          <div class="callout">
            <strong>üéØ Best Practice:</strong> Use the Development environment for local debugging with detailed errors, 
            Staging for pre-production testing, and Production for live deployments with optimized settings.
          </div>

          <h2>Environment Detection</h2>
          <h3>ASPNETCORE_ENVIRONMENT Variable</h3>
          <p>The environment is determined by the <code>ASPNETCORE_ENVIRONMENT</code> environment variable:</p>

          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Environment</th>
                <th>Value</th>
                <th>Typical Use</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Development</strong></td>
                <td><code>Development</code></td>
                <td>Local development with detailed errors, debugging tools</td>
              </tr>
              <tr>
                <td><strong>Staging</strong></td>
                <td><code>Staging</code></td>
                <td>Pre-production testing with production-like settings</td>
              </tr>
              <tr>
                <td><strong>Production</strong></td>
                <td><code>Production</code></td>
                <td>Live environment with optimized performance and security</td>
              </tr>
            </tbody>
          </table>

          <h3>Setting the Environment</h3>
          <pre class="syntax-highlighted" data-language="bash"><code class="language-bash"># Windows PowerShell
$env:ASPNETCORE_ENVIRONMENT = "Development"
dotnet run

# Linux/macOS
export ASPNETCORE_ENVIRONMENT=Development
dotnet run

# launchSettings.json (Visual Studio)
{
  "profiles": {
    "MyBlazorApp": {
      "commandName": "Project",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    }
  }
}</code></pre>

          <h2>Using IWebHostEnvironment</h2>
          <h3>In Program.cs</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Program.cs
var builder = WebApplication.CreateBuilder(args);

// Access environment
var env = builder.Environment;

// Conditional service registration
if (env.IsDevelopment())
{
    builder.Services.AddBlazorWebViewDeveloperTools();
    builder.Logging.AddDebug();
}
else
{
    builder.Services.AddApplicationInsightsTelemetry();
}

// Load environment-specific configuration
builder.Configuration
    .AddJsonFile($"appsettings.{env.EnvironmentName}.json", optional: true);

var app = builder.Build();

// Conditional middleware
if (app.Environment.IsDevelopment())
{
    app.UseDeveloperExceptionPage();
    app.UseWebAssemblyDebugging();
}
else
{
    app.UseExceptionHandler("/Error");
    app.UseHsts();
    app.UseHttpsRedirection();
}

app.UseStaticFiles();
app.UseAntiforgery();

app.MapRazorComponents<App>()
    .AddInteractiveServerRenderMode();

app.Run();</code></pre>

          <h3>In Components</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/environment-info"
@inject IWebHostEnvironment Environment

<h3>Environment Information</h3>

<table class="table">
    <tr>
        <th>Property</th>
        <th>Value</th>
    </tr>
    <tr>
        <td>Environment Name</td>
        <td>@Environment.EnvironmentName</td>
    </tr>
    <tr>
        <td>Application Name</td>
        <td>@Environment.ApplicationName</td>
    </tr>
    <tr>
        <td>Content Root Path</td>
        <td>@Environment.ContentRootPath</td>
    </tr>
    <tr>
        <td>Web Root Path</td>
        <td>@Environment.WebRootPath</td>
    </tr>
    <tr>
        <td>Is Development</td>
        <td>@Environment.IsDevelopment()</td>
    </tr>
    <tr>
        <td>Is Staging</td>
        <td>@Environment.IsStaging()</td>
    </tr>
    <tr>
        <td>Is Production</td>
        <td>@Environment.IsProduction()</td>
    </tr>
</table>

@if (Environment.IsDevelopment())
{
    <div class="alert alert-warning">
        <strong>‚ö†Ô∏è Development Mode:</strong> Detailed error messages are enabled.
    </div>
}

@code {
    // Use environment in component logic
    protected override void OnInitialized()
    {
        if (Environment.IsDevelopment())
        {
            // Development-specific initialization
        }
    }
}</code></pre>

          <h2>Environment-Specific Configuration Files</h2>
          <p>Create separate configuration files for each environment:</p>
          
          <pre class="syntax-highlighted" data-language="Plain"><code>Project/
‚îú‚îÄ‚îÄ appsettings.json                    # Base configuration
‚îú‚îÄ‚îÄ appsettings.Development.json        # Development overrides
‚îú‚îÄ‚îÄ appsettings.Staging.json           # Staging overrides
‚îî‚îÄ‚îÄ appsettings.Production.json        # Production overrides</code></pre>

          <h3>appsettings.Development.json</h3>
          <pre class="syntax-highlighted" data-language="JSON"><code class="language-json">{
  "Logging": {
    "LogLevel": {
      "Default": "Debug",
      "Microsoft": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "ConnectionStrings": {
    "DefaultConnection": "Server=localhost;Database=MyApp_Dev;Trusted_Connection=True;"
  },
  "AppSettings": {
    "ApiBaseUrl": "https://localhost:7001",
    "EnableDetailedErrors": true,
    "CacheEnabled": false
  }
}</code></pre>

          <h3>appsettings.Production.json</h3>
          <pre class="syntax-highlighted" data-language="JSON"><code class="language-json">{
  "Logging": {
    "LogLevel": {
      "Default": "Warning",
      "Microsoft": "Warning",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "ConnectionStrings": {
    "DefaultConnection": "Server=prod-server;Database=MyApp_Prod;User Id=appuser;Password=***;"
  },
  "AppSettings": {
    "ApiBaseUrl": "https://api.example.com",
    "EnableDetailedErrors": false,
    "CacheEnabled": true
  }
}</code></pre>

          <h2>Conditional Compilation</h2>
          <p>Use preprocessor directives for environment-specific code:</p>
          
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">public class MyService
{
    public string GetApiUrl()
    {
#if DEBUG
        return "https://localhost:7001";
#else
        return "https://api.production.com";
#endif
    }

    public void LogDetails()
    {
#if DEBUG
        Console.WriteLine("Detailed debug information...");
#endif
    }
}</code></pre>

          <h2>Custom Environment Checks</h2>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Custom environment extension methods
public static class EnvironmentExtensions
{
    public static bool IsLocal(this IWebHostEnvironment env)
    {
        return env.IsEnvironment("Local");
    }

    public static bool IsQA(this IWebHostEnvironment env)
    {
        return env.IsEnvironment("QA");
    }

    public static bool IsUAT(this IWebHostEnvironment env)
    {
        return env.IsEnvironment("UAT");
    }
}

// Usage
if (Environment.IsLocal())
{
    // Local-specific logic
}
else if (Environment.IsQA())
{
    // QA-specific logic
}</code></pre>

          <h2>Azure App Service Configuration</h2>
          <p>In Azure App Service, set environment variables through the portal:</p>
          
          <pre class="syntax-highlighted" data-language="Plain"><code># Azure Portal: Configuration > Application Settings
Name: ASPNETCORE_ENVIRONMENT
Value: Production

# Azure CLI
az webapp config appsettings set \
  --resource-group MyResourceGroup \
  --name MyBlazorApp \
  --settings ASPNETCORE_ENVIRONMENT=Production</code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Default to Production:</strong> If environment is not set, assume Production for safety</li>
            <li><strong>Separate Configuration:</strong> Use environment-specific files for different settings</li>
            <li><strong>Minimize Conditional Logic:</strong> Use dependency injection instead of environment checks in components</li>
            <li><strong>Secure Secrets:</strong> Never store production secrets in appsettings files</li>
            <li><strong>Test All Environments:</strong> Ensure code works in all environments</li>
            <li><strong>Use Feature Flags:</strong> For toggling features instead of environment checks</li>
            <li><strong>Document Requirements:</strong> Clearly document environment-specific requirements</li>
          </ul>
        </section>

        <!-- Logging Section -->
        <section id="logging" role="article">
          <h1>Logging</h1>
          <span class="badge">logging</span>
          <span class="badge">diagnostics</span>
          <span class="badge">ilogger</span>
          
          <h2>Logging in Blazor</h2>
          <p>
            Blazor uses ASP.NET Core's built-in logging system via the <code>ILogger</code> interface. Logging is essential 
            for diagnostics, debugging, and monitoring application health in production.
          </p>

          <div class="callout">
            <strong>üìù Best Practice:</strong> Use structured logging with log levels appropriately. Log Information for 
            normal operations, Warning for unexpected situations, and Error for exceptions.
          </div>

          <h2>Log Levels</h2>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Level</th>
                <th>Value</th>
                <th>Description</th>
                <th>When to Use</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Trace</strong></td>
                <td>0</td>
                <td>Most detailed logs</td>
                <td>Debugging during development, track program flow</td>
              </tr>
              <tr>
                <td><strong>Debug</strong></td>
                <td>1</td>
                <td>Debugging information</td>
                <td>Development debugging, variable values</td>
              </tr>
              <tr>
                <td><strong>Information</strong></td>
                <td>2</td>
                <td>Normal operation logs</td>
                <td>Track general application flow</td>
              </tr>
              <tr>
                <td><strong>Warning</strong></td>
                <td>3</td>
                <td>Unexpected but handled</td>
                <td>Deprecated APIs, configuration issues</td>
              </tr>
              <tr>
                <td><strong>Error</strong></td>
                <td>4</td>
                <td>Errors and exceptions</td>
                <td>Operation failures, exceptions</td>
              </tr>
              <tr>
                <td><strong>Critical</strong></td>
                <td>5</td>
                <td>Critical failures</td>
                <td>Application crashes, data loss</td>
              </tr>
              <tr>
                <td><strong>None</strong></td>
                <td>6</td>
                <td>Disable logging</td>
                <td>Turn off logging for a category</td>
              </tr>
            </tbody>
          </table>

          <h2>Using ILogger in Components</h2>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/products"
@inject ILogger<Products> Logger
@inject IProductService ProductService

<h3>Products</h3>

@if (products == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <div class="row">
        @foreach (var product in products)
        {
            <div class="col-md-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">@product.Name</h5>
                        <p class="card-text">@product.Price.ToString("C")</p>
                    </div>
                </div>
            </div>
        }
    </div>
}

@code {
    private List<Product>? products;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            Logger.LogInformation("Loading products at {Time}", DateTime.UtcNow);
            
            products = await ProductService.GetProductsAsync();
            
            Logger.LogInformation(
                "Successfully loaded {Count} products", 
                products.Count);
        }
        catch (HttpRequestException ex)
        {
            Logger.LogError(
                ex, 
                "Failed to load products from API: {Message}", 
                ex.Message);
        }
        catch (Exception ex)
        {
            Logger.LogCritical(
                ex, 
                "Unexpected error loading products");
        }
    }

    private async Task DeleteProduct(int productId)
    {
        Logger.LogWarning(
            "User attempting to delete product {ProductId}", 
            productId);
        
        try
        {
            await ProductService.DeleteProductAsync(productId);
            Logger.LogInformation(
                "Successfully deleted product {ProductId}", 
                productId);
        }
        catch (Exception ex)
        {
            Logger.LogError(
                ex, 
                "Failed to delete product {ProductId}", 
                productId);
        }
    }
}</code></pre>

          <h2>Using ILogger in Services</h2>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">public class ProductService : IProductService
{
    private readonly HttpClient _httpClient;
    private readonly ILogger<ProductService> _logger;

    public ProductService(
        HttpClient httpClient,
        ILogger<ProductService> logger)
    {
        _httpClient = httpClient;
        _logger = logger;
    }

    public async Task<List<Product>> GetProductsAsync()
    {
        _logger.LogDebug("GetProductsAsync called");
        
        try
        {
            var products = await _httpClient
                .GetFromJsonAsync<List<Product>>("api/products");
                
            _logger.LogInformation(
                "Retrieved {Count} products from API", 
                products?.Count ?? 0);
                
            return products ?? new List<Product>();
        }
        catch (HttpRequestException ex)
        {
            _logger.LogError(
                ex, 
                "HTTP error retrieving products: {StatusCode}", 
                ex.StatusCode);
            throw;
        }
    }

    public async Task<Product?> GetProductByIdAsync(int id)
    {
        using (_logger.BeginScope("GetProductById {ProductId}", id))
        {
            _logger.LogInformation("Fetching product details");
            
            var product = await _httpClient
                .GetFromJsonAsync<Product>($"api/products/{id}");
                
            if (product == null)
            {
                _logger.LogWarning("Product {ProductId} not found", id);
            }
            
            return product;
        }
    }
}</code></pre>

          <h2>Configuring Logging</h2>
          <h3>appsettings.json</h3>
          <pre class="syntax-highlighted" data-language="JSON"><code class="language-json">{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.AspNetCore.Components": "Information",
      "MyApp.Services": "Debug"
    }
  }
}</code></pre>

          <h3>Program.cs Configuration</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Program.cs
var builder = WebApplication.CreateBuilder(args);

// Clear default providers and add custom ones
builder.Logging.ClearProviders();
builder.Logging.AddConsole();
builder.Logging.AddDebug();
builder.Logging.AddEventSourceLogger();

// Add Application Insights in production
if (!builder.Environment.IsDevelopment())
{
    builder.Logging.AddApplicationInsights(
        configureTelemetryConfiguration: (config) =>
        {
            config.ConnectionString = builder.Configuration["ApplicationInsights:ConnectionString"];
        },
        configureApplicationInsightsLoggerOptions: (options) => { });
}

// Set minimum log level
builder.Logging.SetMinimumLevel(LogLevel.Trace);

// Filter specific categories
builder.Logging.AddFilter("Microsoft.AspNetCore.SignalR", LogLevel.Debug);
builder.Logging.AddFilter("Microsoft.AspNetCore.Http.Connections", LogLevel.Debug);

var app = builder.Build();

// Log application startup
app.Logger.LogInformation(
    "Application started. Environment: {Environment}",
    app.Environment.EnvironmentName);

app.Run();</code></pre>

          <h2>Structured Logging</h2>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Use structured logging with named parameters
Logger.LogInformation(
    "User {UserId} purchased {ProductName} for {Price} at {PurchaseTime}",
    userId,
    productName,
    price,
    DateTime.UtcNow);

// Avoid string interpolation (loses structure)
// DON'T DO THIS:
Logger.LogInformation($"User {userId} purchased {productName}");

// Use EventId for categorization
private static readonly EventId ProductLoadedEvent = new(1001, "ProductLoaded");
private static readonly EventId ProductDeletedEvent = new(1002, "ProductDeleted");

Logger.LogInformation(
    ProductLoadedEvent,
    "Product {ProductId} loaded successfully",
    productId);</code></pre>

          <h2>Log Scopes</h2>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">public async Task ProcessOrderAsync(int orderId, string userId)
{
    // Create a scope to add context to all logs in this method
    using (_logger.BeginScope(
        "Processing order {OrderId} for user {UserId}", 
        orderId, 
        userId))
    {
        _logger.LogInformation("Starting order processing");
        
        try
        {
            await ValidateOrderAsync(orderId);
            _logger.LogInformation("Order validated");
            
            await ChargePaymentAsync(orderId);
            _logger.LogInformation("Payment charged");
            
            await ShipOrderAsync(orderId);
            _logger.LogInformation("Order shipped");
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "Order processing failed");
            throw;
        }
    }
    // All logs within the scope automatically include OrderId and UserId
}</code></pre>

          <h2>Logging Providers</h2>
          <div class="row g-3">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-blue">
                <div class="card-body">
                  <h3>üñ•Ô∏è Console Provider</h3>
                  <p>Logs to console output (stdout/stderr)</p>
                  <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">builder.Logging.AddConsole();</code></pre>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-green">
                <div class="card-body">
                  <h3>üêõ Debug Provider</h3>
                  <p>Logs to debug output window</p>
                  <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">builder.Logging.AddDebug();</code></pre>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-purple">
                <div class="card-body">
                  <h3>üìä Application Insights</h3>
                  <p>Azure monitoring and analytics</p>
                  <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">builder.Logging
    .AddApplicationInsights();</code></pre>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-teal">
                <div class="card-body">
                  <h3>üìÅ File Provider (Serilog)</h3>
                  <p>Log to files with Serilog</p>
                  <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">builder.Host.UseSerilog(
    (ctx, config) => config
        .ReadFrom.Configuration(ctx.Configuration));</code></pre>
                </div>
              </div>
            </div>
          </div>

          <h2>Serilog Integration</h2>
          <pre class="syntax-highlighted" data-language="bash"><code class="language-bash"># Install Serilog packages
dotnet add package Serilog.AspNetCore
dotnet add package Serilog.Sinks.File
dotnet add package Serilog.Sinks.Console</code></pre>

          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Program.cs with Serilog
using Serilog;

var builder = WebApplication.CreateBuilder(args);

// Configure Serilog
Log.Logger = new LoggerConfiguration()
    .ReadFrom.Configuration(builder.Configuration)
    .Enrich.FromLogContext()
    .WriteTo.Console()
    .WriteTo.File(
        "logs/myapp-.txt",
        rollingInterval: RollingInterval.Day,
        retainedFileCountLimit: 30)
    .CreateLogger();

builder.Host.UseSerilog();

try
{
    Log.Information("Starting web application");
    
    var app = builder.Build();
    
    app.UseSerilogRequestLogging();
    
    app.Run();
}
catch (Exception ex)
{
    Log.Fatal(ex, "Application terminated unexpectedly");
}
finally
{
    Log.CloseAndFlush();
}</code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Use Structured Logging:</strong> Always use named parameters, not string interpolation</li>
            <li><strong>Appropriate Log Levels:</strong> Use Information for normal flow, Warning for unexpected, Error for exceptions</li>
            <li><strong>Include Context:</strong> Use scopes to add contextual information</li>
            <li><strong>Don't Log Sensitive Data:</strong> Never log passwords, tokens, or personal information</li>
            <li><strong>Use EventIds:</strong> Categorize logs with EventIds for easier filtering</li>
            <li><strong>Configure Per Environment:</strong> Verbose logging in dev, minimal in production</li>
            <li><strong>Monitor Performance:</strong> Excessive logging can impact performance</li>
            <li><strong>Use Application Insights:</strong> For production monitoring and alerting</li>
          </ul>
        </section>

        <!-- Error Handling Section -->
        <section id="error-handling" role="article">
          <h1>Error Handling</h1>
          <span class="badge">error-handling</span>
          <span class="badge">exceptions</span>
          <span class="badge">error-boundary</span>
          
          <h2>Error Handling in Blazor</h2>
          <p>
            Proper error handling is essential for building robust Blazor applications. Blazor provides multiple mechanisms 
            for handling errors including error boundaries, global exception handling, and custom error pages.
          </p>

          <div class="callout">
            <strong>‚ö†Ô∏è Production Tip:</strong> Always use custom error pages in production and log errors to a 
            monitoring service like Application Insights. Never expose detailed error information to end users.
          </div>

          <h2>ErrorBoundary Component</h2>
          <p>
            The <code>ErrorBoundary</code> component catches unhandled exceptions in child components and displays a 
            fallback UI instead of crashing the entire application.
          </p>

          <h3>Basic ErrorBoundary Usage</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* App.razor or MainLayout.razor *@
<ErrorBoundary>
    <ChildContent>
        @Body
    </ChildContent>
    <ErrorContent Context="exception">
        <div class="alert alert-danger" role="alert">
            <h4 class="alert-heading">An error occurred!</h4>
            <p>@exception.Message</p>
        </div>
    </ErrorContent>
</ErrorBoundary></code></pre>

          <h3>Custom ErrorBoundary with Logging</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* CustomErrorBoundary.razor *@
@inject ILogger<CustomErrorBoundary> Logger

<ErrorBoundary @ref="errorBoundary">
    <ChildContent>
        @ChildContent
    </ChildContent>
    <ErrorContent Context="exception">
        <div class="error-container">
            <div class="alert alert-danger">
                <h4>üö® Something went wrong</h4>
                @if (showDetails)
                {
                    <details>
                        <summary>Error Details</summary>
                        <p><strong>Message:</strong> @exception.Message</p>
                        <p><strong>Type:</strong> @exception.GetType().Name</p>
                        <pre>@exception.StackTrace</pre>
                    </details>
                }
                else
                {
                    <p>We're sorry, but something unexpected happened. Our team has been notified.</p>
                }
                <button class="btn btn-primary mt-2" @onclick="Recover">
                    Try Again
                </button>
            </div>
        </div>
    </ErrorContent>
</ErrorBoundary>

@code {
    private ErrorBoundary? errorBoundary;
    private bool showDetails = false;

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    [Parameter]
    public bool ShowDetails { get; set; }

    protected override void OnParametersSet()
    {
        showDetails = ShowDetails;
    }

    protected override void OnInitialized()
    {
        if (errorBoundary != null)
        {
            errorBoundary.Recover();
        }
    }

    private void Recover()
    {
        Logger.LogInformation("User attempting to recover from error");
        errorBoundary?.Recover();
    }
}</code></pre>

          <h3>Using Custom ErrorBoundary</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* In a page or component *@
<CustomErrorBoundary ShowDetails="@isDevMode">
    <ProductList />
    <ShoppingCart />
</CustomErrorBoundary>

@code {
    [Inject]
    private IWebHostEnvironment Environment { get; set; } = default!;

    private bool isDevMode => Environment.IsDevelopment();
}</code></pre>

          <h2>Global Exception Handler</h2>
          <h3>Program.cs Configuration</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Program.cs
var builder = WebApplication.CreateBuilder(args);

var app = builder.Build();

// Configure exception handling middleware
if (app.Environment.IsDevelopment())
{
    app.UseDeveloperExceptionPage();
    app.UseWebAssemblyDebugging();
}
else
{
    app.UseExceptionHandler("/Error");
    app.UseHsts();
}

app.UseHttpsRedirection();
app.UseStaticFiles();
app.UseAntiforgery();

app.MapRazorComponents<App>()
    .AddInteractiveServerRenderMode();

app.Run();</code></pre>

          <h2>Custom Error Page</h2>
          <h3>Error.razor</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/Error"
@using System.Diagnostics
@inject ILogger<Error> Logger

<PageTitle>Error</PageTitle>

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card border-danger">
                <div class="card-header bg-danger text-white">
                    <h1 class="h4 mb-0">üö® An Error Occurred</h1>
                </div>
                <div class="card-body">
                    @if (showDetails && Activity.Current != null)
                    {
                        <p>
                            <strong>Request ID:</strong> 
                            <code>@Activity.Current.Id</code>
                        </p>
                    }
                    
                    <p class="lead">
                        We apologize for the inconvenience. An unexpected error has occurred 
                        while processing your request.
                    </p>
                    
                    <p>
                        If the problem persists, please contact support with the Request ID above.
                    </p>
                    
                    <div class="mt-4">
                        <a href="/" class="btn btn-primary">Return to Home</a>
                        <button class="btn btn-secondary" @onclick="GoBack">Go Back</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    [CascadingParameter]
    private HttpContext? HttpContext { get; set; }

    [Inject]
    private NavigationManager Navigation { get; set; } = default!;

    [Inject]
    private IWebHostEnvironment Environment { get; set; } = default!;

    private bool showDetails => Environment.IsDevelopment();

    protected override void OnInitialized()
    {
        var exception = HttpContext?.Features.Get<IExceptionHandlerFeature>()?.Error;
        
        if (exception != null)
        {
            Logger.LogError(
                exception,
                "Unhandled exception occurred. Request ID: {RequestId}",
                Activity.Current?.Id ?? HttpContext?.TraceIdentifier);
        }
    }

    private void GoBack()
    {
        Navigation.NavigateTo("/");
    }
}</code></pre>

          <h2>Try-Catch in Components</h2>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/safe-data-load"
@inject IProductService ProductService
@inject ILogger<SafeDataLoad> Logger

<h3>Products</h3>

@if (isLoading)
{
    <p><em>Loading...</em></p>
}
else if (hasError)
{
    <div class="alert alert-warning">
        <h4>Unable to load products</h4>
        <p>@errorMessage</p>
        <button class="btn btn-primary" @onclick="LoadProducts">Retry</button>
    </div>
}
else if (products != null)
{
    <ul>
        @foreach (var product in products)
        {
            <li>@product.Name - @product.Price.ToString("C")</li>
        }
    </ul>
}

@code {
    private List<Product>? products;
    private bool isLoading = true;
    private bool hasError = false;
    private string errorMessage = string.Empty;

    protected override async Task OnInitializedAsync()
    {
        await LoadProducts();
    }

    private async Task LoadProducts()
    {
        isLoading = true;
        hasError = false;
        errorMessage = string.Empty;

        try
        {
            products = await ProductService.GetProductsAsync();
            Logger.LogInformation("Successfully loaded {Count} products", products.Count);
        }
        catch (HttpRequestException ex)
        {
            hasError = true;
            errorMessage = "Unable to connect to the server. Please check your connection.";
            Logger.LogError(ex, "HTTP error loading products");
        }
        catch (TimeoutException ex)
        {
            hasError = true;
            errorMessage = "The request took too long. Please try again.";
            Logger.LogError(ex, "Timeout loading products");
        }
        catch (Exception ex)
        {
            hasError = true;
            errorMessage = "An unexpected error occurred. Please try again later.";
            Logger.LogError(ex, "Unexpected error loading products");
        }
        finally
        {
            isLoading = false;
        }
    }
}</code></pre>

          <h2>Service-Level Error Handling</h2>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">public class ProductService : IProductService
{
    private readonly HttpClient _httpClient;
    private readonly ILogger<ProductService> _logger;

    public ProductService(HttpClient httpClient, ILogger<ProductService> logger)
    {
        _httpClient = httpClient;
        _logger = logger;
    }

    public async Task<List<Product>> GetProductsAsync()
    {
        try
        {
            var response = await _httpClient.GetAsync("api/products");
            
            response.EnsureSuccessStatusCode();
            
            var products = await response.Content
                .ReadFromJsonAsync<List<Product>>();
                
            return products ?? new List<Product>();
        }
        catch (HttpRequestException ex) when (ex.StatusCode == System.Net.HttpStatusCode.NotFound)
        {
            _logger.LogWarning("Products endpoint not found");
            return new List<Product>();
        }
        catch (HttpRequestException ex) when (ex.StatusCode == System.Net.HttpStatusCode.Unauthorized)
        {
            _logger.LogError("Unauthorized access to products endpoint");
            throw new UnauthorizedAccessException("You don't have permission to view products", ex);
        }
        catch (HttpRequestException ex)
        {
            _logger.LogError(ex, "HTTP error retrieving products: {StatusCode}", ex.StatusCode);
            throw;
        }
        catch (TaskCanceledException ex)
        {
            _logger.LogError(ex, "Request timeout retrieving products");
            throw new TimeoutException("The request took too long to complete", ex);
        }
    }
}</code></pre>

          <h2>Application Insights Integration</h2>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Program.cs - Add Application Insights
builder.Services.AddApplicationInsightsTelemetry(
    builder.Configuration["ApplicationInsights:ConnectionString"]);

// Custom exception tracking
public class TelemetryService
{
    private readonly TelemetryClient _telemetryClient;

    public TelemetryService(TelemetryClient telemetryClient)
    {
        _telemetryClient = telemetryClient;
    }

    public void TrackException(Exception exception, Dictionary<string, string>? properties = null)
    {
        _telemetryClient.TrackException(
            exception,
            properties ?? new Dictionary<string, string>());
    }

    public void TrackEvent(string eventName, Dictionary<string, string>? properties = null)
    {
        _telemetryClient.TrackEvent(eventName, properties);
    }
}</code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Use ErrorBoundary:</strong> Wrap sections of your app to prevent total failures</li>
            <li><strong>Log All Exceptions:</strong> Always log exceptions with context for debugging</li>
            <li><strong>User-Friendly Messages:</strong> Show friendly messages to users, not stack traces</li>
            <li><strong>Graceful Degradation:</strong> Provide fallback UI when errors occur</li>
            <li><strong>Retry Logic:</strong> Allow users to retry failed operations</li>
            <li><strong>Monitor Production:</strong> Use Application Insights or similar for error tracking</li>
            <li><strong>Custom Error Pages:</strong> Create branded error pages for better UX</li>
            <li><strong>Developer Exception Page:</strong> Use only in development, never in production</li>
          </ul>
        </section>

        <!-- Static Files Section -->
        <section id="static-files" role="article">
          <h1>Static Files</h1>
          <span class="badge">static-files</span>
          <span class="badge">wwwroot</span>
          <span class="badge">css</span>
          <span class="badge">javascript</span>
          
          <h2>Static Files in Blazor</h2>
          <p>
            Blazor applications serve static files (CSS, JavaScript, images, fonts, etc.) from the <code>wwwroot</code> folder. 
            These files are publicly accessible and served directly by the web server without going through the Blazor pipeline.
          </p>

          <div class="callout">
            <strong>üìù Note:</strong> The wwwroot folder is the web root directory. Any file placed here is accessible 
            via its path relative to the root (e.g., wwwroot/css/app.css is accessible at /css/app.css).
          </div>

          <h2>wwwroot Folder Structure</h2>
          <pre class="syntax-highlighted" data-language="Plain"><code>wwwroot/
‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îú‚îÄ‚îÄ app.css                 # Main application styles
‚îÇ   ‚îú‚îÄ‚îÄ bootstrap/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bootstrap.min.css
‚îÇ   ‚îî‚îÄ‚îÄ open-iconic/          # Icon fonts
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ app.js                 # Custom JavaScript
‚îÇ   ‚îî‚îÄ‚îÄ interop.js            # JS interop functions
‚îú‚îÄ‚îÄ images/
‚îÇ   ‚îú‚îÄ‚îÄ logo.png
‚îÇ   ‚îî‚îÄ‚îÄ background.jpg
‚îú‚îÄ‚îÄ fonts/
‚îÇ   ‚îî‚îÄ‚îÄ custom-font.woff2
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ sample.json           # Static JSON data
‚îú‚îÄ‚îÄ favicon.ico
‚îî‚îÄ‚îÄ index.html                 # Entry point (Blazor WebAssembly)</code></pre>

          <h2>Configuring Static File Middleware</h2>
          <h3>Program.cs</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Program.cs
var builder = WebApplication.CreateBuilder(args);

var app = builder.Build();

// Enable static file serving (automatically configured in Blazor templates)
app.UseStaticFiles();

// Configure static file options
app.UseStaticFiles(new StaticFileOptions
{
    OnPrepareResponse = ctx =>
    {
        // Set cache headers for static files
        ctx.Context.Response.Headers.Append(
            "Cache-Control", 
            "public, max-age=31536000");
    }
});

// Serve files from additional directories
app.UseStaticFiles(new StaticFileOptions
{
    FileProvider = new PhysicalFileProvider(
        Path.Combine(builder.Environment.ContentRootPath, "CustomFiles")),
    RequestPath = "/custom"
});

app.UseAntiforgery();

app.MapRazorComponents<App>()
    .AddInteractiveServerRenderMode();

app.Run();</code></pre>

          <h2>Referencing Static Files</h2>
          <h3>In HTML/Razor Components</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* CSS *@
<link href="css/app.css" rel="stylesheet" />
<link href="css/custom-styles.css" rel="stylesheet" />

@* JavaScript *@
<script src="js/app.js"></script>

@* Images *@
<img src="images/logo.png" alt="Logo" />
<img src="images/products/product-1.jpg" alt="Product" />

@* Background image in CSS *@
<div style="background-image: url('/images/background.jpg')">
    Content
</div>

@* Fonts in CSS *@
<style>
    @font-face {
        font-family: 'CustomFont';
        src: url('/fonts/custom-font.woff2') format('woff2');
    }
</style></code></pre>

          <h3>In Code</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/static-content"
@inject HttpClient Http

<h3>Loading Static JSON</h3>

@if (data != null)
{
    <pre>@data</pre>
}

@code {
    private string? data;

    protected override async Task OnInitializedAsync()
    {
        // Load static JSON file
        data = await Http.GetStringAsync("data/sample.json");
    }
}</code></pre>

          <h2>CSS Isolation</h2>
          <p>
            Blazor supports CSS isolation, allowing you to scope CSS styles to individual components. 
            Create a .razor.css file alongside your component.
          </p>

          <h3>Component with Isolated CSS</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* ProductCard.razor *@
<div class="product-card">
    <img src="@ImageUrl" alt="@ProductName" />
    <h3 class="title">@ProductName</h3>
    <p class="price">@Price.ToString("C")</p>
    <button class="btn-buy">Buy Now</button>
</div>

@code {
    [Parameter] public string ProductName { get; set; } = string.Empty;
    [Parameter] public string ImageUrl { get; set; } = string.Empty;
    [Parameter] public decimal Price { get; set; }
}</code></pre>

          <pre class="syntax-highlighted" data-language="CSS"><code class="language-css">/* ProductCard.razor.css */
.product-card {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 1rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.product-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 4px;
}

.title {
    font-size: 1.25rem;
    font-weight: bold;
    margin: 0.5rem 0;
}

.price {
    color: #28a745;
    font-size: 1.5rem;
    font-weight: bold;
}

.btn-buy {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    cursor: pointer;
}

.btn-buy:hover {
    background-color: #0056b3;
}</code></pre>

          <p>Blazor automatically generates a unique scope identifier and applies it to both the component HTML and CSS.</p>

          <h2>Bundling and Minification</h2>
          <h3>Using BuildBundlerMinifier</h3>
          <pre class="syntax-highlighted" data-language="bash"><code class="language-bash"># Install BuildBundlerMinifier
dotnet add package BuildBundlerMinifier</code></pre>

          <pre class="syntax-highlighted" data-language="JSON"><code class="language-json">// bundleconfig.json
[
  {
    "outputFileName": "wwwroot/css/site.min.css",
    "inputFiles": [
      "wwwroot/css/app.css",
      "wwwroot/css/custom.css"
    ],
    "minify": {
      "enabled": true,
      "adjustRelativePaths": true
    }
  },
  {
    "outputFileName": "wwwroot/js/site.min.js",
    "inputFiles": [
      "wwwroot/js/app.js",
      "wwwroot/js/interop.js"
    ],
    "minify": {
      "enabled": true
    }
  }
]</code></pre>

          <h2>Content Delivery Network (CDN)</h2>
          <pre class="syntax-highlighted" data-language="HTML"><code class="language-html"><!-- Use CDN with fallback -->
<link rel="stylesheet" 
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      integrity="sha384-..."
      crossorigin="anonymous">

<script>
    // Fallback to local if CDN fails
    if (typeof bootstrap === 'undefined') {
        document.write('<link rel="stylesheet" href="/css/bootstrap.min.css">');
    }
</script></code></pre>

          <h2>Serving Static Files from Azure</h2>
          <h3>Azure Blob Storage</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Store images in Azure Blob Storage
public class BlobStorageService
{
    private readonly BlobContainerClient _containerClient;

    public BlobStorageService(string connectionString)
    {
        var blobServiceClient = new BlobServiceClient(connectionString);
        _containerClient = blobServiceClient.GetBlobContainerClient("images");
    }

    public async Task<string> UploadImageAsync(Stream imageStream, string fileName)
    {
        var blobClient = _containerClient.GetBlobClient(fileName);
        await blobClient.UploadAsync(imageStream, overwrite: true);
        return blobClient.Uri.ToString();
    }

    public string GetImageUrl(string fileName)
    {
        var blobClient = _containerClient.GetBlobClient(fileName);
        return blobClient.Uri.ToString();
    }
}</code></pre>

          <h3>Azure CDN</h3>
          <pre class="syntax-highlighted" data-language="HTML"><code class="language-html"><!-- Use Azure CDN for static assets -->
<link href="https://mycdn.azureedge.net/css/app.css" rel="stylesheet" />
<script src="https://mycdn.azureedge.net/js/app.js"></script>
<img src="https://mycdn.azureedge.net/images/logo.png" alt="Logo" /></code></pre>

          <h2>Cache Busting</h2>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Use version query string for cache busting *@
<link href="css/app.css?v=@GetVersion()" rel="stylesheet" />
<script src="js/app.js?v=@GetVersion()"></script>

@code {
    private string GetVersion()
    {
        // Use assembly version or build timestamp
        return typeof(Program).Assembly.GetName().Version?.ToString() ?? "1.0.0";
    }
}</code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Use wwwroot Only:</strong> All static files must be in wwwroot to be publicly accessible</li>
            <li><strong>CSS Isolation:</strong> Use .razor.css files for component-specific styles</li>
            <li><strong>Optimize Images:</strong> Compress and resize images before deployment</li>
            <li><strong>Enable Caching:</strong> Set appropriate cache headers for static files</li>
            <li><strong>Use CDN:</strong> Serve static assets from CDN for better performance</li>
            <li><strong>Minify Assets:</strong> Minify CSS and JS files for production</li>
            <li><strong>Version Assets:</strong> Use versioning or hashing for cache busting</li>
            <li><strong>Lazy Load Images:</strong> Use loading="lazy" attribute for images</li>
          </ul>
        </section>

        <!-- SignalR Integration Section -->
        <section id="signalr" role="article">
          <h1>SignalR Integration</h1>
          <span class="badge">signalr</span>
          <span class="badge">real-time</span>
          <span class="badge">websockets</span>
          <span class="badge">hubs</span>
          
          <h2>SignalR in Blazor</h2>
          <p>
            SignalR enables real-time bidirectional communication between server and client. In Blazor Server, SignalR 
            is automatically used for interactive components. You can also create custom SignalR hubs for chat applications, 
            live dashboards, notifications, and collaborative features.
          </p>

          <div class="callout">
            <strong>‚ö° Real-Time Power:</strong> SignalR automatically chooses the best transport (WebSockets, Server-Sent 
            Events, or Long Polling) based on client and server capabilities.
          </div>

          <h2>SignalR Hub Implementation</h2>
          <h3>Create a Hub</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// ChatHub.cs
using Microsoft.AspNetCore.SignalR;

public class ChatHub : Hub
{
    // Send message to all connected clients
    public async Task SendMessage(string user, string message)
    {
        await Clients.All.SendAsync("ReceiveMessage", user, message);
    }

    // Send message to specific user
    public async Task SendMessageToUser(string userId, string message)
    {
        await Clients.User(userId).SendAsync("ReceiveMessage", "System", message);
    }

    // Send to all except caller
    public async Task SendMessageToOthers(string user, string message)
    {
        await Clients.Others.SendAsync("ReceiveMessage", user, message);
    }

    // Join a group (chat room)
    public async Task JoinRoom(string roomName)
    {
        await Groups.AddToGroupAsync(Context.ConnectionId, roomName);
        await Clients.Group(roomName).SendAsync(
            "ReceiveMessage", 
            "System", 
            $"{Context.ConnectionId} joined {roomName}");
    }

    // Leave a group
    public async Task LeaveRoom(string roomName)
    {
        await Groups.RemoveFromGroupAsync(Context.ConnectionId, roomName);
        await Clients.Group(roomName).SendAsync(
            "ReceiveMessage",
            "System",
            $"{Context.ConnectionId} left {roomName}");
    }

    // Send to specific group
    public async Task SendMessageToRoom(string roomName, string user, string message)
    {
        await Clients.Group(roomName).SendAsync("ReceiveMessage", user, message);
    }

    // Connection lifecycle events
    public override async Task OnConnectedAsync()
    {
        await Clients.All.SendAsync(
            "ReceiveMessage",
            "System",
            $"{Context.ConnectionId} connected");
        await base.OnConnectedAsync();
    }

    public override async Task OnDisconnectedAsync(Exception? exception)
    {
        await Clients.All.SendAsync(
            "ReceiveMessage",
            "System",
            $"{Context.ConnectionId} disconnected");
        await base.OnDisconnectedAsync(exception);
    }
}</code></pre>

          <h3>Register Hub in Program.cs</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Program.cs
var builder = WebApplication.CreateBuilder(args);

// Add SignalR services
builder.Services.AddSignalR(options =>
{
    options.EnableDetailedErrors = builder.Environment.IsDevelopment();
    options.KeepAliveInterval = TimeSpan.FromSeconds(15);
    options.ClientTimeoutInterval = TimeSpan.FromSeconds(30);
    options.MaximumReceiveMessageSize = 128 * 1024; // 128 KB
});

var app = builder.Build();

app.UseRouting();

// Map SignalR hub endpoint
app.MapHub<ChatHub>("/chathub");

app.MapRazorComponents<App>()
    .AddInteractiveServerRenderMode();

app.Run();</code></pre>

          <h2>Using SignalR in Blazor Components</h2>
          <h3>Chat Component</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/chat"
@using Microsoft.AspNetCore.SignalR.Client
@inject NavigationManager Navigation
@implements IAsyncDisposable

<div class="chat-container">
    <h3>Chat Room</h3>

    <div class="messages" style="height: 400px; overflow-y: scroll; border: 1px solid #ddd; padding: 1rem;">
        @foreach (var message in messages)
        {
            <div class="message">
                <strong>@message.User:</strong> @message.Text
                <span class="text-muted">(@message.Time.ToString("HH:mm"))</span>
            </div>
        }
    </div>

    <div class="input-group mt-3">
        <input @bind="userInput" 
               @bind:event="oninput"
               @onkeydown="HandleKeyPress"
               class="form-control" 
               placeholder="Type a message..." 
               disabled="@(!IsConnected)" />
        <button @onclick="Send" 
                class="btn btn-primary" 
                disabled="@(!IsConnected)">
            Send
        </button>
    </div>

    <div class="mt-2">
        <span class="badge @(IsConnected ? "bg-success" : "bg-danger")">
            @(IsConnected ? "Connected" : "Disconnected")
        </span>
    </div>
</div>

@code {
    private HubConnection? hubConnection;
    private List<ChatMessage> messages = new();
    private string? userInput;
    private string? userName;

    public bool IsConnected => 
        hubConnection?.State == HubConnectionState.Connected;

    protected override async Task OnInitializedAsync()
    {
        // Get username (in real app, from authentication)
        userName = $"User{Random.Shared.Next(1000)}";

        // Create hub connection
        hubConnection = new HubConnectionBuilder()
            .WithUrl(Navigation.ToAbsoluteUri("/chathub"))
            .WithAutomaticReconnect()
            .Build();

        // Register message handler
        hubConnection.On<string, string>("ReceiveMessage", (user, message) =>
        {
            messages.Add(new ChatMessage
            {
                User = user,
                Text = message,
                Time = DateTime.Now
            });
            StateHasChanged();
        });

        // Handle reconnection
        hubConnection.Reconnecting += error =>
        {
            messages.Add(new ChatMessage
            {
                User = "System",
                Text = "Reconnecting...",
                Time = DateTime.Now
            });
            StateHasChanged();
            return Task.CompletedTask;
        };

        hubConnection.Reconnected += connectionId =>
        {
            messages.Add(new ChatMessage
            {
                User = "System",
                Text = "Reconnected!",
                Time = DateTime.Now
            });
            StateHasChanged();
            return Task.CompletedTask;
        };

        // Start connection
        await hubConnection.StartAsync();
    }

    private async Task Send()
    {
        if (hubConnection is not null && !string.IsNullOrWhiteSpace(userInput))
        {
            await hubConnection.SendAsync("SendMessage", userName, userInput);
            userInput = string.Empty;
        }
    }

    private async Task HandleKeyPress(KeyboardEventArgs e)
    {
        if (e.Key == "Enter")
        {
            await Send();
        }
    }

    public async ValueTask DisposeAsync()
    {
        if (hubConnection is not null)
        {
            await hubConnection.DisposeAsync();
        }
    }

    private class ChatMessage
    {
        public string User { get; set; } = string.Empty;
        public string Text { get; set; } = string.Empty;
        public DateTime Time { get; set; }
    }
}</code></pre>

          <h2>Streaming with SignalR</h2>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Hub with streaming
public class DataHub : Hub
{
    public async IAsyncEnumerable<int> StreamData(
        int count,
        int delay,
        [EnumeratorCancellation] CancellationToken cancellationToken)
    {
        for (var i = 0; i < count; i++)
        {
            cancellationToken.ThrowIfCancellationRequested();
            yield return i;
            await Task.Delay(delay, cancellationToken);
        }
    }
}</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Component using streaming *@
@code {
    protected override async Task OnInitializedAsync()
    {
        var stream = hubConnection!.StreamAsync<int>(
            "StreamData", 
            10, 
            1000);

        await foreach (var item in stream)
        {
            messages.Add($"Received: {item}");
            StateHasChanged();
        }
    }
}</code></pre>

          <h2>Azure SignalR Service</h2>
          <p>For production scalability, use Azure SignalR Service:</p>
          
          <pre class="syntax-highlighted" data-language="bash"><code class="language-bash"># Install Azure SignalR package
dotnet add package Microsoft.Azure.SignalR</code></pre>

          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Program.cs - Configure Azure SignalR Service
builder.Services.AddSignalR()
    .AddAzureSignalR(options =>
    {
        options.ConnectionString = builder.Configuration["Azure:SignalR:ConnectionString"];
    });</code></pre>

          <h2>SignalR with Authentication</h2>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Hub with authorization
[Authorize]
public class SecureChatHub : Hub
{
    public async Task SendMessage(string message)
    {
        var user = Context.User?.Identity?.Name ?? "Anonymous";
        await Clients.All.SendAsync("ReceiveMessage", user, message);
    }

    // Only admins can broadcast
    [Authorize(Roles = "Admin")]
    public async Task BroadcastAnnouncement(string message)
    {
        await Clients.All.SendAsync("ReceiveAnnouncement", message);
    }
}</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Component with authenticated connection *@
@code {
    protected override async Task OnInitializedAsync()
    {
        hubConnection = new HubConnectionBuilder()
            .WithUrl(Navigation.ToAbsoluteUri("/securechathub"), options =>
            {
                options.AccessTokenProvider = async () =>
                {
                    // Get access token from authentication service
                    var accessToken = await GetAccessTokenAsync();
                    return accessToken;
                };
            })
            .WithAutomaticReconnect()
            .Build();

        await hubConnection.StartAsync();
    }
}</code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Use Automatic Reconnection:</strong> Call WithAutomaticReconnect() for resilient connections</li>
            <li><strong>Handle Connection State:</strong> Check IsConnected before sending messages</li>
            <li><strong>Dispose Connections:</strong> Implement IAsyncDisposable to clean up hub connections</li>
            <li><strong>Limit Message Size:</strong> Configure MaximumReceiveMessageSize appropriately</li>
            <li><strong>Use Groups:</strong> Organize clients into groups for targeted messaging</li>
            <li><strong>Scale with Azure:</strong> Use Azure SignalR Service for production workloads</li>
            <li><strong>Secure Hubs:</strong> Use [Authorize] attribute to protect sensitive hubs</li>
            <li><strong>Monitor Performance:</strong> Track connection counts and message rates</li>
          </ul>
        </section>

        <!-- Components Section -->
        <section id="components" role="article">
          <h1>üß© Components</h1>
          <span class="badge">components</span>
          <span class="badge">razor</span>
          <span class="badge">parameters</span>
          
          <h2>Blazor Components Overview</h2>
          <p>
            Components are the fundamental building blocks of Blazor applications. A component is a self-contained piece 
            of UI with its own rendering logic and state. Components can be nested, reused, and composed to build complex 
            user interfaces.
          </p>

          <div class="callout">
            <strong>üí° Key Concept:</strong> Blazor components are .NET classes with a .razor file extension that combine 
            HTML markup with C# code using Razor syntax.
          </div>

          <h2>Component Structure</h2>
          <h3>Basic Component</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* SimpleCounter.razor *@
<div class="counter">
    <h3>Counter</h3>
    <p>Current count: @currentCount</p>
    <button class="btn btn-primary" @onclick="IncrementCount">Click me</button>
</div>

@code {
    private int currentCount = 0;

    private void IncrementCount()
    {
        currentCount++;
    }
}</code></pre>

          <h3>Component with Code-Behind</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* ProductCard.razor *@
@inherits ProductCardBase

<div class="card">
    <img src="@Product.ImageUrl" class="card-img-top" alt="@Product.Name" />
    <div class="card-body">
        <h5 class="card-title">@Product.Name</h5>
        <p class="card-text">@Product.Description</p>
        <p class="text-primary fw-bold">@Product.Price.ToString("C")</p>
        <button class="btn btn-success" @onclick="AddToCart">Add to Cart</button>
    </div>
</div></code></pre>

          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// ProductCardBase.cs
using Microsoft.AspNetCore.Components;

public class ProductCardBase : ComponentBase
{
    [Parameter]
    public Product Product { get; set; } = new();

    [Parameter]
    public EventCallback<Product> OnAddToCart { get; set; }

    [Inject]
    protected ILogger<ProductCardBase> Logger { get; set; } = default!;

    protected async Task AddToCart()
    {
        Logger.LogInformation("Adding product {ProductId} to cart", Product.Id);
        await OnAddToCart.InvokeAsync(Product);
    }
}</code></pre>

          <h2>Component Parameters</h2>
          <p>Parameters allow parent components to pass data to child components.</p>

          <h3>Simple Parameters</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* GreetingComponent.razor *@
<div class="greeting">
    <h3>Hello, @Name!</h3>
    <p>You are @Age years old.</p>
</div>

@code {
    [Parameter]
    public string Name { get; set; } = "Guest";

    [Parameter]
    public int Age { get; set; }
}</code></pre>

          <h3>Using the Component</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/home"

<GreetingComponent Name="John" Age="30" />
<GreetingComponent Name="Jane" Age="25" /></code></pre>

          <h3>Complex Parameters</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* UserProfile.razor *@
<div class="profile">
    <h3>@User.FullName</h3>
    <p>Email: @User.Email</p>
    <p>Role: @User.Role</p>
    
    @if (ShowDetails)
    {
        <div class="details">
            <p>Phone: @User.Phone</p>
            <p>Address: @User.Address</p>
        </div>
    }
</div>

@code {
    [Parameter]
    public User User { get; set; } = new();

    [Parameter]
    public bool ShowDetails { get; set; }
}</code></pre>

          <h3>Required Parameters (.NET 7+)</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@code {
    [Parameter]
    [EditorRequired] // Generates warning if not provided
    public string Title { get; set; } = string.Empty;

    [Parameter, EditorRequired]
    public int Id { get; set; }
}</code></pre>

          <h2>Event Handling</h2>
          <h3>Built-in Events</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Event examples *@
<button @onclick="HandleClick">Click Me</button>
<input @onchange="HandleChange" />
<input @oninput="HandleInput" />
<form @onsubmit="HandleSubmit">
    <button type="submit">Submit</button>
</form>

<div @onmouseover="HandleMouseOver" 
     @onmouseout="HandleMouseOut">
    Hover over me
</div>

@code {
    private void HandleClick()
    {
        Console.WriteLine("Button clicked");
    }

    private void HandleChange(ChangeEventArgs e)
    {
        var value = e.Value?.ToString();
        Console.WriteLine($"Value changed to: {value}");
    }

    private void HandleInput(ChangeEventArgs e)
    {
        var value = e.Value?.ToString();
        Console.WriteLine($"Input: {value}");
    }

    private void HandleSubmit()
    {
        Console.WriteLine("Form submitted");
    }

    private void HandleMouseOver()
    {
        Console.WriteLine("Mouse over");
    }

    private void HandleMouseOut()
    {
        Console.WriteLine("Mouse out");
    }
}</code></pre>

          <h3>EventCallback Parameters</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* ChildComponent.razor *@
<button class="btn btn-primary" @onclick="NotifyParent">
    Notify Parent
</button>

@code {
    [Parameter]
    public EventCallback OnClick { get; set; }

    [Parameter]
    public EventCallback<string> OnMessage { get; set; }

    private async Task NotifyParent()
    {
        await OnClick.InvokeAsync();
        await OnMessage.InvokeAsync("Hello from child!");
    }
}</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* ParentComponent.razor *@
<ChildComponent 
    OnClick="HandleClick" 
    OnMessage="HandleMessage" />

<p>@message</p>

@code {
    private string message = string.Empty;

    private void HandleClick()
    {
        message = "Child clicked!";
    }

    private void HandleMessage(string msg)
    {
        message = msg;
    }
}</code></pre>

          <h2>Component Communication</h2>
          <h3>Parent to Child (Parameters)</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Parent passes data down *@
<ChildComponent Title="@parentTitle" Count="@parentCount" /></code></pre>

          <h3>Child to Parent (EventCallback)</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Child notifies parent *@
<button @onclick="() => OnCountChanged.InvokeAsync(count)">
    Update Parent
</button>

@code {
    [Parameter]
    public EventCallback<int> OnCountChanged { get; set; }
    
    private int count = 0;
}</code></pre>

          <h3>Sibling Communication (via Parent)</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Parent.razor *@
<SenderComponent OnDataSent="HandleDataSent" />
<ReceiverComponent Data="@sharedData" />

@code {
    private string sharedData = string.Empty;

    private void HandleDataSent(string data)
    {
        sharedData = data;
    }
}</code></pre>

          <h2>Child Content (RenderFragment)</h2>
          <h3>Basic Child Content</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Card.razor *@
<div class="card">
    <div class="card-body">
        @ChildContent
    </div>
</div>

@code {
    [Parameter]
    public RenderFragment? ChildContent { get; set; }
}</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Using Card component *@
<Card>
    <h3>Card Title</h3>
    <p>This is the card content.</p>
    <button class="btn btn-primary">Action</button>
</Card></code></pre>

          <h3>Multiple RenderFragments</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Dialog.razor *@
<div class="modal">
    <div class="modal-header">
        @Header
    </div>
    <div class="modal-body">
        @Body
    </div>
    <div class="modal-footer">
        @Footer
    </div>
</div>

@code {
    [Parameter]
    public RenderFragment? Header { get; set; }

    [Parameter]
    public RenderFragment? Body { get; set; }

    [Parameter]
    public RenderFragment? Footer { get; set; }
}</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Using Dialog component *@
<Dialog>
    <Header>
        <h3>Confirm Action</h3>
    </Header>
    <Body>
        <p>Are you sure you want to proceed?</p>
    </Body>
    <Footer>
        <button class="btn btn-primary" @onclick="Confirm">Yes</button>
        <button class="btn btn-secondary" @onclick="Cancel">No</button>
    </Footer>
</Dialog></code></pre>

          <h2>Template Components</h2>
          <h3>Generic List Component</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* ListTemplate.razor *@
@typeparam TItem

<div class="list-template">
    @if (Items == null || !Items.Any())
    {
        <p><em>@EmptyMessage</em></p>
    }
    else
    {
        <ul class="list-group">
            @foreach (var item in Items)
            {
                <li class="list-group-item">
                    @ItemTemplate(item)
                </li>
            }
        </ul>
    }
</div>

@code {
    [Parameter]
    public IEnumerable<TItem>? Items { get; set; }

    [Parameter]
    public RenderFragment<TItem>? ItemTemplate { get; set; }

    [Parameter]
    public string EmptyMessage { get; set; } = "No items found.";
}</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Using ListTemplate *@
<ListTemplate Items="@products" EmptyMessage="No products available">
    <ItemTemplate Context="product">
        <div>
            <strong>@product.Name</strong> - @product.Price.ToString("C")
        </div>
    </ItemTemplate>
</ListTemplate>

@code {
    private List<Product> products = new()
    {
        new Product { Name = "Laptop", Price = 999.99m },
        new Product { Name = "Mouse", Price = 29.99m }
    };
}</code></pre>

          <h3>Table Template</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* TableTemplate.razor *@
@typeparam TItem

<table class="table table-striped">
    <thead>
        <tr>@HeaderTemplate</tr>
    </thead>
    <tbody>
        @if (Items != null)
        {
            @foreach (var item in Items)
            {
                <tr>@RowTemplate(item)</tr>
            }
        }
    </tbody>
</table>

@code {
    [Parameter]
    public IEnumerable<TItem>? Items { get; set; }

    [Parameter]
    public RenderFragment? HeaderTemplate { get; set; }

    [Parameter]
    public RenderFragment<TItem>? RowTemplate { get; set; }
}</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Using TableTemplate *@
<TableTemplate Items="@users">
    <HeaderTemplate>
        <th>Name</th>
        <th>Email</th>
        <th>Role</th>
    </HeaderTemplate>
    <RowTemplate Context="user">
        <td>@user.FullName</td>
        <td>@user.Email</td>
        <td>@user.Role</td>
    </RowTemplate>
</TableTemplate></code></pre>

          <h2>Cascading Values</h2>
          <p>Cascading values allow passing data down through the component hierarchy without explicit parameters.</p>

          <h3>Providing Cascading Value</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* App.razor or Layout *@
<CascadingValue Value="@currentTheme">
    <CascadingValue Value="@currentUser">
        @Body
    </CascadingValue>
</CascadingValue>

@code {
    private string currentTheme = "dark";
    private User currentUser = new() { Name = "John Doe" };
}</code></pre>

          <h3>Consuming Cascading Value</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Any descendant component *@
<div class="@theme">
    <p>Welcome, @user.Name!</p>
</div>

@code {
    [CascadingParameter]
    private string theme { get; set; } = "light";

    [CascadingParameter]
    private User user { get; set; } = new();
}</code></pre>

          <h3>Named Cascading Values</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Provider *@
<CascadingValue Value="@theme" Name="AppTheme">
    <CascadingValue Value="@language" Name="AppLanguage">
        @ChildContent
    </CascadingValue>
</CascadingValue>

@code {
    [Parameter]
    public RenderFragment? ChildContent { get; set; }
    
    private string theme = "dark";
    private string language = "en";
}</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Consumer *@
@code {
    [CascadingParameter(Name = "AppTheme")]
    private string Theme { get; set; } = string.Empty;

    [CascadingParameter(Name = "AppLanguage")]
    private string Language { get; set; } = string.Empty;
}</code></pre>

          <h2>Component References</h2>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Parent component *@
<ChildComponent @ref="childComponent" />
<button @onclick="CallChildMethod">Call Child Method</button>

@code {
    private ChildComponent? childComponent;

    private void CallChildMethod()
    {
        childComponent?.PublicMethod();
    }
}</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* ChildComponent.razor *@
<p>Child Component</p>

@code {
    public void PublicMethod()
    {
        Console.WriteLine("Public method called from parent");
    }
}</code></pre>

          <h2>Component Libraries</h2>
          <h3>Creating a Component Library</h3>
          <pre class="syntax-highlighted" data-language="bash"><code class="language-bash"># Create Razor Class Library
dotnet new razorclasslib -n MyComponentLibrary

# Add to solution
dotnet sln add MyComponentLibrary/MyComponentLibrary.csproj

# Reference in Blazor app
dotnet add reference ../MyComponentLibrary/MyComponentLibrary.csproj</code></pre>

          <h3>Library Structure</h3>
          <pre class="syntax-highlighted" data-language="Plain"><code>MyComponentLibrary/
‚îú‚îÄ‚îÄ Components/
‚îÇ   ‚îú‚îÄ‚îÄ Button.razor
‚îÇ   ‚îú‚îÄ‚îÄ Card.razor
‚îÇ   ‚îî‚îÄ‚îÄ Modal.razor
‚îú‚îÄ‚îÄ wwwroot/
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ components.css
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îî‚îÄ‚îÄ components.js
‚îî‚îÄ‚îÄ _Imports.razor</code></pre>

          <h3>Using Library Components</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* _Imports.razor *@
@using MyComponentLibrary.Components

@* In any component *@
<Button Color="primary" @onclick="HandleClick">Click Me</Button>
<Card Title="My Card">
    <p>Card content goes here</p>
</Card></code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Keep Components Small:</strong> Single responsibility - one component, one purpose</li>
            <li><strong>Use Parameters:</strong> Make components reusable with well-defined parameters</li>
            <li><strong>Validate Parameters:</strong> Check parameter values in OnParametersSet or OnInitialized</li>
            <li><strong>Use EventCallback:</strong> Prefer EventCallback over Action/Func for better performance</li>
            <li><strong>Avoid Over-rendering:</strong> Use ShouldRender() to control when components re-render</li>
            <li><strong>Component Isolation:</strong> Keep component-specific CSS in .razor.css files</li>
            <li><strong>Dispose Resources:</strong> Implement IDisposable or IAsyncDisposable when needed</li>
            <li><strong>Use Cascading Values Sparingly:</strong> Too many can make code hard to follow</li>
            <li><strong>Document Public APIs:</strong> Add XML comments to component parameters</li>
            <li><strong>Test Components:</strong> Use bUnit for component unit testing</li>
          </ul>
        </section>

        <!-- Lifecycle & Rendering Section -->
        <section id="lifecycle" role="article">
          <h1>üîÑ Lifecycle & Rendering</h1>
          <span class="badge">lifecycle</span>
          <span class="badge">rendering</span>
          <span class="badge">state</span>
          
          <h2>Component Lifecycle Overview</h2>
          <p>
            Blazor components go through a well-defined lifecycle from initialization to disposal. Understanding these lifecycle methods allows you to control when components render, fetch data, and clean up resources efficiently.
          </p>

          <div class="callout">
            <strong>üí° Key Concept:</strong> Lifecycle methods execute in a specific order. Synchronous methods run before their async counterparts, and certain methods run only once while others may run multiple times.
          </div>

          <h2>Lifecycle Methods</h2>
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-blue">
                <div class="card-body">
                  <h5 class="card-title">Initialization Phase</h5>
                  <p class="card-text">
                    <strong>SetParametersAsync</strong> ‚Üí <strong>OnInitialized</strong> ‚Üí <strong>OnInitializedAsync</strong>
                  </p>
                  <p class="card-text small">Runs once when component is first created.</p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-green">
                <div class="card-body">
                  <h5 class="card-title">Parameter Update Phase</h5>
                  <p class="card-text">
                    <strong>SetParametersAsync</strong> ‚Üí <strong>OnParametersSet</strong> ‚Üí <strong>OnParametersSetAsync</strong>
                  </p>
                  <p class="card-text small">Runs every time parameters change.</p>
                </div>
              </div>
            </div>
          </div>

          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-purple">
                <div class="card-body">
                  <h5 class="card-title">Rendering Phase</h5>
                  <p class="card-text">
                    <strong>BuildRenderTree</strong> ‚Üí <strong>OnAfterRender</strong> ‚Üí <strong>OnAfterRenderAsync</strong>
                  </p>
                  <p class="card-text small">Runs after each render cycle.</p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-red">
                <div class="card-body">
                  <h5 class="card-title">Disposal Phase</h5>
                  <p class="card-text">
                    <strong>Dispose</strong> or <strong>DisposeAsync</strong>
                  </p>
                  <p class="card-text small">Runs once when component is removed.</p>
                </div>
              </div>
            </div>
          </div>

          <h2>Lifecycle Methods Table</h2>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Method</th>
                <th>When Called</th>
                <th>Frequency</th>
                <th>Use Case</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>SetParametersAsync</code></td>
                <td>Before OnInitialized and when parameters change</td>
                <td>Multiple times</td>
                <td>Custom parameter logic, validation</td>
              </tr>
              <tr>
                <td><code>OnInitialized</code></td>
                <td>After component receives initial parameters</td>
                <td>Once</td>
                <td>Initialize component state</td>
              </tr>
              <tr>
                <td><code>OnInitializedAsync</code></td>
                <td>After OnInitialized</td>
                <td>Once</td>
                <td>Async initialization, fetch initial data</td>
              </tr>
              <tr>
                <td><code>OnParametersSet</code></td>
                <td>After parameters are set or changed</td>
                <td>Multiple times</td>
                <td>React to parameter changes</td>
              </tr>
              <tr>
                <td><code>OnParametersSetAsync</code></td>
                <td>After OnParametersSet</td>
                <td>Multiple times</td>
                <td>Async reactions to parameter changes</td>
              </tr>
              <tr>
                <td><code>OnAfterRender</code></td>
                <td>After component renders to DOM</td>
                <td>Multiple times</td>
                <td>DOM manipulation, setup JS interop</td>
              </tr>
              <tr>
                <td><code>OnAfterRenderAsync</code></td>
                <td>After OnAfterRender</td>
                <td>Multiple times</td>
                <td>Async DOM operations, JS interop</td>
              </tr>
              <tr>
                <td><code>Dispose</code></td>
                <td>Before component is removed</td>
                <td>Once</td>
                <td>Clean up unmanaged resources</td>
              </tr>
              <tr>
                <td><code>DisposeAsync</code></td>
                <td>Before component is removed</td>
                <td>Once</td>
                <td>Async cleanup operations</td>
              </tr>
            </tbody>
          </table>

          <h2>OnInitialized & OnInitializedAsync</h2>
          <p>Called once when the component is first initialized. Use for setting up initial state and fetching data.</p>

          <h3>Synchronous Initialization</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/counter"

<h3>Counter</h3>
<p>Current count: @currentCount</p>
<button @onclick="IncrementCount">Increment</button>

@code {
    private int currentCount = 0;

    protected override void OnInitialized()
    {
        // Synchronous initialization
        currentCount = 10;
        Console.WriteLine("Component initialized");
    }

    private void IncrementCount()
    {
        currentCount++;
    }
}</code></pre>

          <h3>Asynchronous Initialization</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/products"
@inject HttpClient Http

<h3>Products</h3>

@if (products == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <ul>
        @foreach (var product in products)
        {
            <li>@product.Name - @product.Price.ToString("C")</li>
        }
    </ul>
}

@code {
    private List<Product>? products;

    protected override async Task OnInitializedAsync()
    {
        // Fetch data on initialization
        products = await Http.GetFromJsonAsync<List<Product>>("api/products");
    }
}</code></pre>

          <h3>Combining Both Methods</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@code {
    protected override void OnInitialized()
    {
        // Runs first - synchronous setup
        Console.WriteLine("Sync init");
    }

    protected override async Task OnInitializedAsync()
    {
        // Runs second - async operations
        Console.WriteLine("Async init start");
        await Task.Delay(1000);
        Console.WriteLine("Async init complete");
    }
}</code></pre>

          <h2>OnParametersSet & OnParametersSetAsync</h2>
          <p>Called whenever parameters are set, including the first time. Runs after OnInitialized/OnInitializedAsync on initial render, then runs each time parameters change.</p>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* ChildComponent.razor *@
<div class="alert alert-info">
    <p>Product ID: @ProductId</p>
    <p>Times parameters set: @parameterSetCount</p>
    @if (product != null)
    {
        <p>Product: @product.Name</p>
    }
</div>

@code {
    [Parameter]
    public int ProductId { get; set; }

    [Inject]
    private IProductService ProductService { get; set; } = default!;

    private Product? product;
    private int parameterSetCount = 0;
    private int? previousProductId;

    protected override void OnParametersSet()
    {
        parameterSetCount++;
        Console.WriteLine($"OnParametersSet called: {parameterSetCount} times");
    }

    protected override async Task OnParametersSetAsync()
    {
        // Only fetch if ProductId actually changed
        if (ProductId != previousProductId)
        {
            Console.WriteLine($"ProductId changed from {previousProductId} to {ProductId}");
            product = await ProductService.GetProductAsync(ProductId);
            previousProductId = ProductId;
        }
    }
}</code></pre>

          <h3>Parent Component</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/product-viewer"

<h3>Product Viewer</h3>

<button @onclick="() => selectedProductId = 1">Product 1</button>
<button @onclick="() => selectedProductId = 2">Product 2</button>
<button @onclick="() => selectedProductId = 3">Product 3</button>

<ChildComponent ProductId="@selectedProductId" />

@code {
    private int selectedProductId = 1;
}</code></pre>

          <h2>OnAfterRender & OnAfterRenderAsync</h2>
          <p>Called after the component has rendered. Use for DOM manipulation and JavaScript interop. The <code>firstRender</code> parameter indicates if this is the first render.</p>

          <div class="callout">
            <strong>‚ö†Ô∏è Warning:</strong> Don't call StateHasChanged in OnAfterRender unless you check firstRender, or you'll create an infinite loop!
          </div>

          <h3>Basic Usage</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@inject IJSRuntime JS

<input @ref="inputElement" />

@code {
    private ElementReference inputElement;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            // Safe to interact with DOM and JS after first render
            await JS.InvokeVoidAsync("focusElement", inputElement);
        }
    }
}</code></pre>

          <h3>Setting Up JavaScript Libraries</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/chart"
@inject IJSRuntime JS
@implements IAsyncDisposable

<div @ref="chartContainer" style="width: 600px; height: 400px;"></div>

@code {
    private ElementReference chartContainer;
    private IJSObjectReference? chartModule;
    private IJSObjectReference? chartInstance;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            // Import JavaScript module
            chartModule = await JS.InvokeAsync<IJSObjectReference>(
                "import", "./js/chart.js");

            // Initialize chart
            chartInstance = await chartModule.InvokeAsync<IJSObjectReference>(
                "createChart", chartContainer, GetChartData());
        }
    }

    private object GetChartData()
    {
        return new
        {
            labels = new[] { "Jan", "Feb", "Mar", "Apr", "May" },
            values = new[] { 10, 20, 15, 25, 30 }
        };
    }

    public async ValueTask DisposeAsync()
    {
        if (chartInstance != null)
        {
            await chartInstance.InvokeVoidAsync("destroy");
            await chartInstance.DisposeAsync();
        }

        if (chartModule != null)
        {
            await chartModule.DisposeAsync();
        }
    }
}</code></pre>

          <h2>StateHasChanged</h2>
          <p>
            Manually triggers a re-render of the component. Blazor automatically calls this after event handlers, but you may need to call it manually in certain scenarios.
          </p>

          <h3>Background Task Updates</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/live-updates"
@implements IDisposable

<h3>Live Counter: @counter</h3>
<button @onclick="Start">Start</button>
<button @onclick="Stop">Stop</button>

@code {
    private int counter = 0;
    private Timer? timer;

    private void Start()
    {
        timer = new Timer(async _ =>
        {
            counter++;
            
            // Must use InvokeAsync to marshal back to UI thread
            await InvokeAsync(StateHasChanged);
        }, null, 0, 1000);
    }

    private void Stop()
    {
        timer?.Dispose();
        timer = null;
    }

    public void Dispose()
    {
        timer?.Dispose();
    }
}</code></pre>

          <h3>External Event Updates</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/notifications"
@inject NotificationService NotificationService
@implements IDisposable

<h3>Notifications</h3>
<ul>
    @foreach (var notification in notifications)
    {
        <li>@notification</li>
    }
</ul>

@code {
    private List<string> notifications = new();

    protected override void OnInitialized()
    {
        NotificationService.OnNotification += HandleNotification;
    }

    private void HandleNotification(string message)
    {
        notifications.Add(message);
        
        // Must call StateHasChanged because this is triggered externally
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        NotificationService.OnNotification -= HandleNotification;
    }
}</code></pre>

          <h2>ShouldRender</h2>
          <p>
            Override this method to control whether the component should re-render. Return <code>false</code> to prevent rendering, improving performance for components that don't need frequent updates.
          </p>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/optimized-counter"

<h3>Optimized Counter</h3>
<p>Count: @currentCount</p>
<p>Render count: @renderCount</p>

<button @onclick="IncrementCount">Increment</button>
<button @onclick="TriggerUpdate">Trigger Update (No Render)</button>

@code {
    private int currentCount = 0;
    private int renderCount = 0;
    private int internalState = 0;

    protected override bool ShouldRender()
    {
        renderCount++;
        
        // Only render if count is even
        return currentCount % 2 == 0;
    }

    private void IncrementCount()
    {
        currentCount++;
    }

    private void TriggerUpdate()
    {
        // Changes internal state but won't render if count is odd
        internalState++;
    }
}</code></pre>

          <h3>Conditional Rendering Based on State</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@code {
    [Parameter]
    public string? Data { get; set; }

    private string? previousData;
    private bool hasDataChanged = false;

    protected override void OnParametersSet()
    {
        hasDataChanged = Data != previousData;
        previousData = Data;
    }

    protected override bool ShouldRender()
    {
        // Only render if data actually changed
        if (!hasDataChanged)
        {
            return false;
        }

        hasDataChanged = false;
        return true;
    }
}</code></pre>

          <h2>Component Disposal</h2>
          <p>Clean up resources when components are destroyed by implementing IDisposable or IAsyncDisposable.</p>

          <h3>IDisposable - Synchronous Cleanup</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/timer-component"
@implements IDisposable

<h3>Timer: @elapsedSeconds seconds</h3>

@code {
    private Timer? timer;
    private int elapsedSeconds = 0;

    protected override void OnInitialized()
    {
        timer = new Timer(_ =>
        {
            elapsedSeconds++;
            InvokeAsync(StateHasChanged);
        }, null, 1000, 1000);
    }

    public void Dispose()
    {
        // Clean up timer
        timer?.Dispose();
        Console.WriteLine("Component disposed");
    }
}</code></pre>

          <h3>IAsyncDisposable - Asynchronous Cleanup</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/streaming-data"
@inject HttpClient Http
@implements IAsyncDisposable

<h3>Streaming Data</h3>
<ul>
    @foreach (var item in items)
    {
        <li>@item</li>
    }
</ul>

@code {
    private List<string> items = new();
    private CancellationTokenSource? cts;

    protected override async Task OnInitializedAsync()
    {
        cts = new CancellationTokenSource();
        
        try
        {
            await foreach (var item in FetchStreamingDataAsync(cts.Token))
            {
                items.Add(item);
                StateHasChanged();
            }
        }
        catch (OperationCanceledException)
        {
            Console.WriteLine("Streaming cancelled");
        }
    }

    private async IAsyncEnumerable<string> FetchStreamingDataAsync(
        [System.Runtime.CompilerServices.EnumeratorCancellation] CancellationToken cancellationToken)
    {
        for (int i = 0; i < 100; i++)
        {
            cancellationToken.ThrowIfCancellationRequested();
            await Task.Delay(1000, cancellationToken);
            yield return $"Item {i}";
        }
    }

    public async ValueTask DisposeAsync()
    {
        // Cancel streaming and dispose
        if (cts != null)
        {
            cts.Cancel();
            cts.Dispose();
        }
        
        Console.WriteLine("Component disposed asynchronously");
    }
}</code></pre>

          <h3>Both IDisposable and IAsyncDisposable</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/complex-cleanup"
@inject IJSRuntime JS
@implements IAsyncDisposable
@implements IDisposable

<div @ref="mapContainer"></div>

@code {
    private ElementReference mapContainer;
    private IJSObjectReference? mapModule;
    private IJSObjectReference? mapInstance;
    private Timer? refreshTimer;
    private bool disposed = false;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            mapModule = await JS.InvokeAsync<IJSObjectReference>("import", "./js/map.js");
            mapInstance = await mapModule.InvokeAsync<IJSObjectReference>("createMap", mapContainer);
            
            refreshTimer = new Timer(_ => InvokeAsync(RefreshMap), null, 5000, 5000);
        }
    }

    private async Task RefreshMap()
    {
        if (mapInstance != null && !disposed)
        {
            await mapInstance.InvokeVoidAsync("refresh");
        }
    }

    public void Dispose()
    {
        // Synchronous cleanup
        refreshTimer?.Dispose();
        disposed = true;
    }

    public async ValueTask DisposeAsync()
    {
        // Async cleanup
        if (mapInstance != null)
        {
            await mapInstance.InvokeVoidAsync("destroy");
            await mapInstance.DisposeAsync();
        }

        if (mapModule != null)
        {
            await mapModule.DisposeAsync();
        }

        // Call synchronous dispose
        Dispose();
    }
}</code></pre>

          <h2>Render Modes (.NET 8+)</h2>
          <p>Blazor Web Apps support multiple render modes that affect the component lifecycle:</p>

          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Render Mode</th>
                <th>Lifecycle Behavior</th>
                <th>Considerations</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Static SSR</strong></td>
                <td>Component lifecycle runs once on server during request</td>
                <td>No OnAfterRender on server; no interactivity</td>
              </tr>
              <tr>
                <td><strong>Interactive Server</strong></td>
                <td>Lifecycle runs on server; updates via SignalR</td>
                <td>OnAfterRender runs on server and client</td>
              </tr>
              <tr>
                <td><strong>Interactive WebAssembly</strong></td>
                <td>Lifecycle runs entirely in browser via WebAssembly</td>
                <td>Full lifecycle on client; no server communication</td>
              </tr>
              <tr>
                <td><strong>Interactive Auto</strong></td>
                <td>Starts as Server, transitions to WebAssembly when downloaded</td>
                <td>Lifecycle may run twice during transition</td>
              </tr>
            </tbody>
          </table>

          <h3>Render Mode Attribute</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Static SSR (default) *@
@page "/static-page"
<h3>Static Page</h3>

@* Interactive Server *@
@page "/interactive-server"
@rendermode InteractiveServer
<h3>Interactive Server</h3>

@* Interactive WebAssembly *@
@page "/interactive-wasm"
@rendermode InteractiveWebAssembly
<h3>Interactive WebAssembly</h3>

@* Interactive Auto *@
@page "/interactive-auto"
@rendermode InteractiveAuto
<h3>Interactive Auto</h3></code></pre>

          <h2>Prerendering</h2>
          <p>
            When using Interactive Server or WebAssembly with prerendering, the component lifecycle runs twice: once during prerendering on the server, then again when interactivity is established.
          </p>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/prerendered"
@rendermode @(new InteractiveServerRenderMode(prerender: true))
@inject IJSRuntime JS

<h3>Prerendered Component</h3>
<p>Data: @data</p>

@code {
    private string data = "Loading...";
    private bool isPrerendering = true;

    protected override async Task OnInitializedAsync()
    {
        Console.WriteLine("OnInitializedAsync called");
        
        // This runs during both prerender and interactive phases
        data = await FetchDataAsync();
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            // Check if JS runtime is available (not during prerendering)
            isPrerendering = false;
            
            try
            {
                await JS.InvokeVoidAsync("console.log", "Interactive phase started");
            }
            catch (InvalidOperationException)
            {
                // JS interop not available during prerendering
                isPrerendering = true;
            }
        }
    }

    private async Task<string> FetchDataAsync()
    {
        await Task.Delay(100);
        return $"Data loaded at {DateTime.Now:HH:mm:ss}";
    }
}</code></pre>

          <h3>Detecting Prerendering</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@inject IJSRuntime JS

@code {
    private bool isPrerendering = true;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            // After first render, we're no longer prerendering
            isPrerendering = false;
            StateHasChanged(); // Trigger re-render with interactive features
        }
    }

    private async Task CallJavaScriptAsync()
    {
        if (!isPrerendering)
        {
            await JS.InvokeVoidAsync("alert", "Hello from interactive phase");
        }
    }
}</code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Use OnInitialized for Sync Setup:</strong> Set initial state, register event handlers</li>
            <li><strong>Use OnInitializedAsync for Data Fetching:</strong> Async operations like HTTP requests</li>
            <li><strong>OnParametersSet for Reactions:</strong> Respond to parameter changes, not for initial setup</li>
            <li><strong>Check firstRender in OnAfterRender:</strong> Avoid infinite loops and unnecessary operations</li>
            <li><strong>Use InvokeAsync for Background Updates:</strong> Marshal back to UI thread from timers/events</li>
            <li><strong>Override ShouldRender Carefully:</strong> Only for performance optimization when needed</li>
            <li><strong>Always Dispose Resources:</strong> Implement IDisposable/IAsyncDisposable for cleanup</li>
            <li><strong>Handle Prerendering:</strong> Check for JS runtime availability before using JS interop</li>
            <li><strong>Avoid Heavy Work in Lifecycle Methods:</strong> Keep lifecycle methods fast and responsive</li>
            <li><strong>Use CancellationTokens:</strong> Cancel async operations when component disposes</li>
          </ul>
        </section>

        <!-- Data Binding Section -->
        <section id="data-binding" role="article">
          <h1>üì° Data Binding</h1>
          <span class="badge">binding</span>
          <span class="badge">one-way</span>
          <span class="badge">two-way</span>
          
          <h2>Data Binding Overview</h2>
          <p>
            Data binding in Blazor connects UI elements to component properties, enabling automatic synchronization between the view and data model. Blazor supports both one-way and two-way data binding with a clean, intuitive syntax.
          </p>

          <div class="callout">
            <strong>üí° Key Concept:</strong> Use <code>@</code> for one-way binding (read-only display) and <code>@bind</code> for two-way binding (read and write). The <code>@bind</code> directive automatically handles both value display and change events.
          </div>

          <h2>One-Way Data Binding</h2>
          <p>Display data from component properties in the UI. Changes flow from code to UI only.</p>

          <h3>Basic One-Way Binding</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/one-way-binding"

<h3>One-Way Data Binding</h3>

<p>Name: @name</p>
<p>Age: @age</p>
<p>Email: @email</p>
<p>Is Active: @isActive</p>

<h4>Formatted Output</h4>
<p>Price: @price.ToString("C")</p>
<p>Date: @currentDate.ToString("MMMM dd, yyyy")</p>
<p>Time: @currentDate.ToString("HH:mm:ss")</p>

<h4>Conditional Display</h4>
<p>Status: @(isActive ? "Active" : "Inactive")</p>
<p>Discount: @(price > 100 ? "10% off" : "No discount")</p>

@code {
    private string name = "John Doe";
    private int age = 30;
    private string email = "john@example.com";
    private bool isActive = true;
    private decimal price = 149.99m;
    private DateTime currentDate = DateTime.Now;
}</code></pre>

          <h3>Binding in Attributes</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/attribute-binding"

<h3>Attribute Binding</h3>

<!-- CSS class binding -->
<div class="@cssClass">Styled content</div>

<!-- Style binding -->
<p style="color: @textColor; font-size: @fontSize;">Colored text</p>

<!-- Image source binding -->
<img src="@imageUrl" alt="@imageAlt" />

<!-- Link href binding -->
<a href="@linkUrl" target="_blank">@linkText</a>

<!-- Disabled attribute -->
<button disabled="@isDisabled">Submit</button>

<!-- Data attributes -->
<div data-id="@itemId" data-name="@itemName">Item</div>

@code {
    private string cssClass = "alert alert-success";
    private string textColor = "#007bff";
    private string fontSize = "18px";
    private string imageUrl = "images/logo.png";
    private string imageAlt = "Company Logo";
    private string linkUrl = "https://example.com";
    private string linkText = "Visit Website";
    private bool isDisabled = false;
    private int itemId = 123;
    private string itemName = "Product A";
}</code></pre>

          <h3>Binding Complex Objects</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/object-binding"

<h3>User Profile</h3>

<div class="card">
    <div class="card-body">
        <h5 class="card-title">@user.FullName</h5>
        <p class="card-text">Email: @user.Email</p>
        <p class="card-text">Phone: @user.Phone</p>
        
        <h6>Address</h6>
        <p>
            @user.Address.Street<br />
            @user.Address.City, @user.Address.State @user.Address.ZipCode
        </p>
        
        <h6>Roles</h6>
        <ul>
            @foreach (var role in user.Roles)
            {
                <li>@role</li>
            }
        </ul>
    </div>
</div>

@code {
    private User user = new()
    {
        FullName = "Jane Smith",
        Email = "jane@example.com",
        Phone = "(555) 123-4567",
        Address = new Address
        {
            Street = "123 Main St",
            City = "Seattle",
            State = "WA",
            ZipCode = "98101"
        },
        Roles = new List<string> { "Admin", "User", "Developer" }
    };

    public class User
    {
        public string FullName { get; set; } = string.Empty;
        public string Email { get; set; } = string.Empty;
        public string Phone { get; set; } = string.Empty;
        public Address Address { get; set; } = new();
        public List<string> Roles { get; set; } = new();
    }

    public class Address
    {
        public string Street { get; set; } = string.Empty;
        public string City { get; set; } = string.Empty;
        public string State { get; set; } = string.Empty;
        public string ZipCode { get; set; } = string.Empty;
    }
}</code></pre>

          <h2>Two-Way Data Binding</h2>
          <p>Synchronize data between UI and component properties. Changes flow in both directions automatically.</p>

          <h3>Basic Two-Way Binding with @bind</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/two-way-binding"

<h3>Two-Way Data Binding</h3>

<div class="mb-3">
    <label>Name:</label>
    <input @bind="name" class="form-control" />
    <p>You entered: @name</p>
</div>

<div class="mb-3">
    <label>Age:</label>
    <input @bind="age" type="number" class="form-control" />
    <p>Age: @age</p>
</div>

<div class="mb-3">
    <label>Email:</label>
    <input @bind="email" type="email" class="form-control" />
    <p>Email: @email</p>
</div>

<div class="mb-3">
    <label>
        <input @bind="isSubscribed" type="checkbox" />
        Subscribe to newsletter
    </label>
    <p>Subscribed: @isSubscribed</p>
</div>

@code {
    private string name = string.Empty;
    private int age = 0;
    private string email = string.Empty;
    private bool isSubscribed = false;
}</code></pre>

          <h3>Binding Events - @bind:event</h3>
          <p>Control when binding updates occur using <code>@bind:event</code>.</p>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/binding-events"

<h3>Binding Events</h3>

<div class="mb-3">
    <label>Default (onchange):</label>
    <input @bind="text1" class="form-control" />
    <p>Updates on blur: @text1</p>
</div>

<div class="mb-3">
    <label>On Input (oninput):</label>
    <input @bind="text2" @bind:event="oninput" class="form-control" />
    <p>Updates on every keystroke: @text2</p>
</div>

<div class="mb-3">
    <label>Character Count:</label>
    <input @bind="message" @bind:event="oninput" class="form-control" maxlength="100" />
    <p>@message.Length / 100 characters</p>
</div>

@code {
    private string text1 = string.Empty;
    private string text2 = string.Empty;
    private string message = string.Empty;
}</code></pre>

          <h3>Binding with Format - @bind:format</h3>
          <p>Format data display and parsing using <code>@bind:format</code>.</p>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/binding-format"

<h3>Binding with Format</h3>

<div class="mb-3">
    <label>Date (short format):</label>
    <input @bind="selectedDate" @bind:format="yyyy-MM-dd" type="date" class="form-control" />
    <p>Selected: @selectedDate.ToString("MMMM dd, yyyy")</p>
</div>

<div class="mb-3">
    <label>Date & Time:</label>
    <input @bind="selectedDateTime" @bind:format="yyyy-MM-ddTHH:mm" type="datetime-local" class="form-control" />
    <p>Selected: @selectedDateTime.ToString("F")</p>
</div>

<div class="mb-3">
    <label>Decimal (2 decimal places):</label>
    <input @bind="amount" @bind:format="F2" type="number" step="0.01" class="form-control" />
    <p>Amount: @amount.ToString("C")</p>
</div>

<div class="mb-3">
    <label>Time:</label>
    <input @bind="selectedTime" @bind:format="HH:mm" type="time" class="form-control" />
    <p>Time: @selectedTime</p>
</div>

@code {
    private DateTime selectedDate = DateTime.Today;
    private DateTime selectedDateTime = DateTime.Now;
    private decimal amount = 0m;
    private TimeSpan selectedTime = TimeSpan.FromHours(12);
}</code></pre>

          <h3>Binding to Select Elements</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/select-binding"

<h3>Select Dropdown Binding</h3>

<div class="mb-3">
    <label>Select Country:</label>
    <select @bind="selectedCountry" class="form-select">
        <option value="">-- Select --</option>
        <option value="US">United States</option>
        <option value="CA">Canada</option>
        <option value="UK">United Kingdom</option>
        <option value="AU">Australia</option>
    </select>
    <p>Selected: @selectedCountry</p>
</div>

<div class="mb-3">
    <label>Select Product:</label>
    <select @bind="selectedProductId" class="form-select">
        <option value="0">-- Select Product --</option>
        @foreach (var product in products)
        {
            <option value="@product.Id">@product.Name</option>
        }
    </select>
    <p>Selected Product ID: @selectedProductId</p>
</div>

<div class="mb-3">
    <label>Select Multiple Categories:</label>
    <select @bind="selectedCategories" multiple size="5" class="form-select">
        @foreach (var category in categories)
        {
            <option value="@category">@category</option>
        }
    </select>
    <p>Selected: @string.Join(", ", selectedCategories)</p>
</div>

@code {
    private string selectedCountry = string.Empty;
    private int selectedProductId = 0;
    private string[] selectedCategories = Array.Empty<string>();

    private List<Product> products = new()
    {
        new Product { Id = 1, Name = "Laptop" },
        new Product { Id = 2, Name = "Mouse" },
        new Product { Id = 3, Name = "Keyboard" }
    };

    private string[] categories = { "Electronics", "Clothing", "Books", "Home", "Sports" };

    public class Product
    {
        public int Id { get; set; }
        public string Name { get; set; } = string.Empty;
    }
}</code></pre>

          <h3>Binding to Radio Buttons</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/radio-binding"

<h3>Radio Button Binding</h3>

<div class="mb-3">
    <label>Select Size:</label>
    <div>
        <label class="form-check">
            <input type="radio" name="size" value="Small" @onchange="@(() => selectedSize = "Small")" 
                   checked="@(selectedSize == "Small")" />
            Small
        </label>
        <label class="form-check">
            <input type="radio" name="size" value="Medium" @onchange="@(() => selectedSize = "Medium")" 
                   checked="@(selectedSize == "Medium")" />
            Medium
        </label>
        <label class="form-check">
            <input type="radio" name="size" value="Large" @onchange="@(() => selectedSize = "Large")" 
                   checked="@(selectedSize == "Large")" />
            Large
        </label>
    </div>
    <p>Selected: @selectedSize</p>
</div>

<div class="mb-3">
    <label>Payment Method:</label>
    <div>
        @foreach (var method in paymentMethods)
        {
            <label class="form-check">
                <input type="radio" name="payment" value="@method" 
                       @onchange="@(() => selectedPayment = method)" 
                       checked="@(selectedPayment == method)" />
                @method
            </label>
        }
    </div>
    <p>Payment: @selectedPayment</p>
</div>

@code {
    private string selectedSize = "Medium";
    private string selectedPayment = "Credit Card";
    private string[] paymentMethods = { "Credit Card", "PayPal", "Bank Transfer", "Cash" };
}</code></pre>

          <h3>Custom Binding with EventCallback</h3>
          <p>Create custom two-way binding for child components.</p>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* CustomInput.razor *@
<div class="custom-input">
    <label>@Label</label>
    <input value="@Value" 
           @oninput="OnValueChanged" 
           class="form-control @CssClass" 
           placeholder="@Placeholder" />
</div>

@code {
    [Parameter]
    public string Value { get; set; } = string.Empty;

    [Parameter]
    public EventCallback<string> ValueChanged { get; set; }

    [Parameter]
    public string Label { get; set; } = string.Empty;

    [Parameter]
    public string Placeholder { get; set; } = string.Empty;

    [Parameter]
    public string CssClass { get; set; } = string.Empty;

    private async Task OnValueChanged(ChangeEventArgs e)
    {
        Value = e.Value?.ToString() ?? string.Empty;
        await ValueChanged.InvokeAsync(Value);
    }
}</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Using CustomInput with @bind *@
@page "/custom-binding"

<h3>Custom Two-Way Binding</h3>

<CustomInput @bind-Value="username" 
             Label="Username:" 
             Placeholder="Enter username" />
<p>Username: @username</p>

<CustomInput @bind-Value="email" 
             Label="Email:" 
             Placeholder="Enter email" 
             CssClass="border-primary" />
<p>Email: @email</p>

@code {
    private string username = string.Empty;
    private string email = string.Empty;
}</code></pre>

          <h2>Binding with Complex Objects</h2>
          <h3>Binding to Nested Properties</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/complex-binding"

<h3>Edit User Profile</h3>

<div class="card">
    <div class="card-body">
        <div class="mb-3">
            <label>Full Name:</label>
            <input @bind="user.FullName" class="form-control" />
        </div>

        <div class="mb-3">
            <label>Email:</label>
            <input @bind="user.Email" type="email" class="form-control" />
        </div>

        <h5>Address</h5>
        <div class="mb-3">
            <label>Street:</label>
            <input @bind="user.Address.Street" class="form-control" />
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label>City:</label>
                <input @bind="user.Address.City" class="form-control" />
            </div>
            <div class="col-md-3 mb-3">
                <label>State:</label>
                <input @bind="user.Address.State" class="form-control" />
            </div>
            <div class="col-md-3 mb-3">
                <label>Zip:</label>
                <input @bind="user.Address.ZipCode" class="form-control" />
            </div>
        </div>

        <div class="mb-3">
            <label>
                <input @bind="user.IsActive" type="checkbox" />
                Active User
            </label>
        </div>
    </div>
</div>

<h4>Preview</h4>
<pre>@System.Text.Json.JsonSerializer.Serialize(user, new System.Text.Json.JsonSerializerOptions { WriteIndented = true })</pre>

@code {
    private UserProfile user = new()
    {
        FullName = "John Doe",
        Email = "john@example.com",
        IsActive = true,
        Address = new AddressInfo
        {
            Street = "123 Main St",
            City = "Seattle",
            State = "WA",
            ZipCode = "98101"
        }
    };

    public class UserProfile
    {
        public string FullName { get; set; } = string.Empty;
        public string Email { get; set; } = string.Empty;
        public bool IsActive { get; set; }
        public AddressInfo Address { get; set; } = new();
    }

    public class AddressInfo
    {
        public string Street { get; set; } = string.Empty;
        public string City { get; set; } = string.Empty;
        public string State { get; set; } = string.Empty;
        public string ZipCode { get; set; } = string.Empty;
    }
}</code></pre>

          <h2>Binding Collections</h2>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/collection-binding"

<h3>Shopping List</h3>

<div class="mb-3">
    <input @bind="newItem" @bind:event="oninput" class="form-control" placeholder="Add item..." />
    <button @onclick="AddItem" class="btn btn-primary mt-2">Add</button>
</div>

<ul class="list-group">
    @for (int i = 0; i < items.Count; i++)
    {
        var index = i; // Capture variable for lambda
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <input @bind="items[index]" @bind:event="oninput" class="form-control form-control-sm" />
            <button @onclick="() => RemoveItem(index)" class="btn btn-sm btn-danger">Remove</button>
        </li>
    }
</ul>

<p class="mt-3">Total items: @items.Count</p>

@code {
    private List<string> items = new() { "Milk", "Bread", "Eggs" };
    private string newItem = string.Empty;

    private void AddItem()
    {
        if (!string.IsNullOrWhiteSpace(newItem))
        {
            items.Add(newItem);
            newItem = string.Empty;
        }
    }

    private void RemoveItem(int index)
    {
        items.RemoveAt(index);
    }
}</code></pre>

          <h2>Performance Considerations</h2>
          <div class="row">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-orange">
                <div class="card-body">
                  <h5 class="card-title">Use @bind:event="oninput" Carefully</h5>
                  <p class="card-text small">
                    Updates on every keystroke can trigger frequent re-renders. Use for real-time feedback (character count, search), but prefer default "onchange" for most inputs.
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-teal">
                <div class="card-body">
                  <h5 class="card-title">Avoid Binding Large Collections</h5>
                  <p class="card-text small">
                    Binding every item in a large collection individually can be expensive. Consider virtualization or pagination for large datasets.
                  </p>
                </div>
              </div>
            </div>
          </div>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Use One-Way Binding by Default:</strong> Only use @bind when you need two-way synchronization</li>
            <li><strong>Choose the Right Event:</strong> Use "onchange" (default) for most inputs, "oninput" for real-time feedback</li>
            <li><strong>Format Data Appropriately:</strong> Use @bind:format for dates, numbers, and times</li>
            <li><strong>Validate Input:</strong> Combine binding with validation attributes and EditForm</li>
            <li><strong>Handle Null Values:</strong> Use null-conditional operators (?.) for nullable properties</li>
            <li><strong>Use EventCallback for Custom Binding:</strong> Follow the Value/ValueChanged pattern for child components</li>
            <li><strong>Be Careful with Collections:</strong> Capture loop variables when binding to collection items</li>
            <li><strong>Consider Performance:</strong> Avoid excessive @bind:event="oninput" on complex components</li>
            <li><strong>Test Edge Cases:</strong> Test with empty strings, null values, and boundary conditions</li>
            <li><strong>Use Strongly Typed Models:</strong> Prefer binding to model properties over individual variables</li>
          </ul>
        </section>

        <!-- Forms & Validation Section -->
        <section id="forms" role="article">
          <h1>üìù Forms & Validation</h1>
          <span class="badge">forms</span>
          <span class="badge">validation</span>
          <span class="badge">editform</span>
          
          <h2>Forms Overview</h2>
          <p>
            Blazor provides a powerful <code>EditForm</code> component with built-in validation support. It integrates seamlessly with data annotations and provides both client-side and server-side validation capabilities.
          </p>

          <div class="callout">
            <strong>üí° Key Concept:</strong> Use <code>EditForm</code> with a model class decorated with data annotations. The <code>EditContext</code> tracks field state, validation messages, and form modifications automatically.
          </div>

          <h2>Basic EditForm</h2>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/basic-form"
@using System.ComponentModel.DataAnnotations

<h3>User Registration</h3>

<EditForm Model="@model" OnValidSubmit="@HandleValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="mb-3">
        <label>Name:</label>
        <InputText @bind-Value="model.Name" class="form-control" />
        <ValidationMessage For="@(() => model.Name)" />
    </div>

    <div class="mb-3">
        <label>Email:</label>
        <InputText @bind-Value="model.Email" type="email" class="form-control" />
        <ValidationMessage For="@(() => model.Email)" />
    </div>

    <div class="mb-3">
        <label>Age:</label>
        <InputNumber @bind-Value="model.Age" class="form-control" />
        <ValidationMessage For="@(() => model.Age)" />
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
</EditForm>

@if (!string.IsNullOrEmpty(message))
{
    <div class="alert alert-success mt-3">@message</div>
}

@code {
    private UserModel model = new();
    private string message = string.Empty;

    private void HandleValidSubmit()
    {
        message = $"User {model.Name} registered successfully!";
        // Process the form data
    }

    public class UserModel
    {
        [Required(ErrorMessage = "Name is required")]
        [StringLength(50, MinimumLength = 2, ErrorMessage = "Name must be between 2 and 50 characters")]
        public string Name { get; set; } = string.Empty;

        [Required(ErrorMessage = "Email is required")]
        [EmailAddress(ErrorMessage = "Invalid email format")]
        public string Email { get; set; } = string.Empty;

        [Required]
        [Range(18, 120, ErrorMessage = "Age must be between 18 and 120")]
        public int Age { get; set; }
    }
}</code></pre>

          <h2>EditForm Event Handlers</h2>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Event</th>
                <th>Description</th>
                <th>Use Case</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>OnValidSubmit</code></td>
                <td>Triggered when form is submitted and validation passes</td>
                <td>Process valid form data</td>
              </tr>
              <tr>
                <td><code>OnInvalidSubmit</code></td>
                <td>Triggered when form is submitted but validation fails</td>
                <td>Show custom error messages, logging</td>
              </tr>
              <tr>
                <td><code>OnSubmit</code></td>
                <td>Triggered on every form submission (regardless of validation)</td>
                <td>Custom validation logic, manual validation</td>
              </tr>
            </tbody>
          </table>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/form-events"

<EditForm Model="@model" OnValidSubmit="@HandleValid" OnInvalidSubmit="@HandleInvalid">
    <DataAnnotationsValidator />
    
    <div class="mb-3">
        <label>Username:</label>
        <InputText @bind-Value="model.Username" class="form-control" />
        <ValidationMessage For="@(() => model.Username)" />
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
</EditForm>

@if (validSubmitted)
{
    <div class="alert alert-success">Form submitted successfully!</div>
}

@if (invalidSubmitted)
{
    <div class="alert alert-danger">Please fix validation errors.</div>
}

@code {
    private FormModel model = new();
    private bool validSubmitted = false;
    private bool invalidSubmitted = false;

    private void HandleValid()
    {
        validSubmitted = true;
        invalidSubmitted = false;
        Console.WriteLine("Valid submission");
    }

    private void HandleInvalid()
    {
        validSubmitted = false;
        invalidSubmitted = true;
        Console.WriteLine("Invalid submission");
    }

    public class FormModel
    {
        [Required]
        [StringLength(20, MinimumLength = 3)]
        public string Username { get; set; } = string.Empty;
    }
}</code></pre>

          <h2>Input Components</h2>
          <p>Blazor provides specialized input components that integrate with EditForm and validation:</p>

          <div class="row mb-3">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-blue">
                <div class="card-body">
                  <h5 class="card-title">Text Inputs</h5>
                  <ul class="small mb-0">
                    <li><code>InputText</code> - Single-line text</li>
                    <li><code>InputTextArea</code> - Multi-line text</li>
                    <li><code>InputNumber&lt;T&gt;</code> - Numeric values</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-green">
                <div class="card-body">
                  <h5 class="card-title">Selection Inputs</h5>
                  <ul class="small mb-0">
                    <li><code>InputCheckbox</code> - Boolean checkbox</li>
                    <li><code>InputSelect&lt;T&gt;</code> - Dropdown select</li>
                    <li><code>InputRadioGroup&lt;T&gt;</code> - Radio buttons</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-purple">
                <div class="card-body">
                  <h5 class="card-title">Date/Time Inputs</h5>
                  <ul class="small mb-0">
                    <li><code>InputDate&lt;T&gt;</code> - Date picker</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-orange">
                <div class="card-body">
                  <h5 class="card-title">File Input</h5>
                  <ul class="small mb-0">
                    <li><code>InputFile</code> - File upload</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <h3>Complete Form with All Input Types</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/complete-form"
@using System.ComponentModel.DataAnnotations

<h3>Complete Form Example</h3>

<EditForm Model="@model" OnValidSubmit="@HandleSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="mb-3">
        <label>Full Name:</label>
        <InputText @bind-Value="model.FullName" class="form-control" />
        <ValidationMessage For="@(() => model.FullName)" />
    </div>

    <div class="mb-3">
        <label>Bio:</label>
        <InputTextArea @bind-Value="model.Bio" class="form-control" rows="4" />
        <ValidationMessage For="@(() => model.Bio)" />
    </div>

    <div class="mb-3">
        <label>Age:</label>
        <InputNumber @bind-Value="model.Age" class="form-control" />
        <ValidationMessage For="@(() => model.Age)" />
    </div>

    <div class="mb-3">
        <label>Salary:</label>
        <InputNumber @bind-Value="model.Salary" class="form-control" />
        <ValidationMessage For="@(() => model.Salary)" />
    </div>

    <div class="mb-3">
        <label>Birth Date:</label>
        <InputDate @bind-Value="model.BirthDate" class="form-control" />
        <ValidationMessage For="@(() => model.BirthDate)" />
    </div>

    <div class="mb-3">
        <label>Country:</label>
        <InputSelect @bind-Value="model.Country" class="form-select">
            <option value="">-- Select Country --</option>
            <option value="US">United States</option>
            <option value="CA">Canada</option>
            <option value="UK">United Kingdom</option>
            <option value="AU">Australia</option>
        </InputSelect>
        <ValidationMessage For="@(() => model.Country)" />
    </div>

    <div class="mb-3">
        <label>Gender:</label>
        <InputRadioGroup @bind-Value="model.Gender">
            <label class="form-check">
                <InputRadio Value="@("Male")" class="form-check-input" />
                Male
            </label>
            <label class="form-check">
                <InputRadio Value="@("Female")" class="form-check-input" />
                Female
            </label>
            <label class="form-check">
                <InputRadio Value="@("Other")" class="form-check-input" />
                Other
            </label>
        </InputRadioGroup>
        <ValidationMessage For="@(() => model.Gender)" />
    </div>

    <div class="mb-3">
        <label class="form-check">
            <InputCheckbox @bind-Value="model.AcceptTerms" class="form-check-input" />
            I accept the terms and conditions
        </label>
        <ValidationMessage For="@(() => model.AcceptTerms)" />
    </div>

    <div class="mb-3">
        <label class="form-check">
            <InputCheckbox @bind-Value="model.Newsletter" class="form-check-input" />
            Subscribe to newsletter
        </label>
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
</EditForm>

@code {
    private PersonModel model = new();

    private void HandleSubmit()
    {
        Console.WriteLine("Form submitted successfully");
    }

    public class PersonModel
    {
        [Required]
        [StringLength(100, MinimumLength = 2)]
        public string FullName { get; set; } = string.Empty;

        [MaxLength(500)]
        public string Bio { get; set; } = string.Empty;

        [Required]
        [Range(18, 120)]
        public int Age { get; set; }

        [Required]
        [Range(0, 1000000)]
        public decimal Salary { get; set; }

        [Required]
        public DateTime BirthDate { get; set; } = DateTime.Today.AddYears(-25);

        [Required]
        public string Country { get; set; } = string.Empty;

        [Required]
        public string Gender { get; set; } = string.Empty;

        [Range(typeof(bool), "true", "true", ErrorMessage = "You must accept the terms")]
        public bool AcceptTerms { get; set; }

        public bool Newsletter { get; set; }
    }
}</code></pre>

          <h2>Data Annotations Validation</h2>
          <p>Common validation attributes from System.ComponentModel.DataAnnotations:</p>

          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Attribute</th>
                <th>Description</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>[Required]</code></td>
                <td>Field cannot be null or empty</td>
                <td><code>[Required(ErrorMessage = "Name required")]</code></td>
              </tr>
              <tr>
                <td><code>[StringLength]</code></td>
                <td>String length constraints</td>
                <td><code>[StringLength(50, MinimumLength = 2)]</code></td>
              </tr>
              <tr>
                <td><code>[Range]</code></td>
                <td>Numeric range validation</td>
                <td><code>[Range(1, 100)]</code></td>
              </tr>
              <tr>
                <td><code>[EmailAddress]</code></td>
                <td>Valid email format</td>
                <td><code>[EmailAddress]</code></td>
              </tr>
              <tr>
                <td><code>[Phone]</code></td>
                <td>Valid phone number format</td>
                <td><code>[Phone]</code></td>
              </tr>
              <tr>
                <td><code>[Url]</code></td>
                <td>Valid URL format</td>
                <td><code>[Url]</code></td>
              </tr>
              <tr>
                <td><code>[RegularExpression]</code></td>
                <td>Match regex pattern</td>
                <td><code>[RegularExpression(@"^\d{5}$")]</code></td>
              </tr>
              <tr>
                <td><code>[Compare]</code></td>
                <td>Compare with another property</td>
                <td><code>[Compare("Password")]</code></td>
              </tr>
              <tr>
                <td><code>[CreditCard]</code></td>
                <td>Valid credit card number</td>
                <td><code>[CreditCard]</code></td>
              </tr>
              <tr>
                <td><code>[MaxLength]</code></td>
                <td>Maximum length</td>
                <td><code>[MaxLength(255)]</code></td>
              </tr>
              <tr>
                <td><code>[MinLength]</code></td>
                <td>Minimum length</td>
                <td><code>[MinLength(5)]</code></td>
              </tr>
            </tbody>
          </table>

          <h3>Advanced Validation Example</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">using System.ComponentModel.DataAnnotations;

public class RegistrationModel
{
    [Required(ErrorMessage = "Username is required")]
    [StringLength(20, MinimumLength = 3, ErrorMessage = "Username must be 3-20 characters")]
    [RegularExpression(@"^[a-zA-Z0-9_]+$", ErrorMessage = "Only alphanumeric and underscore allowed")]
    public string Username { get; set; } = string.Empty;

    [Required]
    [EmailAddress(ErrorMessage = "Invalid email address")]
    public string Email { get; set; } = string.Empty;

    [Required]
    [StringLength(100, MinimumLength = 8, ErrorMessage = "Password must be at least 8 characters")]
    [RegularExpression(@"^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]",
        ErrorMessage = "Password must contain uppercase, lowercase, digit, and special character")]
    public string Password { get; set; } = string.Empty;

    [Required]
    [Compare(nameof(Password), ErrorMessage = "Passwords do not match")]
    public string ConfirmPassword { get; set; } = string.Empty;

    [Required]
    [Phone(ErrorMessage = "Invalid phone number")]
    public string PhoneNumber { get; set; } = string.Empty;

    [Required]
    [Url(ErrorMessage = "Invalid URL")]
    public string Website { get; set; } = string.Empty;

    [Required]
    [Range(typeof(DateTime), "1/1/1900", "1/1/2010", ErrorMessage = "Must be born before 2010")]
    public DateTime DateOfBirth { get; set; }

    [Required]
    [CreditCard(ErrorMessage = "Invalid credit card number")]
    public string CreditCardNumber { get; set; } = string.Empty;

    [Range(typeof(bool), "true", "true", ErrorMessage = "You must accept the terms")]
    public bool AcceptTerms { get; set; }
}</code></pre>

          <h2>Custom Validation</h2>
          <h3>Custom Validation Attribute</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">using System.ComponentModel.DataAnnotations;

public class FutureDateAttribute : ValidationAttribute
{
    protected override ValidationResult? IsValid(object? value, ValidationContext validationContext)
    {
        if (value is DateTime dateValue)
        {
            if (dateValue <= DateTime.Today)
            {
                return new ValidationResult("Date must be in the future");
            }
        }
        return ValidationResult.Success;
    }
}

// Usage
public class EventModel
{
    [Required]
    [FutureDate]
    public DateTime EventDate { get; set; }
}</code></pre>

          <h3>IValidatableObject Interface</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">using System.ComponentModel.DataAnnotations;

public class BookingModel : IValidatableObject
{
    [Required]
    public DateTime CheckIn { get; set; }

    [Required]
    public DateTime CheckOut { get; set; }

    [Required]
    [Range(1, 10)]
    public int Guests { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        // Custom validation logic
        if (CheckOut <= CheckIn)
        {
            yield return new ValidationResult(
                "Check-out date must be after check-in date",
                new[] { nameof(CheckOut) });
        }

        if ((CheckOut - CheckIn).TotalDays > 30)
        {
            yield return new ValidationResult(
                "Booking cannot exceed 30 days",
                new[] { nameof(CheckOut) });
        }

        if (CheckIn < DateTime.Today)
        {
            yield return new ValidationResult(
                "Check-in date cannot be in the past",
                new[] { nameof(CheckIn) });
        }
    }
}</code></pre>

          <h2>Validation Display Components</h2>
          <h3>ValidationSummary</h3>
          <p>Displays all validation errors in a list:</p>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor"><EditForm Model="@model" OnValidSubmit="@HandleSubmit">
    <DataAnnotationsValidator />
    
    <!-- Display all errors -->
    <ValidationSummary />
    
    <!-- Display only model-level errors (not field-specific) -->
    <ValidationSummary Model="@model" />
    
    <!-- Form fields... -->
</EditForm></code></pre>

          <h3>ValidationMessage</h3>
          <p>Displays validation errors for a specific field:</p>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor"><div class="mb-3">
    <label>Email:</label>
    <InputText @bind-Value="model.Email" class="form-control" />
    <ValidationMessage For="@(() => model.Email)" />
</div></code></pre>

          <h3>Custom CSS for Validation</h3>
          <pre class="syntax-highlighted" data-language="CSS"><code class="language-css">/* Blazor adds these classes automatically */
.valid {
    border-color: #28a745;
}

.invalid {
    border-color: #dc3545;
}

.validation-message {
    color: #dc3545;
    font-size: 0.875rem;
    margin-top: 0.25rem;
}

/* Style validation summary */
.validation-errors {
    background-color: #f8d7da;
    border: 1px solid #f5c6cb;
    border-radius: 0.25rem;
    padding: 0.75rem;
    margin-bottom: 1rem;
}

.validation-errors ul {
    margin-bottom: 0;
    padding-left: 1.25rem;
}</code></pre>

          <h2>File Upload</h2>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/file-upload"
@using Microsoft.AspNetCore.Components.Forms

<h3>File Upload</h3>

<EditForm Model="@model" OnValidSubmit="@HandleSubmit">
    <DataAnnotationsValidator />

    <div class="mb-3">
        <label>Select File:</label>
        <InputFile OnChange="@HandleFileSelected" class="form-control" accept=".jpg,.png,.pdf" />
        @if (!string.IsNullOrEmpty(fileError))
        {
            <div class="text-danger">@fileError</div>
        }
    </div>

    @if (selectedFile != null)
    {
        <div class="alert alert-info">
            <p><strong>File:</strong> @selectedFile.Name</p>
            <p><strong>Size:</strong> @FormatFileSize(selectedFile.Size)</p>
            <p><strong>Type:</strong> @selectedFile.ContentType</p>
        </div>
    }

    <button type="submit" class="btn btn-primary" disabled="@(selectedFile == null)">
        Upload
    </button>
</EditForm>

@if (uploading)
{
    <div class="progress mt-3">
        <div class="progress-bar" style="width: 100%">Uploading...</div>
    </div>
}

@code {
    private FileUploadModel model = new();
    private IBrowserFile? selectedFile;
    private string fileError = string.Empty;
    private bool uploading = false;
    private const long MaxFileSize = 5 * 1024 * 1024; // 5 MB

    private void HandleFileSelected(InputFileChangeEventArgs e)
    {
        selectedFile = e.File;
        fileError = string.Empty;

        // Validate file size
        if (selectedFile.Size > MaxFileSize)
        {
            fileError = $"File size cannot exceed {FormatFileSize(MaxFileSize)}";
            selectedFile = null;
            return;
        }

        // Validate file type
        var allowedTypes = new[] { "image/jpeg", "image/png", "application/pdf" };
        if (!allowedTypes.Contains(selectedFile.ContentType))
        {
            fileError = "Only JPG, PNG, and PDF files are allowed";
            selectedFile = null;
            return;
        }
    }

    private async Task HandleSubmit()
    {
        if (selectedFile != null)
        {
            uploading = true;
            
            try
            {
                // Read file content
                using var stream = selectedFile.OpenReadStream(MaxFileSize);
                using var memoryStream = new MemoryStream();
                await stream.CopyToAsync(memoryStream);
                var fileBytes = memoryStream.ToArray();

                // Upload to server (implement your upload logic)
                await UploadFileAsync(selectedFile.Name, fileBytes);
                
                // Success
                fileError = string.Empty;
            }
            catch (Exception ex)
            {
                fileError = $"Upload failed: {ex.Message}";
            }
            finally
            {
                uploading = false;
            }
        }
    }

    private async Task UploadFileAsync(string fileName, byte[] fileContent)
    {
        // Simulate upload
        await Task.Delay(2000);
        Console.WriteLine($"Uploaded {fileName} ({fileContent.Length} bytes)");
    }

    private string FormatFileSize(long bytes)
    {
        if (bytes < 1024) return $"{bytes} B";
        if (bytes < 1024 * 1024) return $"{bytes / 1024:F2} KB";
        return $"{bytes / (1024 * 1024):F2} MB";
    }

    public class FileUploadModel
    {
        [Required]
        public string Description { get; set; } = string.Empty;
    }
}</code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Always Use EditForm:</strong> Don't use plain HTML forms; EditForm provides validation and state management</li>
            <li><strong>Add DataAnnotationsValidator:</strong> Include in every EditForm to enable data annotations validation</li>
            <li><strong>Show Validation Feedback:</strong> Use ValidationSummary and ValidationMessage for user feedback</li>
            <li><strong>Use Appropriate Input Components:</strong> InputText, InputNumber, InputDate provide proper type handling</li>
            <li><strong>Validate on Both Client and Server:</strong> Client validation improves UX, server validation ensures security</li>
            <li><strong>Provide Clear Error Messages:</strong> Use ErrorMessage parameter in validation attributes</li>
            <li><strong>Handle Invalid Submissions:</strong> Use OnInvalidSubmit to provide feedback when validation fails</li>
            <li><strong>Limit File Upload Sizes:</strong> Set MaxFileSize to prevent memory issues</li>
            <li><strong>Use Custom Validators:</strong> Create custom validation attributes for complex business rules</li>
            <li><strong>Test Edge Cases:</strong> Test forms with invalid data, boundary values, and special characters</li>
          </ul>
        </section>

        <!-- Dependency Injection Section -->
        <section id="dependency-injection" role="article">
          <h1>üîå Dependency Injection</h1>
          <span class="badge">di</span>
          <span class="badge">services</span>
          <span class="badge">injection</span>
          
          <h2>Dependency Injection Overview</h2>
          <p>
            Dependency Injection (DI) is a core feature in Blazor that enables loose coupling between components and services. Blazor uses the built-in .NET dependency injection container to manage service lifetimes and inject dependencies into components, services, and other classes.
          </p>

          <div class="callout">
            <strong>üí° Key Concept:</strong> Register services in Program.cs and inject them into components using <code>@inject</code> directive or <code>[Inject]</code> attribute. The DI container automatically manages service lifetimes and disposal.
          </div>

          <h2>Service Lifetimes</h2>
          <p>Blazor supports three service lifetimes:</p>

          <div class="row mb-4">
            <div class="col-md-4">
              <div class="card border-0 shadow-sm h-100 bg-gradient-blue">
                <div class="card-body">
                  <h5 class="card-title">Singleton</h5>
                  <p class="card-text small">
                    <strong>Created once</strong> and shared across the entire application lifetime. Same instance for all users and all requests.
                  </p>
                  <p class="card-text small"><strong>Use for:</strong> Stateless services, configuration, logging</p>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card border-0 shadow-sm h-100 bg-gradient-green">
                <div class="card-body">
                  <h5 class="card-title">Scoped</h5>
                  <p class="card-text small">
                    <strong>Created once per circuit</strong> (Blazor Server) or <strong>per user</strong> (Blazor WebAssembly). Shared within the same user session.
                  </p>
                  <p class="card-text small"><strong>Use for:</strong> Per-user state, authentication context</p>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card border-0 shadow-sm h-100 bg-gradient-purple">
                <div class="card-body">
                  <h5 class="card-title">Transient</h5>
                  <p class="card-text small">
                    <strong>Created every time</strong> the service is requested. New instance for each injection.
                  </p>
                  <p class="card-text small"><strong>Use for:</strong> Lightweight stateless services, operations</p>
                </div>
              </div>
            </div>
          </div>

          <h2>Registering Services</h2>
          <h3>Program.cs - Service Registration</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Program.cs
var builder = WebApplication.CreateBuilder(args);

// Add Blazor services
builder.Services.AddRazorComponents()
    .AddInteractiveServerComponents()
    .AddInteractiveWebAssemblyComponents();

// Register as Singleton (same instance for all users)
builder.Services.AddSingleton<IConfigurationService, ConfigurationService>();
builder.Services.AddSingleton<ICacheService, CacheService>();

// Register as Scoped (one instance per user/circuit)
builder.Services.AddScoped<IAuthenticationService, AuthenticationService>();
builder.Services.AddScoped<IUserStateService, UserStateService>();
builder.Services.AddScoped<ICartService, CartService>();

// Register as Transient (new instance every time)
builder.Services.AddTransient<IEmailService, EmailService>();
builder.Services.AddTransient<IDataProcessor, DataProcessor>();

// Register HttpClient
builder.Services.AddScoped(sp => new HttpClient
{
    BaseAddress = new Uri(builder.Configuration["ApiBaseUrl"] ?? "https://api.example.com")
});

var app = builder.Build();

// Configure middleware
app.UseHttpsRedirection();
app.UseStaticFiles();
app.UseAntiforgery();

app.MapRazorComponents<App>()
    .AddInteractiveServerRenderMode()
    .AddInteractiveWebAssemblyRenderMode();

app.Run();</code></pre>

          <h3>Service Registration Methods</h3>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Method</th>
                <th>Lifetime</th>
                <th>Use Case</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>AddSingleton&lt;T&gt;()</code></td>
                <td>Singleton</td>
                <td>Register interface and implementation</td>
              </tr>
              <tr>
                <td><code>AddSingleton&lt;T&gt;(instance)</code></td>
                <td>Singleton</td>
                <td>Register existing instance</td>
              </tr>
              <tr>
                <td><code>AddSingleton&lt;T&gt;(factory)</code></td>
                <td>Singleton</td>
                <td>Register with factory function</td>
              </tr>
              <tr>
                <td><code>AddScoped&lt;T&gt;()</code></td>
                <td>Scoped</td>
                <td>Register interface and implementation</td>
              </tr>
              <tr>
                <td><code>AddTransient&lt;T&gt;()</code></td>
                <td>Transient</td>
                <td>Register interface and implementation</td>
              </tr>
            </tbody>
          </table>

          <h2>Injecting Services into Components</h2>
          <h3>Using @inject Directive</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/products"
@inject IProductService ProductService
@inject ILogger<Products> Logger
@inject NavigationManager Navigation

<h3>Products</h3>

@if (products == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <div class="row">
        @foreach (var product in products)
        {
            <div class="col-md-4 mb-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">@product.Name</h5>
                        <p class="card-text">@product.Price.ToString("C")</p>
                        <button @onclick="() => ViewDetails(product.Id)" class="btn btn-primary">
                            View Details
                        </button>
                    </div>
                </div>
            </div>
        }
    </div>
}

@code {
    private List<Product>? products;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            Logger.LogInformation("Loading products...");
            products = await ProductService.GetAllAsync();
            Logger.LogInformation("Loaded {Count} products", products.Count);
        }
        catch (Exception ex)
        {
            Logger.LogError(ex, "Error loading products");
        }
    }

    private void ViewDetails(int productId)
    {
        Navigation.NavigateTo($"/product/{productId}");
    }
}</code></pre>

          <h3>Using [Inject] Attribute</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/orders"

<h3>Orders</h3>

@if (orders != null)
{
    <p>Total Orders: @orders.Count</p>
}

@code {
    [Inject]
    private IOrderService OrderService { get; set; } = default!;

    [Inject]
    private ILogger<Orders> Logger { get; set; } = default!;

    [Inject]
    private IAuthenticationService AuthService { get; set; } = default!;

    private List<Order>? orders;

    protected override async Task OnInitializedAsync()
    {
        var currentUser = await AuthService.GetCurrentUserAsync();
        orders = await OrderService.GetUserOrdersAsync(currentUser.Id);
    }
}</code></pre>

          <h2>Creating Services</h2>
          <h3>Simple Service Interface and Implementation</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// IProductService.cs
public interface IProductService
{
    Task<List<Product>> GetAllAsync();
    Task<Product?> GetByIdAsync(int id);
    Task<Product> CreateAsync(Product product);
    Task UpdateAsync(Product product);
    Task DeleteAsync(int id);
}

// ProductService.cs
public class ProductService : IProductService
{
    private readonly HttpClient _httpClient;
    private readonly ILogger<ProductService> _logger;

    public ProductService(HttpClient httpClient, ILogger<ProductService> logger)
    {
        _httpClient = httpClient;
        _logger = logger;
    }

    public async Task<List<Product>> GetAllAsync()
    {
        try
        {
            _logger.LogInformation("Fetching all products");
            var products = await _httpClient.GetFromJsonAsync<List<Product>>("api/products");
            return products ?? new List<Product>();
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "Error fetching products");
            throw;
        }
    }

    public async Task<Product?> GetByIdAsync(int id)
    {
        try
        {
            return await _httpClient.GetFromJsonAsync<Product>($"api/products/{id}");
        }
        catch (HttpRequestException ex) when (ex.StatusCode == System.Net.HttpStatusCode.NotFound)
        {
            return null;
        }
    }

    public async Task<Product> CreateAsync(Product product)
    {
        var response = await _httpClient.PostAsJsonAsync("api/products", product);
        response.EnsureSuccessStatusCode();
        return await response.Content.ReadFromJsonAsync<Product>() ?? product;
    }

    public async Task UpdateAsync(Product product)
    {
        var response = await _httpClient.PutAsJsonAsync($"api/products/{product.Id}", product);
        response.EnsureSuccessStatusCode();
    }

    public async Task DeleteAsync(int id)
    {
        var response = await _httpClient.DeleteAsync($"api/products/{id}");
        response.EnsureSuccessStatusCode();
    }
}</code></pre>

          <h3>State Management Service (Scoped)</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// UserStateService.cs - Scoped service for per-user state
public class UserStateService
{
    private readonly List<string> _notifications = new();

    public event Action? OnChange;

    public IReadOnlyList<string> Notifications => _notifications.AsReadOnly();

    public void AddNotification(string message)
    {
        _notifications.Add(message);
        NotifyStateChanged();
    }

    public void ClearNotifications()
    {
        _notifications.Clear();
        NotifyStateChanged();
    }

    private void NotifyStateChanged() => OnChange?.Invoke();
}

// Register in Program.cs
builder.Services.AddScoped<UserStateService>();</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/notifications"
@inject UserStateService UserState
@implements IDisposable

<h3>Notifications</h3>

<button @onclick="AddSampleNotification" class="btn btn-primary mb-3">
    Add Notification
</button>

<button @onclick="ClearNotifications" class="btn btn-secondary mb-3">
    Clear All
</button>

@if (UserState.Notifications.Any())
{
    <ul class="list-group">
        @foreach (var notification in UserState.Notifications)
        {
            <li class="list-group-item">@notification</li>
        }
    </ul>
}
else
{
    <p>No notifications</p>
}

@code {
    protected override void OnInitialized()
    {
        UserState.OnChange += StateHasChanged;
    }

    private void AddSampleNotification()
    {
        UserState.AddNotification($"New notification at {DateTime.Now:HH:mm:ss}");
    }

    private void ClearNotifications()
    {
        UserState.ClearNotifications();
    }

    public void Dispose()
    {
        UserState.OnChange -= StateHasChanged;
    }
}</code></pre>

          <h2>Service with Multiple Dependencies</h2>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// OrderService.cs - Service with multiple dependencies
public class OrderService : IOrderService
{
    private readonly HttpClient _httpClient;
    private readonly ILogger<OrderService> _logger;
    private readonly IAuthenticationService _authService;
    private readonly ICartService _cartService;
    private readonly UserStateService _userState;

    public OrderService(
        HttpClient httpClient,
        ILogger<OrderService> logger,
        IAuthenticationService authService,
        ICartService cartService,
        UserStateService userState)
    {
        _httpClient = httpClient;
        _logger = logger;
        _authService = authService;
        _cartService = cartService;
        _userState = userState;
    }

    public async Task<Order> PlaceOrderAsync()
    {
        var user = await _authService.GetCurrentUserAsync();
        var cartItems = await _cartService.GetItemsAsync();

        if (!cartItems.Any())
        {
            throw new InvalidOperationException("Cart is empty");
        }

        var order = new Order
        {
            UserId = user.Id,
            Items = cartItems,
            Total = cartItems.Sum(i => i.Price * i.Quantity),
            OrderDate = DateTime.UtcNow
        };

        _logger.LogInformation("Placing order for user {UserId}", user.Id);

        var response = await _httpClient.PostAsJsonAsync("api/orders", order);
        response.EnsureSuccessStatusCode();

        var createdOrder = await response.Content.ReadFromJsonAsync<Order>();

        await _cartService.ClearAsync();
        _userState.AddNotification($"Order #{createdOrder?.Id} placed successfully!");

        return createdOrder!;
    }
}</code></pre>

          <h2>Factory Pattern with DI</h2>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// IReportGenerator.cs
public interface IReportGenerator
{
    Task<byte[]> GenerateAsync(ReportType type, object data);
}

// ReportGeneratorFactory.cs
public class ReportGeneratorFactory
{
    private readonly IServiceProvider _serviceProvider;

    public ReportGeneratorFactory(IServiceProvider serviceProvider)
    {
        _serviceProvider = serviceProvider;
    }

    public IReportGenerator Create(ReportType type)
    {
        return type switch
        {
            ReportType.Pdf => _serviceProvider.GetRequiredService<PdfReportGenerator>(),
            ReportType.Excel => _serviceProvider.GetRequiredService<ExcelReportGenerator>(),
            ReportType.Csv => _serviceProvider.GetRequiredService<CsvReportGenerator>(),
            _ => throw new ArgumentException($"Unsupported report type: {type}")
        };
    }
}

// Program.cs registration
builder.Services.AddTransient<PdfReportGenerator>();
builder.Services.AddTransient<ExcelReportGenerator>();
builder.Services.AddTransient<CsvReportGenerator>();
builder.Services.AddSingleton<ReportGeneratorFactory>();</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/reports"
@inject ReportGeneratorFactory ReportFactory

<h3>Generate Report</h3>

<select @bind="selectedReportType" class="form-select mb-3">
    <option value="@ReportType.Pdf">PDF</option>
    <option value="@ReportType.Excel">Excel</option>
    <option value="@ReportType.Csv">CSV</option>
</select>

<button @onclick="GenerateReport" class="btn btn-primary">Generate</button>

@code {
    private ReportType selectedReportType = ReportType.Pdf;

    private async Task GenerateReport()
    {
        var generator = ReportFactory.Create(selectedReportType);
        var reportData = new { Title = "Sales Report", Date = DateTime.Now };
        var bytes = await generator.GenerateAsync(selectedReportType, reportData);
        // Download or display the report
    }

    public enum ReportType
    {
        Pdf,
        Excel,
        Csv
    }
}</code></pre>

          <h2>Configuration Options Pattern</h2>
          <pre class="syntax-highlighted" data-language="JSON"><code class="language-json">// appsettings.json
{
  "ApiSettings": {
    "BaseUrl": "https://api.example.com",
    "Timeout": 30,
    "RetryCount": 3,
    "ApiKey": "your-api-key"
  },
  "EmailSettings": {
    "SmtpServer": "smtp.example.com",
    "Port": 587,
    "FromEmail": "noreply@example.com",
    "FromName": "My App"
  }
}</code></pre>

          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// ApiSettings.cs
public class ApiSettings
{
    public string BaseUrl { get; set; } = string.Empty;
    public int Timeout { get; set; }
    public int RetryCount { get; set; }
    public string ApiKey { get; set; } = string.Empty;
}

// EmailSettings.cs
public class EmailSettings
{
    public string SmtpServer { get; set; } = string.Empty;
    public int Port { get; set; }
    public string FromEmail { get; set; } = string.Empty;
    public string FromName { get; set; } = string.Empty;
}

// Program.cs - Register configuration
builder.Services.Configure<ApiSettings>(builder.Configuration.GetSection("ApiSettings"));
builder.Services.Configure<EmailSettings>(builder.Configuration.GetSection("EmailSettings"));

// Service using IOptions
public class ApiService
{
    private readonly HttpClient _httpClient;
    private readonly ApiSettings _settings;
    private readonly ILogger<ApiService> _logger;

    public ApiService(
        HttpClient httpClient,
        IOptions<ApiSettings> options,
        ILogger<ApiService> logger)
    {
        _httpClient = httpClient;
        _settings = options.Value;
        _logger = logger;

        _httpClient.BaseAddress = new Uri(_settings.BaseUrl);
        _httpClient.Timeout = TimeSpan.FromSeconds(_settings.Timeout);
        _httpClient.DefaultRequestHeaders.Add("X-API-Key", _settings.ApiKey);
    }

    public async Task<T?> GetAsync<T>(string endpoint)
    {
        for (int i = 0; i <= _settings.RetryCount; i++)
        {
            try
            {
                return await _httpClient.GetFromJsonAsync<T>(endpoint);
            }
            catch (Exception ex) when (i < _settings.RetryCount)
            {
                _logger.LogWarning(ex, "Retry {Attempt} of {Max}", i + 1, _settings.RetryCount);
                await Task.Delay(1000 * (i + 1)); // Exponential backoff
            }
        }
        throw new Exception($"Failed after {_settings.RetryCount} retries");
    }
}</code></pre>

          <h2>Service Lifetimes in Different Hosting Models</h2>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Hosting Model</th>
                <th>Singleton</th>
                <th>Scoped</th>
                <th>Transient</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Blazor Server</strong></td>
                <td>Shared across all users</td>
                <td>Per SignalR circuit (per user session)</td>
                <td>New per injection</td>
              </tr>
              <tr>
                <td><strong>Blazor WebAssembly</strong></td>
                <td>Per user (browser tab)</td>
                <td>Same as Singleton in WASM</td>
                <td>New per injection</td>
              </tr>
              <tr>
                <td><strong>Blazor Web App</strong></td>
                <td>Shared across all users</td>
                <td>Per render mode/circuit</td>
                <td>New per injection</td>
              </tr>
            </tbody>
          </table>

          <div class="callout">
            <strong>‚ö†Ô∏è Important:</strong> In Blazor WebAssembly, Scoped services behave like Singleton because there's only one "scope" per user. Both persist for the lifetime of the app in the browser.
          </div>

          <h2>Built-in Services</h2>
          <p>Blazor provides several built-in services that are automatically registered:</p>

          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Service</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>NavigationManager</code></td>
                <td>Navigate between pages, get current URL</td>
              </tr>
              <tr>
                <td><code>IJSRuntime</code></td>
                <td>Invoke JavaScript from .NET</td>
              </tr>
              <tr>
                <td><code>HttpClient</code></td>
                <td>Make HTTP requests (WASM: pre-configured for API)</td>
              </tr>
              <tr>
                <td><code>ILogger&lt;T&gt;</code></td>
                <td>Logging functionality</td>
              </tr>
              <tr>
                <td><code>IConfiguration</code></td>
                <td>Access configuration settings</td>
              </tr>
              <tr>
                <td><code>IWebHostEnvironment</code></td>
                <td>Environment information (Development, Production)</td>
              </tr>
              <tr>
                <td><code>AuthenticationStateProvider</code></td>
                <td>Authentication state and user information</td>
              </tr>
            </tbody>
          </table>

          <h2>Testing with Dependency Injection</h2>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// Unit test with mock service
using Bunit;
using Moq;
using Xunit;

public class ProductListTests : TestContext
{
    [Fact]
    public async Task ProductList_DisplaysProducts()
    {
        // Arrange
        var mockProductService = new Mock<IProductService>();
        mockProductService.Setup(s => s.GetAllAsync())
            .ReturnsAsync(new List<Product>
            {
                new Product { Id = 1, Name = "Product 1", Price = 10.99m },
                new Product { Id = 2, Name = "Product 2", Price = 20.99m }
            });

        Services.AddSingleton(mockProductService.Object);

        // Act
        var cut = RenderComponent<ProductList>();

        // Assert
        cut.WaitForAssertion(() =>
        {
            Assert.Contains("Product 1", cut.Markup);
            Assert.Contains("Product 2", cut.Markup);
        });
    }
}</code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Use Interfaces:</strong> Always register services using interfaces for loose coupling and testability</li>
            <li><strong>Choose Appropriate Lifetime:</strong> Singleton for stateless, Scoped for per-user, Transient for lightweight</li>
            <li><strong>Avoid Captive Dependencies:</strong> Don't inject Scoped/Transient services into Singleton services</li>
            <li><strong>Use IOptions for Configuration:</strong> Bind configuration sections to strongly-typed classes</li>
            <li><strong>Dispose Resources:</strong> Implement IDisposable/IAsyncDisposable in services that hold resources</li>
            <li><strong>Keep Services Focused:</strong> Single responsibility - one service, one purpose</li>
            <li><strong>Use Constructor Injection:</strong> Prefer constructor injection over property injection</li>
            <li><strong>Document Service Lifetimes:</strong> Comment or document why a specific lifetime was chosen</li>
            <li><strong>Test with Mocks:</strong> Use mock services in unit tests for isolation</li>
            <li><strong>Be Careful in WebAssembly:</strong> Remember Scoped = Singleton in WASM context</li>
          </ul>
        </section>

        <!-- Routing & Navigation Section -->
        <section id="routing" role="article">
          <h1>üåê Routing & Navigation</h1>
          <span class="badge">routing</span>
          <span class="badge">navigation</span>
          <span class="badge">parameters</span>
          
          <h2>Routing Overview</h2>
          <p>
            Blazor provides a client-side routing system that enables navigation between components without full page reloads. The routing system uses the <code>@page</code> directive to define routes and supports parameters, constraints, and programmatic navigation.
          </p>

          <div class="callout">
            <strong>üí° Key Concept:</strong> Use the <code>@page</code> directive to define routes at the top of components. The <code>Router</code> component in App.razor handles route matching and component rendering.
          </div>

          <h2>Basic Routing</h2>
          <h3>Defining Routes with @page</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Home.razor *@
@page "/"
@page "/home"

<h3>Welcome Home!</h3>
<p>This page responds to both "/" and "/home"</p></code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* About.razor *@
@page "/about"

<h3>About Us</h3>
<p>Learn more about our company</p></code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Contact.razor *@
@page "/contact"

<h3>Contact Us</h3>
<p>Get in touch with our team</p></code></pre>

          <h2>Router Configuration</h2>
          <h3>App.razor - Router Component</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* App.razor *@
<Router AppAssembly="@typeof(App).Assembly">
    <Found Context="routeData">
        <RouteView RouteData="@routeData" DefaultLayout="@typeof(MainLayout)" />
        <FocusOnNavigate RouteData="@routeData" Selector="h1" />
    </Found>
    <NotFound>
        <PageTitle>Not found</PageTitle>
        <LayoutView Layout="@typeof(MainLayout)">
            <div class="container text-center mt-5">
                <h1>404 - Page Not Found</h1>
                <p>Sorry, there's nothing at this address.</p>
                <a href="/" class="btn btn-primary">Go Home</a>
            </div>
        </LayoutView>
    </NotFound>
</Router></code></pre>

          <h3>Multiple Assemblies</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Include routes from additional assemblies *@
<Router AppAssembly="@typeof(App).Assembly"
        AdditionalAssemblies="new[] { typeof(ComponentLibrary.Pages.Index).Assembly }">
    <Found Context="routeData">
        <RouteView RouteData="@routeData" DefaultLayout="@typeof(MainLayout)" />
    </Found>
    <NotFound>
        <p>Page not found</p>
    </NotFound>
</Router></code></pre>

          <h2>Route Parameters</h2>
          <h3>Simple Route Parameter</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* ProductDetail.razor *@
@page "/product/{id}"
@inject IProductService ProductService

<h3>Product Details</h3>

@if (product == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <div class="card">
        <div class="card-body">
            <h4 class="card-title">@product.Name</h4>
            <p class="card-text">@product.Description</p>
            <p class="text-primary fw-bold">@product.Price.ToString("C")</p>
        </div>
    </div>
}

@code {
    [Parameter]
    public string Id { get; set; } = string.Empty;

    private Product? product;

    protected override async Task OnInitializedAsync()
    {
        if (int.TryParse(Id, out var productId))
        {
            product = await ProductService.GetByIdAsync(productId);
        }
    }
}</code></pre>

          <h3>Multiple Route Parameters</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* OrderDetails.razor *@
@page "/orders/{year:int}/{month:int}/{orderId:int}"

<h3>Order Details</h3>
<p>Year: @Year</p>
<p>Month: @Month</p>
<p>Order ID: @OrderId</p>

@code {
    [Parameter]
    public int Year { get; set; }

    [Parameter]
    public int Month { get; set; }

    [Parameter]
    public int OrderId { get; set; }

    protected override async Task OnInitializedAsync()
    {
        // Load order for specified year/month/orderId
    }
}</code></pre>

          <h3>Optional Route Parameters</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Search.razor *@
@page "/search/{searchTerm?}"

<h3>Search Results</h3>

<div class="mb-3">
    <input @bind="currentSearchTerm" @bind:event="oninput" class="form-control" placeholder="Enter search term..." />
    <button @onclick="PerformSearch" class="btn btn-primary mt-2">Search</button>
</div>

@if (!string.IsNullOrEmpty(SearchTerm))
{
    <p>Searching for: <strong>@SearchTerm</strong></p>
    <!-- Display search results -->
}

@code {
    [Parameter]
    public string? SearchTerm { get; set; }

    private string currentSearchTerm = string.Empty;

    protected override void OnInitialized()
    {
        currentSearchTerm = SearchTerm ?? string.Empty;
    }

    private void PerformSearch()
    {
        Navigation.NavigateTo($"/search/{Uri.EscapeDataString(currentSearchTerm)}");
    }

    [Inject]
    private NavigationManager Navigation { get; set; } = default!;
}</code></pre>

          <h2>Route Constraints</h2>
          <p>Route constraints validate parameter types and patterns:</p>

          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Constraint</th>
                <th>Example</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>int</code></td>
                <td><code>/user/{id:int}</code></td>
                <td>Integer parameter</td>
              </tr>
              <tr>
                <td><code>long</code></td>
                <td><code>/file/{size:long}</code></td>
                <td>Long integer parameter</td>
              </tr>
              <tr>
                <td><code>bool</code></td>
                <td><code>/toggle/{active:bool}</code></td>
                <td>Boolean parameter</td>
              </tr>
              <tr>
                <td><code>datetime</code></td>
                <td><code>/schedule/{date:datetime}</code></td>
                <td>DateTime parameter</td>
              </tr>
              <tr>
                <td><code>decimal</code></td>
                <td><code>/price/{amount:decimal}</code></td>
                <td>Decimal parameter</td>
              </tr>
              <tr>
                <td><code>double</code></td>
                <td><code>/distance/{km:double}</code></td>
                <td>Double parameter</td>
              </tr>
              <tr>
                <td><code>float</code></td>
                <td><code>/temp/{celsius:float}</code></td>
                <td>Float parameter</td>
              </tr>
              <tr>
                <td><code>guid</code></td>
                <td><code>/session/{id:guid}</code></td>
                <td>GUID parameter</td>
              </tr>
            </tbody>
          </table>

          <h3>Route Constraint Examples</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* UserProfile.razor *@
@page "/user/{userId:int}"

@* BlogPost.razor *@
@page "/blog/{year:int}/{month:int}/{day:int}/{slug}"

@* SessionViewer.razor *@
@page "/session/{sessionId:guid}"

@* PriceCalculator.razor *@
@page "/calculator/{price:decimal}/{taxRate:double}"

@* ArticleViewer.razor with multiple routes *@
@page "/article/{id:int}"
@page "/articles/{category}/{slug}"</code></pre>

          <h2>Catch-All Route Parameters</h2>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* FileViewer.razor - Catch-all parameter *@
@page "/files/{*filePath}"

<h3>File Viewer</h3>
<p>File Path: @FilePath</p>

@code {
    [Parameter]
    public string FilePath { get; set; } = string.Empty;

    // Example URLs:
    // /files/documents/report.pdf ‚Üí FilePath = "documents/report.pdf"
    // /files/images/2024/photo.jpg ‚Üí FilePath = "images/2024/photo.jpg"
}</code></pre>

          <h2>Query String Parameters</h2>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* ProductList.razor - Query string parameters *@
@page "/products"
@inject NavigationManager Navigation

<h3>Products</h3>

<div class="mb-3">
    <label>Category:</label>
    <select @bind="selectedCategory" @bind:event="onchange" class="form-select">
        <option value="">All</option>
        <option value="electronics">Electronics</option>
        <option value="clothing">Clothing</option>
        <option value="books">Books</option>
    </select>
</div>

<div class="mb-3">
    <label>Sort By:</label>
    <select @bind="selectedSort" @bind:event="onchange" class="form-select">
        <option value="name">Name</option>
        <option value="price">Price</option>
        <option value="date">Date</option>
    </select>
</div>

<p>Current URL: @currentUrl</p>

@code {
    [SupplyParameterFromQuery(Name = "category")]
    public string? Category { get; set; }

    [SupplyParameterFromQuery(Name = "sort")]
    public string? SortBy { get; set; }

    [SupplyParameterFromQuery(Name = "page")]
    public int Page { get; set; } = 1;

    private string selectedCategory = string.Empty;
    private string selectedSort = "name";
    private string currentUrl = string.Empty;

    protected override void OnInitialized()
    {
        selectedCategory = Category ?? string.Empty;
        selectedSort = SortBy ?? "name";
        UpdateUrl();
    }

    protected override void OnParametersSet()
    {
        // Reload data when query parameters change
        LoadProducts();
    }

    private void UpdateUrl()
    {
        var queryParams = new Dictionary<string, object?>
        {
            ["category"] = !string.IsNullOrEmpty(selectedCategory) ? selectedCategory : null,
            ["sort"] = selectedSort,
            ["page"] = Page
        };

        var query = string.Join("&", queryParams
            .Where(kv => kv.Value != null)
            .Select(kv => $"{kv.Key}={Uri.EscapeDataString(kv.Value!.ToString()!)}"));

        currentUrl = $"/products?{query}";
        Navigation.NavigateTo(currentUrl);
    }

    private void LoadProducts()
    {
        // Load products based on Category, SortBy, and Page
    }
}</code></pre>

          <h2>NavigationManager Service</h2>
          <p>Programmatic navigation using the NavigationManager service:</p>

          <h3>Basic Navigation</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/navigation-demo"
@inject NavigationManager Navigation

<h3>Navigation Demo</h3>

<button @onclick='() => Navigation.NavigateTo("/")' class="btn btn-primary">
    Go Home
</button>

<button @onclick='() => Navigation.NavigateTo("/products")' class="btn btn-secondary">
    View Products
</button>

<button @onclick='() => Navigation.NavigateTo($"/product/{123}")' class="btn btn-info">
    View Product 123
</button>

<button @onclick="NavigateToSearch" class="btn btn-success">
    Search
</button>

@code {
    private void NavigateToSearch()
    {
        var searchTerm = "laptop";
        Navigation.NavigateTo($"/search?q={Uri.EscapeDataString(searchTerm)}");
    }
}</code></pre>

          <h3>Force Load (Full Page Reload)</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@code {
    private void NavigateWithReload()
    {
        // Force a full page reload
        Navigation.NavigateTo("/products", forceLoad: true);
    }

    private void NavigateToExternalSite()
    {
        // Navigate to external URL
        Navigation.NavigateTo("https://www.example.com", forceLoad: true);
    }
}</code></pre>

          <h3>Replace History Entry</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@code {
    private void NavigateReplacingHistory()
    {
        // Replace current history entry instead of adding new one
        Navigation.NavigateTo("/dashboard", replace: true);
    }

    private void RedirectAfterLogin()
    {
        // Redirect after login, replace login page in history
        Navigation.NavigateTo("/dashboard", replace: true);
    }
}</code></pre>

          <h3>NavigationManager Properties and Methods</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/nav-info"
@inject NavigationManager Navigation

<h3>Navigation Information</h3>

<dl>
    <dt>Base URI:</dt>
    <dd><code>@Navigation.BaseUri</code></dd>

    <dt>Current URI:</dt>
    <dd><code>@Navigation.Uri</code></dd>

    <dt>Relative Path:</dt>
    <dd><code>@GetRelativePath()</code></dd>
</dl>

<h4>URI Builder Example</h4>
<p>@builtUri</p>

@code {
    private string builtUri = string.Empty;

    protected override void OnInitialized()
    {
        // Build URI with query parameters
        var uri = Navigation.GetUriWithQueryParameters(new Dictionary<string, object?>
        {
            ["search"] = "blazor",
            ["page"] = 1,
            ["category"] = "tutorials"
        });
        builtUri = uri;

        // Register navigation event
        Navigation.LocationChanged += HandleLocationChanged;
    }

    private string GetRelativePath()
    {
        return Navigation.ToBaseRelativePath(Navigation.Uri);
    }

    private void HandleLocationChanged(object? sender, LocationChangedEventArgs e)
    {
        Console.WriteLine($"Navigated to: {e.Location}");
        Console.WriteLine($"Is navigation intercepted: {e.IsNavigationIntercepted}");
    }

    public void Dispose()
    {
        Navigation.LocationChanged -= HandleLocationChanged;
    }
}</code></pre>

          <h2>NavLink Component</h2>
          <p>The <code>NavLink</code> component automatically adds an "active" CSS class when the link matches the current URL:</p>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* NavMenu.razor *@
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <ul class="navbar-nav">
            <li class="nav-item">
                <NavLink class="nav-link" href="/" Match="NavLinkMatch.All">
                    <span class="oi oi-home"></span> Home
                </NavLink>
            </li>
            <li class="nav-item">
                <NavLink class="nav-link" href="/products">
                    <span class="oi oi-list"></span> Products
                </NavLink>
            </li>
            <li class="nav-item">
                <NavLink class="nav-link" href="/about">
                    <span class="oi oi-info"></span> About
                </NavLink>
            </li>
            <li class="nav-item">
                <NavLink class="nav-link" href="/contact">
                    <span class="oi oi-envelope-closed"></span> Contact
                </NavLink>
            </li>
        </ul>
    </div>
</nav>

<style>
    .nav-link.active {
        color: #007bff;
        font-weight: bold;
        border-bottom: 2px solid #007bff;
    }
</style></code></pre>

          <h3>NavLink Match Options</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Match only exact URL *@
<NavLink href="/" Match="NavLinkMatch.All">
    Home (exact match)
</NavLink>

@* Match URL prefix (default) *@
<NavLink href="/products" Match="NavLinkMatch.Prefix">
    Products (prefix match - active for /products, /products/123, etc.)
</NavLink></code></pre>

          <h2>Preventing Navigation</h2>
          <h3>NavigationLock Component (.NET 8+)</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/edit-form"
@inject NavigationManager Navigation

<h3>Edit Form</h3>

<NavigationLock ConfirmExternalNavigation="@hasUnsavedChanges" />

<EditForm Model="@model" OnValidSubmit="@HandleSubmit">
    <div class="mb-3">
        <label>Name:</label>
        <InputText @bind-Value="model.Name" @oninput="@(() => hasUnsavedChanges = true)" class="form-control" />
    </div>

    <button type="submit" class="btn btn-primary">Save</button>
</EditForm>

@if (hasUnsavedChanges)
{
    <div class="alert alert-warning mt-3">
        You have unsaved changes!
    </div>
}

@code {
    private FormModel model = new();
    private bool hasUnsavedChanges = false;

    private void HandleSubmit()
    {
        // Save the form
        hasUnsavedChanges = false;
        Navigation.NavigateTo("/");
    }

    public class FormModel
    {
        public string Name { get; set; } = string.Empty;
    }
}</code></pre>

          <h2>Lazy Loading Assemblies</h2>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* App.razor with lazy loading *@
<Router AppAssembly="@typeof(App).Assembly"
        OnNavigateAsync="@OnNavigateAsync">
    <Navigating>
        <div class="text-center">
            <p>Loading page...</p>
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </Navigating>
    <Found Context="routeData">
        <RouteView RouteData="@routeData" DefaultLayout="@typeof(MainLayout)" />
    </Found>
</Router>

@code {
    [Inject]
    private ILogger<App> Logger { get; set; } = default!;

    private async Task OnNavigateAsync(NavigationContext context)
    {
        try
        {
            // Simulate lazy loading assemblies
            if (context.Path.Contains("admin"))
            {
                // Load admin module assembly
                await Task.Delay(1000); // Simulate loading
                Logger.LogInformation("Admin module loaded");
            }
        }
        catch (Exception ex)
        {
            Logger.LogError(ex, "Error loading assembly");
        }
    }
}</code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Use @page Directive:</strong> Define all routes using @page at the component level</li>
            <li><strong>Apply Route Constraints:</strong> Use constraints to validate parameter types early</li>
            <li><strong>Handle Missing Routes:</strong> Customize NotFound content for better UX</li>
            <li><strong>Use NavLink for Menus:</strong> Automatically handles active state styling</li>
            <li><strong>Escape Query Parameters:</strong> Always use Uri.EscapeDataString for query values</li>
            <li><strong>Use Replace for Redirects:</strong> Replace history entry after login/logout to prevent back navigation</li>
            <li><strong>Register Navigation Events:</strong> Listen to LocationChanged for analytics or state updates</li>
            <li><strong>Prevent Data Loss:</strong> Use NavigationLock to warn users about unsaved changes</li>
            <li><strong>SEO-Friendly URLs:</strong> Use descriptive slugs instead of just IDs</li>
            <li><strong>Handle Navigation Errors:</strong> Provide fallback UI when navigation fails</li>
          </ul>
        </section>

        <!-- State Management Section -->
        <section id="state-management" role="article">
          <h1>üîß State Management</h1>
          <span class="badge">state</span>
          <span class="badge">cascading</span>
          <span class="badge">storage</span>
          
          <h2>State Management Overview</h2>
          <p>
            State management in Blazor involves managing application data across components and user sessions. Blazor provides multiple approaches for state management, from simple component parameters to complex application-wide state containers, each suited for different scenarios.
          </p>

          <div class="callout">
            <strong>üí° Key Concept:</strong> Choose the appropriate state management approach based on scope: component parameters for parent-child communication, cascading values for component trees, services for application-wide state, and browser storage for persistence.
          </div>

          <h2>State Management Patterns</h2>
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-blue">
                <div class="card-body">
                  <h5 class="card-title">Component-Level State</h5>
                  <ul class="small mb-0">
                    <li>Component parameters</li>
                    <li>Private fields and properties</li>
                    <li>EventCallback communication</li>
                  </ul>
                  <p class="card-text small mt-2"><strong>Scope:</strong> Single component or parent-child</p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-green">
                <div class="card-body">
                  <h5 class="card-title">Application State</h5>
                  <ul class="small mb-0">
                    <li>Scoped services</li>
                    <li>Singleton services</li>
                    <li>State containers</li>
                  </ul>
                  <p class="card-text small mt-2"><strong>Scope:</strong> Application-wide or per-user</p>
                </div>
              </div>
            </div>
          </div>

          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-purple">
                <div class="card-body">
                  <h5 class="card-title">Cascading State</h5>
                  <ul class="small mb-0">
                    <li>CascadingValue component</li>
                    <li>CascadingParameter attribute</li>
                    <li>Component hierarchy sharing</li>
                  </ul>
                  <p class="card-text small mt-2"><strong>Scope:</strong> Component tree</p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card border-0 shadow-sm h-100 bg-gradient-orange">
                <div class="card-body">
                  <h5 class="card-title">Persistent State</h5>
                  <ul class="small mb-0">
                    <li>Local storage</li>
                    <li>Session storage</li>
                    <li>Cookies</li>
                  </ul>
                  <p class="card-text small mt-2"><strong>Scope:</strong> Browser-persisted</p>
                </div>
              </div>
            </div>
          </div>

          <h2>Component Parameters (Parent-Child Communication)</h2>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* ParentComponent.razor *@
<h3>Parent Component</h3>

<p>Parent Counter: @parentCounter</p>

<button @onclick="IncrementParent" class="btn btn-primary mb-3">Increment Parent</button>

<ChildComponent 
    Counter="@parentCounter" 
    OnCounterChanged="HandleCounterChanged" />

@code {
    private int parentCounter = 0;

    private void IncrementParent()
    {
        parentCounter++;
    }

    private void HandleCounterChanged(int newValue)
    {
        parentCounter = newValue;
        Console.WriteLine($"Parent notified: Counter changed to {newValue}");
    }
}</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* ChildComponent.razor *@
<div class="card">
    <div class="card-body">
        <h5 class="card-title">Child Component</h5>
        <p>Counter: @Counter</p>
        <button @onclick="IncrementCounter" class="btn btn-success">Increment Child</button>
    </div>
</div>

@code {
    [Parameter]
    public int Counter { get; set; }

    [Parameter]
    public EventCallback<int> OnCounterChanged { get; set; }

    private async Task IncrementCounter()
    {
        Counter++;
        await OnCounterChanged.InvokeAsync(Counter);
    }
}</code></pre>

          <h2>Cascading Values</h2>
          <p>Share state down the component tree without explicit parameters at each level.</p>

          <h3>Providing Cascading Values</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* MainLayout.razor or App.razor *@
<CascadingValue Value="@appState">
    <CascadingValue Value="@currentTheme" Name="Theme">
        @Body
    </CascadingValue>
</CascadingValue>

@code {
    private AppState appState = new();
    private string currentTheme = "dark";

    public class AppState
    {
        public string UserName { get; set; } = "Guest";
        public bool IsAuthenticated { get; set; }
        public List<string> Notifications { get; set; } = new();
    }
}</code></pre>

          <h3>Consuming Cascading Values</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Any descendant component *@
@page "/profile"

<div class="@theme">
    <h3>User Profile</h3>
    
    @if (AppState.IsAuthenticated)
    {
        <p>Welcome, @AppState.UserName!</p>
        
        @if (AppState.Notifications.Any())
        {
            <div class="alert alert-info">
                <strong>Notifications:</strong>
                <ul>
                    @foreach (var notification in AppState.Notifications)
                    {
                        <li>@notification</li>
                    }
                </ul>
            </div>
        }
    }
    else
    {
        <p>Please log in</p>
    }
</div>

@code {
    [CascadingParameter]
    private AppState AppState { get; set; } = new();

    [CascadingParameter(Name = "Theme")]
    private string theme { get; set; } = "light";
}</code></pre>

          <h2>Application State Service</h2>
          <p>Create a scoped service to manage application-wide state with change notifications.</p>

          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// AppStateService.cs
public class AppStateService
{
    private string _userName = "Guest";
    private int _cartItemCount = 0;
    private List<string> _recentlyViewed = new();

    public event Action? OnChange;

    public string UserName
    {
        get => _userName;
        set
        {
            if (_userName != value)
            {
                _userName = value;
                NotifyStateChanged();
            }
        }
    }

    public int CartItemCount
    {
        get => _cartItemCount;
        set
        {
            if (_cartItemCount != value)
            {
                _cartItemCount = value;
                NotifyStateChanged();
            }
        }
    }

    public IReadOnlyList<string> RecentlyViewed => _recentlyViewed.AsReadOnly();

    public void AddRecentlyViewed(string item)
    {
        if (!_recentlyViewed.Contains(item))
        {
            _recentlyViewed.Insert(0, item);
            if (_recentlyViewed.Count > 10)
            {
                _recentlyViewed.RemoveAt(_recentlyViewed.Count - 1);
            }
            NotifyStateChanged();
        }
    }

    public void ClearRecentlyViewed()
    {
        _recentlyViewed.Clear();
        NotifyStateChanged();
    }

    private void NotifyStateChanged() => OnChange?.Invoke();
}

// Program.cs - Register as scoped
builder.Services.AddScoped<AppStateService>();</code></pre>

          <h3>Using State Service in Components</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/shopping-cart"
@inject AppStateService AppState
@implements IDisposable

<h3>Shopping Cart</h3>

<p>User: @AppState.UserName</p>
<p>Items in Cart: @AppState.CartItemCount</p>

<button @onclick="AddItem" class="btn btn-primary">Add Item</button>
<button @onclick="RemoveItem" class="btn btn-danger">Remove Item</button>

<h4>Recently Viewed</h4>
@if (AppState.RecentlyViewed.Any())
{
    <ul>
        @foreach (var item in AppState.RecentlyViewed)
        {
            <li>@item</li>
        }
    </ul>
}

@code {
    protected override void OnInitialized()
    {
        AppState.OnChange += StateHasChanged;
        AppState.AddRecentlyViewed($"Product viewed at {DateTime.Now:HH:mm:ss}");
    }

    private void AddItem()
    {
        AppState.CartItemCount++;
    }

    private void RemoveItem()
    {
        if (AppState.CartItemCount > 0)
        {
            AppState.CartItemCount--;
        }
    }

    public void Dispose()
    {
        AppState.OnChange -= StateHasChanged;
    }
}</code></pre>

          <h2>Browser Storage (Local Storage & Session Storage)</h2>
          <p>Persist state in the browser across page reloads and sessions.</p>

          <h3>Local Storage Service</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// ILocalStorageService.cs
public interface ILocalStorageService
{
    Task<T?> GetItemAsync<T>(string key);
    Task SetItemAsync<T>(string key, T value);
    Task RemoveItemAsync(string key);
    Task ClearAsync();
}

// LocalStorageService.cs
public class LocalStorageService : ILocalStorageService
{
    private readonly IJSRuntime _jsRuntime;

    public LocalStorageService(IJSRuntime jsRuntime)
    {
        _jsRuntime = jsRuntime;
    }

    public async Task<T?> GetItemAsync<T>(string key)
    {
        var json = await _jsRuntime.InvokeAsync<string>("localStorage.getItem", key);
        return json == null ? default : JsonSerializer.Deserialize<T>(json);
    }

    public async Task SetItemAsync<T>(string key, T value)
    {
        var json = JsonSerializer.Serialize(value);
        await _jsRuntime.InvokeVoidAsync("localStorage.setItem", key, json);
    }

    public async Task RemoveItemAsync(string key)
    {
        await _jsRuntime.InvokeVoidAsync("localStorage.removeItem", key);
    }

    public async Task ClearAsync()
    {
        await _jsRuntime.InvokeVoidAsync("localStorage.clear");
    }
}

// Program.cs
builder.Services.AddScoped<ILocalStorageService, LocalStorageService>();</code></pre>

          <h3>Using Local Storage</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/preferences"
@inject ILocalStorageService LocalStorage

<h3>User Preferences</h3>

<div class="mb-3">
    <label>Theme:</label>
    <select @bind="theme" @bind:event="onchange" class="form-select">
        <option value="light">Light</option>
        <option value="dark">Dark</option>
        <option value="auto">Auto</option>
    </select>
</div>

<div class="mb-3">
    <label>Language:</label>
    <select @bind="language" @bind:event="onchange" class="form-select">
        <option value="en">English</option>
        <option value="es">Spanish</option>
        <option value="fr">French</option>
    </select>
</div>

<div class="mb-3">
    <label>
        <input type="checkbox" @bind="notifications" @bind:event="onchange" />
        Enable notifications
    </label>
</div>

<button @onclick="SavePreferences" class="btn btn-primary">Save</button>
<button @onclick="LoadPreferences" class="btn btn-secondary">Load</button>
<button @onclick="ClearPreferences" class="btn btn-danger">Clear</button>

@if (!string.IsNullOrEmpty(message))
{
    <div class="alert alert-success mt-3">@message</div>
}

@code {
    private string theme = "light";
    private string language = "en";
    private bool notifications = true;
    private string message = string.Empty;

    protected override async Task OnInitializedAsync()
    {
        await LoadPreferences();
    }

    private async Task SavePreferences()
    {
        var preferences = new UserPreferences
        {
            Theme = theme,
            Language = language,
            Notifications = notifications
        };

        await LocalStorage.SetItemAsync("userPreferences", preferences);
        message = "Preferences saved!";
    }

    private async Task LoadPreferences()
    {
        var preferences = await LocalStorage.GetItemAsync<UserPreferences>("userPreferences");
        
        if (preferences != null)
        {
            theme = preferences.Theme;
            language = preferences.Language;
            notifications = preferences.Notifications;
            message = "Preferences loaded!";
        }
    }

    private async Task ClearPreferences()
    {
        await LocalStorage.RemoveItemAsync("userPreferences");
        theme = "light";
        language = "en";
        notifications = true;
        message = "Preferences cleared!";
    }

    public class UserPreferences
    {
        public string Theme { get; set; } = "light";
        public string Language { get; set; } = "en";
        public bool Notifications { get; set; } = true;
    }
}</code></pre>

          <h2>State Container Pattern</h2>
          <p>Advanced state management with immutable state and actions.</p>

          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// ShoppingCartState.cs
public class ShoppingCartState
{
    private List<CartItem> _items = new();

    public event Action? OnChange;

    public IReadOnlyList<CartItem> Items => _items.AsReadOnly();

    public decimal Total => _items.Sum(i => i.Price * i.Quantity);

    public int ItemCount => _items.Sum(i => i.Quantity);

    public void AddItem(CartItem item)
    {
        var existing = _items.FirstOrDefault(i => i.ProductId == item.ProductId);
        
        if (existing != null)
        {
            existing.Quantity += item.Quantity;
        }
        else
        {
            _items.Add(item);
        }
        
        NotifyStateChanged();
    }

    public void RemoveItem(int productId)
    {
        var item = _items.FirstOrDefault(i => i.ProductId == productId);
        if (item != null)
        {
            _items.Remove(item);
            NotifyStateChanged();
        }
    }

    public void UpdateQuantity(int productId, int quantity)
    {
        var item = _items.FirstOrDefault(i => i.ProductId == productId);
        if (item != null)
        {
            if (quantity <= 0)
            {
                RemoveItem(productId);
            }
            else
            {
                item.Quantity = quantity;
                NotifyStateChanged();
            }
        }
    }

    public void Clear()
    {
        _items.Clear();
        NotifyStateChanged();
    }

    private void NotifyStateChanged() => OnChange?.Invoke();
}

public class CartItem
{
    public int ProductId { get; set; }
    public string ProductName { get; set; } = string.Empty;
    public decimal Price { get; set; }
    public int Quantity { get; set; }
}

// Program.cs
builder.Services.AddScoped<ShoppingCartState>();</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/cart"
@inject ShoppingCartState Cart
@implements IDisposable

<h3>Shopping Cart</h3>

@if (Cart.Items.Any())
{
    <table class="table">
        <thead>
            <tr>
                <th>Product</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Subtotal</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Cart.Items)
            {
                <tr>
                    <td>@item.ProductName</td>
                    <td>@item.Price.ToString("C")</td>
                    <td>
                        <input type="number" 
                               value="@item.Quantity" 
                               @onchange="@(e => UpdateQuantity(item.ProductId, int.Parse(e.Value?.ToString() ?? "0")))"
                               min="0"
                               class="form-control form-control-sm" 
                               style="width: 80px;" />
                    </td>
                    <td>@((item.Price * item.Quantity).ToString("C"))</td>
                    <td>
                        <button @onclick="() => Cart.RemoveItem(item.ProductId)" 
                                class="btn btn-sm btn-danger">
                            Remove
                        </button>
                    </td>
                </tr>
            }
        </tbody>
        <tfoot>
            <tr>
                <td colspan="3" class="text-end"><strong>Total:</strong></td>
                <td><strong>@Cart.Total.ToString("C")</strong></td>
                <td></td>
            </tr>
        </tfoot>
    </table>

    <div class="d-flex gap-2">
        <button @onclick="Checkout" class="btn btn-primary">Checkout</button>
        <button @onclick="Cart.Clear" class="btn btn-outline-danger">Clear Cart</button>
    </div>
}
else
{
    <div class="alert alert-info">
        Your cart is empty
    </div>
}

<p class="mt-3">Items in cart: @Cart.ItemCount</p>

@code {
    protected override void OnInitialized()
    {
        Cart.OnChange += StateHasChanged;
    }

    private void UpdateQuantity(int productId, int quantity)
    {
        Cart.UpdateQuantity(productId, quantity);
    }

    private void Checkout()
    {
        // Process checkout
        Console.WriteLine($"Processing checkout for {Cart.ItemCount} items, Total: {Cart.Total:C}");
    }

    public void Dispose()
    {
        Cart.OnChange -= StateHasChanged;
    }
}</code></pre>

          <h2>Persistent State with Local Storage</h2>
          <p>Combine state service with local storage for persistence across sessions.</p>

          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// PersistentCartState.cs
public class PersistentCartState : ShoppingCartState
{
    private readonly ILocalStorageService _localStorage;
    private const string StorageKey = "shopping-cart";

    public PersistentCartState(ILocalStorageService localStorage)
    {
        _localStorage = localStorage;
    }

    public async Task LoadFromStorageAsync()
    {
        var items = await _localStorage.GetItemAsync<List<CartItem>>(StorageKey);
        if (items != null)
        {
            foreach (var item in items)
            {
                AddItem(item);
            }
        }
    }

    public async Task SaveToStorageAsync()
    {
        await _localStorage.SetItemAsync(StorageKey, Items.ToList());
    }

    public new void AddItem(CartItem item)
    {
        base.AddItem(item);
        _ = SaveToStorageAsync(); // Fire and forget
    }

    public new void RemoveItem(int productId)
    {
        base.RemoveItem(productId);
        _ = SaveToStorageAsync();
    }

    public new void Clear()
    {
        base.Clear();
        _ = _localStorage.RemoveItemAsync(StorageKey);
    }
}</code></pre>

          <h2>Fluxor (Redux Pattern for Blazor)</h2>
          <p>For complex applications, consider using Fluxor - a Redux-inspired state management library:</p>

          <pre class="syntax-highlighted" data-language="bash"><code class="language-bash"># Install Fluxor
dotnet add package Fluxor.Blazor.Web</code></pre>

          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// CounterState.cs
public record CounterState
{
    public int Count { get; init; }
}

// CounterActions.cs
public record IncrementCounterAction;
public record DecrementCounterAction;
public record ResetCounterAction;

// CounterReducers.cs
public static class CounterReducers
{
    [ReducerMethod]
    public static CounterState OnIncrement(CounterState state, IncrementCounterAction action)
        => state with { Count = state.Count + 1 };

    [ReducerMethod]
    public static CounterState OnDecrement(CounterState state, DecrementCounterAction action)
        => state with { Count = state.Count - 1 };

    [ReducerMethod]
    public static CounterState OnReset(CounterState state, ResetCounterAction action)
        => state with { Count = 0 };
}

// Program.cs
builder.Services.AddFluxor(options =>
{
    options.ScanAssemblies(typeof(Program).Assembly);
});

// Component usage
@page "/fluxor-counter"
@inject IState<CounterState> CounterState
@inject IDispatcher Dispatcher

<h3>Fluxor Counter</h3>
<p>Count: @CounterState.Value.Count</p>

<button @onclick="() => Dispatcher.Dispatch(new IncrementCounterAction())">+</button>
<button @onclick="() => Dispatcher.Dispatch(new DecrementCounterAction())">-</button>
<button @onclick="() => Dispatcher.Dispatch(new ResetCounterAction())">Reset</button></code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Choose the Right Pattern:</strong> Use parameters for simple parent-child, services for app-wide state</li>
            <li><strong>Implement Change Notifications:</strong> Use events to notify components when state changes</li>
            <li><strong>Unsubscribe from Events:</strong> Always implement IDisposable to prevent memory leaks</li>
            <li><strong>Use Scoped Services for User State:</strong> Scoped services maintain per-user state in Blazor Server</li>
            <li><strong>Serialize Complex Objects:</strong> Use JSON serialization for local storage compatibility</li>
            <li><strong>Validate Stored Data:</strong> Always check for null when loading from storage</li>
            <li><strong>Keep State Immutable:</strong> Use records and immutable patterns for predictable state changes</li>
            <li><strong>Centralize State Logic:</strong> Keep state modification logic in services, not components</li>
            <li><strong>Use Cascading Values Sparingly:</strong> Only for truly cross-cutting concerns like theme or auth</li>
            <li><strong>Consider Third-Party Libraries:</strong> For complex state, use Fluxor or similar libraries</li>
          </ul>
        </section>

        <!-- JavaScript Interop Section -->
        <section id="js-interop" role="article">
          <h1>üé® JavaScript Interop</h1>
          <span class="badge">javascript</span>
          <span class="badge">js-interop</span>
          <span class="badge">ijsruntime</span>
          
          <h2>JavaScript Interop Overview</h2>
          <p>
            JavaScript interop enables Blazor components to call JavaScript functions and JavaScript code to call .NET methods. This bidirectional communication allows you to leverage existing JavaScript libraries, manipulate the DOM directly, and integrate with browser APIs not yet available in .NET.
          </p>

          <div class="callout">
            <strong>üí° Key Concept:</strong> Use <code>IJSRuntime</code> to call JavaScript from .NET and <code>DotNetObjectReference</code> to call .NET from JavaScript. Always handle JS interop asynchronously and be aware of prerendering limitations.
          </div>

          <h2>Calling JavaScript from .NET</h2>
          <h3>Basic JavaScript Invocation</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/js-demo"
@inject IJSRuntime JS

<h3>JavaScript Interop Demo</h3>

<button @onclick="ShowAlert" class="btn btn-primary">Show Alert</button>
<button @onclick="ShowPrompt" class="btn btn-secondary">Show Prompt</button>
<button @onclick="ShowConfirm" class="btn btn-info">Show Confirm</button>

@if (!string.IsNullOrEmpty(message))
{
    <div class="alert alert-success mt-3">@message</div>
}

@code {
    private string message = string.Empty;

    private async Task ShowAlert()
    {
        await JS.InvokeVoidAsync("alert", "Hello from Blazor!");
    }

    private async Task ShowPrompt()
    {
        var result = await JS.InvokeAsync<string>("prompt", "Enter your name:");
        message = $"You entered: {result}";
    }

    private async Task ShowConfirm()
    {
        var confirmed = await JS.InvokeAsync<bool>("confirm", "Are you sure?");
        message = confirmed ? "Confirmed!" : "Cancelled";
    }
}</code></pre>

          <h3>Custom JavaScript Functions</h3>
          <pre class="syntax-highlighted" data-language="HTML"><code class="language-html"><!-- wwwroot/js/interop.js -->
<script>
    window.blazorInterop = {
        showMessage: function (message, duration) {
            const toast = document.createElement('div');
            toast.className = 'toast-message';
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #333;
                color: white;
                padding: 15px 20px;
                border-radius: 5px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.2);
                z-index: 9999;
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, duration || 3000);
        },

        focusElement: function (element) {
            if (element) {
                element.focus();
            }
        },

        getWindowSize: function () {
            return {
                width: window.innerWidth,
                height: window.innerHeight
            };
        },

        setLocalStorage: function (key, value) {
            localStorage.setItem(key, value);
        },

        getLocalStorage: function (key) {
            return localStorage.getItem(key);
        },

        scrollToElement: function (elementId) {
            const element = document.getElementById(elementId);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
    };
</script></code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@* Reference in index.html or App.razor *@
<script src="js/interop.js"></script>

@* Using custom JavaScript functions *@
@page "/custom-js"
@inject IJSRuntime JS

<h3>Custom JavaScript Functions</h3>

<input @ref="nameInput" class="form-control mb-3" placeholder="Enter name..." />
<button @onclick="FocusInput" class="btn btn-primary mb-3">Focus Input</button>

<button @onclick="ShowToast" class="btn btn-success mb-3">Show Toast</button>
<button @onclick="GetWindowSize" class="btn btn-info mb-3">Get Window Size</button>
<button @onclick="ScrollToBottom" class="btn btn-secondary mb-3">Scroll to Bottom</button>

@if (windowSize != null)
{
    <div class="alert alert-info">
        Window Size: @windowSize.Width x @windowSize.Height
    </div>
}

<div style="height: 1000px;"></div>
<div id="bottom-section">Bottom of page</div>

@code {
    private ElementReference nameInput;
    private WindowSize? windowSize;

    private async Task FocusInput()
    {
        await JS.InvokeVoidAsync("blazorInterop.focusElement", nameInput);
    }

    private async Task ShowToast()
    {
        await JS.InvokeVoidAsync("blazorInterop.showMessage", "Hello from Blazor!", 3000);
    }

    private async Task GetWindowSize()
    {
        windowSize = await JS.InvokeAsync<WindowSize>("blazorInterop.getWindowSize");
    }

    private async Task ScrollToBottom()
    {
        await JS.InvokeVoidAsync("blazorInterop.scrollToElement", "bottom-section");
    }

    public class WindowSize
    {
        public int Width { get; set; }
        public int Height { get; set; }
    }
}</code></pre>

          <h2>JavaScript Modules (ES6 Modules)</h2>
          <pre class="syntax-highlighted" data-language="JavaScript"><code class="language-javascript">// wwwroot/js/chartHelper.js
export function createChart(canvas, data) {
    const ctx = canvas.getContext('2d');
    
    // Simple bar chart
    const padding = 40;
    const barWidth = 40;
    const maxValue = Math.max(...data.values);
    const chartHeight = canvas.height - padding * 2;
    
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Draw bars
    data.values.forEach((value, index) => {
        const barHeight = (value / maxValue) * chartHeight;
        const x = padding + index * (barWidth + 20);
        const y = canvas.height - padding - barHeight;
        
        ctx.fillStyle = '#007bff';
        ctx.fillRect(x, y, barWidth, barHeight);
        
        // Draw value on top
        ctx.fillStyle = '#000';
        ctx.font = '12px Arial';
        ctx.fillText(value.toString(), x + barWidth / 2 - 10, y - 5);
        
        // Draw label
        ctx.fillText(data.labels[index], x, canvas.height - padding + 20);
    });
    
    return {
        update: function(newData) {
            createChart(canvas, newData);
        },
        destroy: function() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
    };
}

export function highlightElement(element, color) {
    element.style.backgroundColor = color;
    setTimeout(() => {
        element.style.backgroundColor = '';
    }, 2000);
}</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/chart"
@inject IJSRuntime JS
@implements IAsyncDisposable

<h3>Chart Component</h3>

<canvas @ref="canvasElement" width="600" height="400" style="border: 1px solid #ddd;"></canvas>

<button @onclick="UpdateChart" class="btn btn-primary mt-3">Update Data</button>

@code {
    private ElementReference canvasElement;
    private IJSObjectReference? module;
    private IJSObjectReference? chartInstance;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            module = await JS.InvokeAsync<IJSObjectReference>("import", "./js/chartHelper.js");
            
            var chartData = new
            {
                labels = new[] { "Jan", "Feb", "Mar", "Apr", "May" },
                values = new[] { 10, 25, 15, 30, 20 }
            };
            
            chartInstance = await module.InvokeAsync<IJSObjectReference>("createChart", canvasElement, chartData);
        }
    }

    private async Task UpdateChart()
    {
        if (chartInstance != null)
        {
            var random = new Random();
            var newData = new
            {
                labels = new[] { "Jan", "Feb", "Mar", "Apr", "May" },
                values = Enumerable.Range(0, 5).Select(_ => random.Next(10, 40)).ToArray()
            };
            
            await chartInstance.InvokeVoidAsync("update", newData);
        }
    }

    public async ValueTask DisposeAsync()
    {
        if (chartInstance != null)
        {
            await chartInstance.InvokeVoidAsync("destroy");
            await chartInstance.DisposeAsync();
        }

        if (module != null)
        {
            await module.DisposeAsync();
        }
    }
}</code></pre>

          <h2>Calling .NET from JavaScript</h2>
          <h3>Static .NET Method Invocation</h3>
          <pre class="syntax-highlighted" data-language="C#"><code class="language-csharp">// DotNetHelper.cs
public class DotNetHelper
{
    [JSInvokable]
    public static string GetGreeting(string name)
    {
        return $"Hello from .NET, {name}!";
    }

    [JSInvokable]
    public static Task<int> AddNumbers(int a, int b)
    {
        return Task.FromResult(a + b);
    }
}</code></pre>

          <pre class="syntax-highlighted" data-language="JavaScript"><code class="language-javascript">// wwwroot/js/dotnetCaller.js
window.callDotNet = {
    invokeGreeting: async function (name) {
        const result = await DotNet.invokeMethodAsync('YourBlazorApp', 'GetGreeting', name);
        console.log(result);
        return result;
    },

    invokeAddition: async function (a, b) {
        const result = await DotNet.invokeMethodAsync('YourBlazorApp', 'AddNumbers', a, b);
        console.log(`Sum: ${result}`);
        return result;
    }
};</code></pre>

          <h3>Instance .NET Method Invocation</h3>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/dotnet-callback"
@inject IJSRuntime JS
@implements IDisposable

<h3>.NET Callback from JavaScript</h3>

<button @onclick="StartTimer" class="btn btn-primary">Start Timer</button>
<button @onclick="StopTimer" class="btn btn-danger">Stop Timer</button>

<p>Counter: @counter</p>
<p>Elapsed: @elapsed seconds</p>

@code {
    private int counter = 0;
    private int elapsed = 0;
    private DotNetObjectReference<DotNetCallbackComponent>? objRef;

    protected override void OnInitialized()
    {
        objRef = DotNetObjectReference.Create(this);
    }

    private async Task StartTimer()
    {
        await JS.InvokeVoidAsync("startDotNetTimer", objRef);
    }

    private async Task StopTimer()
    {
        await JS.InvokeVoidAsync("stopDotNetTimer");
    }

    [JSInvokable]
    public void UpdateCounter()
    {
        counter++;
        elapsed++;
        StateHasChanged();
    }

    public void Dispose()
    {
        objRef?.Dispose();
    }
}</code></pre>

          <pre class="syntax-highlighted" data-language="JavaScript"><code class="language-javascript">// wwwroot/index.html or separate JS file
let timerInterval = null;

window.startDotNetTimer = function (dotNetHelper) {
    if (timerInterval) {
        clearInterval(timerInterval);
    }
    
    timerInterval = setInterval(() => {
        dotNetHelper.invokeMethodAsync('UpdateCounter');
    }, 1000);
};

window.stopDotNetTimer = function () {
    if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
    }
};</code></pre>

          <h2>Working with DOM Elements</h2>
          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/dom-manipulation"
@inject IJSRuntime JS

<h3>DOM Manipulation</h3>

<div @ref="contentDiv" class="border p-3 mb-3">
    <p>Original content</p>
</div>

<button @onclick="HighlightDiv" class="btn btn-warning">Highlight</button>
<button @onclick="ChangeContent" class="btn btn-info">Change Content</button>
<button @onclick="AnimateDiv" class="btn btn-success">Animate</button>

@code {
    private ElementReference contentDiv;

    private async Task HighlightDiv()
    {
        await JS.InvokeVoidAsync("highlightElement", contentDiv, "#ffeb3b");
    }

    private async Task ChangeContent()
    {
        await JS.InvokeVoidAsync("eval", 
            $"document.querySelector('[{contentDiv}]').innerHTML = '<p>Updated at {DateTime.Now:HH:mm:ss}</p>'");
    }

    private async Task AnimateDiv()
    {
        await JS.InvokeVoidAsync("eval", @"
            const el = arguments[0];
            el.style.transition = 'transform 0.5s';
            el.style.transform = 'scale(1.2)';
            setTimeout(() => { el.style.transform = 'scale(1)'; }, 500);
        ", contentDiv);
    }
}</code></pre>

          <h2>Third-Party Library Integration</h2>
          <h3>Using Chart.js</h3>
          <pre class="syntax-highlighted" data-language="HTML"><code class="language-html"><!-- index.html -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script></code></pre>

          <pre class="syntax-highlighted" data-language="JavaScript"><code class="language-javascript">// wwwroot/js/chartjs-interop.js
window.chartJsInterop = {
    createChart: function (canvas, config) {
        return new Chart(canvas, config);
    },

    updateChart: function (chart, newData) {
        chart.data = newData;
        chart.update();
    },

    destroyChart: function (chart) {
        if (chart) {
            chart.destroy();
        }
    }
};</code></pre>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@page "/chartjs"
@inject IJSRuntime JS
@implements IAsyncDisposable

<h3>Chart.js Integration</h3>

<canvas @ref="chartCanvas" width="400" height="200"></canvas>

<button @onclick="UpdateChart" class="btn btn-primary mt-3">Update Data</button>

@code {
    private ElementReference chartCanvas;
    private IJSObjectReference? chartInstance;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            var config = new
            {
                type = "bar",
                data = new
                {
                    labels = new[] { "Red", "Blue", "Yellow", "Green", "Purple" },
                    datasets = new[]
                    {
                        new
                        {
                            label = "Votes",
                            data = new[] { 12, 19, 3, 5, 2 },
                            backgroundColor = new[]
                            {
                                "rgba(255, 99, 132, 0.2)",
                                "rgba(54, 162, 235, 0.2)",
                                "rgba(255, 206, 86, 0.2)",
                                "rgba(75, 192, 192, 0.2)",
                                "rgba(153, 102, 255, 0.2)"
                            }
                        }
                    }
                },
                options = new
                {
                    scales = new
                    {
                        y = new { beginAtZero = true }
                    }
                }
            };

            chartInstance = await JS.InvokeAsync<IJSObjectReference>(
                "chartJsInterop.createChart", chartCanvas, config);
        }
    }

    private async Task UpdateChart()
    {
        var random = new Random();
        var newData = new
        {
            labels = new[] { "Red", "Blue", "Yellow", "Green", "Purple" },
            datasets = new[]
            {
                new
                {
                    label = "Votes",
                    data = Enumerable.Range(0, 5).Select(_ => random.Next(1, 30)).ToArray()
                }
            }
        };

        if (chartInstance != null)
        {
            await JS.InvokeVoidAsync("chartJsInterop.updateChart", chartInstance, newData);
        }
    }

    public async ValueTask DisposeAsync()
    {
        if (chartInstance != null)
        {
            await JS.InvokeVoidAsync("chartJsInterop.destroyChart", chartInstance);
        }
    }
}</code></pre>

          <h2>Handling Prerendering</h2>
          <p>JavaScript interop is not available during prerendering. Always check before calling JS:</p>

          <pre class="syntax-highlighted" data-language="Razor"><code class="language-razor">@code {
    private bool isPrerendering = true;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            isPrerendering = false;
            
            // Now safe to call JavaScript
            await JS.InvokeVoidAsync("console.log", "Interactive phase started");
            
            StateHasChanged();
        }
    }

    private async Task CallJavaScript()
    {
        if (!isPrerendering)
        {
            await JS.InvokeVoidAsync("alert", "Hello!");
        }
    }
}</code></pre>

          <h2>Best Practices</h2>
          <ul>
            <li><strong>Always Use Async:</strong> All JS interop should be asynchronous</li>
            <li><strong>Handle Prerendering:</strong> Check OnAfterRender(firstRender) before JS calls</li>
            <li><strong>Dispose Resources:</strong> Dispose IJSObjectReference and DotNetObjectReference</li>
            <li><strong>Use Modules:</strong> Prefer ES6 modules over global functions for better encapsulation</li>
            <li><strong>Minimize JS Calls:</strong> Batch operations when possible to reduce interop overhead</li>
            <li><strong>Handle Exceptions:</strong> Wrap JS calls in try-catch for error handling</li>
            <li><strong>Avoid Long-Running JS:</strong> Keep JavaScript functions fast to prevent blocking</li>
            <li><strong>Use ElementReference:</strong> Pass ElementReference to manipulate specific DOM elements</li>
            <li><strong>Document JS Functions:</strong> Clearly document expected parameters and return types</li>
            <li><strong>Test Cross-Browser:</strong> JavaScript behavior may vary across browsers</li>
          </ul>
        </section>

        <!-- Best Practices Section -->
        <section id="best-practices" role="article">
          <h1>‚ú® Best Practices</h1>
          <span class="badge">guidelines</span>
          <span class="badge">tips</span>
          <span class="badge">patterns</span>
          
         
         
        </section>

        <!-- Resources Section -->
        <section id="resources" role="article">
          <h1>üìö Resources</h1>
          <span class="badge">docs</span>
          <span class="badge">community</span>
          <span class="badge">links</span>
          


          <hr />
          <div class="document-footer">
            <p>
              <strong>Last Updated:</strong> January 2026 | 
              <strong>Curated by:</strong> Murthy Vepa with ‚ù§Ô∏è | <strong>Powered by:</strong> GitHub Copilot
            </p>
          </div>
        </section>

       
        </div>
      </main>
    </div>
    
    <nav class="controls" role="navigation" aria-label="Pagination">
      <div class="btn-group" role="group">
        <button class="btn btn-outline-info btn-sm" id="prevBtn" title="Previous" aria-label="Previous concept">&nbsp;&lt;&nbsp;</button>
        <button class="btn btn-outline-info btn-sm" id="nextBtn" title="Next" aria-label="Next concept">&nbsp;&gt;&nbsp;</button>
      </div>
    </nav>
  </div>  <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarOffcanvas" aria-labelledby="sidebarLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="sidebarLabel">Contents</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body p-0">
      <ul class="list-group list-group-flush w-100" id="tocMobile"></ul>
    </div>
  </div>

  <script>
    // ---- Mermaid Initialization ----
    document.addEventListener('DOMContentLoaded', () => {
      if (window.mermaid) {
        window.mermaid.contentLoaded();
      }
    });

    // ---- Configuration ----
    const sectionConfig = [
      { id: "overview", title: "üìñ Overview", tags: ["intro", "overview", "basics", "what-is-blazor"] },
      { id: "architecture", title: "üèóÔ∏è Architecture", tags: ["architecture", "components", "render-tree", "razor"] },
      
      // Hosting Models Section
      { id: "hosting-models", title: "üéØ Hosting Models", tags: ["hosting", "deployment", "server", "wasm", "hybrid"] },
      { id: "blazor-server", title: "Blazor Server", tags: ["server", "interactive-ssr", "real-time"] },
      { id: "blazor-webassembly", title: "Blazor WebAssembly", tags: ["wasm", "client-side", "standalone", "pwa"] },
      { id: "blazor-web-app", title: "Blazor Web App", tags: ["full-stack", "mixed-rendering", "enhanced-navigation"] },
      { id: "blazor-hybrid", title: "Blazor Hybrid", tags: ["hybrid", "maui", "wpf", "winforms"] },
      
      // Fundamentals Section
      { id: "fundamentals", title: "üìö Fundamentals", tags: ["fundamentals", "concepts", "core", "basics"] },
      { id: "configuration", title: "Configuration", tags: ["configuration", "startup", "settings", "appsettings"] },
      { id: "environments", title: "Environments", tags: ["environments", "development", "production", "staging"] },
      { id: "logging", title: "Logging", tags: ["logging", "diagnostics", "debug", "trace"] },
      { id: "error-handling", title: "Error Handling", tags: ["error-handling", "exceptions", "error-boundaries"] },
      { id: "static-files", title: "Static Files", tags: ["static-files", "wwwroot", "css", "javascript"] },
      { id: "signalr", title: "SignalR Integration", tags: ["signalr", "real-time", "websockets", "hubs"] },
      
      { id: "components", title: "üß© Components", tags: ["components", "razor", "parameters", "events", "lifecycle"] },
      { id: "lifecycle", title: "üîÑ Lifecycle & Rendering", tags: ["lifecycle", "rendering", "state", "oninit", "onafterrender"] },
      { id: "data-binding", title: "üì° Data Binding", tags: ["binding", "one-way", "two-way", "events"] },
      { id: "forms", title: "üìù Forms & Validation", tags: ["forms", "validation", "editform", "input"] },
      { id: "dependency-injection", title: "üîå Dependency Injection", tags: ["di", "services", "injection", "scoped"] },
      { id: "routing", title: "üåê Routing & Navigation", tags: ["routing", "navigation", "parameters", "navigation-manager"] },
      { id: "state-management", title: "üîß State Management", tags: ["state", "cascading", "storage", "app-state"] },
      { id: "js-interop", title: "üé® JavaScript Interop", tags: ["javascript", "js-interop", "ijsruntime"] },
      { id: "performance", title: "üöÄ Performance", tags: ["performance", "virtualization", "lazy-loading", "prerendering"] },
      { id: "security", title: "üîí Security", tags: ["security", "authentication", "authorization", "identity"] },
      { id: "testing", title: "üß™ Testing", tags: ["testing", "unit-testing", "bunit", "integration"] },
      { id: "deployment", title: "üì¶ Deployment", tags: ["deployment", "azure", "iis", "docker", "cicd"] },
      { id: "best-practices", title: "üí° Best Practices", tags: ["guidelines", "tips", "recommendations", "patterns"] },
      { id: "resources", title: "üîó Resources", tags: ["docs", "community", "links", "learning"] }
    ];

    // ---- State & rendering ----
    const state = {
      index: 0,
      filtered: sectionConfig.map((_, i) => i), // indices
    };

    const els = {
      toc: document.getElementById('toc'),
      tocMobile: document.getElementById('tocMobile'),
      prev: document.getElementById('prevBtn'),
      next: document.getElementById('nextBtn'),
      toggleSidebar: document.getElementById('toggleSidebar'),
      themeToggle: document.getElementById('themeToggle'),
      main: document.getElementById('main'),
      sidebar: document.querySelector('nav.sidebar'),
      sidebarOffcanvas: document.getElementById('sidebarOffcanvas')
    };

    function buildTOC(){
      // Clear both TOC lists
      els.toc.innerHTML = '';
      els.tocMobile.innerHTML = '';
      
      state.filtered.forEach((idx) => {
        const s = sectionConfig[idx];
        
        // Check if this is a sub-item (Hosting Models and Fundamentals sub-items)
        const isSubItem = [
          'blazor-server', 'blazor-webassembly', 'blazor-web-app', 'blazor-hybrid',
          'configuration', 'environments', 'logging', 'error-handling', 'static-files', 'signalr'
        ].includes(s.id);
        
        // Desktop sidebar
        const liDesktop = document.createElement('li');
        liDesktop.className = isSubItem ? 'list-group-sub-item' : 'list-group-item';
        const aDesktop = document.createElement('a');
        aDesktop.href = `#${s.id}`;
        aDesktop.textContent = s.title;
        aDesktop.addEventListener('click', (e) => {
          e.preventDefault();
          navigateToId(s.id);
          closeSidebar();
        });
        liDesktop.appendChild(aDesktop);
        els.toc.appendChild(liDesktop);
        
        // Mobile offcanvas
        const liMobile = document.createElement('li');
        liMobile.className = isSubItem ? 'list-group-sub-item' : 'list-group-item';
        const aMobile = document.createElement('a');
        aMobile.href = `#${s.id}`;
        aMobile.textContent = s.title;
        aMobile.addEventListener('click', (e) => {
          e.preventDefault();
          navigateToId(s.id);
          closeSidebar();
        });
        liMobile.appendChild(aMobile);
        els.tocMobile.appendChild(liMobile);
      });
      highlightActiveTOC();
    }

    function setActiveByIndex(i){
      const ids = state.filtered.map(idx => sectionConfig[idx].id);
      document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
      const id = ids[i];
      const active = document.getElementById(id);
      if (active){
        active.classList.add('active');
        active.setAttribute('tabindex', '-1');
        active.focus({preventScroll:true});
      }
      updateControls();
      highlightActiveTOC();
      updateURLHash(id);
    }

    function updateControls(){
      const count = state.filtered.length;
      els.prev.disabled = state.index <= 0;
      els.next.disabled = state.index >= count - 1;
    }

    function filterTOC(query){
      const q = query.trim().toLowerCase();
      state.filtered = sectionConfig
        .map((s, i) => ({s, i}))
        .filter(({s}) => s.title.toLowerCase().includes(q) || s.tags.some(t => t.toLowerCase().includes(q)))
        .map(({i}) => i);

      state.index = Math.min(state.index, Math.max(0, state.filtered.length - 1));
      buildTOC();
      setActiveByIndex(state.index);
    }

    function navigate(delta){
      const count = state.filtered.length;
      const nextIndex = Math.min(Math.max(state.index + delta, 0), count - 1);
      if (nextIndex !== state.index){
        state.index = nextIndex;
        setActiveByIndex(state.index);
        // Scroll content to top
        const contentEl = document.querySelector('.content');
        if (contentEl) contentEl.scrollTop = 0;
      }
    }

    function navigateToId(id){
      const idxInFiltered = state.filtered.findIndex(fi => sectionConfig[fi].id === id);
      if (idxInFiltered !== -1){
        state.index = idxInFiltered;
        setActiveByIndex(state.index);
        // Scroll content to top
        const contentEl = document.querySelector('.content');
        if (contentEl) contentEl.scrollTop = 0;
      } else {
        state.filtered = sectionConfig.map((_, i) => i);
        buildTOC();
        navigateToId(id);
      }
    }

    function updateURLHash(id){
      const url = new URL(window.location);
      url.hash = id;
      history.replaceState(null, '', url);
    }

    function highlightActiveTOC(){
      const ids = state.filtered.map(idx => sectionConfig[idx].id);
      const activeId = ids[state.index];
      // Highlight desktop sidebar
      els.toc.querySelectorAll('a').forEach(a => {
        const isActive = a.getAttribute('href') === `#${activeId}`;
        a.classList.toggle('active', isActive);
        // Also toggle active on parent li for sub-items
        if (a.parentElement.classList.contains('list-group-sub-item')) {
          a.parentElement.classList.toggle('active', isActive);
        }
      });
      // Highlight mobile offcanvas
      els.tocMobile.querySelectorAll('a').forEach(a => {
        const isActive = a.getAttribute('href') === `#${activeId}`;
        a.classList.toggle('active', isActive);
        // Also toggle active on parent li for sub-items
        if (a.parentElement.classList.contains('list-group-sub-item')) {
          a.parentElement.classList.toggle('active', isActive);
        }
      });
    }

    function openSidebar(){
      const offcanvas = new bootstrap.Offcanvas(document.getElementById('sidebarOffcanvas'));
      offcanvas.show();
    }
    function closeSidebar(){
      const offcanvasElement = document.getElementById('sidebarOffcanvas');
      const offcanvas = bootstrap.Offcanvas.getInstance(offcanvasElement);
      if(offcanvas) offcanvas.hide();
    }

    // ---- Events ----
    els.prev.addEventListener('click', () => navigate(-1));
    els.next.addEventListener('click', () => navigate(1));

    // Keyboard navigation
    window.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') navigate(-1);
      else if (e.key === 'ArrowRight') navigate(1);
      else if (e.key === 'Escape') closeSidebar();
    });

    // Deep linking on load/hash change
    window.addEventListener('hashchange', () => {
      const id = location.hash.replace('#','');
      if (id) navigateToId(id);
    });

    // Sidebar toggle (mobile)
    els.toggleSidebar.addEventListener('click', () => {
      openSidebar();
    });

    // Restore theme
    (function(){
      try {
        const saved = localStorage.getItem('concepts-theme');
        if (saved) { 
          document.documentElement.setAttribute('data-theme', saved);
          els.themeToggle.textContent = saved === 'light' ? 'üåó' : 'üåô';
        }
      } catch {}
    })();

    // Initial render
    buildTOC();
    
    // Navigate to hash if present, otherwise show first section
    const initialId = location.hash.replace('#','');
    if (initialId){ 
    navigateToId(initialId); 
    } else {
    setActiveByIndex(0);
    // Scroll content to top on initial load
    const contentEl = document.querySelector('.content');
    if (contentEl) contentEl.scrollTop = 0;
    }

  </script>
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>