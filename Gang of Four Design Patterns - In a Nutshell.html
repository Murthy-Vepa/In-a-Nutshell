<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='80' font-size='80'>üé®</text></svg>" />
  <title>Gang of Four Design Patterns  - In a Nutshell</title>
  <meta name="description" content="A comprehensive guide to Gang of Four Design Patterns." />
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root{
      --bg: #ffffff;
      --fg: #0f172a;
      --muted: #64748b;
      --accent: #3b82f6;
      --accent-light: #dbeafe;
      --border: #e2e8f0;
      --sidebar-bg: #ffffff;
      --sidebar-fg: #0f172a;
      --code-bg: linear-gradient(90deg, rgba(59, 130, 246, 0.08) 0%, rgba(59, 130, 246, 0.12) 100%);
      --focus: #10b981;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
      --shadow-md: 0 4px 6px rgba(0,0,0,0.1), 0 2px 4px rgba(0,0,0,0.06);
      --shadow-lg: 0 10px 20px rgba(0,0,0,0.12), 0 6px 6px rgba(0,0,0,0.08);
      --gradient: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    }
    
    /* Bootstrap Gradient Utility Classes */
    .bg-gradient-blue { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%) !important; }
    .bg-gradient-green { background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%) !important; }
    .bg-gradient-yellow { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%) !important; }
    .bg-gradient-pink { background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%) !important; }
    .bg-gradient-purple { background: linear-gradient(135deg, #e9d5ff 0%, #d8b4fe 100%) !important; }
    .bg-gradient-teal { background: linear-gradient(135deg, #ccfbf1 0%, #99f6e4 100%) !important; }
    .bg-gradient-blue-dark { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important; }
    .bg-gradient-gray { background: linear-gradient(135deg, #64748b 0%, #475569 100%) !important; }
    .bg-gradient-purple-dark { background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%) !important; }
    .bg-gradient-teal-dark { background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%) !important; }
    .bg-gradient-green-dark { background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important; }
    .bg-gradient-red { background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%) !important; }
    .bg-gradient-green-light { background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%) !important; }
    .bg-gradient-blue-sky { background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%) !important; }
    .bg-gradient-red-dark { background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%) !important; }
    .bg-gradient-indigo { background: linear-gradient(135deg, #4f46e5 0%, #4338ca 100%) !important; }
    .bg-gradient-green-medium { background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important; }
    .bg-gradient-orange { background: linear-gradient(135deg, #f97316 0%, #ea580c 100%) !important; }
    .bg-gradient-violet { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%) !important; }
    .bg-gradient-lime { background: linear-gradient(135deg, #84cc16 0%, #65a30d 100%) !important; }
    .bg-gradient-sky { background: linear-gradient(135deg, #0284c7 0%, #0369a1 100%) !important; }
    
    /* Apply theme colors to Bootstrap elements */
    body { background-color: var(--bg); color: var(--fg); overflow: hidden; }
    .navbar { background-color: var(--fg) !important; border-bottom: none !important; box-shadow: var(--shadow-md) !important; }
    .navbar-brand { cursor: pointer; color: var(--bg) !important; font-weight: 600; letter-spacing: 0px; }
    .navbar-toggler-icon { 
      filter: invert(1);
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%2896, 165, 250, 0.9%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
    }
    
    .btn-outline-secondary { border-color: var(--border) !important; color: var(--fg) !important; }
    .btn-outline-secondary:hover { background-color: var(--accent-light) !important; border-color: var(--accent) !important; color: var(--accent) !important; }
    
    /* Sidebar - Modern Design */
    nav.sidebar { 
      background: linear-gradient(180deg, #f3f4f6 0%, #e5e7eb 100%); 
      border-right: 1px solid rgba(0, 0, 0, 0.05) !important;  
      overflow-y: auto; 
      box-shadow: 4px 0 16px rgba(0, 0, 0, 0.06);
      padding-top: 0;
    }
    
    .menu-header {  
      background: linear-gradient(135deg, rgba(0, 0, 0, 0.15), rgba(0, 0, 0, 0.1) 100%);
      font-weight: bold; 
      padding: 1.25rem 1.25rem; 
      letter-spacing: 0px; 
      font-size: 1.1rem;
      position: relative;
      overflow: hidden;
      border: none;
      border-bottom: 2px solid #a5aab3;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);
      color: #0c346c;
      text-shadow: none;
      margin: 0;
      text-transform: none;
    }
    .menu-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
      transition: left 0.6s ease;
    }
    .menu-header:hover::before {
      left: 100%;
    }
    .menu-header::after {
      content: 'üìã';
      position: absolute;
      right: 1.5rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.3rem;
      opacity: 0.9;
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
    }
    
    .toc { 
      list-style: none; 
      padding: 0rem 0; 
      margin: 0; 
      background: transparent;
    }
    .toc li { 
      margin: 0; 
    }
    
    /* Section grouping */
    .toc li[data-group="overview"] { margin-bottom: 0.75rem; }
    .toc li[data-group="solid"]:first-of-type { 
      margin-top: 1rem; 
      border-top: 2px solid rgba(59, 130, 246, 0.15);
      padding-top: 1rem;
    }
    .toc li[data-group="other-principles"]:first-of-type { 
      margin-top: 1rem; 
      border-top: 2px solid rgba(16, 185, 129, 0.15);
      padding-top: 1rem;
    }
    .toc li[data-group="resources"] { 
      margin-top: 1rem; 
      border-top: 2px solid rgba(100, 116, 139, 0.15);
      padding-top: 1rem;
    }
    
    .list-group-item { 
      background: transparent; 
      border-color: transparent; 
      padding: 0; 
      margin: 0.25rem 0.75rem; 
      border-radius: 0rem;
      transition: all 0.2s ease;
    }
    .list-group-item a { 
      color: #1f2937; 
      text-decoration: none; 
      display: flex; 
      flex-direction: column; 
      align-items: flex-start; 
      gap: 0.4rem; 
      border-left: 3px solid transparent; 
      padding: 0.85rem 1.25rem; 
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
      font-weight: 500; 
      border-radius: 0rem;
      font-size: 0.95rem;
      position: relative;
      overflow: hidden;
      background: linear-gradient(90deg, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0.1) 100%);
      border: 1px solid rgba(0, 0, 0, 0.06);
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }
    .list-group-item a::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 4px;
      background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%);
      transform: scaleY(0);
      transition: transform 0.3s ease;
      border-radius: 0 0px 0px 0;
    }
    .list-group-item a::after {
      content: '‚ñ∂';
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%) scale(0.7);
      font-size: 0.7rem;
      color: #9ca3af;
      opacity: 0;
      transition: all 0.3s ease;
    }
    .list-group-item a:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.08) 100%); 
      border-left-color: transparent;
      color: #1e40af;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2), 0 2px 4px rgba(0, 0, 0, 0.08);
      border-color: rgba(59, 130, 246, 0.2);
      text-decoration: none;
    }
    .list-group-item a:hover::before {
      transform: scaleY(1);
    }
    .list-group-item a:hover::after {
      opacity: 1;
      transform: translateY(-50%) scale(1);
      color: #3b82f6;
    }
    .list-group-item a.active { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.22) 0%, rgba(59, 130, 246, 0.12) 100%); 
      color: #1e40af; 
      font-weight: 600; 
      border-left-color: transparent;
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.3);
      border-color: rgba(59, 130, 246, 0.3);
    }
    .list-group-item a.active::before {
      transform: scaleY(1);
      background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%);
      width: 5px;
      box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
    }
    .list-group-item a.active::after {
      opacity: 1;
      color: #2563eb;
      transform: translateY(-50%) scale(1);
    }
    .list-group-item a.active:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.28) 0%, rgba(59, 130, 246, 0.16) 100%); 
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }
    
    /* Sub-items tree connectors */
    .list-group-sub-item a::before { 
      content: '‚îú‚îÄ';
      font-size: 0.85rem;
      margin-right: 0.5rem;
      color: #6b7280;
      z-index: 1;
      position: relative;
    }
    
    /* Sub-items styling - similar to main items but smaller and indented */
    .list-group-sub-item {
      background: transparent; 
      border-color: transparent; 
      padding: 0px; 
      margin: 0.2rem 0.75rem 0.2rem 1.5rem;
      border-radius: 0rem;
      transition: all 0.2s ease;
      position: relative;
      list-style-type: none;
    }
    .list-group-sub-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 4px;
      background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%);
      transform: scaleY(0);
      transition: transform 0.3s ease;
      border-radius: 0 0px 0px 0;
      z-index: 1;
    }
    .list-group-sub-item a {
      color: #1f2937; 
      text-decoration: none; 
      display: block;
      border-left: 3px solid transparent; 
      padding: 0.65rem 1rem 0.65rem 2.00rem;
      transition: all 0.2s ease; 
      font-weight: 500; 
      border-radius: 0rem;
      font-size: 0.8125rem;
      line-height: 1.4;
      position: relative;
      overflow: hidden;
      background: rgba(255, 255, 255, 0.5);
      border: 1px solid rgba(0, 0, 0, 0.04);
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
    }
    
    /* Sub-items hover and active states - same as main items */
    .list-group-sub-item a::after {
      content: '‚ñ∂';
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%) scale(0.7);
      font-size: 0.7rem;
      color: #9ca3af;
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .list-group-sub-item:hover::before {
      transform: scaleY(1);
    }
    .list-group-sub-item a:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.08) 100%); 
      border-left-color: transparent;
      color: #1e40af;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2), 0 2px 4px rgba(0, 0, 0, 0.08);
      border-color: rgba(59, 130, 246, 0.2);
      text-decoration: none;
    }
    .list-group-sub-item a:hover::after {
      opacity: 1;
      transform: translateY(-50%) scale(1);
      color: #3b82f6;
    }
    
    .list-group-sub-item.active::before {
      transform: scaleY(1);
      width: 5px;
      box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
    }
    .list-group-sub-item a.active { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.22) 0%, rgba(59, 130, 246, 0.12) 100%); 
      color: #1e40af; 
      font-weight: 600; 
      border-left-color: transparent;
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.3);
      border-color: rgba(59, 130, 246, 0.3);
    }
    .list-group-sub-item a.active::after {
      opacity: 1;
      color: #2563eb;
      transform: translateY(-50%) scale(1);
    }
    .list-group-sub-item a.active:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.28) 0%, rgba(59, 130, 246, 0.16) 100%); 
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }
    
    .list-group-item a::after {
      content: '‚ñ∂';
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%) scale(0.7);
      font-size: 0.7rem;
      color: #9ca3af;
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .list-group-item a:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.08) 100%); 
      border-left-color: transparent;
      color: #1e40af;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2), 0 2px 4px rgba(0, 0, 0, 0.08);
      border-color: rgba(59, 130, 246, 0.2);
      text-decoration: none;
    }
    .list-group-item a:hover::before {
      transform: scaleY(1);
    }
    .list-group-item a:hover::after {
      opacity: 1;
      transform: translateY(-50%) scale(1);
      color: #3b82f6;
    }
    .list-group-item a.active { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.22) 0%, rgba(59, 130, 246, 0.12) 100%); 
      color: #1e40af; 
      font-weight: 600; 
      border-left-color: transparent;
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.3);
      border-color: rgba(59, 130, 246, 0.3);
    }
    .list-group-item a.active::after {
      opacity: 1;
      color: #2563eb;
      transform: translateY(-50%) scale(1);
    }
    .list-group-item a.active:hover { 
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.28) 0%, rgba(59, 130, 246, 0.16) 100%); 
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }
    
    /* Badge styling */
    .badge { font-size: 0.8rem; padding: 0.15rem 0.4rem; background: var(--accent-light); color: var(--accent); border: 1px solid var(--accent); font-weight: 600; border-radius: 0.25rem; font-style: normal; line-height: 1.2; opacity: 0.9; }
    .badge { background: var(--accent); color: white; border: none; font-size: 0.6rem; padding: 0.25rem 0.5rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; display: inline-block; margin-top: 0.5rem; margin-right: 0.35rem; }
    .list-group-item a:hover .badge { opacity: 1; background: var(--accent); color: white; }
    .list-group-item a.active .badge { background: rgba(255, 255, 255, 0.3); color: white; border-color: rgba(255, 255, 255, 0.6); font-weight: 600; opacity: 1; }
        
    /* Content */
    .content { width: 100%; max-width: 100%; margin: 0 auto; background: #ffffff; padding: 2rem; border-radius: 0.75rem; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); }
    section { display: none !important; margin-bottom: 2rem; }
    section.active { display: block !important; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    
    h1 { font-size: 2rem; font-weight: 700; margin: 1rem 0 0.25rem 0; letter-spacing: -0.5px; color: var(--fg); display: block; border: none; }
    h2 { font-size: 1.5rem; font-weight: 600; margin: 1.5rem 0 0.75rem 0; color: var(--fg); border-bottom: 2px solid var(--accent-light); padding-bottom: 0.5rem; }
    h3 { font-size: 1.1rem; color: var(--accent); font-weight: 600; margin: 1rem 0 0.5rem 0; }
    h4 { font-size: 0.8rem; color: var(--fg); font-weight: 600; margin: 0.75rem 0 0.4rem 0; }
    p { margin: 1rem 0; line-height: 1.65; color: var(--fg); }
    ul, ol { margin: 1rem 0; padding-left: 2rem; }
    li { margin: 0.5rem 0; color: var(--fg); }
    
    code { background: var(--code-bg); border: 1px solid var(--border); padding: 0.2rem 0.5rem; font-family: ui-monospace, 'Cascadia Code', 'Source Code Pro', monospace; font-size: 0.9em; color: var(--accent); border-radius: 0.5rem; }
    pre { background: var(--code-bg); border: 0px solid var(--border); padding: 1rem; border-radius: 0.5rem; overflow: auto; box-shadow: var(--shadow-sm); margin: 1rem 0; }
    pre code { padding: 0; background: transparent; border: none; color: var(--fg); }
    
    .callout { border-left: 5px solid var(--accent); background: var(--accent-light); padding: 1rem 1.2rem; margin: 1.5rem 0; border-radius: 0.5rem; box-shadow: var(--shadow-sm); font-weight: 500; color: var(--fg); }
    
    /* Table styling */
    .table { color: var(--fg); }
    .table thead th { background: var(--accent-light); color: var(--accent); border-color: var(--border); font-weight: 600; }
    .table tbody td { border-color: var(--border); }
    .table-striped tbody tr:nth-of-type(odd) { background-color: rgba(0,0,0,0.02); }
    .table-striped tbody tr:hover { background-color: var(--accent-light); }
    
    /* Controls/Pagination */
    .controls { opacity: 0.5; position: fixed; bottom: 0.25rem; right: 1rem; width: auto; z-index: 1000; background: transparent; display: flex; align-items: center; justify-content: center; gap: 0rem; padding: 0; min-height: 40px; }
    @media (max-width: 991px) {
      .controls { bottom: 0.25rem; right: 1rem; }
      .menu-header { color: var(--focus); }
    }
    .controls:hover { opacity: 1; }
    
    .page-indicator { color: var(--accent); font-weight: 600; font-size: 0.875rem; }
    .btn-group .btn { margin: 0px 2px; padding: 0.2rem 0.5rem; background: var(--accent); color: white; border-color: var(--accent); font-size: 1rem; font-weight: bold; }
    .btn-group .btn:hover { background: var(--accent); }
    .btn-group .btn + .btn { margin-left: -1px; }
    
    /* Mobile/Offcanvas */
    .offcanvas { background: var(--bg) !important; }
    .offcanvas-header { border-bottom: 1px solid var(--border); }
    .offcanvas-title { color: var(--fg); font-weight: 600; }
    .btn-close { color: var(--fg); }
    
    /* Scrollbar */
    nav.sidebar::-webkit-scrollbar { width: 6px; }
    nav.sidebar::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.05); }
    nav.sidebar::-webkit-scrollbar-thumb { background: rgba(0, 0, 0, 0.2); border-radius: 0px; }
    nav.sidebar::-webkit-scrollbar-thumb:hover { background: rgba(0, 0, 0, 0.3); }
    
    /* Mermaid Diagrams */
    .mermaid {
      background: #ffffff;
      border: 1px solid #e2e8f0;
      border-radius: 0.5rem;
      padding: 2rem;
      margin: 1.5rem 0;
      min-height: 400px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: visible;
      position: relative;
    }
    .mermaid.rendered {
      min-height: 0;
    }
    .mermaid svg {
      max-width: 100%;
      height: auto;
      min-height: 300px;
      transition: transform 0.3s ease;
      transform-origin: center center;
    }
    .mermaid.zoomed {
      overflow: auto;
      cursor: grab;
    }
    .mermaid.zoomed:active {
      cursor: grabbing;
    }
    .mermaid svg text {
      font-size: 14px !important;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif !important;
    }
    
    /* Mermaid title styling */
    .mermaid svg text, .diagram-modal-content svg text {
      font-size: 1rem !important;
      font-weight: bold !important;
      fill: var(--fg) !important;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif !important;
    }

    .mermaid svg *
    {
        color: #333;
    }

    .mermaid[data-processed="true"] {
      min-height: 0;
    }
    
    .mermaid svg {
      max-width: 100%;
      height: auto;
      display: inline-block;
    }
    
    /* Zoom controls */
    .zoom-controls {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 10;
      opacity: 0.5;
      transition: opacity 0.3s ease;
    }
    .mermaid:hover .zoom-controls {
      opacity: 1;
    }
    .zoom-btn {
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 0.25rem;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      transition: all 0.2s ease;
    }
    .zoom-btn:hover {
      background: #2563eb;
      transform: scale(1.1);
    }

    /* Modal for diagram zoom */
    .diagram-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.95);
      z-index: 9999;
      align-items: center;
      justify-content: center;
      padding: 0;
    }
    .diagram-modal.active {
      display: flex;
    }
    .diagram-modal-content {
      position: relative;
      width: 100%;
      height: 100%;
      background: white;
      border-radius: 0;
      padding: 3rem 3rem 3rem 3rem;
      overflow: auto;
      display: flex;
      align-items: flex-start;
      justify-content: center;
    }
    .diagram-modal-content svg {
      max-width: 100%;
      height: auto;
    }
    .modal-close {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      background: #ef4444;
      color: white;
      border: none;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      transition: all 0.2s ease;
      z-index: 10000;
    }
    .modal-close:hover {
      background: #dc2626;
      transform: scale(1.1);
    }
    .modal-zoom-controls {
      position: fixed;
      bottom: 1.5rem;
      right: 1.5rem;
      display: flex;
      gap: 0.5rem;
      z-index: 10000;
      padding: 0rem;
      border-radius: 0.4rem;
    }
    .modal-zoom-btn {
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 0.25rem;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      transition: all 0.2s ease;
    }
    .modal-zoom-btn:hover {
      background: #2563eb;
      transform: scale(1.1);
    }
    
    /* Utilities */
    .search { height: 0; overflow: hidden; padding: 0 !important; }
    .search input { display: none; }
    .min-vh-100 { min-height: 100vh; }
    .skip-link { position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden; }
    .skip-link:focus { position: static; width: auto; height: auto; padding: 0.4rem 0.6rem; background: var(--accent); color: white; border-radius: 0.4rem; }
    
    /* Override Bootstrap defaults for theme */
    a { color: var(--accent); }
    a:hover { color: var(--accent); text-decoration: underline; }
    
    /* Responsive - keep sidebar visible on desktop, offcanvas on mobile */
    @media (max-width: 991px) {
      nav.sidebar { display: none; }
      #main { width: 100%; }
      .row { --bs-gutter-x: 0; }
    }
    
    /* Layout - prevent unnecessary scrolling */
    html, body { height: 100%; margin: 0; }
    #appContainer { display: flex; flex-direction: column; height: calc(100vh - 50px); }
    #mainRow { flex: 1; overflow: hidden; display: flex; }
    nav.sidebar { overflow-y: auto; max-height: 100%; position: relative; padding-bottom: 0px; }
    #main { overflow: hidden; display: flex; flex-direction: column; height: 100%; -webkit-tap-highlight-color: transparent; outline: none; border: none; }
    #main:focus { outline: none; }
    .content { overflow-y: auto; flex: 1; width: 100%; min-height: 0; padding: 0rem 1.5rem 0rem 1.5rem; }
    
    /* Contact Info */
    .contact-info {
      font-weight: 400 !important;
      padding: 0.5rem 0.75rem;
      font-size: 0.75rem;
      color: var(--accent-light);
      margin: 0;
      opacity: 0.5;
      white-space: nowrap;
      cursor: pointer;
    }
    .contact-info:hover {
      opacity: 0.9;
      text-decoration: none;
    }
    @media (max-width: 991px) {
      .navbar-brand {
        font-size: 1rem !important;
        flex: 1;
      }
      .contact-info {
        font-size: 0.7rem;
        padding: 0.25rem 0.5rem;
      }
    }
    @media (max-width: 576px) {
      .navbar-brand {
        font-size: 0.9rem !important;
      }
      .contact-info {
        font-size: 0.65rem;
        padding: 0.2rem 0.4rem;
      }
    }

    .list-style-none {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    /* JSON Syntax Highlighting */
    pre code.language-json {
      display: block;
      white-space: pre;
      font-family: 'Cascadia Code', 'Consolas', 'Monaco', 'Courier New', monospace;
    }

    pre code.language-json .json-key {
      color: #0451a5;
      font-weight: 500;
    }

    pre code.language-json .json-string {
      color: #a31515;
    }

    pre code.language-json .json-number {
      color: #098658;
    }

    pre code.language-json .json-boolean {
      color: #0000ff;
      font-weight: 600;
    }

    pre code.language-json .json-null {
      color: #0000ff;
      font-weight: 600;
    }

    pre code.language-json .json-punctuation {
      color: #333;
    }

    /* SQL Syntax Highlighting */
    pre code.language-sql {
      display: block;
      white-space: pre;
      font-family: 'Cascadia Code', 'Consolas', 'Monaco', 'Courier New', monospace;
    }

    pre code.language-sql .sql-keyword {
      color: #0000ff;
      font-weight: 600;
      text-transform: uppercase;
    }

    pre code.language-sql .sql-string {
      color: #a31515;
    }

    pre code.language-sql .sql-number {
      color: #098658;
    }

    pre code.language-sql .sql-comment {
      color: #008000;
      font-style: italic;
    }

    pre code.language-sql .sql-function {
      color: #795e26;
      font-weight: 500;
    }

    pre code.language-sql .sql-operator {
      color: #666;
      font-weight: 500;
    }

    /* Language Label for Code Blocks */
    pre[data-language]::before {
      content: attr(data-language);
      position: absolute;
      top: 8px;
      right: 12px;
      font-size: 0.75em;
      color: #6a737d;
      text-transform: uppercase;
      font-weight: 600;
      letter-spacing: 0.5px;
      background: var(--bg);
      padding: 0.2rem 0.5rem;
      border-radius: 0.25rem;
      border: 1px solid var(--border);
    }

    /* Enhanced pre/code styling for syntax highlighted blocks */
    pre.syntax-highlighted {
      position: relative;
      background: var(--code-bg);
      border: 1px solid var(--border);
      padding: 1.5rem 1rem 1rem 1rem;
      border-radius: 0.5rem;
      overflow-x: auto;
      box-shadow: var(--shadow-sm);
      margin: 1rem 0;
    }

    pre.syntax-highlighted code {
      background: transparent;
      padding: 0;
      border: none;
      color: var(--fg);
      font-size: 0.875rem;
      line-height: 1.6;
    }

    ul
    {
        list-style-type: none;
    }
  /* Document Footer */
    .document-footer {
      text-align: center;
      padding: 20px;
      background-color: #f8f9fa;
      border-radius: 8px;
      margin-top: 20px;
    }
    .document-footer p {
      margin: 0;
      font-size: 14px;
      color: #6c757d;
      line-height: 1.6;
    }
    .document-footer strong {
      color: #495057;
    }  
  </style>
  <!-- Mermaid.js for diagrams -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
  <script>
    // Initialize Mermaid with proper configuration
    document.addEventListener('DOMContentLoaded', function() {

      mermaid.initialize({
        startOnLoad: false,
        theme: 'base',
        securityLevel: 'loose',
        logLevel: 'error',
        themeVariables: {
         'fontFamily': 'Segoe UI'
        },
        flowchart: {
          useMaxWidth: true,
          htmlLabels: true,
          curve: 'basis',
        },
        sequence: {
          useMaxWidth: false,
          htmlLabels: true,
          diagramMarginX: 50,
          diagramMarginY: 10
        }
      });
      
      // Render all diagrams
      renderMermaidDiagrams();
    });
    
    async function renderMermaidDiagrams() {
      const diagrams = document.querySelectorAll('.mermaid');
      
      for (let i = 0; i < diagrams.length; i++) {
        const diagram = diagrams[i];
        const code = diagram.textContent.trim();
        
        // Store original code
        if (!diagram.hasAttribute('data-original-code')) {
          diagram.setAttribute('data-original-code', code);
        }
        
        try {
          const { svg } = await mermaid.render('mermaid-diagram-' + i, code);
          diagram.innerHTML = svg;
          diagram.setAttribute('data-processed', 'true');
          
          // Add zoom controls
          addZoomControls(diagram);
        } catch (error) {
          console.error('Mermaid rendering error for diagram ' + i + ':', error);
          diagram.innerHTML = '<div style="color: red; padding: 1rem; border: 2px solid red; border-radius: 0.5rem;">Error rendering diagram: ' + error.message + '</div>';
        }
      }
    }
    
    // Add zoom controls to mermaid diagrams
    function addZoomControls(diagram) {
      const controls = document.createElement('div');
      controls.className = 'zoom-controls';
      controls.innerHTML = `
        <button class="zoom-btn" data-action="expand" title="Expand View">‚õ∂</button>
      `;
      
      diagram.style.position = 'relative';
      diagram.insertBefore(controls, diagram.firstChild);
      
      // Expand to modal
      controls.addEventListener('click', (e) => {
        const btn = e.target.closest('.zoom-btn');
        if (!btn) return;
        
        openDiagramModal(diagram);
      });
    }

    // Open diagram in modal
    function openDiagramModal(diagram) {
      // Create modal if it doesn't exist
      let modal = document.getElementById('diagram-modal');
      if (!modal) {
        modal = document.createElement('div');
        modal.id = 'diagram-modal';
        modal.className = 'diagram-modal';
        modal.innerHTML = `
          <button class="modal-close" id="modal-close">√ó</button>
          <div class="diagram-modal-content" id="modal-diagram-content"></div>
          <div class="modal-zoom-controls">
            <button class="modal-zoom-btn" data-action="zoom-in" title="Zoom In">+</button>
            <button class="modal-zoom-btn" data-action="zoom-out" title="Zoom Out">‚àí</button>
            <button class="modal-zoom-btn" data-action="reset" title="Reset Zoom">‚ü≤</button>
          </div>
        `;
        document.body.appendChild(modal);
        
        // Close modal handlers
        modal.querySelector('#modal-close').addEventListener('click', closeDiagramModal);
        modal.addEventListener('click', (e) => {
          if (e.target === modal) closeDiagramModal();
        });
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeDiagramModal();
          }
        });
        
        // Zoom controls in modal
        let scale = 1;
        let translateX = 0;
        let translateY = 0;
        
        modal.querySelector('.modal-zoom-controls').addEventListener('click', (e) => {
          const btn = e.target.closest('.modal-zoom-btn');
          if (!btn) return;
          
          const action = btn.dataset.action;
          const svg = modal.querySelector('svg');
          if (!svg) return;
          
          if (action === 'zoom-in') {
            scale = Math.min(scale + 0.1, 5);
          } else if (action === 'zoom-out') {
            scale = Math.max(scale - 0.1, 0.5);
          } else if (action === 'reset') {
            scale = 1;
            translateX = 0;
            translateY = 0;
          }
          
          svg.style.transform = `scale(${scale}) translate(${translateX / scale}px, ${translateY / scale}px)`;
        });
      }
      
      // Clone diagram content
      const svg = diagram.querySelector('svg');
      if (svg) {
        const content = modal.querySelector('#modal-diagram-content');
        content.innerHTML = '';
        const clonedSvg = svg.cloneNode(true);
        clonedSvg.style.transform = 'scale(1)';
        clonedSvg.style.maxWidth = '100%';
        clonedSvg.style.height = 'auto';
        content.appendChild(clonedSvg);
      }
      
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeDiagramModal() {
      const modal = document.getElementById('diagram-modal');
      if (modal) {
        modal.classList.remove('active');
        document.body.style.overflow = '';
      }
    }
    
    // Re-render on theme change
    window.rerenderMermaid = async function() {
      const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
      
      mermaid.initialize({
        startOnLoad: false,
        theme: isDark ? 'base' : 'base',
        securityLevel: 'loose',
        flowchart: {
          useMaxWidth: true,
          htmlLabels: true,
          curve: 'basis',
        },
        sequence: {
          useMaxWidth: false,
          htmlLabels: true,
          diagramMarginX: 50,
          diagramMarginY: 10
        }
      });
      
      const diagrams = document.querySelectorAll('.mermaid[data-processed="true"]');
      for (let i = 0; i < diagrams.length; i++) {
        const diagram = diagrams[i];
        const code = diagram.getAttribute('data-original-code');
        
        if (code) {
          try {
            const { svg } = await mermaid.render('mermaid-diagram-rerender-' + i + '-' + Date.now(), code);
            diagram.innerHTML = svg;
          } catch (error) {
            console.error('Mermaid re-rendering error:', error);
          }
        }
      }
    };
  </script>
</head>
<body>
  <nav class="navbar navbar-expand-lg sticky-top" aria-label="Top bar">
    <div class="container-fluid d-flex align-items-center">
      <button class="navbar-toggler me-2" id="toggleSidebar" type="button" aria-label="Toggle sidebar">
        <span class="navbar-toggler-icon"></span>
      </button>
<span class="navbar-brand mb-0 h1 me-auto">üé® Gang of Four Design Patterns - In a Nutshell</span>
<span class="contact-info mb-0">ü§ù Curated by Murthy Vepa</span>
    </div>      
  </nav>

  <div id="appContainer">
    <div class="row g-0" id="mainRow">
      <nav class="col-lg-3 border-end sidebar" id="sidebar" aria-label="Table of contents">
        <div class="menu-header py-2">Contents</div>
        <ul class="list-group list-group-flush toc" id="toc"></ul>
      </nav>

      <main id="main" class="col-lg-9 d-flex flex-column" tabindex="-1">
        <div class="content" id="content">
        <!-- Overview Section -->
        <section id="overview" role="article">
          <h1>üé® Gang of Four Design Patterns</h1>
          <span class="badge">intro</span>
          <span class="badge">overview</span>
          <span class="badge">gof</span>
          
          <h2>What are Design Patterns?</h2>
          <p>Design patterns are <strong>typical solutions to commonly occurring problems in software design</strong>. They are like pre-made blueprints that you can customize to solve a recurring design problem in your code.</p>
          
          <p>The pattern is not a specific piece of code, but a <strong>general concept for solving a particular problem</strong>. You can follow the pattern details and implement a solution that suits the realities of your own program.</p>
          
          <div class="callout">
            <strong>üí° Key Insight:</strong> Patterns are proven solutions to common problems. They provide a shared vocabulary for developers and encapsulate best practices from decades of software development experience.
          </div>
          
          <h2>The Gang of Four</h2>
          <p>In 1994, four authors‚Äî<strong>Erich Gamma, Richard Helm, Ralph Johnson, and John Vlissides</strong>‚Äîpublished the seminal book <em>"Design Patterns: Elements of Reusable Object-Oriented Software"</em>. This book cataloged <strong>23 design patterns</strong> and is widely regarded as the foundation of design pattern literature.</p>
          
          <p>The authors are collectively known as the <strong>"Gang of Four" (GoF)</strong>, and their patterns have become a fundamental part of software engineering education and practice.</p>
          
          <h2>Pattern Categories</h2>
          <p>The 23 GoF patterns are organized into three main categories based on their purpose:</p>
          
          <table class="table table-striped">
            <thead>
              <tr>
                <th width="30%">Category</th>
                <th width="50%">Purpose</th>
                <th width="20%">Count</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>üèóÔ∏è Creational Patterns</strong></td>
                <td>Provide various object creation mechanisms that increase flexibility and reuse of existing code</td>
                <td>5 patterns</td>
              </tr>
              <tr>
                <td><strong>üîß Structural Patterns</strong></td>
                <td>Explain how to assemble objects and classes into larger structures while keeping them flexible and efficient</td>
                <td>7 patterns</td>
              </tr>
              <tr>
                <td><strong>üé≠ Behavioral Patterns</strong></td>
                <td>Take care of effective communication and the assignment of responsibilities between objects</td>
                <td>11 patterns</td>
              </tr>
            </tbody>
          </table>

          <div class="mermaid">
graph LR
%%{init: { "theme": "base", "fontFamily": "Segoe UI", "flowchart": { "curve": "basis", "nodeSpacing": 25 } } }%%
    A[Gang of Four Patterns] --> B[Creational
    5 Patterns]
    A --> C[Structural
    7 Patterns]
    A --> D[Behavioral
    11 Patterns]
    
    B --> B1[Factory Method]
    B --> B2[Abstract Factory]
    B --> B3[Builder]
    B --> B4[Prototype]
    B --> B5[Singleton]
    
    C --> C1[Adapter]
    C --> C2[Bridge]
    C --> C3[Composite]
    C --> C4[Decorator]
    C --> C5[Facade]
    C --> C6[Flyweight]
    C --> C7[Proxy]
    
    D --> D1[Chain of Resp.]
    D --> D2[Command]
    D --> D3[Iterator]
    D --> D4[Mediator]
    D --> D5[Memento]
    D --> D6[Observer]
    D --> D7[State]
    D --> D8[Strategy]
    D --> D9[Template Method]
    D --> D10[Visitor]
    D --> D11[Interpreter]
    
    style A fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
    style B fill:#10b981,stroke:#059669,stroke-width:2px,color:#fff
    style C fill:#f59e0b,stroke:#d97706,stroke-width:2px,color:#fff
    style D fill:#ef4444,stroke:#dc2626,stroke-width:2px,color:#fff
          </div>
          
          
          
          <h2>Why Learn Design Patterns?</h2>
          <ul>
            <li><strong>‚úÖ Proven Solutions:</strong> Time-tested approaches to common problems that have been refined over decades</li>
            <li><strong>‚úÖ Common Vocabulary:</strong> Enable efficient communication among developers using standardized terminology</li>
            <li><strong>‚úÖ Code Reusability:</strong> Promote code reuse and reduce duplication across projects</li>
            <li><strong>‚úÖ Maintainability:</strong> Make code more flexible, easier to understand, and simpler to maintain</li>
            <li><strong>‚úÖ Best Practices:</strong> Encapsulate software design wisdom and industry best practices</li>
            <li><strong>‚úÖ Career Growth:</strong> Essential knowledge for software architects and senior developers</li>
          </ul>
          
          <h2>Pattern Structure</h2>
          <p>Each pattern in this guide follows a consistent structure to help you understand and apply it effectively:</p>
          
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Component</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Intent</strong></td>
                <td>Brief description of what problem the pattern solves</td>
              </tr>
              <tr>
                <td><strong>Problem</strong></td>
                <td>The specific issue or challenge the pattern addresses</td>
              </tr>
              <tr>
                <td><strong>Solution</strong></td>
                <td>How the pattern solves the problem</td>
              </tr>
              <tr>
                <td><strong>Structure</strong></td>
                <td>UML class diagram showing the pattern's components</td>
              </tr>
              <tr>
                <td><strong>Example</strong></td>
                <td>Real-world code example in C#</td>
              </tr>
              <tr>
                <td><strong>Applicability</strong></td>
                <td>When should you use this pattern?</td>
              </tr>
              <tr>
                <td><strong>Consequences</strong></td>
                <td>Benefits and trade-offs of using the pattern</td>
              </tr>
            </tbody>
          </table>
          
          <h2>How to Use This Guide</h2>
          <p>This guide is organized to help you learn patterns incrementally:</p>
          
          <ol>
            <li><strong>Start with the Overview:</strong> Understand the category (Creational, Structural, or Behavioral)</li>
            <li><strong>Learn the Intent:</strong> Read what problem each pattern solves</li>
            <li><strong>Study the Diagram:</strong> Visualize the pattern structure through UML diagrams</li>
            <li><strong>Review Examples:</strong> See practical C# code implementations</li>
            <li><strong>Understand When to Use:</strong> Learn the appropriate scenarios for each pattern</li>
            <li><strong>Practice:</strong> Try implementing patterns in your own projects</li>
          </ol>
          
          <div class="callout">
            <strong>‚ö†Ô∏è Important Warning:</strong> Design patterns are not a silver bullet. Don't force a pattern where it doesn't fit. Over-engineering can be as harmful as under-engineering. Use patterns when they genuinely simplify your design and solve real problems.
          </div>
          
          <h2>Pattern Relationships</h2>
          <p>Many patterns work together or can be combined. Understanding these relationships helps you create sophisticated designs:</p>
          
          <div class="mermaid">
    %%{
      init: {
        'theme': 'base',
        'themeVariables': {
        'fontFamily': 'Segoe UI Semibold'
        }
      }
    }%%
    graph TD
      
      subgraph Behavioral["üé≠ Behavioral Patterns"]
      O[Chain of Resp.] --> P[Command]
      Q[Mediator] --> R[Observer]
      S[Memento] --> T[Command]
      U[State] --> V[Strategy]
      W[Template Method] --> X[Strategy]
      Y[Visitor] --> Z[Composite]
      end
      
      subgraph Structural["üîß Structural Patterns"]
      G[Adapter] --> H[Bridge]
      I[Decorator] --> J[Composite]
      K[Facade] --> L[Singleton]
      M[Proxy] --> N[Decorator]
      end
      
      subgraph Creational["üèóÔ∏è Creational Patterns"]
      A[Abstract Factory] --> B[Factory Method]
      C[Builder] --> D[Composite]
      E[Prototype] --> F[Factory Method]
      end
      
      %% Styling
      classDef creationalStyle fill:#d1fae5,stroke:#059669,stroke-width:2px,color:#065f46
      classDef structuralStyle fill:#fef3c7,stroke:#d97706,stroke-width:2px,color:#92400e
      classDef behavioralStyle fill:#fee2e2,stroke:#dc2626,stroke-width:2px,color:#991b1b
      
      class A,B,C,E,F creationalStyle
      class D,G,H,I,J,K,L,M,N structuralStyle
      class O,P,Q,R,S,T,U,V,W,X,Y,Z behavioralStyle
          </div>
          
          <h2>Quick Reference</h2>
          <p><strong>When to use each category:</strong></p>
          
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Category</th>
                <th>Use When...</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Creational</strong></td>
                <td>You need flexible ways to create objects, manage object creation complexity, or control instantiation</td>
              </tr>
              <tr>
                <td><strong>Structural</strong></td>
                <td>You need to compose objects into larger structures, adapt interfaces, or add functionality dynamically</td>
              </tr>
              <tr>
                <td><strong>Behavioral</strong></td>
                <td>You need to define communication between objects, encapsulate behavior, or manage algorithms</td>
              </tr>
            </tbody>
          </table>
          
          <div class="callout">
            <strong>üéØ Next Steps:</strong> Begin your journey with <strong>Creational Patterns</strong> to learn how to create objects effectively, or jump to any category that interests you using the navigation menu.
          </div>
        </section>

        <!-- Creational Patterns Overview -->
        <section id="creational-patterns" role="article">
          <h1>üèóÔ∏è Creational Patterns</h1>
          <span class="badge">creational</span>
          <span class="badge">object-creation</span>
          <span class="badge">instantiation</span>
          
          <h2>Overview</h2>
          <p>Creational design patterns provide various object creation mechanisms, which <strong>increase flexibility and reuse of existing code</strong>. Rather than instantiating objects directly using the <code>new</code> operator, these patterns provide ways to create objects while hiding the creation logic.</p>
          
          <h2>The Five Creational Patterns</h2>
          <table class="table table-striped">
            <thead>
              <tr>
                <th width="20%">Pattern</th>
                <th width="50%">Purpose</th>
                <th width="30%">Key Benefit</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Factory Method</strong></td>
                <td>Defines an interface for creating an object, but lets subclasses decide which class to instantiate</td>
                <td>Defers instantiation to subclasses</td>
              </tr>
              <tr>
                <td><strong>Abstract Factory</strong></td>
                <td>Provides an interface for creating families of related objects without specifying their concrete classes</td>
                <td>Creates families of related objects</td>
              </tr>
              <tr>
                <td><strong>Builder</strong></td>
                <td>Separates the construction of a complex object from its representation</td>
                <td>Constructs complex objects step by step</td>
              </tr>
              <tr>
                <td><strong>Prototype</strong></td>
                <td>Creates new objects by copying an existing object (prototype)</td>
                <td>Clones objects without coupling to classes</td>
              </tr>
              <tr>
                <td><strong>Singleton</strong></td>
                <td>Ensures a class has only one instance and provides a global point of access to it</td>
                <td>Controls instance creation</td>
              </tr>
            </tbody>
          </table>
          
          <h2>Why Use Creational Patterns?</h2>
          <ul>
            <li><strong>Flexibility:</strong> Make a system independent of how its objects are created</li>
            <li><strong>Encapsulation:</strong> Hide creation complexity from client code</li>
            <li><strong>Reusability:</strong> Enable object creation logic to be reused across different contexts</li>
            <li><strong>Maintainability:</strong> Centralize creation logic for easier updates</li>
          </ul>
        </section>

        <!-- Factory Method Pattern -->
        <section id="factory-method" role="article">
          <h1>Factory Method Pattern</h1>
          <span class="badge">creational</span>
          <span class="badge">factory</span>
          <span class="badge">polymorphism</span>
          
          <h2>Intent</h2>
          <p><strong>Factory Method</strong> defines an interface for creating an object, but lets subclasses decide which class to instantiate. Factory Method lets a class defer instantiation to subclasses.</p>
          
          <h2>Problem</h2>
          <p>You need to create objects without specifying their exact classes. The exact type of object to create might depend on runtime conditions or configuration.</p>
          
          <h2>Solution</h2>
          <p>Define a method (factory method) for creating objects. Subclasses override this method to specify the type of object to create.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
%%{
    init: {
        'theme': 'base',
        'themeVariables': {
        'fontFamily': 'Segoe UI'
        }
    }
}%%
classDiagram
    class Creator {
        << abstract >>
        +FactoryMethod() Product
        +SomeOperation()
    }
    class ConcreteCreatorA {
        +FactoryMethod() Product
    }
    class ConcreteCreatorB {
        +FactoryMethod() Product
    }
    class Product {
        << interface >>
        +DoStuff()
    }
    class ConcreteProductA {
        +DoStuff()
    }
    class ConcreteProductB {
        +DoStuff()
    }
    
    Creator <|-- ConcreteCreatorA
    Creator <|-- ConcreteCreatorB
    Product <|.. ConcreteProductA
    Product <|.. ConcreteProductB
    Creator ..> Product : creates
    ConcreteCreatorA ..> ConcreteProductA : creates
    ConcreteCreatorB ..> ConcreteProductB : creates
          </div>
          
          <h2>Example: Document Creation</h2>
          
          <h3>‚ùå Without Factory Method</h3>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Client code tightly coupled to concrete classes
public class DocumentManager
{
    public void CreateDocument(string type)
    {
        Document doc;
        
        if (type == "PDF")
        {
            doc = new PdfDocument();
        }
        else if (type == "Word")
        {
            doc = new WordDocument();
        }
        else
        {
            throw new ArgumentException("Unknown document type");
        }
        
        doc.Open();
    }
}</code></pre>
          
          <h3>‚úÖ With Factory Method</h3>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Product interface
public interface IDocument
{
    void Open();
    void Save();
}

// Concrete products
public class PdfDocument : IDocument
{
    public void Open() => Console.WriteLine("Opening PDF document");
    public void Save() => Console.WriteLine("Saving PDF document");
}

public class WordDocument : IDocument
{
    public void Open() => Console.WriteLine("Opening Word document");
    public void Save() => Console.WriteLine("Saving Word document");
}

// Creator
public abstract class DocumentCreator
{
    // Factory Method
    public abstract IDocument CreateDocument();
    
    // Template method using the factory method
    public void OpenDocument()
    {
        IDocument doc = CreateDocument();
        doc.Open();
    }
}

// Concrete creators
public class PdfDocumentCreator : DocumentCreator
{
    public override IDocument CreateDocument()
    {
        return new PdfDocument();
    }
}

public class WordDocumentCreator : DocumentCreator
{
    public override IDocument CreateDocument()
    {
        return new WordDocument();
    }
}

// Usage
DocumentCreator creator = new PdfDocumentCreator();
creator.OpenDocument(); // Opens PDF document</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>A class can't anticipate the type of objects it needs to create</li>
            <li>A class wants its subclasses to specify the objects it creates</li>
            <li>You want to localize the knowledge of which class gets created</li>
            <li>You want to provide hooks for subclasses to extend object creation</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Eliminates tight coupling between creator and concrete products</li>
            <li>‚úÖ Single Responsibility: Creation code is in one place</li>
            <li>‚úÖ Open/Closed Principle: Can introduce new product types without breaking existing code</li>
            <li>‚úÖ Provides hooks for customization in subclasses</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è May require creating many subclasses</li>
            <li>‚ö†Ô∏è Can make code more complicated</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />.NET's <code>DbProviderFactory</code> uses Factory Method to create database-specific objects (SqlConnection, OracleConnection, etc.) without coupling code to specific database providers.
          </div>
        </section>

        <!-- Abstract Factory Pattern -->
        <section id="abstract-factory" role="article">
          <h1>Abstract Factory Pattern</h1>
          <span class="badge">creational</span>
          <span class="badge">factory</span>
          <span class="badge">families</span>
          
          <h2>Intent</h2>
          <p><strong>Abstract Factory</strong> provides an interface for creating families of related or dependent objects without specifying their concrete classes.</p>
          
          <h2>Problem</h2>
          <p>You need to create families of related objects that must be used together. For example, a UI toolkit might have different themes (Windows, Mac), and all UI elements must match the theme.</p>
          
          <h2>Solution</h2>
          <p>Declare interfaces for each distinct product type in the family. Then create an abstract factory interface with creation methods for all products. Implement concrete factories for each family variant.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
%%{
    init: {
        'theme': 'base',
        'themeVariables': {
        'fontFamily': 'Segoe UI'
        }
    }
}%%
classDiagram
    class AbstractFactory {
        << interface >>
        +CreateProductA() AbstractProductA
        +CreateProductB() AbstractProductB
    }
    class ConcreteFactory1 {
        +CreateProductA() AbstractProductA
        +CreateProductB() AbstractProductB
    }
    class ConcreteFactory2 {
        +CreateProductA() AbstractProductA
        +CreateProductB() AbstractProductB
    }
    class AbstractProductA {
        << interface >>
    }
    class AbstractProductB {
        << interface >>
    }
    class ProductA1
    class ProductA2
    class ProductB1
    class ProductB2
    
    AbstractFactory <|.. ConcreteFactory1
    AbstractFactory <|.. ConcreteFactory2
    AbstractProductA <|.. ProductA1
    AbstractProductA <|.. ProductA2
    AbstractProductB <|.. ProductB1
    AbstractProductB <|.. ProductB2
    ConcreteFactory1 ..> ProductA1 : creates
    ConcreteFactory1 ..> ProductB1 : creates
    ConcreteFactory2 ..> ProductA2 : creates
    ConcreteFactory2 ..> ProductB2 : creates
          </div>
          
          <h2>Example: UI Theme Factory</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Abstract products
public interface IButton
{
    void Render();
}

public interface ICheckbox
{
    void Render();
}

// Concrete products - Windows theme
public class WindowsButton : IButton
{
    public void Render() => Console.WriteLine("Rendering Windows-style button");
}

public class WindowsCheckbox : ICheckbox
{
    public void Render() => Console.WriteLine("Rendering Windows-style checkbox");
}

// Concrete products - Mac theme
public class MacButton : IButton
{
    public void Render() => Console.WriteLine("Rendering Mac-style button");
}

public class MacCheckbox : ICheckbox
{
    public void Render() => Console.WriteLine("Rendering Mac-style checkbox");
}

// Abstract factory
public interface IUIFactory
{
    IButton CreateButton();
    ICheckbox CreateCheckbox();
}

// Concrete factories
public class WindowsUIFactory : IUIFactory
{
    public IButton CreateButton() => new WindowsButton();
    public ICheckbox CreateCheckbox() => new WindowsCheckbox();
}

public class MacUIFactory : IUIFactory
{
    public IButton CreateButton() => new MacButton();
    public ICheckbox CreateCheckbox() => new MacCheckbox();
}

// Client code
public class Application
{
    private IButton _button;
    private ICheckbox _checkbox;
    
    public Application(IUIFactory factory)
    {
        _button = factory.CreateButton();
        _checkbox = factory.CreateCheckbox();
    }
    
    public void Render()
    {
        _button.Render();
        _checkbox.Render();
    }
}

// Usage
IUIFactory factory = new WindowsUIFactory();
Application app = new Application(factory);
app.Render(); // All Windows-style components</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>System should be independent of how its products are created</li>
            <li>System needs to work with multiple families of related products</li>
            <li>You want to enforce that products from the same family are used together</li>
            <li>You want to provide a library of products and reveal only their interfaces</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Ensures products from the same family are compatible</li>
            <li>‚úÖ Isolates concrete classes from client code</li>
            <li>‚úÖ Makes exchanging product families easy</li>
            <li>‚úÖ Promotes consistency among products</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Adding new products requires changing all factory interfaces</li>
            <li>‚ö†Ô∏è Can result in a lot of classes</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />ADO.NET's <code>DbProviderFactory</code> creates families of database objects (Connection, Command, DataAdapter) that work together for a specific database provider.
          </div>
        </section>

        <!-- Builder Pattern -->
        <section id="builder" role="article">
          <h1>Builder Pattern</h1>
          <span class="badge">creational</span>
          <span class="badge">construction</span>
          <span class="badge">step-by-step</span>
          
          <h2>Intent</h2>
          <p><strong>Builder</strong> separates the construction of a complex object from its representation, allowing the same construction process to create different representations.</p>
          
          <h2>Problem</h2>
          <p>You need to create complex objects with many optional parameters. Using constructors leads to telescoping constructor problem, and creating objects step-by-step is cumbersome.</p>
          
          <h2>Solution</h2>
          <p>Extract object construction code into separate builder objects. The builder provides methods to configure the object piece by piece, then returns the final product.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
%%{
    init: {
        'theme': 'base',
        'themeVariables': {
        'fontFamily': 'Segoe UI'
        }
    }
}%%
classDiagram
    class Director {
        -builder: Builder
        +Construct()
    }
    class Builder {
        << interface >>
        +BuildPartA()
        +BuildPartB()
        +GetResult() Product
    }
    class ConcreteBuilder {
        -product: Product
        +BuildPartA()
        +BuildPartB()
        +GetResult() Product
    }
    class Product {
        +PartA
        +PartB
    }
    
    Director o-- Builder
    Builder <|.. ConcreteBuilder
    ConcreteBuilder ..> Product : creates
          </div>
          
          <h2>Example: Pizza Builder</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Product
public class Pizza
{
    public string Dough { get; set; }
    public string Sauce { get; set; }
    public List&lt;string&gt; Toppings { get; set; } = new();
    public bool ExtraCheese { get; set; }
    public string Size { get; set; }
    
    public override string ToString()
    {
        return $"{Size} Pizza: {Dough} dough, {Sauce} sauce, " +
               $"Toppings: {string.Join(", ", Toppings)}, " +
               $"Extra Cheese: {ExtraCheese}";
    }
}

// Builder interface
public interface IPizzaBuilder
{
    IPizzaBuilder SetSize(string size);
    IPizzaBuilder SetDough(string dough);
    IPizzaBuilder SetSauce(string sauce);
    IPizzaBuilder AddTopping(string topping);
    IPizzaBuilder AddExtraCheese(bool extraCheese);
    Pizza Build();
}

// Concrete builder
public class PizzaBuilder : IPizzaBuilder
{
    private Pizza _pizza = new();
    
    public IPizzaBuilder SetSize(string size)
    {
        _pizza.Size = size;
        return this;
    }
    
    public IPizzaBuilder SetDough(string dough)
    {
        _pizza.Dough = dough;
        return this;
    }
    
    public IPizzaBuilder SetSauce(string sauce)
    {
        _pizza.Sauce = sauce;
        return this;
    }
    
    public IPizzaBuilder AddTopping(string topping)
    {
        _pizza.Toppings.Add(topping);
        return this;
    }
    
    public IPizzaBuilder AddExtraCheese(bool extraCheese)
    {
        _pizza.ExtraCheese = extraCheese;
        return this;
    }
    
    public Pizza Build()
    {
        return _pizza;
    }
}

// Usage - Fluent interface
Pizza pizza = new PizzaBuilder()
    .SetSize("Large")
    .SetDough("Thin Crust")
    .SetSauce("Tomato")
    .AddTopping("Pepperoni")
    .AddTopping("Mushrooms")
    .AddTopping("Olives")
    .AddExtraCheese(true)
    .Build();

Console.WriteLine(pizza);</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>Creating complex objects with many optional parameters</li>
            <li>You want to avoid telescoping constructors</li>
            <li>You want to create different representations of the same object</li>
            <li>Construction process must allow different representations</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Constructs objects step-by-step with clear, readable code</li>
            <li>‚úÖ Allows different representations using the same construction process</li>
            <li>‚úÖ Isolates complex construction code from business logic</li>
            <li>‚úÖ Supports fluent interface for better readability</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Increases overall code complexity</li>
            <li>‚ö†Ô∏è Creates additional classes</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br /><code>StringBuilder</code> in .NET, <code>UriBuilder</code>, and Entity Framework's fluent API all use the Builder pattern.
          </div>
        </section>

        <!-- Prototype Pattern -->
        <section id="prototype" role="article">
          <h1>üß¨ Prototype Pattern</h1>
          <span class="badge">creational</span>
          <span class="badge">cloning</span>
          <span class="badge">copying</span>
          
          <h2>Intent</h2>
          <p><strong>Prototype</strong> creates new objects by copying existing objects (prototypes) without making the code dependent on their classes.</p>
          
          <h2>Problem</h2>
          <p>Creating a new object can be expensive if it requires database queries, file I/O, or complex initialization. You need a way to duplicate objects without coupling to their concrete classes.</p>
          
          <h2>Solution</h2>
          <p>Declare a common interface with a clone method. Objects that support cloning are called prototypes. Create new instances by copying existing prototypes.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
%%{
    init: {
        'theme': 'base',
        'themeVariables': {
        'fontFamily': 'Segoe UI'
        }
    }
}%%
classDiagram
    class Prototype {
        << interface >>
        +Clone() Prototype
    }
    class ConcretePrototype1 {
        -field1
        +Clone() Prototype
    }
    class ConcretePrototype2 {
        -field2
        +Clone() Prototype
    }
    
    Prototype <|.. ConcretePrototype1
    Prototype <|.. ConcretePrototype2
    ConcretePrototype1 ..> ConcretePrototype1 : creates copy
    ConcretePrototype2 ..> ConcretePrototype2 : creates copy
          </div>
          
          <h2>Example: Document Cloning</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Prototype interface
public interface IPrototype&lt;T&gt;
{
    T Clone();
}

// Concrete prototype
public class Document : IPrototype&lt;Document&gt;
{
    public string Title { get; set; }
    public string Content { get; set; }
    public List&lt;string&gt; Tags { get; set; } = new();
    public DateTime CreatedDate { get; set; }
    
    public Document Clone()
    {
        // Deep copy
        return new Document
        {
            Title = this.Title,
            Content = this.Content,
            Tags = new List&lt;string&gt;(this.Tags),
            CreatedDate = this.CreatedDate
        };
    }
    
    public override string ToString()
    {
        return $"Document: {Title}, Tags: {string.Join(", ", Tags)}";
    }
}

// Usage
Document original = new Document
{
    Title = "Original Document",
    Content = "This is the original content",
    Tags = { "important", "draft" },
    CreatedDate = DateTime.Now
};

// Clone the document
Document copy = original.Clone();
copy.Title = "Copied Document";
copy.Tags.Add("copy");

Console.WriteLine(original); // Original Document, Tags: important, draft
Console.WriteLine(copy);     // Copied Document, Tags: important, draft, copy</code></pre>
          
          <h3>Shallow vs Deep Copy</h3>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Shallow copy - shares references
public Document ShallowClone()
{
    return (Document)this.MemberwiseClone();
}

// Deep copy - creates new references
public Document DeepClone()
{
    return new Document
    {
        Title = this.Title,
        Content = this.Content,
        Tags = new List&lt;string&gt;(this.Tags),
        CreatedDate = this.CreatedDate
    };
}</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>Creating objects is expensive (database queries, network calls)</li>
            <li>You want to avoid subclasses of an object creator</li>
            <li>Classes to instantiate are specified at runtime</li>
            <li>You need independent copies of objects</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Clones objects without coupling to concrete classes</li>
            <li>‚úÖ Reduces initialization overhead</li>
            <li>‚úÖ Simplifies creating complex objects</li>
            <li>‚úÖ Alternative to subclassing for object creation</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Cloning complex objects with circular references can be tricky</li>
            <li>‚ö†Ô∏è Deep copy might be expensive</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />.NET's <code>ICloneable</code> interface, object serialization for cloning, and game development where you clone enemy templates.
          </div>
        </section>

        <!-- Singleton Pattern -->
        <section id="singleton" role="article">
          <h1>üë§ Singleton Pattern</h1>
          <span class="badge">creational</span>
          <span class="badge">instance</span>
          <span class="badge">global</span>
          
          <h2>Intent</h2>
          <p><strong>Singleton</strong> ensures a class has only one instance and provides a global point of access to it.</p>
          
          <h2>Problem</h2>
          <p>You need to ensure that a class has exactly one instance (e.g., database connection, configuration manager, logger) and provide a way to access that instance globally.</p>
          
          <h2>Solution</h2>
          <p>Make the constructor private and create a static method that returns the same instance every time it's called.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
%%{
    init: {
        'theme': 'base',
        'themeVariables': {
        'fontFamily': 'Segoe UI'
        }
    }
}%%
classDiagram
    class Singleton {
        -static instance: Singleton
        -Singleton()
        +static GetInstance() Singleton
        +BusinessLogic()
    }
    
    Singleton o-- Singleton : owns
          </div>
          
          <h2>Example: Configuration Manager</h2>
          
          <h3>‚ùå Thread-Unsafe Implementation</h3>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Not thread-safe!
public class ConfigManager
{
    private static ConfigManager _instance;
    
    private ConfigManager()
    {
        // Private constructor
    }
    
    public static ConfigManager GetInstance()
    {
        if (_instance == null)
        {
            _instance = new ConfigManager();
        }
        return _instance;
    }
}</code></pre>
          
          <h3>‚úÖ Thread-Safe Implementation</h3>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Thread-safe using Lazy&lt;T&gt;
public sealed class ConfigManager
{
    private static readonly Lazy&lt;ConfigManager&gt; _instance =
        new Lazy&lt;ConfigManager&gt;(() => new ConfigManager());
    
    private Dictionary&lt;string, string&gt; _settings = new();
    
    private ConfigManager()
    {
        // Load configuration
        _settings["AppName"] = "MyApp";
        _settings["Version"] = "1.0";
    }
    
    public static ConfigManager Instance => _instance.Value;
    
    public string GetSetting(string key)
    {
        return _settings.TryGetValue(key, out var value) ? value : null;
    }
    
    public void SetSetting(string key, string value)
    {
        _settings[key] = value;
    }
}

// Usage
ConfigManager config = ConfigManager.Instance;
Console.WriteLine(config.GetSetting("AppName"));

ConfigManager config2 = ConfigManager.Instance;
Console.WriteLine(config == config2); // True - same instance</code></pre>
          
          <h3>Alternative: Dependency Injection</h3>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Modern approach using DI container
services.AddSingleton&lt;IConfigManager, ConfigManager&gt;();

// Use through constructor injection
public class MyService
{
    private readonly IConfigManager _config;
    
    public MyService(IConfigManager config)
    {
        _config = config;
    }
}</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>Class must have exactly one instance (database connection pool, cache)</li>
            <li>Instance must be accessible globally</li>
            <li>Instance creation is expensive and should be shared</li>
            <li>You need strict control over global variables</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Guarantees single instance exists</li>
            <li>‚úÖ Provides global access point</li>
            <li>‚úÖ Lazy initialization - created only when needed</li>
            <li>‚úÖ Saves memory by sharing one instance</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Violates Single Responsibility Principle (manages instance + business logic)</li>
            <li>‚ö†Ô∏è Can hide dependencies and make testing difficult</li>
            <li>‚ö†Ô∏è Requires special handling in multithreaded environments</li>
            <li>‚ö†Ô∏è Can make code less flexible</li>
          </ul>
          
          <div class="callout">
            <strong>‚ö†Ô∏è Modern Alternative:</strong> In modern .NET applications, prefer using <strong>Dependency Injection</strong> with singleton lifetime (<code>AddSingleton</code>) instead of the traditional Singleton pattern. This makes code more testable and maintainable.
          </div>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />Logging frameworks (Serilog, NLog), database connection pools, application configuration managers, and cache managers commonly use the Singleton pattern.
          </div>
        </section>

        <!-- Structural Patterns Overview -->
        <section id="structural-patterns" role="article">
          <h1>üîß Structural Patterns</h1>
          <span class="badge">structural</span>
          <span class="badge">composition</span>
          <span class="badge">relationships</span>
          
          <h2>Overview</h2>
          <p>Structural design patterns explain how to assemble objects and classes into larger structures, while keeping these structures <strong>flexible and efficient</strong>. These patterns focus on the <strong>composition of classes and objects</strong> to form larger structures.</p>
          
          <h2>The Seven Structural Patterns</h2>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Pattern</th>
                <th>Purpose</th>
                <th>Key Benefit</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Adapter</strong></td>
                <td>Allows incompatible interfaces to work together</td>
                <td>Converts one interface to another</td>
              </tr>
              <tr>
                <td><strong>Bridge</strong></td>
                <td>Separates abstraction from implementation</td>
                <td>Decouples interface and implementation</td>
              </tr>
              <tr>
                <td><strong>Composite</strong></td>
                <td>Composes objects into tree structures</td>
                <td>Treats individual objects and compositions uniformly</td>
              </tr>
              <tr>
                <td><strong>Decorator</strong></td>
                <td>Adds responsibilities to objects dynamically</td>
                <td>Extends functionality without subclassing</td>
              </tr>
              <tr>
                <td><strong>Facade</strong></td>
                <td>Provides a simplified interface to a complex subsystem</td>
                <td>Simplifies complex systems</td>
              </tr>
              <tr>
                <td><strong>Flyweight</strong></td>
                <td>Shares common state between multiple objects</td>
                <td>Reduces memory usage</td>
              </tr>
              <tr>
                <td><strong>Proxy</strong></td>
                <td>Provides a placeholder for another object</td>
                <td>Controls access to objects</td>
              </tr>
            </tbody>
          </table>
          
          <h2>Why Use Structural Patterns?</h2>
          <ul>
            <li><strong>Composition:</strong> Build complex structures from simpler components</li>
            <li><strong>Flexibility:</strong> Change structure without affecting clients</li>
            <li><strong>Reusability:</strong> Compose existing classes in new ways</li>
            <li><strong>Simplification:</strong> Hide complexity behind simple interfaces</li>
          </ul>
        </section>

        <!-- Adapter Pattern -->
        <section id="adapter" role="article">
          <h1>üîå Adapter Pattern</h1>
          <span class="badge">structural</span>
          <span class="badge">wrapper</span>
          <span class="badge">compatibility</span>
          
          <h2>Intent</h2>
          <p><strong>Adapter</strong> (also known as Wrapper) allows objects with incompatible interfaces to collaborate. It acts as a bridge between two incompatible interfaces.</p>
          
          <h2>Problem</h2>
          <p>You need to use a class with an incompatible interface, or you're integrating a third-party library that doesn't match your application's interface.</p>
          
          <h2>Solution</h2>
          <p>Create an adapter class that wraps the incompatible object and translates calls to its interface into calls that the target interface expects.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
%%{
    init: {
        'theme': 'base',
        'themeVariables': {
        'fontFamily': 'Segoe UI'
        }
    }
}%%
classDiagram
    class Target {
        << interface >>
        +Request()
    }
    class Adapter {
        -adaptee: Adaptee
        +Request()
    }
    class Adaptee {
        +SpecificRequest()
    }
    class Client
    
    Target <|.. Adapter
    Adapter o-- Adaptee
    Client --> Target
          </div>
          
          <h2>Example: Payment Processing</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Target interface - what our application expects
public interface IPaymentProcessor
{
    void ProcessPayment(decimal amount);
    bool ValidatePayment();
}

// Adaptee - third-party payment service with different interface
public class StripePaymentService
{
    public void MakeStripePayment(double amountInCents)
    {
        Console.WriteLine($"Processing ${amountInCents / 100} via Stripe");
    }
    
    public bool VerifyStripeTransaction()
    {
        return true;
    }
}

// Adapter - makes StripePaymentService compatible with IPaymentProcessor
public class StripeAdapter : IPaymentProcessor
{
    private readonly StripePaymentService _stripeService;
    
    public StripeAdapter(StripePaymentService stripeService)
    {
        _stripeService = stripeService;
    }
    
    public void ProcessPayment(decimal amount)
    {
        // Convert dollars to cents for Stripe
        double amountInCents = (double)amount * 100;
        _stripeService.MakeStripePayment(amountInCents);
    }
    
    public bool ValidatePayment()
    {
        return _stripeService.VerifyStripeTransaction();
    }
}

// Another adaptee - PayPal service
public class PayPalPaymentService
{
    public void SendPayPalPayment(string amountString)
    {
        Console.WriteLine($"Processing {amountString} via PayPal");
    }
    
    public int CheckPayPalStatus()
    {
        return 1; // 1 = success
    }
}

// Adapter for PayPal
public class PayPalAdapter : IPaymentProcessor
{
    private readonly PayPalPaymentService _paypalService;
    
    public PayPalAdapter(PayPalPaymentService paypalService)
    {
        _paypalService = paypalService;
    }
    
    public void ProcessPayment(decimal amount)
    {
        _paypalService.SendPayPalPayment($"${amount}");
    }
    
    public bool ValidatePayment()
    {
        return _paypalService.CheckPayPalStatus() == 1;
    }
}

// Usage - client code works with consistent interface
public class PaymentService
{
    private readonly IPaymentProcessor _processor;
    
    public PaymentService(IPaymentProcessor processor)
    {
        _processor = processor;
    }
    
    public void Checkout(decimal amount)
    {
        if (_processor.ValidatePayment())
        {
            _processor.ProcessPayment(amount);
        }
    }
}

// Can switch payment processors easily
IPaymentProcessor processor = new StripeAdapter(new StripePaymentService());
PaymentService service = new PaymentService(processor);
service.Checkout(99.99m);

// Switch to PayPal
processor = new PayPalAdapter(new PayPalPaymentService());
service = new PaymentService(processor);
service.Checkout(49.99m);</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>You want to use an existing class with an incompatible interface</li>
            <li>You need to integrate third-party libraries</li>
            <li>You want to create reusable classes that work with unrelated classes</li>
            <li>Legacy system integration with modern code</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Single Responsibility: Separates interface conversion from business logic</li>
            <li>‚úÖ Open/Closed: Can introduce new adapters without changing existing code</li>
            <li>‚úÖ Enables reuse of existing functionality</li>
            <li>‚úÖ Promotes loose coupling</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Increases overall code complexity with additional classes</li>
            <li>‚ö†Ô∏è Sometimes simpler to change the service class directly (if you own it)</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />ASP.NET Core middleware adapters, database provider adapters (ADO.NET), file system adapters, and API client wrappers all use the Adapter pattern.
          </div>
        </section>

        <!-- Bridge Pattern -->
        <section id="bridge" role="article">
          <h1>üåâ Bridge Pattern</h1>
          <span class="badge">structural</span>
          <span class="badge">decoupling</span>
          <span class="badge">abstraction</span>
          
          <h2>Intent</h2>
          <p><strong>Bridge</strong> decouples an abstraction from its implementation so that the two can vary independently. It splits a large class or set of closely related classes into two separate hierarchies‚Äîabstraction and implementation.</p>
          
          <h2>Problem</h2>
          <p>You have a class with multiple dimensions of variation (e.g., shapes that can be different colors). Creating subclasses for every combination leads to class explosion.</p>
          
          <h2>Solution</h2>
          <p>Extract one dimension into a separate hierarchy and have the original class reference an object from that hierarchy instead of having all its state and behaviors in one class.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
%%{
    init: {
        'theme': 'base',
        'themeVariables': {
        'fontFamily': 'Segoe UI'
        }
    }
}%%
classDiagram
    class Abstraction {
        -implementation: Implementation
        +Operation()
    }
    class RefinedAbstraction {
        +Operation()
    }
    class Implementation {
        << interface >>
        +OperationImpl()
    }
    class ConcreteImplementationA {
        +OperationImpl()
    }
    class ConcreteImplementationB {
        +OperationImpl()
    }
    
    Abstraction <|-- RefinedAbstraction
    Abstraction o-- Implementation
    Implementation <|.. ConcreteImplementationA
    Implementation <|.. ConcreteImplementationB
          </div>
          
          <h2>Example: Remote Control and Devices</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Implementation interface
public interface IDevice
{
    void TurnOn();
    void TurnOff();
    void SetVolume(int volume);
    int GetVolume();
}

// Concrete implementations
public class TV : IDevice
{
    private int _volume;
    private bool _isOn;
    
    public void TurnOn()
    {
        _isOn = true;
        Console.WriteLine("TV is now ON");
    }
    
    public void TurnOff()
    {
        _isOn = false;
        Console.WriteLine("TV is now OFF");
    }
    
    public void SetVolume(int volume)
    {
        _volume = volume;
        Console.WriteLine($"TV volume set to {_volume}");
    }
    
    public int GetVolume() => _volume;
}

public class Radio : IDevice
{
    private int _volume;
    private bool _isOn;
    
    public void TurnOn()
    {
        _isOn = true;
        Console.WriteLine("Radio is now ON");
    }
    
    public void TurnOff()
    {
        _isOn = false;
        Console.WriteLine("Radio is now OFF");
    }
    
    public void SetVolume(int volume)
    {
        _volume = volume;
        Console.WriteLine($"Radio volume set to {_volume}");
    }
    
    public int GetVolume() => _volume;
}

// Abstraction
public class RemoteControl
{
    protected IDevice _device;
    
    public RemoteControl(IDevice device)
    {
        _device = device;
    }
    
    public virtual void TogglePower()
    {
        Console.WriteLine("RemoteControl: Toggle power");
        _device.TurnOn();
    }
    
    public virtual void VolumeUp()
    {
        _device.SetVolume(_device.GetVolume() + 10);
    }
    
    public virtual void VolumeDown()
    {
        _device.SetVolume(_device.GetVolume() - 10);
    }
}

// Refined abstraction
public class AdvancedRemoteControl : RemoteControl
{
    public AdvancedRemoteControl(IDevice device) : base(device) { }
    
    public void Mute()
    {
        Console.WriteLine("AdvancedRemote: Mute");
        _device.SetVolume(0);
    }
    
    public void SetChannel(int channel)
    {
        Console.WriteLine($"AdvancedRemote: Set channel to {channel}");
    }
}

// Usage - can combine any remote with any device
IDevice tv = new TV();
RemoteControl basicRemote = new RemoteControl(tv);
basicRemote.TogglePower();
basicRemote.VolumeUp();

IDevice radio = new Radio();
AdvancedRemoteControl advancedRemote = new AdvancedRemoteControl(radio);
advancedRemote.TogglePower();
advancedRemote.Mute();</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>You want to avoid permanent binding between abstraction and implementation</li>
            <li>Both abstractions and implementations should be extensible through subclassing</li>
            <li>Changes in implementation shouldn't impact clients</li>
            <li>You have a class explosion due to multiple dimensions of variation</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Decouples abstraction from implementation</li>
            <li>‚úÖ Can extend abstractions and implementations independently</li>
            <li>‚úÖ Hides implementation details from clients</li>
            <li>‚úÖ Follows Open/Closed Principle</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Makes code more complicated for simple scenarios</li>
            <li>‚ö†Ô∏è Requires identifying proper dimensions for separation</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />Database drivers (ODBC, JDBC), UI frameworks supporting multiple platforms, and graphics rendering engines use Bridge to separate platform-specific code from platform-independent code.
          </div>
        </section>

        <!-- Composite Pattern -->
        <section id="composite" role="article">
          <h1>üå≤ Composite Pattern</h1>
          <span class="badge">structural</span>
          <span class="badge">tree</span>
          <span class="badge">hierarchy</span>
          
          <h2>Intent</h2>
          <p><strong>Composite</strong> composes objects into tree structures to represent part-whole hierarchies. It lets clients treat individual objects and compositions of objects uniformly.</p>
          
          <h2>Problem</h2>
          <p>You need to work with tree-like structures where you want to treat individual objects and groups of objects the same way.</p>
          
          <h2>Solution</h2>
          <p>Define a common interface for both simple and complex objects. Simple objects (leaves) implement it directly, while complex objects (composites) contain collections of children and delegate work to them.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
%%{
    init: {
        'theme': 'base',
        'themeVariables': {
        'fontFamily': 'Segoe UI'
        }
    }
}%%
classDiagram
    class Component {
        << interface >>
        +Operation()
        +Add(Component)
        +Remove(Component)
        +GetChild(int) Component
    }
    class Leaf {
        +Operation()
    }
    class Composite {
        -children: List~Component~
        +Operation()
        +Add(Component)
        +Remove(Component)
        +GetChild(int) Component
    }
    
    Component <|.. Leaf
    Component <|.. Composite
    Composite o-- Component
          </div>
          
          <h2>Example: File System</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Component
public abstract class FileSystemComponent
{
    protected string _name;
    
    public FileSystemComponent(string name)
    {
        _name = name;
    }
    
    public abstract void Display(int depth = 0);
    public abstract long GetSize();
    
    // Default implementations for composite operations
    public virtual void Add(FileSystemComponent component)
    {
        throw new NotSupportedException();
    }
    
    public virtual void Remove(FileSystemComponent component)
    {
        throw new NotSupportedException();
    }
}

// Leaf - File
public class File : FileSystemComponent
{
    private long _size;
    
    public File(string name, long size) : base(name)
    {
        _size = size;
    }
    
    public override void Display(int depth = 0)
    {
        Console.WriteLine($"{new string('-', depth)} üìÑ {_name} ({_size} bytes)");
    }
    
    public override long GetSize()
    {
        return _size;
    }
}

// Composite - Directory
public class Directory : FileSystemComponent
{
    private List<FileSystemComponent> _children = new();
    
    public Directory(string name) : base(name) { }
    
    public override void Add(FileSystemComponent component)
    {
        _children.Add(component);
    }
    
    public override void Remove(FileSystemComponent component)
    {
        _children.Remove(component);
    }
    
    public override void Display(int depth = 0)
    {
        Console.WriteLine($"{new string('-', depth)} üìÅ {_name}");
        foreach (var child in _children)
        {
            child.Display(depth + 2);
        }
    }
    
    public override long GetSize()
    {
        long totalSize = 0;
        foreach (var child in _children)
        {
            totalSize += child.GetSize();
        }
        return totalSize;
    }
}

// Usage
Directory root = new Directory("Root");
Directory documents = new Directory("Documents");
Directory photos = new Directory("Photos");

documents.Add(new File("resume.pdf", 50000));
documents.Add(new File("coverletter.docx", 30000));

photos.Add(new File("vacation.jpg", 2000000));
photos.Add(new File("family.jpg", 1500000));

root.Add(documents);
root.Add(photos);
root.Add(new File("readme.txt", 1000));

// Treat individual files and directories uniformly
root.Display();
Console.WriteLine($"\nTotal size: {root.GetSize()} bytes");</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>You need to represent part-whole hierarchies</li>
            <li>You want clients to treat individual objects and compositions uniformly</li>
            <li>Tree structures (file systems, organization charts, UI components)</li>
            <li>Operations should work on both simple and complex objects</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Simplifies client code - treats all objects uniformly</li>
            <li>‚úÖ Makes it easy to add new component types</li>
            <li>‚úÖ Promotes recursive composition</li>
            <li>‚úÖ Follows Open/Closed Principle</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Can make design overly general</li>
            <li>‚ö†Ô∏è Hard to restrict component types in a composite</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />UI frameworks (WPF, WinForms controls), DOM in web browsers, file systems, organization hierarchies, and graphics systems all use Composite pattern.
          </div>
        </section>

        <!-- Decorator Pattern -->
        <section id="decorator" role="article">
          <h1>üéÅ Decorator Pattern</h1>
          <span class="badge">structural</span>
          <span class="badge">wrapper</span>
          <span class="badge">enhancement</span>
          
          <h2>Intent</h2>
          <p><strong>Decorator</strong> attaches additional responsibilities to an object dynamically. Decorators provide a flexible alternative to subclassing for extending functionality.</p>
          
          <h2>Problem</h2>
          <p>You need to add behavior to individual objects without affecting other objects of the same class. Using inheritance to extend behavior would be inflexible and lead to class explosion.</p>
          
          <h2>Solution</h2>
          <p>Create decorator classes that wrap the original object and add new behavior while maintaining the same interface.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
%%{
    init: {
        'theme': 'base',
        'themeVariables': {
        'fontFamily': 'Segoe UI'
        }
    }
}%%
classDiagram
    class Component {
        << interface >>
        +Operation()
    }
    class ConcreteComponent {
        +Operation()
    }
    class Decorator {
        -component: Component
        +Operation()
    }
    class ConcreteDecoratorA {
        +Operation()
        +AddedBehavior()
    }
    class ConcreteDecoratorB {
        +Operation()
    }
    
    Component <|.. ConcreteComponent
    Component <|.. Decorator
    Decorator o-- Component
    Decorator <|-- ConcreteDecoratorA
    Decorator <|-- ConcreteDecoratorB
          </div>
          
          <h2>Example: Coffee Shop</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Component interface
public interface ICoffee
{
    string GetDescription();
    decimal GetCost();
}

// Concrete component
public class SimpleCoffee : ICoffee
{
    public string GetDescription() => "Simple Coffee";
    public decimal GetCost() => 2.00m;
}

// Base decorator
public abstract class CoffeeDecorator : ICoffee
{
    protected ICoffee _coffee;
    
    public CoffeeDecorator(ICoffee coffee)
    {
        _coffee = coffee;
    }
    
    public virtual string GetDescription()
    {
        return _coffee.GetDescription();
    }
    
    public virtual decimal GetCost()
    {
        return _coffee.GetCost();
    }
}

// Concrete decorators
public class MilkDecorator : CoffeeDecorator
{
    public MilkDecorator(ICoffee coffee) : base(coffee) { }
    
    public override string GetDescription()
    {
        return $"{_coffee.GetDescription()}, Milk";
    }
    
    public override decimal GetCost()
    {
        return _coffee.GetCost() + 0.50m;
    }
}

public class SugarDecorator : CoffeeDecorator
{
    public SugarDecorator(ICoffee coffee) : base(coffee) { }
    
    public override string GetDescription()
    {
        return $"{_coffee.GetDescription()}, Sugar";
    }
    
    public override decimal GetCost()
    {
        return _coffee.GetCost() + 0.25m;
    }
}

public class WhippedCreamDecorator : CoffeeDecorator
{
    public WhippedCreamDecorator(ICoffee coffee) : base(coffee) { }
    
    public override string GetDescription()
    {
        return $"{_coffee.GetDescription()}, Whipped Cream";
    }
    
    public override decimal GetCost()
    {
        return _coffee.GetCost() + 0.75m;
    }
}

public class CaramelDecorator : CoffeeDecorator
{
    public CaramelDecorator(ICoffee coffee) : base(coffee) { }
    
    public override string GetDescription()
    {
        return $"{_coffee.GetDescription()}, Caramel";
    }
    
    public override decimal GetCost()
    {
        return _coffee.GetCost() + 0.60m;
    }
}

// Usage - dynamically add features
ICoffee coffee = new SimpleCoffee();
Console.WriteLine($"{coffee.GetDescription()} - ${coffee.GetCost()}");

// Add milk
coffee = new MilkDecorator(coffee);
Console.WriteLine($"{coffee.GetDescription()} - ${coffee.GetCost()}");

// Add sugar
coffee = new SugarDecorator(coffee);
Console.WriteLine($"{coffee.GetDescription()} - ${coffee.GetCost()}");

// Add whipped cream and caramel
coffee = new WhippedCreamDecorator(new CaramelDecorator(coffee));
Console.WriteLine($"{coffee.GetDescription()} - ${coffee.GetCost()}");
// Output: Simple Coffee, Milk, Sugar, Caramel, Whipped Cream - $4.10</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>You want to add responsibilities to objects dynamically</li>
            <li>You need to add/remove features at runtime</li>
            <li>Extension by subclassing is impractical (class explosion)</li>
            <li>You want to combine multiple behaviors</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ More flexible than static inheritance</li>
            <li>‚úÖ Adds responsibilities at runtime</li>
            <li>‚úÖ Avoids feature-laden classes</li>
            <li>‚úÖ Can combine multiple decorators</li>
            <li>‚úÖ Follows Single Responsibility and Open/Closed Principles</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Can result in many small objects</li>
            <li>‚ö†Ô∏è Decorators can be hard to debug</li>
            <li>‚ö†Ô∏è Order of decorators can matter</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />.NET streams (<code>FileStream</code> wrapped in <code>BufferedStream</code> wrapped in <code>GZipStream</code>), ASP.NET middleware pipeline, and UI component enhancements.
          </div>
        </section>

        <!-- Facade Pattern -->
        <section id="facade" role="article">
          <h1>üé≠ Facade Pattern</h1>
          <span class="badge">structural</span>
          <span class="badge">simplification</span>
          <span class="badge">interface</span>
          
          <h2>Intent</h2>
          <p><strong>Facade</strong> provides a simplified interface to a complex subsystem. It defines a higher-level interface that makes the subsystem easier to use.</p>
          
          <h2>Problem</h2>
          <p>You have a complex system with many interdependent classes. Clients need to interact with multiple classes, making the code complicated and hard to understand.</p>
          
          <h2>Solution</h2>
          <p>Create a facade class that provides simple methods for common operations, hiding the complexity of the subsystem behind a unified interface.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
%%{
    init: {
        'theme': 'base',
        'themeVariables': {
        'fontFamily': 'Segoe UI'
        }
    }
}%%
classDiagram
    class Facade {
        -subsystem1: SubsystemClass1
        -subsystem2: SubsystemClass2
        -subsystem3: SubsystemClass3
        +Operation()
    }
    class SubsystemClass1 {
        +Operation1()
    }
    class SubsystemClass2 {
        +Operation2()
    }
    class SubsystemClass3 {
        +Operation3()
    }
    class Client
    
    Client --> Facade
    Facade --> SubsystemClass1
    Facade --> SubsystemClass2
    Facade --> SubsystemClass3
          </div>
          
          <h2>Example: Home Theater System</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Complex subsystem classes
public class DVDPlayer
{
    public void On() => Console.WriteLine("DVD Player ON");
    public void Off() => Console.WriteLine("DVD Player OFF");
    public void Play(string movie) => Console.WriteLine($"Playing '{movie}'");
    public void Stop() => Console.WriteLine("Stopping DVD");
}

public class Projector
{
    public void On() => Console.WriteLine("Projector ON");
    public void Off() => Console.WriteLine("Projector OFF");
    public void WideScreenMode() => Console.WriteLine("Projector in widescreen mode");
}

public class SoundSystem
{
    public void On() => Console.WriteLine("Sound System ON");
    public void Off() => Console.WriteLine("Sound System OFF");
    public void SetVolume(int level) => Console.WriteLine($"Sound volume set to {level}");
    public void SetSurroundSound() => Console.WriteLine("Surround sound ON");
}

public class Lights
{
    public void Dim(int level) => Console.WriteLine($"Lights dimmed to {level}%");
    public void On() => Console.WriteLine("Lights ON");
}

public class Screen
{
    public void Down() => Console.WriteLine("Screen coming down");
    public void Up() => Console.WriteLine("Screen going up");
}

// Facade - simplifies the complex subsystem
public class HomeTheaterFacade
{
    private DVDPlayer _dvdPlayer;
    private Projector _projector;
    private SoundSystem _soundSystem;
    private Lights _lights;
    private Screen _screen;
    
    public HomeTheaterFacade(
        DVDPlayer dvdPlayer,
        Projector projector,
        SoundSystem soundSystem,
        Lights lights,
        Screen screen)
    {
        _dvdPlayer = dvdPlayer;
        _projector = projector;
        _soundSystem = soundSystem;
        _lights = lights;
        _screen = screen;
    }
    
    // Simplified interface
    public void WatchMovie(string movie)
    {
        Console.WriteLine("\n=== Get ready to watch a movie ===");
        _lights.Dim(10);
        _screen.Down();
        _projector.On();
        _projector.WideScreenMode();
        _soundSystem.On();
        _soundSystem.SetVolume(50);
        _soundSystem.SetSurroundSound();
        _dvdPlayer.On();
        _dvdPlayer.Play(movie);
    }
    
    public void EndMovie()
    {
        Console.WriteLine("\n=== Shutting down movie theater ===");
        _dvdPlayer.Stop();
        _dvdPlayer.Off();
        _soundSystem.Off();
        _projector.Off();
        _screen.Up();
        _lights.On();
    }
}

// Usage - much simpler for client
var homeTheater = new HomeTheaterFacade(
    new DVDPlayer(),
    new Projector(),
    new SoundSystem(),
    new Lights(),
    new Screen()
);

homeTheater.WatchMovie("Inception");
// ... watch movie ...
homeTheater.EndMovie();</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>You want to provide a simple interface to a complex subsystem</li>
            <li>There are many dependencies between clients and implementation classes</li>
            <li>You want to layer your subsystems</li>
            <li>You need to decouple subsystem from clients and other subsystems</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Simplifies the interface to complex systems</li>
            <li>‚úÖ Decouples client from subsystem components</li>
            <li>‚úÖ Promotes weak coupling</li>
            <li>‚úÖ Makes subsystems easier to use</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Facade can become a god object coupled to all subsystem classes</li>
            <li>‚ö†Ô∏è May limit access to advanced features</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />Compiler front-ends, database access layers, API gateways, and .NET's <code>HttpClient</code> facade over lower-level networking classes.
          </div>
        </section>

        <!-- Flyweight Pattern -->
        <section id="flyweight" role="article">
          <h1>ü™∂ Flyweight Pattern</h1>
          <span class="badge">structural</span>
          <span class="badge">optimization</span>
          <span class="badge">memory</span>
          
          <h2>Intent</h2>
          <p><strong>Flyweight</strong> minimizes memory usage by sharing as much data as possible with similar objects. It's useful when you need to create a large number of similar objects.</p>
          
          <h2>Problem</h2>
          <p>Your application needs to create a huge number of objects, causing excessive memory consumption. Many objects share common data that could be shared rather than duplicated.</p>
          
          <h2>Solution</h2>
          <p>Split object state into intrinsic (shared) and extrinsic (unique) parts. Store intrinsic state in flyweight objects and pass extrinsic state to methods when needed.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
%%{
    init: {
        'theme': 'base',
        'themeVariables': {
        'fontFamily': 'Segoe UI'
        }
    }
}%%
classDiagram
    class FlyweightFactory {
        -flyweights: Map
        +GetFlyweight(key) Flyweight
    }
    class Flyweight {
        -intrinsicState
        +Operation(extrinsicState)
    }
    class Client {
        -extrinsicState
    }
    
    FlyweightFactory --> Flyweight : creates/manages
    Client --> FlyweightFactory
    Client --> Flyweight
          </div>
          
          <h2>Example: Text Editor</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Flyweight - contains intrinsic state (shared)
public class CharacterStyle
{
    public string FontFamily { get; }
    public int FontSize { get; }
    public string Color { get; }
    public bool Bold { get; }
    public bool Italic { get; }
    
    public CharacterStyle(string fontFamily, int fontSize, string color, bool bold, bool italic)
    {
        FontFamily = fontFamily;
        FontSize = fontSize;
        Color = color;
        Bold = bold;
        Italic = italic;
    }
    
    public void Display(char character, int x, int y)
    {
        Console.WriteLine($"Char '{character}' at ({x},{y}): {FontFamily} {FontSize}pt {Color}" +
                         $"{(Bold ? " Bold" : "")}{(Italic ? " Italic" : "")}");
    }
}

// Flyweight Factory
public class StyleFactory
{
    private Dictionary<string, CharacterStyle> _styles = new();
    
    public CharacterStyle GetStyle(string fontFamily, int fontSize, string color, bool bold, bool italic)
    {
        string key = $"{fontFamily}_{fontSize}_{color}_{bold}_{italic}";
        
        if (!_styles.ContainsKey(key))
        {
            _styles[key] = new CharacterStyle(fontFamily, fontSize, color, bold, italic);
            Console.WriteLine($"Creating new style: {key}");
        }
        else
        {
            Console.WriteLine($"Reusing existing style: {key}");
        }
        
        return _styles[key];
    }
    
    public int GetStyleCount() => _styles.Count;
}

// Context - contains extrinsic state (unique per character)
public class Character
{
    private char _character;      // Extrinsic state
    private int _x, _y;          // Extrinsic state
    private CharacterStyle _style; // Reference to shared flyweight
    
    public Character(char character, int x, int y, CharacterStyle style)
    {
        _character = character;
        _x = x;
        _y = y;
        _style = style;
    }
    
    public void Display()
    {
        _style.Display(_character, _x, _y);
    }
}

// Usage
StyleFactory styleFactory = new StyleFactory();

// Create many characters but share styles
var style1 = styleFactory.GetStyle("Arial", 12, "Black", false, false);
var style2 = styleFactory.GetStyle("Arial", 12, "Black", true, false);
var style3 = styleFactory.GetStyle("Arial", 12, "Black", false, false); // Reuses style1

List<Character> document = new()
{
    new Character('H', 0, 0, style1),
    new Character('e', 10, 0, style1),
    new Character('l', 20, 0, style1),
    new Character('l', 30, 0, style1),
    new Character('o', 40, 0, style1),
    new Character('W', 60, 0, style2),  // Bold
    new Character('o', 70, 0, style2),  // Bold
    new Character('r', 80, 0, style2),  // Bold
    new Character('l', 90, 0, style2),  // Bold
    new Character('d', 100, 0, style2), // Bold
};

foreach (var character in document)
{
    character.Display();
}

Console.WriteLine($"\nTotal unique styles created: {styleFactory.GetStyleCount()}");
// Only 2 style objects for 10 characters!</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>Application uses large numbers of objects</li>
            <li>Storage costs are high due to object quantity</li>
            <li>Most object state can be made extrinsic</li>
            <li>Many objects can be replaced by few shared objects</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Dramatically reduces memory usage</li>
            <li>‚úÖ Improves performance when many objects exist</li>
            <li>‚úÖ Centralizes state management</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Increases code complexity</li>
            <li>‚ö†Ô∏è May trade CPU cycles for memory savings</li>
            <li>‚ö†Ô∏è Extrinsic state must be computed or passed around</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />String interning in .NET, text editor character rendering, game particle systems, and database connection pooling all use Flyweight concepts.
          </div>
        </section>

        <!-- Proxy Pattern -->
        <section id="proxy" role="article">
          <h1>üö™ Proxy Pattern</h1>
          <span class="badge">structural</span>
          <span class="badge">placeholder</span>
          <span class="badge">access-control</span>
          
          <h2>Intent</h2>
          <p><strong>Proxy</strong> provides a placeholder or surrogate for another object to control access to it. The proxy has the same interface as the real object.</p>
          
          <h2>Problem</h2>
          <p>You need to control access to an object, add functionality before/after accessing it, or defer expensive operations until actually needed.</p>
          
          <h2>Solution</h2>
          <p>Create a proxy class that implements the same interface as the real object. The proxy controls access to the real object and can add additional functionality.</p>
          
          <h2>Types of Proxies</h2>
          <ul>
            <li><strong>Virtual Proxy:</strong> Delays creation of expensive objects</li>
            <li><strong>Protection Proxy:</strong> Controls access based on permissions</li>
            <li><strong>Remote Proxy:</strong> Represents objects in different address spaces</li>
            <li><strong>Cache Proxy:</strong> Caches results of expensive operations</li>
          </ul>
          
          <h2>Structure</h2>
          <div class="mermaid">
%%{
    init: {
        'theme': 'base',
        'themeVariables': {
        'fontFamily': 'Segoe UI'
        }
    }
}%%
classDiagram
    class Subject {
        << interface >>
        +Request()
    }
    class RealSubject {
        +Request()
    }
    class Proxy {
        -realSubject: RealSubject
        +Request()
    }
    
    Subject <|.. RealSubject
    Subject <|.. Proxy
    Proxy o-- RealSubject
          </div>
          
          <h2>Example: Image Loading (Virtual Proxy)</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Subject interface
public interface IImage
{
    void Display();
}

// Real Subject - expensive to create
public class HighResolutionImage : IImage
{
    private string _filename;
    
    public HighResolutionImage(string filename)
    {
        _filename = filename;
        LoadFromDisk();
    }
    
    private void LoadFromDisk()
    {
        Console.WriteLine($"Loading high-resolution image: {_filename}");
        Thread.Sleep(2000); // Simulate expensive loading
    }
    
    public void Display()
    {
        Console.WriteLine($"Displaying high-resolution image: {_filename}");
    }
}

// Virtual Proxy - delays loading until needed
public class ImageProxy : IImage
{
    private string _filename;
    private HighResolutionImage _realImage;
    
    public ImageProxy(string filename)
    {
        _filename = filename;
        Console.WriteLine($"ImageProxy created for: {_filename} (not loaded yet)");
    }
    
    public void Display()
    {
        // Lazy loading - create real object only when needed
        if (_realImage == null)
        {
            _realImage = new HighResolutionImage(_filename);
        }
        _realImage.Display();
    }
}

// Usage
Console.WriteLine("Creating image proxies...");
IImage image1 = new ImageProxy("photo1.jpg");
IImage image2 = new ImageProxy("photo2.jpg");
IImage image3 = new ImageProxy("photo3.jpg");

Console.WriteLine("\nImages created but not loaded yet!\n");

Console.WriteLine("Now displaying image1:");
image1.Display(); // Loads and displays

Console.WriteLine("\nDisplaying image1 again:");
image1.Display(); // Already loaded, just displays</code></pre>
          
          <h3>Example: Protection Proxy (Access Control)</h3>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Subject
public interface IDocument
{
    void DisplayContent();
    void EditContent(string newContent);
}

// Real Subject
public class SecureDocument : IDocument
{
    private string _content = "Confidential Document Content";
    
    public void DisplayContent()
    {
        Console.WriteLine($"Content: {_content}");
    }
    
    public void EditContent(string newContent)
    {
        _content = newContent;
        Console.WriteLine("Content updated");
    }
}

// Protection Proxy
public class DocumentProxy : IDocument
{
    private SecureDocument _document;
    private string _userRole;
    
    public DocumentProxy(string userRole)
    {
        _document = new SecureDocument();
        _userRole = userRole;
    }
    
    public void DisplayContent()
    {
        if (_userRole == "Admin" || _userRole == "User")
        {
            _document.DisplayContent();
        }
        else
        {
            Console.WriteLine("Access Denied: You don't have permission to view this document");
        }
    }
    
    public void EditContent(string newContent)
    {
        if (_userRole == "Admin")
        {
            _document.EditContent(newContent);
        }
        else
        {
            Console.WriteLine("Access Denied: Only admins can edit this document");
        }
    }
}

// Usage
IDocument adminDoc = new DocumentProxy("Admin");
adminDoc.DisplayContent(); // Allowed
adminDoc.EditContent("New content"); // Allowed

IDocument userDoc = new DocumentProxy("User");
userDoc.DisplayContent(); // Allowed
userDoc.EditContent("Hacked!"); // Denied

IDocument guestDoc = new DocumentProxy("Guest");
guestDoc.DisplayContent(); // Denied
guestDoc.EditContent("Hacked!"); // Denied</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>Lazy initialization (virtual proxy) - defer expensive object creation</li>
            <li>Access control (protection proxy) - control who can access the object</li>
            <li>Remote objects (remote proxy) - represent objects in different locations</li>
            <li>Logging and caching - add cross-cutting concerns</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Controls access to the real object</li>
            <li>‚úÖ Adds functionality without changing real object</li>
            <li>‚úÖ Can improve performance through lazy loading or caching</li>
            <li>‚úÖ Follows Open/Closed Principle</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Adds complexity and indirection</li>
            <li>‚ö†Ô∏è May introduce latency</li>
            <li>‚ö†Ô∏è Code becomes more complicated</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />Entity Framework lazy loading, WCF service proxies, .NET RealProxy for remoting, caching proxies, and security proxies in enterprise applications.
          </div>
        </section>

        <!-- Behavioral Patterns Overview -->
        <section id="behavioral-patterns" role="article">
          <h1>üé≠ Behavioral Patterns</h1>
          <span class="badge">behavioral</span>
          <span class="badge">communication</span>
          <span class="badge">responsibility</span>
          
          <h2>Overview</h2>
          <p>Behavioral design patterns are concerned with <strong>algorithms and the assignment of responsibilities between objects</strong>. They describe not just patterns of objects or classes but also the patterns of communication between them. These patterns characterize complex control flow that's difficult to follow at run-time.</p>
          
          <h2>The Eleven Behavioral Patterns</h2>
          <table class="table table-striped">
            <thead>
              <tr>
                <th width="30%">Pattern</th>
                <th width="40%">Purpose</th>
                <th width="30%">Key Benefit</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Chain of Responsibility</strong></td>
                <td>Passes requests along a chain of handlers</td>
                <td>Decouples sender from receivers</td>
              </tr>
              <tr>
                <td><strong>Command</strong></td>
                <td>Encapsulates a request as an object</td>
                <td>Parameterizes clients with operations</td>
              </tr>
              <tr>
                <td><strong>Iterator</strong></td>
                <td>Provides sequential access to collection elements</td>
                <td>Traverses without exposing internal structure</td>
              </tr>
              <tr>
                <td><strong>Mediator</strong></td>
                <td>Reduces coupling between communicating objects</td>
                <td>Centralizes complex communications</td>
              </tr>
              <tr>
                <td><strong>Memento</strong></td>
                <td>Captures and restores object state</td>
                <td>Implements undo/redo functionality</td>
              </tr>
              <tr>
                <td><strong>Observer</strong></td>
                <td>Notifies dependents when state changes</td>
                <td>Establishes one-to-many dependency</td>
              </tr>
              <tr>
                <td><strong>State</strong></td>
                <td>Alters behavior when internal state changes</td>
                <td>Encapsulates state-specific behavior</td>
              </tr>
              <tr>
                <td><strong>Strategy</strong></td>
                <td>Defines a family of interchangeable algorithms</td>
                <td>Makes algorithms independent of clients</td>
              </tr>
              <tr>
                <td><strong>Template Method</strong></td>
                <td>Defines skeleton of algorithm in base class</td>
                <td>Lets subclasses redefine steps without changing structure</td>
              </tr>
              <tr>
                <td><strong>Visitor</strong></td>
                <td>Separates algorithms from objects they operate on</td>
                <td>Adds operations without modifying classes</td>
              </tr>
              <tr>
                <td><strong>Interpreter</strong></td>
                <td>Defines grammar representation and interpreter</td>
                <td>Evaluates language sentences</td>
              </tr>
            </tbody>
          </table>
          
          <h2>Why Use Behavioral Patterns?</h2>
          <ul>
            <li><strong>Flexibility:</strong> Vary behavior without changing objects</li>
            <li><strong>Encapsulation:</strong> Encapsulate what varies</li>
            <li><strong>Communication:</strong> Define clear communication protocols</li>
            <li><strong>Maintainability:</strong> Separate concerns for easier maintenance</li>
          </ul>
        </section>

        <!-- Chain of Responsibility Pattern -->
        <section id="chain-of-responsibility" role="article">
          <h1>‚õìÔ∏è Chain of Responsibility Pattern</h1>
          <span class="badge">behavioral</span>
          <span class="badge">request-handling</span>
          <span class="badge">chain</span>
          
          <h2>Intent</h2>
          <p><strong>Chain of Responsibility</strong> avoids coupling the sender of a request to its receiver by giving more than one object a chance to handle the request. Chain the receiving objects and pass the request along the chain until an object handles it.</p>
          
          <h2>Problem</h2>
          <p>You need to process requests through multiple handlers, but you don't want to hard-code which handler processes which request. The sender shouldn't need to know which object ultimately handles the request.</p>
          
          <h2>Solution</h2>
          <p>Create a chain of handler objects. Each handler decides whether to process the request or pass it to the next handler in the chain.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
%%{
    init: {
        'theme': 'base',
        'themeVariables': {
        'fontFamily': 'Segoe UI'
        }
    }
}%%
classDiagram
    class Handler {
        << abstract >>
        -nextHandler: Handler
        +SetNext(Handler) Handler
        +Handle(request)
    }
    class ConcreteHandler1 {
        +Handle(request)
    }
    class ConcreteHandler2 {
        +Handle(request)
    }
    class Client
    
    Handler <|-- ConcreteHandler1
    Handler <|-- ConcreteHandler2
    Handler o-- Handler : next
    Client --> Handler
          </div>
          
          <h2>Example: Support Ticket System</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Request
public class SupportTicket
{
    public string Issue { get; set; }
    public int Priority { get; set; } // 1=Low, 2=Medium, 3=High, 4=Critical
    
    public SupportTicket(string issue, int priority)
    {
        Issue = issue;
        Priority = priority;
    }
}

// Abstract handler
public abstract class SupportHandler
{
    protected SupportHandler _nextHandler;
    
    public SupportHandler SetNext(SupportHandler handler)
    {
        _nextHandler = handler;
        return handler;
    }
    
    public abstract void HandleTicket(SupportTicket ticket);
}

// Concrete handlers
public class Level1Support : SupportHandler
{
    public override void HandleTicket(SupportTicket ticket)
    {
        if (ticket.Priority == 1)
        {
            Console.WriteLine($"Level 1 Support handling: {ticket.Issue}");
        }
        else if (_nextHandler != null)
        {
            Console.WriteLine("Level 1: Escalating to Level 2");
            _nextHandler.HandleTicket(ticket);
        }
    }
}

public class Level2Support : SupportHandler
{
    public override void HandleTicket(SupportTicket ticket)
    {
        if (ticket.Priority == 2)
        {
            Console.WriteLine($"Level 2 Support handling: {ticket.Issue}");
        }
        else if (_nextHandler != null)
        {
            Console.WriteLine("Level 2: Escalating to Level 3");
            _nextHandler.HandleTicket(ticket);
        }
    }
}

public class Level3Support : SupportHandler
{
    public override void HandleTicket(SupportTicket ticket)
    {
        if (ticket.Priority == 3)
        {
            Console.WriteLine($"Level 3 Support handling: {ticket.Issue}");
        }
        else if (_nextHandler != null)
        {
            Console.WriteLine("Level 3: Escalating to Manager");
            _nextHandler.HandleTicket(ticket);
        }
    }
}

public class ManagerSupport : SupportHandler
{
    public override void HandleTicket(SupportTicket ticket)
    {
        Console.WriteLine($"Manager handling critical issue: {ticket.Issue}");
    }
}

// Usage
var level1 = new Level1Support();
var level2 = new Level2Support();
var level3 = new Level3Support();
var manager = new ManagerSupport();

// Build the chain
level1.SetNext(level2).SetNext(level3).SetNext(manager);

// Process tickets
var tickets = new[]
{
    new SupportTicket("Password reset", 1),
    new SupportTicket("Software installation", 2),
    new SupportTicket("Network outage", 3),
    new SupportTicket("Data breach", 4)
};

foreach (var ticket in tickets)
{
    Console.WriteLine($"\nProcessing: {ticket.Issue} (Priority: {ticket.Priority})");
    level1.HandleTicket(ticket);
}</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>More than one object can handle a request</li>
            <li>Handler isn't known in advance</li>
            <li>You want to issue requests to multiple objects without specifying the receiver explicitly</li>
            <li>Set of handlers should be specified dynamically</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Decouples sender from receivers</li>
            <li>‚úÖ Adds or removes responsibilities dynamically</li>
            <li>‚úÖ Flexibility in assigning responsibilities</li>
            <li>‚úÖ Follows Single Responsibility Principle</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Request might not be handled if chain is misconfigured</li>
            <li>‚ö†Ô∏è Can be hard to debug</li>
            <li>‚ö†Ô∏è Performance concerns with long chains</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />ASP.NET Core middleware pipeline, exception handling hierarchies, logging frameworks with different log levels, and approval workflows.
          </div>
        </section>

        <!-- Command Pattern -->
        <section id="command" role="article">
          <h1>üìù Command Pattern</h1>
          <span class="badge">behavioral</span>
          <span class="badge">encapsulation</span>
          <span class="badge">action</span>
          
          <h2>Intent</h2>
          <p><strong>Command</strong> encapsulates a request as an object, thereby letting you parameterize clients with different requests, queue or log requests, and support undoable operations.</p>
          
          <h2>Problem</h2>
          <p>You need to parameterize objects with operations, delay execution, queue operations, support undo/redo, or log operations for auditing.</p>
          
          <h2>Solution</h2>
          <p>Encapsulate requests as command objects containing all information needed to perform the action. This decouples the object making the request from the object executing it.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
classDiagram
    class Command {
        << interface >>
        +Execute()
        +Undo()
    }
    class ConcreteCommand {
        -receiver: Receiver
        -state
        +Execute()
        +Undo()
    }
    class Invoker {
        -command: Command
        +SetCommand(Command)
        +ExecuteCommand()
    }
    class Receiver {
        +Action()
    }
    
    Command <|.. ConcreteCommand
    ConcreteCommand --> Receiver
    Invoker o-- Command
          </div>
          
          <h2>Example: Smart Home Automation</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Command interface
public interface ICommand
{
    void Execute();
    void Undo();
}

// Receiver - Light
public class Light
{
    private string _location;
    private bool _isOn;
    
    public Light(string location)
    {
        _location = location;
    }
    
    public void TurnOn()
    {
        _isOn = true;
        Console.WriteLine($"{_location} light is ON");
    }
    
    public void TurnOff()
    {
        _isOn = false;
        Console.WriteLine($"{_location} light is OFF");
    }
}

// Receiver - Thermostat
public class Thermostat
{
    private int _temperature = 70;
    
    public void SetTemperature(int temperature)
    {
        _temperature = temperature;
        Console.WriteLine($"Thermostat set to {_temperature}¬∞F");
    }
    
    public int GetTemperature() => _temperature;
}

// Concrete commands
public class LightOnCommand : ICommand
{
    private Light _light;
    
    public LightOnCommand(Light light)
    {
        _light = light;
    }
    
    public void Execute() => _light.TurnOn();
    public void Undo() => _light.TurnOff();
}

public class LightOffCommand : ICommand
{
    private Light _light;
    
    public LightOffCommand(Light light)
    {
        _light = light;
    }
    
    public void Execute() => _light.TurnOff();
    public void Undo() => _light.TurnOn();
}

public class ThermostatCommand : ICommand
{
    private Thermostat _thermostat;
    private int _newTemperature;
    private int _previousTemperature;
    
    public ThermostatCommand(Thermostat thermostat, int temperature)
    {
        _thermostat = thermostat;
        _newTemperature = temperature;
    }
    
    public void Execute()
    {
        _previousTemperature = _thermostat.GetTemperature();
        _thermostat.SetTemperature(_newTemperature);
    }
    
    public void Undo()
    {
        _thermostat.SetTemperature(_previousTemperature);
    }
}

// Invoker - Remote Control
public class RemoteControl
{
    private Stack<ICommand> _history = new();
    
    public void ExecuteCommand(ICommand command)
    {
        command.Execute();
        _history.Push(command);
    }
    
    public void UndoLastCommand()
    {
        if (_history.Count > 0)
        {
            var command = _history.Pop();
            command.Undo();
            Console.WriteLine("Undone last command");
        }
        else
        {
            Console.WriteLine("No commands to undo");
        }
    }
}

// Usage
Light livingRoomLight = new Light("Living Room");
Light bedroomLight = new Light("Bedroom");
Thermostat thermostat = new Thermostat();

RemoteControl remote = new RemoteControl();

// Execute commands
remote.ExecuteCommand(new LightOnCommand(livingRoomLight));
remote.ExecuteCommand(new LightOnCommand(bedroomLight));
remote.ExecuteCommand(new ThermostatCommand(thermostat, 72));

Console.WriteLine("\n--- Undoing commands ---");
remote.UndoLastCommand(); // Undo thermostat
remote.UndoLastCommand(); // Undo bedroom light
remote.UndoLastCommand(); // Undo living room light</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>You need to parameterize objects with actions</li>
            <li>You need to queue, log, or schedule operations</li>
            <li>You need to support undo/redo functionality</li>
            <li>You want to decouple the object invoking the operation from the object that performs it</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Decouples invoker from receiver</li>
            <li>‚úÖ Easy to add new commands without changing existing code</li>
            <li>‚úÖ Supports undo/redo operations</li>
            <li>‚úÖ Supports queuing and logging</li>
            <li>‚úÖ Follows Single Responsibility and Open/Closed Principles</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Increases number of classes</li>
            <li>‚ö†Ô∏è Can make code more complex</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />Text editor undo/redo, transactional systems, job queues, GUI buttons/menu items, macro recording, and CQRS (Command Query Responsibility Segregation) pattern.
          </div>
        </section>

        <!-- Iterator Pattern -->
        <section id="iterator" role="article">
          <h1>üîÑ Iterator Pattern</h1>
          <span class="badge">behavioral</span>
          <span class="badge">collection</span>
          <span class="badge">traversal</span>
          
          <h2>Intent</h2>
          <p><strong>Iterator</strong> provides a way to access elements of a collection sequentially without exposing its underlying representation (list, stack, tree, etc.).</p>
          
          <h2>Problem</h2>
          <p>You need to traverse a collection without exposing its internal structure. Different collections may need different traversal methods.</p>
          
          <h2>Solution</h2>
          <p>Extract the traversal behavior into a separate iterator object. The iterator encapsulates details of accessing and traversing the collection.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
classDiagram
    class Iterator {
        << interface >>
        +Next() object
        +HasNext() bool
        +Current() object
    }
    class ConcreteIterator {
        -collection
        -position
        +Next() object
        +HasNext() bool
        +Current() object
    }
    class Aggregate {
        << interface >>
        +CreateIterator() Iterator
    }
    class ConcreteAggregate {
        +CreateIterator() Iterator
    }
    
    Iterator <|.. ConcreteIterator
    Aggregate <|.. ConcreteAggregate
    ConcreteAggregate ..> ConcreteIterator : creates
    ConcreteIterator --> ConcreteAggregate
          </div>
          
          <h2>Example: Book Collection</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Element
public class Book
{
    public string Title { get; set; }
    public string Author { get; set; }
    
    public Book(string title, string author)
    {
        Title = title;
        Author = author;
    }
    
    public override string ToString() => $"{Title} by {Author}";
}

// Iterator interface
public interface IIterator<T>
{
    bool HasNext();
    T Next();
    T Current { get; }
}

// Aggregate interface
public interface IBookCollection
{
    IIterator<Book> CreateIterator();
    void AddBook(Book book);
}

// Concrete iterator
public class BookIterator : IIterator<Book>
{
    private List<Book> _books;
    private int _position = -1;
    
    public BookIterator(List<Book> books)
    {
        _books = books;
    }
    
    public bool HasNext()
    {
        return _position < _books.Count - 1;
    }
    
    public Book Next()
    {
        _position++;
        return _books[_position];
    }
    
    public Book Current => _position >= 0 && _position < _books.Count 
        ? _books[_position] 
        : null;
}

// Concrete aggregate
public class BookCollection : IBookCollection
{
    private List<Book> _books = new();
    
    public void AddBook(Book book)
    {
        _books.Add(book);
    }
    
    public IIterator<Book> CreateIterator()
    {
        return new BookIterator(_books);
    }
}

// Usage
BookCollection library = new BookCollection();
library.AddBook(new Book("Design Patterns", "Gang of Four"));
library.AddBook(new Book("Clean Code", "Robert Martin"));
library.AddBook(new Book("Refactoring", "Martin Fowler"));
library.AddBook(new Book("The Pragmatic Programmer", "Hunt & Thomas"));

// Traverse using custom iterator
IIterator<Book> iterator = library.CreateIterator();
Console.WriteLine("Books in library:");
while (iterator.HasNext())
{
    Book book = iterator.Next();
    Console.WriteLine($"- {book}");
}

// C# also provides built-in IEnumerable support
public class ModernBookCollection : IEnumerable<Book>
{
    private List<Book> _books = new();
    
    public void AddBook(Book book) => _books.Add(book);
    
    public IEnumerator<Book> GetEnumerator() => _books.GetEnumerator();
    
    IEnumerator IEnumerable.GetEnumerator() => GetEnumerator();
}

// Usage with foreach
ModernBookCollection modernLibrary = new ModernBookCollection();
modernLibrary.AddBook(new Book("Domain-Driven Design", "Eric Evans"));
modernLibrary.AddBook(new Book("Enterprise Patterns", "Martin Fowler"));

foreach (var book in modernLibrary)
{
    Console.WriteLine($"- {book}");
}</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>You need to traverse a collection without exposing its internal structure</li>
            <li>You want to provide multiple traversal methods for a collection</li>
            <li>You want a uniform interface for traversing different collections</li>
            <li>You need to traverse a collection in different ways</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Hides internal structure of collection</li>
            <li>‚úÖ Multiple iterators can traverse same collection</li>
            <li>‚úÖ Follows Single Responsibility Principle</li>
            <li>‚úÖ Can add new collections and iterators without breaking existing code</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Overkill for simple collections</li>
            <li>‚ö†Ô∏è Less efficient than direct access in some cases</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />.NET's <code>IEnumerable&lt;T&gt;</code> and <code>IEnumerator&lt;T&gt;</code>, LINQ query operators, database result set cursors, and tree traversal algorithms.
          </div>
        </section>

        <!-- Mediator Pattern -->
        <section id="mediator" role="article">
          <h1>ü§ù Mediator Pattern</h1>
          <span class="badge">behavioral</span>
          <span class="badge">coordination</span>
          <span class="badge">decoupling</span>
          
          <h2>Intent</h2>
          <p><strong>Mediator</strong> defines an object that encapsulates how a set of objects interact. It promotes loose coupling by keeping objects from referring to each other explicitly.</p>
          
          <h2>Problem</h2>
          <p>When many objects interact in complex ways, the dependencies between objects become difficult to manage. Changing one object affects many others.</p>
          
          <h2>Solution</h2>
          <p>Create a mediator object that encapsulates the interaction logic. Objects communicate through the mediator instead of directly with each other.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
classDiagram
    class Mediator {
        << interface >>
        +Notify(sender, event)
    }
    class ConcreteMediator {
        -component1: Component1
        -component2: Component2
        +Notify(sender, event)
    }
    class Component {
        -mediator: Mediator
        +SetMediator(Mediator)
    }
    
    Mediator <|.. ConcreteMediator
    Component --> Mediator
    ConcreteMediator --> Component
          </div>
          
          <h2>Example: Chat Room</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Mediator interface
public interface IChatMediator
{
    void SendMessage(string message, User sender);
    void AddUser(User user);
}

// Concrete mediator
public class ChatRoom : IChatMediator
{
    private List<User> _users = new();
    
    public void AddUser(User user)
    {
        _users.Add(user);
        user.SetMediator(this);
        Console.WriteLine($"{user.Name} joined the chat room");
    }
    
    public void SendMessage(string message, User sender)
    {
        foreach (var user in _users)
        {
            // Don't send message to sender
            if (user != sender)
            {
                user.ReceiveMessage(message, sender.Name);
            }
        }
    }
}

// Colleague
public class User
{
    public string Name { get; }
    private IChatMediator _mediator;
    
    public User(string name)
    {
        Name = name;
    }
    
    public void SetMediator(IChatMediator mediator)
    {
        _mediator = mediator;
    }
    
    public void SendMessage(string message)
    {
        Console.WriteLine($"{Name} sends: {message}");
        _mediator.SendMessage(message, this);
    }
    
    public void ReceiveMessage(string message, string senderName)
    {
        Console.WriteLine($"{Name} received from {senderName}: {message}");
    }
}

// Usage
ChatRoom chatRoom = new ChatRoom();

User alice = new User("Alice");
User bob = new User("Bob");
User charlie = new User("Charlie");

chatRoom.AddUser(alice);
chatRoom.AddUser(bob);
chatRoom.AddUser(charlie);

Console.WriteLine();
alice.SendMessage("Hello everyone!");

Console.WriteLine();
bob.SendMessage("Hi Alice!");

Console.WriteLine();
charlie.SendMessage("Hey folks!");</code></pre>
          
          <h3>Example: Air Traffic Control</h3>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Mediator
public interface IAirTrafficControl
{
    void RegisterAircraft(Aircraft aircraft);
    void RequestLanding(Aircraft aircraft);
    void RequestTakeoff(Aircraft aircraft);
}

// Concrete mediator
public class AirportTower : IAirTrafficControl
{
    private List<Aircraft> _aircrafts = new();
    private bool _runwayAvailable = true;
    
    public void RegisterAircraft(Aircraft aircraft)
    {
        _aircrafts.Add(aircraft);
        aircraft.SetMediator(this);
        Console.WriteLine($"‚úàÔ∏è  {aircraft.FlightNumber} registered with tower");
    }
    
    public void RequestLanding(Aircraft aircraft)
    {
        if (_runwayAvailable)
        {
            _runwayAvailable = false;
            Console.WriteLine($"üõ¨ {aircraft.FlightNumber} cleared for landing");
            aircraft.Land();
            _runwayAvailable = true;
        }
        else
        {
            Console.WriteLine($"‚è≥ {aircraft.FlightNumber} holding pattern - runway occupied");
        }
    }
    
    public void RequestTakeoff(Aircraft aircraft)
    {
        if (_runwayAvailable)
        {
            _runwayAvailable = false;
            Console.WriteLine($"üõ´ {aircraft.FlightNumber} cleared for takeoff");
            aircraft.Takeoff();
            _runwayAvailable = true;
        }
        else
        {
            Console.WriteLine($"‚è≥ {aircraft.FlightNumber} waiting - runway occupied");
        }
    }
}

// Colleague
public class Aircraft
{
    public string FlightNumber { get; }
    private IAirTrafficControl _atc;
    
    public Aircraft(string flightNumber)
    {
        FlightNumber = flightNumber;
    }
    
    public void SetMediator(IAirTrafficControl atc)
    {
        _atc = atc;
    }
    
    public void RequestLanding()
    {
        _atc.RequestLanding(this);
    }
    
    public void RequestTakeoff()
    {
        _atc.RequestTakeoff(this);
    }
    
    public void Land()
    {
        Console.WriteLine($"   {FlightNumber} landed safely");
    }
    
    public void Takeoff()
    {
        Console.WriteLine($"   {FlightNumber} taking off");
    }
}

// Usage
AirportTower tower = new AirportTower();

Aircraft flight1 = new Aircraft("AA123");
Aircraft flight2 = new Aircraft("UA456");
Aircraft flight3 = new Aircraft("DL789");

tower.RegisterAircraft(flight1);
tower.RegisterAircraft(flight2);
tower.RegisterAircraft(flight3);

Console.WriteLine("\n--- Operations ---");
flight1.RequestLanding();
flight2.RequestTakeoff();
flight3.RequestLanding();</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>A set of objects communicate in complex but well-defined ways</li>
            <li>Reusing objects is difficult because they refer to many other objects</li>
            <li>Behavior distributed between classes should be customizable without subclassing</li>
            <li>You want to avoid tight coupling between interacting objects</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Reduces coupling between components</li>
            <li>‚úÖ Centralizes control logic</li>
            <li>‚úÖ Simplifies object protocols</li>
            <li>‚úÖ Follows Single Responsibility Principle</li>
            <li>‚úÖ Follows Open/Closed Principle</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Mediator can become a god object</li>
            <li>‚ö†Ô∏è Can become complex as it absorbs more logic</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />MediatR library in .NET, chat applications, air traffic control systems, dialog boxes with interdependent controls, and event aggregators.
          </div>
        </section>

        <!-- Memento Pattern -->
        <section id="memento" role="article">
          <h1>üíæ Memento Pattern</h1>
          <span class="badge">behavioral</span>
          <span class="badge">state</span>
          <span class="badge">undo</span>
          
          <h2>Intent</h2>
          <p><strong>Memento</strong> captures and externalizes an object's internal state without violating encapsulation, so the object can be restored to this state later.</p>
          
          <h2>Problem</h2>
          <p>You need to save and restore an object's state (undo/redo functionality) without exposing its internal structure or violating encapsulation.</p>
          
          <h2>Solution</h2>
          <p>Create a memento object that stores a snapshot of the originator's state. The caretaker stores mementos but never operates on or examines their contents.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
classDiagram
    class Originator {
        -state
        +CreateMemento() Memento
        +Restore(Memento)
    }
    class Memento {
        -state
        +GetState()
    }
    class Caretaker {
        -mementos: List~Memento~
        +SaveState(Originator)
        +Undo(Originator)
    }
    
    Originator ..> Memento : creates
    Caretaker --> Memento
    Caretaker --> Originator
          </div>
          
          <h2>Example: Text Editor with Undo</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Memento - stores state
public class EditorMemento
{
    public string Content { get; }
    public int CursorPosition { get; }
    public DateTime Timestamp { get; }
    
    public EditorMemento(string content, int cursorPosition)
    {
        Content = content;
        CursorPosition = cursorPosition;
        Timestamp = DateTime.Now;
    }
}

// Originator - creates and restores from memento
public class TextEditor
{
    private string _content = "";
    private int _cursorPosition = 0;
    
    public void Write(string text)
    {
        _content += text;
        _cursorPosition += text.Length;
    }
    
    public void SetContent(string content)
    {
        _content = content;
        _cursorPosition = content.Length;
    }
    
    public string GetContent() => _content;
    
    public void ShowContent()
    {
        Console.WriteLine($"Content: {_content}");
        Console.WriteLine($"Cursor: {_cursorPosition}");
    }
    
    // Create memento
    public EditorMemento Save()
    {
        return new EditorMemento(_content, _cursorPosition);
    }
    
    // Restore from memento
    public void Restore(EditorMemento memento)
    {
        _content = memento.Content;
        _cursorPosition = memento.CursorPosition;
        Console.WriteLine($"Restored to state from {memento.Timestamp:HH:mm:ss}");
    }
}

// Caretaker - manages mementos
public class EditorHistory
{
    private Stack<EditorMemento> _history = new();
    private TextEditor _editor;
    
    public EditorHistory(TextEditor editor)
    {
        _editor = editor;
    }
    
    public void Backup()
    {
        _history.Push(_editor.Save());
        Console.WriteLine("üíæ State saved");
    }
    
    public void Undo()
    {
        if (_history.Count == 0)
        {
            Console.WriteLine("‚ö†Ô∏è  Nothing to undo");
            return;
        }
        
        EditorMemento memento = _history.Pop();
        _editor.Restore(memento);
    }
    
    public void ShowHistory()
    {
        Console.WriteLine($"\nüìã History ({_history.Count} states saved)");
    }
}

// Usage
TextEditor editor = new TextEditor();
EditorHistory history = new EditorHistory(editor);

Console.WriteLine("=== Text Editor with Undo ===\n");

editor.Write("Hello ");
editor.ShowContent();
history.Backup();

Console.WriteLine();
editor.Write("World");
editor.ShowContent();
history.Backup();

Console.WriteLine();
editor.Write("!!!");
editor.ShowContent();
history.Backup();

Console.WriteLine("\n--- Performing undo operations ---\n");
history.Undo();
editor.ShowContent();

Console.WriteLine();
history.Undo();
editor.ShowContent();

Console.WriteLine();
history.Undo();
editor.ShowContent();</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>You need to save and restore an object's state</li>
            <li>You want to implement undo/redo functionality</li>
            <li>You need to maintain a history of states</li>
            <li>Direct access to object's state would expose implementation details</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Preserves encapsulation boundaries</li>
            <li>‚úÖ Simplifies originator by externalizing state management</li>
            <li>‚úÖ Easy to implement undo/redo</li>
            <li>‚úÖ Follows Single Responsibility Principle</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Can be expensive if state is large or created frequently</li>
            <li>‚ö†Ô∏è Caretaker must track memento lifecycle</li>
            <li>‚ö†Ô∏è Memory consumption can be high</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />Text editor undo/redo, database transaction rollback, game save states, version control systems, and form draft auto-save functionality.
          </div>
        </section>

        <!-- Observer Pattern -->
        <section id="observer" role="article">
          <h1>üëÄ Observer Pattern</h1>
          <span class="badge">behavioral</span>
          <span class="badge">event</span>
          <span class="badge">notification</span>
          
          <h2>Intent</h2>
          <p><strong>Observer</strong> (also known as Publish-Subscribe) defines a one-to-many dependency between objects so that when one object changes state, all its dependents are notified and updated automatically.</p>
          
          <h2>Problem</h2>
          <p>You need to notify multiple objects when another object's state changes, without tightly coupling them together.</p>
          
          <h2>Solution</h2>
          <p>Create a subject that maintains a list of observers. When the subject's state changes, it notifies all registered observers automatically.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
classDiagram
    class Subject {
        -observers: List~Observer~
        +Attach(Observer)
        +Detach(Observer)
        +Notify()
    }
    class Observer {
        << interface >>
        +Update()
    }
    class ConcreteSubject {
        -state
        +GetState()
        +SetState()
    }
    class ConcreteObserver {
        -subject: ConcreteSubject
        +Update()
    }
    
    Subject <|-- ConcreteSubject
    Observer <|.. ConcreteObserver
    Subject o-- Observer
    ConcreteObserver --> ConcreteSubject
          </div>
          
          <h2>Example: Stock Market Ticker</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Observer interface
public interface IObserver
{
    void Update(Stock stock);
}

// Subject
public class Stock
{
    private string _symbol;
    private decimal _price;
    private List&lt;IObserver&gt; _observers = new();
    
    public Stock(string symbol, decimal price)
    {
        _symbol = symbol;
        _price = price;
    }
    
    public string Symbol => _symbol;
    public decimal Price => _price;
    
    public void Attach(IObserver observer)
    {
        _observers.Add(observer);
        Console.WriteLine($"Observer subscribed to {_symbol}");
    }
    
    public void Detach(IObserver observer)
    {
        _observers.Remove(observer);
        Console.WriteLine($"Observer unsubscribed from {_symbol}");
    }
    
    public void SetPrice(decimal price)
    {
        Console.WriteLine($"\n{_symbol} price changing: ${_price} ‚Üí ${price}");
        _price = price;
        Notify();
    }
    
    private void Notify()
    {
        foreach (var observer in _observers)
        {
            observer.Update(this);
        }
    }
}

// Concrete observers
public class Investor : IObserver
{
    public string Name { get; }
    
    public Investor(string name)
    {
        Name = name;
    }
    
    public void Update(Stock stock)
    {
        Console.WriteLine($"  üìä {Name} notified: {stock.Symbol} is now ${stock.Price}");
    }
}

public class TradingBot : IObserver
{
    private string _strategyName;
    private decimal _buyThreshold;
    
    public TradingBot(string strategyName, decimal buyThreshold)
    {
        _strategyName = strategyName;
        _buyThreshold = buyThreshold;
    }
    
    public void Update(Stock stock)
    {
        Console.WriteLine($"  ü§ñ {_strategyName} analyzing: {stock.Symbol} @ ${stock.Price}");
        
        if (stock.Price < _buyThreshold)
        {
            Console.WriteLine($"     ‚úÖ BUY signal triggered!");
        }
    }
}

// Usage
Stock appleStock = new Stock("AAPL", 150.00m);

Investor alice = new Investor("Alice");
Investor bob = new Investor("Bob");
TradingBot bot = new TradingBot("ValueBot", 145.00m);

appleStock.Attach(alice);
appleStock.Attach(bob);
appleStock.Attach(bot);

appleStock.SetPrice(155.00m);
appleStock.SetPrice(142.00m); // Bot triggers buy signal

appleStock.Detach(bob);
appleStock.SetPrice(160.00m); // Bob won't be notified</code></pre>
          
          <h3>Modern C# Implementation with Events</h3>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Using C# events and delegates
public class ModernStock
{
    private string _symbol;
    private decimal _price;
    
    public string Symbol => _symbol;
    public decimal Price => _price;
    
    // Event declaration
    public event EventHandler&lt;StockPriceChangedEventArgs&gt; PriceChanged;
    
    public ModernStock(string symbol, decimal price)
    {
        _symbol = symbol;
        _price = price;
    }
    
    public void SetPrice(decimal price)
    {
        if (_price != price)
        {
            decimal oldPrice = _price;
            _price = price;
            OnPriceChanged(new StockPriceChangedEventArgs(oldPrice, price));
        }
    }
    
    protected virtual void OnPriceChanged(StockPriceChangedEventArgs e)
    {
        PriceChanged?.Invoke(this, e);
    }
}

public class StockPriceChangedEventArgs : EventArgs
{
    public decimal OldPrice { get; }
    public decimal NewPrice { get; }
    
    public StockPriceChangedEventArgs(decimal oldPrice, decimal newPrice)
    {
        OldPrice = oldPrice;
        NewPrice = newPrice;
    }
}

// Usage with events
ModernStock stock = new ModernStock("MSFT", 300.00m);

stock.PriceChanged += (sender, e) =>
{
    Console.WriteLine($"Price changed from ${e.OldPrice} to ${e.NewPrice}");
};

stock.SetPrice(305.00m);</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>Changes to one object require changing others, and you don't know how many objects need to be changed</li>
            <li>An object should notify other objects without making assumptions about who those objects are</li>
            <li>You need to implement event handling systems</li>
            <li>You want to create loosely coupled systems</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Loosely couples subject and observers</li>
            <li>‚úÖ Supports broadcast communication</li>
            <li>‚úÖ Dynamic relationships at runtime</li>
            <li>‚úÖ Follows Open/Closed Principle</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Observers are notified in random order</li>
            <li>‚ö†Ô∏è Can cause memory leaks if observers aren't unsubscribed</li>
            <li>‚ö†Ô∏è Unexpected updates can occur</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />C# events and delegates, UI frameworks (data binding in WPF/MAUI), pub/sub messaging systems, notification services, and reactive programming (Rx.NET).
          </div>
        </section>

        <!-- State Pattern -->
        <section id="state" role="article">
          <h1>üö¶State Pattern</h1>
          <span class="badge">behavioral</span>
          <span class="badge">state-machine</span>
          <span class="badge">behavior</span>
          
          <h2>Intent</h2>
          <p><strong>State</strong> allows an object to alter its behavior when its internal state changes. The object will appear to change its class.</p>
          
          <h2>Problem</h2>
          <p>An object's behavior depends on its state, and it must change behavior at runtime depending on that state. You have large conditional statements that depend on the object's state.</p>
          
          <h2>Solution</h2>
          <p>Create separate state classes for each possible state. The context delegates state-specific behavior to the current state object.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
classDiagram
    class Context {
        -state: State
        +SetState(State)
        +Request()
    }
    class State {
        << abstract >>
        +Handle(Context)
    }
    class ConcreteStateA {
        +Handle(Context)
    }
    class ConcreteStateB {
        +Handle(Context)
    }
    
    Context o-- State
    State <|-- ConcreteStateA
    State <|-- ConcreteStateB
          </div>
          
          <h2>Example: Order Processing</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// State interface
public interface IOrderState
{
    void Process(Order order);
    void Cancel(Order order);
    void Ship(Order order);
    void Deliver(Order order);
}

// Context
public class Order
{
    private IOrderState _state;
    public string OrderId { get; }
    
    public Order(string orderId)
    {
        OrderId = orderId;
        _state = new NewOrderState(); // Initial state
        Console.WriteLine($"Order {OrderId} created in New state");
    }
    
    public void SetState(IOrderState state)
    {
        _state = state;
    }
    
    public void Process() => _state.Process(this);
    public void Cancel() => _state.Cancel(this);
    public void Ship() => _state.Ship(this);
    public void Deliver() => _state.Deliver(this);
}

// Concrete states
public class NewOrderState : IOrderState
{
    public void Process(Order order)
    {
        Console.WriteLine($"‚úÖ Order {order.OrderId}: Processing payment");
        order.SetState(new ProcessingState());
    }
    
    public void Cancel(Order order)
    {
        Console.WriteLine($"‚ùå Order {order.OrderId}: Cancelled");
        order.SetState(new CancelledState());
    }
    
    public void Ship(Order order)
    {
        Console.WriteLine("‚ö†Ô∏è  Cannot ship order that hasn't been processed");
    }
    
    public void Deliver(Order order)
    {
        Console.WriteLine("‚ö†Ô∏è  Cannot deliver order that hasn't been shipped");
    }
}

public class ProcessingState : IOrderState
{
    public void Process(Order order)
    {
        Console.WriteLine("‚ö†Ô∏è  Order is already being processed");
    }
    
    public void Cancel(Order order)
    {
        Console.WriteLine($"‚ùå Order {order.OrderId}: Cancelled during processing");
        order.SetState(new CancelledState());
    }
    
    public void Ship(Order order)
    {
        Console.WriteLine($"üì¶ Order {order.OrderId}: Shipped");
        order.SetState(new ShippedState());
    }
    
    public void Deliver(Order order)
    {
        Console.WriteLine("‚ö†Ô∏è  Cannot deliver order that hasn't been shipped");
    }
}

public class ShippedState : IOrderState
{
    public void Process(Order order)
    {
        Console.WriteLine("‚ö†Ô∏è  Order has already been processed");
    }
    
    public void Cancel(Order order)
    {
        Console.WriteLine("‚ö†Ô∏è  Cannot cancel order that has been shipped");
    }
    
    public void Ship(Order order)
    {
        Console.WriteLine("‚ö†Ô∏è  Order has already been shipped");
    }
    
    public void Deliver(Order order)
    {
        Console.WriteLine($"üéâ Order {order.OrderId}: Delivered");
        order.SetState(new DeliveredState());
    }
}

public class DeliveredState : IOrderState
{
    public void Process(Order order)
    {
        Console.WriteLine("‚ö†Ô∏è  Order has already been delivered");
    }
    
    public void Cancel(Order order)
    {
        Console.WriteLine("‚ö†Ô∏è  Cannot cancel delivered order");
    }
    
    public void Ship(Order order)
    {
        Console.WriteLine("‚ö†Ô∏è  Order has already been delivered");
    }
    
    public void Deliver(Order order)
    {
        Console.WriteLine("‚ö†Ô∏è  Order has already been delivered");
    }
}

public class CancelledState : IOrderState
{
    public void Process(Order order) => Console.WriteLine("‚ö†Ô∏è  Cannot process cancelled order");
    public void Cancel(Order order) => Console.WriteLine("‚ö†Ô∏è  Order is already cancelled");
    public void Ship(Order order) => Console.WriteLine("‚ö†Ô∏è  Cannot ship cancelled order");
    public void Deliver(Order order) => Console.WriteLine("‚ö†Ô∏è  Cannot deliver cancelled order");
}

// Usage
Order order = new Order("ORD-12345");

Console.WriteLine("\n--- Valid workflow ---");
order.Process();  // New ‚Üí Processing
order.Ship();     // Processing ‚Üí Shipped
order.Deliver();  // Shipped ‚Üí Delivered

Console.WriteLine("\n--- Invalid operations ---");
order.Ship();     // Already delivered
order.Cancel();   // Cannot cancel delivered order

Console.WriteLine("\n--- Cancelled order ---");
Order order2 = new Order("ORD-67890");
order2.Cancel();  // New ‚Üí Cancelled
order2.Ship();    // Cannot ship cancelled order</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>Object's behavior depends on its state and must change at runtime</li>
            <li>Operations have large conditional statements that depend on state</li>
            <li>You want to eliminate state-specific code duplication</li>
            <li>You need to implement state machines</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Organizes state-specific behavior</li>
            <li>‚úÖ Eliminates large conditional statements</li>
            <li>‚úÖ Makes state transitions explicit</li>
            <li>‚úÖ Follows Single Responsibility and Open/Closed Principles</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Increases number of classes</li>
            <li>‚ö†Ô∏è Can be overkill for simple state machines</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />Document approval workflows, TCP connection states, game character states (idle, walking, jumping), media player states (playing, paused, stopped), and order processing systems.
          </div>
        </section>

        <!-- Strategy Pattern -->
        <section id="strategy" role="article">
          <h1>üéØ Strategy Pattern</h1>
          <span class="badge">behavioral</span>
          <span class="badge">algorithm</span>
          <span class="badge">encapsulation</span>
          
          <h2>Intent</h2>
          <p><strong>Strategy</strong> defines a family of algorithms, encapsulates each one, and makes them interchangeable. Strategy lets the algorithm vary independently from clients that use it.</p>
          
          <h2>Problem</h2>
          <p>You need to use different variants of an algorithm, and you want to be able to switch between them at runtime without using large conditional statements.</p>
          
          <h2>Solution</h2>
          <p>Define a family of algorithms, encapsulate each one in a separate class, and make them interchangeable through a common interface.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
classDiagram
    class Context {
        -strategy: Strategy
        +SetStrategy(Strategy)
        +ExecuteStrategy()
    }
    class Strategy {
        << interface >>
        +Execute()
    }
    class ConcreteStrategyA {
        +Execute()
    }
    class ConcreteStrategyB {
        +Execute()
    }
    class ConcreteStrategyC {
        +Execute()
    }
    
    Context o-- Strategy
    Strategy <|.. ConcreteStrategyA
    Strategy <|.. ConcreteStrategyB
    Strategy <|.. ConcreteStrategyC
          </div>
          
          <h2>Example: Payment Processing</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Strategy interface
public interface IPaymentStrategy
{
    void Pay(decimal amount);
    bool Validate();
}

// Concrete strategies
public class CreditCardPayment : IPaymentStrategy
{
    private string _cardNumber;
    private string _cvv;
    
    public CreditCardPayment(string cardNumber, string cvv)
    {
        _cardNumber = cardNumber;
        _cvv = cvv;
    }
    
    public bool Validate()
    {
        Console.WriteLine("Validating credit card...");
        return _cardNumber.Length == 16 && _cvv.Length == 3;
    }
    
    public void Pay(decimal amount)
    {
        Console.WriteLine($"üí≥ Paid ${amount} using Credit Card ****{_cardNumber.Substring(12)}");
    }
}

public class PayPalPayment : IPaymentStrategy
{
    private string _email;
    
    public PayPalPayment(string email)
    {
        _email = email;
    }
    
    public bool Validate()
    {
        Console.WriteLine("Validating PayPal account...");
        return _email.Contains("@");
    }
    
    public void Pay(decimal amount)
    {
        Console.WriteLine($"üí∞ Paid ${amount} using PayPal ({_email})");
    }
}

public class CryptocurrencyPayment : IPaymentStrategy
{
    private string _walletAddress;
    private string _cryptoType;
    
    public CryptocurrencyPayment(string walletAddress, string cryptoType)
    {
        _walletAddress = walletAddress;
        _cryptoType = cryptoType;
    }
    
    public bool Validate()
    {
        Console.WriteLine("Validating crypto wallet...");
        return _walletAddress.Length > 20;
    }
    
    public void Pay(decimal amount)
    {
        Console.WriteLine($"‚Çø Paid ${amount} using {_cryptoType} to {_walletAddress.Substring(0, 10)}...");
    }
}

// Context
public class ShoppingCart
{
    private IPaymentStrategy _paymentStrategy;
    private decimal _totalAmount = 0;
    
    public void AddItem(string item, decimal price)
    {
        _totalAmount += price;
        Console.WriteLine($"Added {item}: ${price}");
    }
    
    public void SetPaymentStrategy(IPaymentStrategy strategy)
    {
        _paymentStrategy = strategy;
    }
    
    public void Checkout()
    {
        Console.WriteLine($"\nüí∞ Total: ${_totalAmount}");
        
        if (_paymentStrategy == null)
        {
            Console.WriteLine("‚ö†Ô∏è  Please select a payment method");
            return;
        }
        
        if (_paymentStrategy.Validate())
        {
            _paymentStrategy.Pay(_totalAmount);
            Console.WriteLine("‚úÖ Payment successful!\n");
            _totalAmount = 0;
        }
        else
        {
            Console.WriteLine("‚ùå Payment validation failed\n");
        }
    }
}

// Usage
ShoppingCart cart = new ShoppingCart();
cart.AddItem("Laptop", 999.99m);
cart.AddItem("Mouse", 29.99m);

// Pay with credit card
cart.SetPaymentStrategy(new CreditCardPayment("1234567890123456", "123"));
cart.Checkout();

// New cart with different payment
cart.AddItem("Keyboard", 89.99m);
cart.SetPaymentStrategy(new PayPalPayment("user@example.com"));
cart.Checkout();

// Another cart with crypto
cart.AddItem("Monitor", 299.99m);
cart.SetPaymentStrategy(new CryptocurrencyPayment("1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa", "Bitcoin"));
cart.Checkout();</code></pre>
          
          <h3>Example: Sorting Strategies</h3>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Strategy for sorting
public interface ISortStrategy
{
    void Sort(List&lt;int&gt; data);
}

public class QuickSort : ISortStrategy
{
    public void Sort(List&lt;int&gt; data)
    {
        Console.WriteLine("Sorting using QuickSort");
        data.Sort(); // Using built-in sort (which uses QuickSort for large lists)
    }
}

public class BubbleSort : ISortStrategy
{
    public void Sort(List&lt;int&gt; data)
    {
        Console.WriteLine("Sorting using BubbleSort");
        // Simple bubble sort implementation
        for (int i = 0; i < data.Count - 1; i++)
        {
            for (int j = 0; j < data.Count - i - 1; j++)
            {
                if (data[j] > data[j + 1])
                {
                    int temp = data[j];
                    data[j] = data[j + 1];
                    data[j + 1] = temp;
                }
            }
        }
    }
}

// Context
public class DataProcessor
{
    private ISortStrategy _sortStrategy;
    
    public void SetSortStrategy(ISortStrategy strategy)
    {
        _sortStrategy = strategy;
    }
    
    public void ProcessData(List&lt;int&gt; data)
    {
        Console.WriteLine($"Original: {string.Join(", ", data)}");
        _sortStrategy.Sort(data);
        Console.WriteLine($"Sorted: {string.Join(", ", data)}\n");
    }
}

// Usage
var processor = new DataProcessor();
var data = new List&lt;int&gt; { 5, 2, 8, 1, 9 };

processor.SetSortStrategy(new QuickSort());
processor.ProcessData(new List&lt;int&gt;(data));

processor.SetSortStrategy(new BubbleSort());
processor.ProcessData(new List&lt;int&gt;(data));</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>You have multiple related classes that differ only in behavior</li>
            <li>You need different variants of an algorithm</li>
            <li>You want to avoid exposing complex algorithm-specific data structures</li>
            <li>A class has many behaviors with multiple conditional statements</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Switches algorithms at runtime</li>
            <li>‚úÖ Isolates algorithm implementation from code that uses it</li>
            <li>‚úÖ Eliminates conditional statements</li>
            <li>‚úÖ Follows Open/Closed Principle</li>
            <li>‚úÖ Easy to add new strategies</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Increases number of classes</li>
            <li>‚ö†Ô∏è Clients must be aware of different strategies</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />Compression algorithms, validation strategies, authentication methods, routing algorithms, pricing strategies in e-commerce, and LINQ's <code>IComparer&lt;T&gt;</code>.
          </div>
        </section>

        <!-- Template Method Pattern -->
        <section id="template-method" role="article">
          <h1>üìã Template Method Pattern</h1>
          <span class="badge">behavioral</span>
          <span class="badge">algorithm</span>
          <span class="badge">inheritance</span>
          
          <h2>Intent</h2>
          <p><strong>Template Method</strong> defines the skeleton of an algorithm in a base class, letting subclasses override specific steps without changing the algorithm's structure.</p>
          
          <h2>Problem</h2>
          <p>You have algorithms with similar steps but different implementations for some steps. You want to reuse the common structure while allowing customization.</p>
          
          <h2>Solution</h2>
          <p>Define the algorithm's structure in a base class template method. Subclasses override specific steps while keeping the overall structure intact.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
classDiagram
    class AbstractClass {
        +TemplateMethod()
        #Step1()
        #Step2()
        #Step3()
    }
    class ConcreteClassA {
        #Step1()
        #Step3()
    }
    class ConcreteClassB {
        #Step1()
        #Step3()
    }
    
    AbstractClass <|-- ConcreteClassA
    AbstractClass <|-- ConcreteClassB
          </div>
          
          <h2>Example: Report Generation</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Abstract class with template method
public abstract class ReportGenerator
{
    // Template method - defines algorithm structure
    public void GenerateReport()
    {
        Console.WriteLine("=== Generating Report ===\n");
        
        GatherData();
        FormatHeader();
        FormatBody();
        FormatFooter();
        
        if (ShouldExport())
        {
            ExportReport();
        }
        
        Console.WriteLine("\n=== Report Complete ===\n");
    }
    
    // Common step - same for all reports
    private void GatherData()
    {
        Console.WriteLine("üìä Gathering data from database...");
    }
    
    // Abstract steps - must be implemented by subclasses
    protected abstract void FormatHeader();
    protected abstract void FormatBody();
    
    // Hook - can be overridden but has default implementation
    protected virtual void FormatFooter()
    {
        Console.WriteLine("üìù Adding standard footer");
    }
    
    // Hook with default behavior
    protected virtual bool ShouldExport()
    {
        return true;
    }
    
    protected virtual void ExportReport()
    {
        Console.WriteLine("üíæ Exporting report to default location");
    }
}

// Concrete implementation - PDF Report
public class PdfReport : ReportGenerator
{
    protected override void FormatHeader()
    {
        Console.WriteLine("üìÑ Formatting PDF header with logo");
    }
    
    protected override void FormatBody()
    {
        Console.WriteLine("üìÑ Formatting PDF body with charts and tables");
    }
    
    protected override void FormatFooter()
    {
        Console.WriteLine("üìÑ Adding PDF footer with page numbers");
    }
    
    protected override void ExportReport()
    {
        Console.WriteLine("üíæ Exporting to PDF file");
    }
}

// Concrete implementation - HTML Report
public class HtmlReport : ReportGenerator
{
    protected override void FormatHeader()
    {
        Console.WriteLine("üåê Formatting HTML header with CSS styling");
    }
    
    protected override void FormatBody()
    {
        Console.WriteLine("üåê Formatting HTML body with responsive design");
    }
    
    protected override void ExportReport()
    {
        Console.WriteLine("üíæ Publishing to web server");
    }
}

// Concrete implementation - Excel Report
public class ExcelReport : ReportGenerator
{
    protected override void FormatHeader()
    {
        Console.WriteLine("üìä Formatting Excel header with column names");
    }
    
    protected override void FormatBody()
    {
        Console.WriteLine("üìä Formatting Excel body with formulas and pivot tables");
    }
    
    protected override bool ShouldExport()
    {
        // Excel reports are saved automatically, no export needed
        return false;
    }
}

// Usage
ReportGenerator pdfReport = new PdfReport();
pdfReport.GenerateReport();

ReportGenerator htmlReport = new HtmlReport();
htmlReport.GenerateReport();

ReportGenerator excelReport = new ExcelReport();
excelReport.GenerateReport();</code></pre>
          
          <h3>Example: Data Mining</h3>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Abstract class
public abstract class DataMiner
{
    // Template method
    public void Mine(string path)
    {
        Console.WriteLine($"\n--- Mining data from {path} ---");
        
        var file = OpenFile(path);
        var rawData = ExtractData(file);
        var parsedData = ParseData(rawData);
        var analyzedData = AnalyzeData(parsedData);
        SendReport(analyzedData);
        CloseFile(file);
    }
    
    protected abstract object OpenFile(string path);
    protected abstract string ExtractData(object file);
    protected abstract string ParseData(string rawData);
    
    // Hook with default implementation
    protected virtual string AnalyzeData(string data)
    {
        Console.WriteLine("Performing standard analysis");
        return $"Analyzed: {data}";
    }
    
    protected abstract void SendReport(string data);
    
    protected virtual void CloseFile(object file)
    {
        Console.WriteLine("Closing file");
    }
}

public class CsvDataMiner : DataMiner
{
    protected override object OpenFile(string path)
    {
        Console.WriteLine($"Opening CSV file: {path}");
        return new { Path = path, Type = "CSV" };
    }
    
    protected override string ExtractData(object file)
    {
        Console.WriteLine("Extracting CSV data");
        return "csv,data,here";
    }
    
    protected override string ParseData(string rawData)
    {
        Console.WriteLine("Parsing CSV format");
        return rawData.Replace(",", " | ");
    }
    
    protected override void SendReport(string data)
    {
        Console.WriteLine($"Emailing CSV report: {data}");
    }
}

public class JsonDataMiner : DataMiner
{
    protected override object OpenFile(string path)
    {
        Console.WriteLine($"Opening JSON file: {path}");
        return new { Path = path, Type = "JSON" };
    }
    
    protected override string ExtractData(object file)
    {
        Console.WriteLine("Extracting JSON data");
        return "{\"key\":\"value\"}";
    }
    
    protected override string ParseData(string rawData)
    {
        Console.WriteLine("Parsing JSON format");
        return rawData.Replace("{", "").Replace("}", "");
    }
    
    protected override string AnalyzeData(string data)
    {
        Console.WriteLine("Performing advanced JSON analysis");
        return $"Deep analyzed: {data}";
    }
    
    protected override void SendReport(string data)
    {
        Console.WriteLine($"Posting JSON report to API: {data}");
    }
}

// Usage
DataMiner csvMiner = new CsvDataMiner();
csvMiner.Mine("data.csv");

DataMiner jsonMiner = new JsonDataMiner();
jsonMiner.Mine("data.json");</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>Multiple classes have algorithms with similar structures</li>
            <li>You want to let subclasses override specific steps but not the algorithm structure</li>
            <li>You want to avoid code duplication by extracting common behavior</li>
            <li>You need to control extension points in an algorithm</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Eliminates code duplication</li>
            <li>‚úÖ Controls which steps can be customized</li>
            <li>‚úÖ Easy to add new implementations</li>
            <li>‚úÖ Follows Open/Closed Principle</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Limited by inheritance</li>
            <li>‚ö†Ô∏è May violate Liskov Substitution Principle if subclasses suppress steps</li>
            <li>‚ö†Ô∏è More classes to maintain</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />ASP.NET page lifecycle methods, unit testing frameworks (setup/teardown), data processing pipelines, game engines (game loop), and ETL processes.
          </div>
        </section>

        <!-- Visitor Pattern -->
        <section id="visitor" role="article">
          <h1>üö∂ Visitor Pattern</h1>
          <span class="badge">behavioral</span>
          <span class="badge">operation</span>
          <span class="badge">double-dispatch</span>
          
          <h2>Intent</h2>
          <p><strong>Visitor</strong> lets you separate algorithms from the objects on which they operate. You can add new operations without modifying the classes of the elements on which it operates.</p>
          
          <h2>Problem</h2>
          <p>You need to perform operations across a set of objects with different classes. Adding new operations would require changing all classes.</p>
          
          <h2>Solution</h2>
          <p>Create a visitor interface with a visit method for each element type. Elements accept visitors and call the appropriate visit method.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
classDiagram
    class Visitor {
        << interface >>
        +VisitConcreteElementA(ConcreteElementA)
        +VisitConcreteElementB(ConcreteElementB)
    }
    class ConcreteVisitor {
        +VisitConcreteElementA(ConcreteElementA)
        +VisitConcreteElementB(ConcreteElementB)
    }
    class Element {
        << interface >>
        +Accept(Visitor)
    }
    class ConcreteElementA {
        +Accept(Visitor)
        +OperationA()
    }
    class ConcreteElementB {
        +Accept(Visitor)
        +OperationB()
    }
    
    Visitor <|.. ConcreteVisitor
    Element <|.. ConcreteElementA
    Element <|.. ConcreteElementB
    ConcreteElementA --> Visitor
    ConcreteElementB --> Visitor
          </div>
          
          <h2>Example: Insurance Calculator</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Visitor interface
public interface IInsuranceVisitor
{
    void Visit(Car car);
    void Visit(House house);
    void Visit(Jewelry jewelry);
}

// Element interface
public interface IInsurable
{
    void Accept(IInsuranceVisitor visitor);
}

// Concrete elements
public class Car : IInsurable
{
    public string Model { get; set; }
    public int Year { get; set; }
    public decimal Value { get; set; }
    
    public Car(string model, int year, decimal value)
    {
        Model = model;
        Year = year;
        Value = value;
    }
    
    public void Accept(IInsuranceVisitor visitor)
    {
        visitor.Visit(this);
    }
}

public class House : IInsurable
{
    public string Address { get; set; }
    public int SquareFeet { get; set; }
    public decimal Value { get; set; }
    
    public House(string address, int squareFeet, decimal value)
    {
        Address = address;
        SquareFeet = squareFeet;
        Value = value;
    }
    
    public void Accept(IInsuranceVisitor visitor)
    {
        visitor.Visit(this);
    }
}

public class Jewelry : IInsurable
{
    public string Type { get; set; }
    public decimal Value { get; set; }
    
    public Jewelry(string type, decimal value)
    {
        Type = type;
        Value = value;
    }
    
    public void Accept(IInsuranceVisitor visitor)
    {
        visitor.Visit(this);
    }
}

// Concrete visitor - Premium Calculator
public class PremiumCalculator : IInsuranceVisitor
{
    private decimal _totalPremium = 0;
    
    public void Visit(Car car)
    {
        decimal premium = car.Value * 0.02m; // 2% of value
        if (DateTime.Now.Year - car.Year > 10)
        {
            premium *= 1.5m; // 50% increase for old cars
        }
        Console.WriteLine($"üöó Car {car.Model}: Premium = ${premium:F2}");
        _totalPremium += premium;
    }
    
    public void Visit(House house)
    {
        decimal premium = house.Value * 0.005m; // 0.5% of value
        premium += house.SquareFeet * 0.01m; // Plus per square foot
        Console.WriteLine($"üè† House at {house.Address}: Premium = ${premium:F2}");
        _totalPremium += premium;
    }
    
    public void Visit(Jewelry jewelry)
    {
        decimal premium = jewelry.Value * 0.03m; // 3% of value (high risk)
        Console.WriteLine($"üíé {jewelry.Type}: Premium = ${premium:F2}");
        _totalPremium += premium;
    }
    
    public decimal GetTotalPremium()
    {
        return _totalPremium;
    }
}

// Concrete visitor - Value Appraiser
public class ValueAppraiser : IInsuranceVisitor
{
    private decimal _totalValue = 0;
    
    public void Visit(Car car)
    {
        decimal depreciation = (DateTime.Now.Year - car.Year) * 0.05m;
        decimal currentValue = car.Value * (1 - depreciation);
        Console.WriteLine($"üöó Car {car.Model}: Appraised value = ${currentValue:F2}");
        _totalValue += currentValue;
    }
    
    public void Visit(House house)
    {
        decimal appreciation = 1.05m; // Houses typically appreciate
        decimal currentValue = house.Value * appreciation;
        Console.WriteLine($"üè† House: Appraised value = ${currentValue:F2}");
        _totalValue += currentValue;
    }
    
    public void Visit(Jewelry jewelry)
    {
        Console.WriteLine($"üíé {jewelry.Type}: Appraised value = ${jewelry.Value:F2}");
        _totalValue += jewelry.Value;
    }
    
    public decimal GetTotalValue()
    {
        return _totalValue;
    }
}

// Usage
List<IInsurable> assets = new()
{
    new Car("Tesla Model 3", 2020, 40000),
    new House("123 Main St", 2000, 300000),
    new Jewelry("Diamond Ring", 5000),
    new Car("Honda Civic", 2010, 10000)
};

Console.WriteLine("=== Premium Calculation ===");
var premiumCalc = new PremiumCalculator();
foreach (var asset in assets)
{
    asset.Accept(premiumCalc);
}
Console.WriteLine($"\nüí∞ Total Annual Premium: ${premiumCalc.GetTotalPremium():F2}\n");

Console.WriteLine("=== Value Appraisal ===");
var appraiser = new ValueAppraiser();
foreach (var asset in assets)
{
    asset.Accept(appraiser);
}
Console.WriteLine($"\nüí∞ Total Portfolio Value: ${appraiser.GetTotalValue():F2}");</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>Object structure contains many classes with differing interfaces</li>
            <li>You need to perform operations across a set of objects</li>
            <li>You want to add new operations without changing element classes</li>
            <li>Related operations should be grouped together</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Easy to add new operations</li>
            <li>‚úÖ Groups related operations in visitor class</li>
            <li>‚úÖ Follows Open/Closed Principle</li>
            <li>‚úÖ Follows Single Responsibility Principle</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Adding new element classes is difficult</li>
            <li>‚ö†Ô∏è Can break encapsulation if elements expose too much</li>
            <li>‚ö†Ô∏è Complex to implement and understand</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />Compiler abstract syntax tree traversal, document structure processing (XML/HTML), reporting systems, code analysis tools, and serialization frameworks.
          </div>
        </section>

        <!-- Interpreter Pattern -->
        <section id="interpreter" role="article">
          <h1>üó£Ô∏è Interpreter Pattern</h1>
          <span class="badge">behavioral</span>
          <span class="badge">language</span>
          <span class="badge">grammar</span>
          
          <h2>Intent</h2>
          <p><strong>Interpreter</strong> defines a representation for a language's grammar along with an interpreter that uses the representation to interpret sentences in the language.</p>
          
          <h2>Problem</h2>
          <p>You have a language or notation that needs to be interpreted. You need to evaluate expressions, parse input, or execute commands based on a defined grammar.</p>
          
          <h2>Solution</h2>
          <p>Define a grammar for the language, represent each grammar rule as a class, and implement an interpret method that evaluates expressions.</p>
          
          <h2>Structure</h2>
          <div class="mermaid">
classDiagram
    class AbstractExpression {
        << abstract >>
        +Interpret(Context)
    }
    class TerminalExpression {
        +Interpret(Context)
    }
    class NonterminalExpression {
        -expressions: List~AbstractExpression~
        +Interpret(Context)
    }
    class Context {
        +Variables
    }
    
    AbstractExpression <|-- TerminalExpression
    AbstractExpression <|-- NonterminalExpression
    NonterminalExpression o-- AbstractExpression
          </div>
          
          <h2>Example: Boolean Expression Evaluator</h2>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Context
public class BooleanContext
{
    private Dictionary&lt;string, bool&gt; _variables = new();
    
    public void SetVariable(string name, bool value)
    {
        _variables[name] = value;
    }
    
    public bool GetVariable(string name)
    {
        return _variables.ContainsKey(name) ? _variables[name] : false;
    }
}

// Abstract expression
public interface IBooleanExpression
{
    bool Interpret(BooleanContext context);
}

// Terminal expressions
public class VariableExpression : IBooleanExpression
{
    private string _name;
    
    public VariableExpression(string name)
    {
        _name = name;
    }
    
    public bool Interpret(BooleanContext context)
    {
        return context.GetVariable(_name);
    }
    
    public override string ToString() => _name;
}

public class ConstantExpression : IBooleanExpression
{
    private bool _value;
    
    public ConstantExpression(bool value)
    {
        _value = value;
    }
    
    public bool Interpret(BooleanContext context)
    {
        return _value;
    }
    
    public override string ToString() => _value.ToString();
}

// Nonterminal expressions (operators)
public class AndExpression : IBooleanExpression
{
    private IBooleanExpression _left;
    private IBooleanExpression _right;
    
    public AndExpression(IBooleanExpression left, IBooleanExpression right)
    {
        _left = left;
        _right = right;
    }
    
    public bool Interpret(BooleanContext context)
    {
        return _left.Interpret(context) && _right.Interpret(context);
    }
    
    public override string ToString() => $"({_left} AND {_right})";
}

public class OrExpression : IBooleanExpression
{
    private IBooleanExpression _left;
    private IBooleanExpression _right;
    
    public OrExpression(IBooleanExpression left, IBooleanExpression right)
    {
        _left = left;
        _right = right;
    }
    
    public bool Interpret(BooleanContext context)
    {
        return _left.Interpret(context) || _right.Interpret(context);
    }
    
    public override string ToString() => $"({_left} OR {_right})";
}

public class NotExpression : IBooleanExpression
{
    private IBooleanExpression _expression;
    
    public NotExpression(IBooleanExpression expression)
    {
        _expression = expression;
    }
    
    public bool Interpret(BooleanContext context)
    {
        return !_expression.Interpret(context);
    }
    
    public override string ToString() => $"NOT {_expression}";
}

// Usage
BooleanContext context = new BooleanContext();
context.SetVariable("A", true);
context.SetVariable("B", false);
context.SetVariable("C", true);

// Build expression: (A AND B) OR (C AND NOT B)
// which is: (true AND false) OR (true AND NOT false)
// which is: false OR true = true
IBooleanExpression expression = new OrExpression(
    new AndExpression(
        new VariableExpression("A"),
        new VariableExpression("B")
    ),
    new AndExpression(
        new VariableExpression("C"),
        new NotExpression(new VariableExpression("B"))
    )
);

Console.WriteLine($"Expression: {expression}");
Console.WriteLine($"A = {context.GetVariable("A")}");
Console.WriteLine($"B = {context.GetVariable("B")}");
Console.WriteLine($"C = {context.GetVariable("C")}");
Console.WriteLine($"Result: {expression.Interpret(context)}");</code></pre>
          
          <h3>Example: Simple Calculator</h3>
          <pre class="syntax-highlighted" data-language="csharp"><code class="language-csharp">// Abstract expression for numbers
public interface IExpression
{
    int Interpret();
}

// Terminal expression - numbers
public class NumberExpression : IExpression
{
    private int _number;
    
    public NumberExpression(int number)
    {
        _number = number;
    }
    
    public int Interpret()
    {
        return _number;
    }
}

// Nonterminal expressions - operations
public class AddExpression : IExpression
{
    private IExpression _left;
    private IExpression _right;
    
    public AddExpression(IExpression left, IExpression right)
    {
        _left = left;
        _right = right;
    }
    
    public int Interpret()
    {
        return _left.Interpret() + _right.Interpret();
    }
}

public class SubtractExpression : IExpression
{
    private IExpression _left;
    private IExpression _right;
    
    public SubtractExpression(IExpression left, IExpression right)
    {
        _left = left;
        _right = right;
    }
    
    public int Interpret()
    {
        return _left.Interpret() - _right.Interpret();
    }
}

public class MultiplyExpression : IExpression
{
    private IExpression _left;
    private IExpression _right;
    
    public MultiplyExpression(IExpression left, IExpression right)
    {
        _left = left;
        _right = right;
    }
    
    public int Interpret()
    {
        return _left.Interpret() * _right.Interpret();
    }
}

// Usage - Calculate: (5 + 3) * (10 - 2)
// Result should be: 8 * 8 = 64
IExpression expression = new MultiplyExpression(
    new AddExpression(
        new NumberExpression(5),
        new NumberExpression(3)
    ),
    new SubtractExpression(
        new NumberExpression(10),
        new NumberExpression(2)
    )
);

Console.WriteLine($"Expression: (5 + 3) * (10 - 2)");
Console.WriteLine($"Result: {expression.Interpret()}"); // Output: 64</code></pre>
          
          <h2>When to Use</h2>
          <ul>
            <li>Grammar is simple and relatively stable</li>
            <li>Efficiency is not a critical concern</li>
            <li>You need to interpret expressions or commands</li>
            <li>You want to evaluate sentences in a language</li>
          </ul>
          
          <h2>Benefits</h2>
          <ul>
            <li>‚úÖ Easy to change and extend grammar</li>
            <li>‚úÖ Each grammar rule is a separate class</li>
            <li>‚úÖ Easy to implement grammar</li>
          </ul>
          
          <h2>Trade-offs</h2>
          <ul>
            <li>‚ö†Ô∏è Complex grammars are hard to maintain</li>
            <li>‚ö†Ô∏è Can result in many classes</li>
            <li>‚ö†Ô∏è Not efficient for complex grammars (use parser generators instead)</li>
          </ul>
          
          <div class="callout">
            <strong>üí° Real-World Example:</strong><br />SQL query parsers, regular expression engines, mathematical expression evaluators, configuration file parsers, and scripting language interpreters. For complex grammars, consider using parser generators like ANTLR instead.
          </div>
        </section>

        <!-- Resources Section -->
        <section id="resources" role="article">
          <h1>Resources</h1>
          <span class="badge">docs</span>
          <span class="badge">community</span>
          <span class="badge">links</span>
          
          <h2>üìö Essential Books</h2>
          
          <h3>The Original - Must Read</h3>
          <div class="callout">
            <strong>üìñ Design Patterns: Elements of Reusable Object-Oriented Software</strong><br>
            <em>By Erich Gamma, Richard Helm, Ralph Johnson, John Vlissides (Gang of Four)</em><br>
            Published: 1994<br><br>
            The definitive reference that introduced the 23 design patterns. While examples are in C++ and Smalltalk, the concepts are timeless and apply to all object-oriented languages.
          </div>
          
          <h3>Modern Interpretations</h3>
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Book</th>
                <th>Author</th>
                <th>Focus</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Head First Design Patterns</strong></td>
                <td>Eric Freeman, Elisabeth Robson</td>
                <td>Visual and engaging approach with Java examples. Great for beginners.</td>
              </tr>
              <tr>
                <td><strong>Design Patterns in C#</strong></td>
                <td>Vaskaran Sarcar</td>
                <td>Modern C# implementation of GoF patterns with .NET examples.</td>
              </tr>
              <tr>
                <td><strong>Dive Into Design Patterns</strong></td>
                <td>Alexander Shvets</td>
                <td>Modern treatment with Java, C#, PHP, Python examples and great visuals.</td>
              </tr>
              <tr>
                <td><strong>Patterns of Enterprise Application Architecture</strong></td>
                <td>Martin Fowler</td>
                <td>Enterprise-level patterns beyond GoF, essential for architects.</td>
              </tr>
              <tr>
                <td><strong>Agile Software Development, Principles, Patterns, and Practices</strong></td>
                <td>Robert C. Martin</td>
                <td>Combines SOLID principles with design patterns in C#.</td>
              </tr>
            </tbody>
          </table>
          
          <h2>üåê Online Resources</h2>
          
          <h3>Interactive Learning Platforms</h3>
          <ul>
            <li><strong><a href="https://refactoring.guru/design-patterns" target="_blank" rel="noopener noreferrer">Refactoring.Guru</a></strong> - Comprehensive visual guide with code examples in multiple languages</li>
            <li><strong><a href="https://sourcemaking.com/design_patterns" target="_blank" rel="noopener noreferrer">SourceMaking.com</a></strong> - Design patterns, anti-patterns, and refactoring tutorials</li>
            <li><strong><a href="https://www.dofactory.com/net/design-patterns" target="_blank" rel="noopener noreferrer">DoFactory.com</a></strong> - .NET design pattern implementations with real-world examples</li>
            <li><strong><a href="https://www.pluralsight.com/search?q=design%20patterns" target="_blank" rel="noopener noreferrer">Pluralsight</a></strong> - Video courses on design patterns for C#, Java, and other languages</li>
            <li><strong><a href="https://learn.microsoft.com/en-us/azure/architecture/patterns/" target="_blank" rel="noopener noreferrer">Microsoft Learn</a></strong> - Official Microsoft documentation on design patterns in .NET</li>
          </ul>
          
          <h3>Community & Discussion</h3>
          <ul>
            <li><strong><a href="https://stackoverflow.com/questions/tagged/design-patterns" target="_blank" rel="noopener noreferrer">Stack Overflow</a></strong> - Search for specific pattern implementation questions</li>
            <li><strong>Reddit: <a href="https://www.reddit.com/r/programming/" target="_blank" rel="noopener">r/programming</a>, <a href="https://www.reddit.com/r/dotnet/" target="_blank" rel="noopener">r/dotnet</a>, <a href="https://www.reddit.com/r/csharp/" target="_blank" rel="noopener">r/csharp</a></strong> - Active discussions on pattern usage</li>
            <li><strong><a href="https://dev.to/t/designpatterns" target="_blank" rel="noopener">Dev.to</a></strong> - Articles and tutorials from developers worldwide</li>
            <li><strong><a href="https://medium.com/tag/design-patterns" target="_blank" rel="noopener">Medium</a></strong> - Technical blogs with pattern implementations and case studies</li>
          </ul>
          
          <h3>Code Repositories</h3>
          <ul>
            <li><strong><a href="https://github.com/topics/design-patterns" target="_blank" rel="noopener">GitHub Topics</a></strong> - Search for "design-patterns" with your preferred language</li>
            <li><strong><a href="https://github.com/RefactoringGuru/design-patterns-csharp" target="_blank" rel="noopener">Design Patterns in C#</a></strong> - <code>github.com/RefactoringGuru/design-patterns-csharp</code></li>
            <li><strong><a href="https://github.com/DovAmir/awesome-design-patterns" target="_blank" rel="noopener">Awesome Design Patterns</a></strong> - Curated list of pattern resources</li>
          </ul>
          
          <h2>üíª Practice & Implementation</h2>
          
          <h3>Kata Exercises</h3>
          <div class="callout">
            <strong>ü•ã Practice Design Patterns with Katas:</strong>
            <ol>
              <li><strong>Coffee Shop</strong> - Implement Decorator pattern for beverage customization</li>
              <li><strong>Shape Factory</strong> - Use Factory Method and Abstract Factory for shape creation</li>
              <li><strong>Game Characters</strong> - Apply State pattern for character behavior</li>
              <li><strong>Document Editor</strong> - Implement Command pattern with undo/redo</li>
              <li><strong>Order Processing</strong> - Use Chain of Responsibility for approval workflow</li>
              <li><strong>Payment Gateway</strong> - Apply Strategy pattern for multiple payment methods</li>
            </ol>
          </div>
          
          <h3>Real-World Projects</h3>
          <ul>
            <li><strong>Build a Text Editor</strong> - Command (undo/redo), Memento (state), Composite (document structure)</li>
            <li><strong>E-commerce Platform</strong> - Strategy (payments), Observer (inventory), Factory (products)</li>
            <li><strong>Game Engine</strong> - State (game states), Flyweight (sprites), Observer (events)</li>
            <li><strong>Notification System</strong> - Observer (subscribers), Template Method (notification types), Factory (channels)</li>
            <li><strong>Reporting Framework</strong> - Template Method (report structure), Builder (complex reports), Strategy (formats)</li>
          </ul>
          
          <h2>üéØ Pattern Selection Guide</h2>
          
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Scenario</th>
                <th>Recommended Pattern</th>
                <th>Why</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Creating objects without specifying exact class</td>
                <td>Factory Method, Abstract Factory</td>
                <td>Decouples object creation from usage</td>
              </tr>
              <tr>
                <td>Building complex objects step-by-step</td>
                <td>Builder</td>
                <td>Manages complex construction process</td>
              </tr>
              <tr>
                <td>Need only one instance of a class</td>
                <td>Singleton (or DI container)</td>
                <td>Controls instance creation and access</td>
              </tr>
              <tr>
                <td>Making incompatible interfaces work together</td>
                <td>Adapter</td>
                <td>Converts one interface to another</td>
              </tr>
              <tr>
                <td>Adding functionality dynamically</td>
                <td>Decorator</td>
                <td>Wraps objects with new behavior</td>
              </tr>
              <tr>
                <td>Simplifying complex subsystems</td>
                <td>Facade</td>
                <td>Provides unified simple interface</td>
              </tr>
              <tr>
                <td>Composing objects into tree structures</td>
                <td>Composite</td>
                <td>Treats individual and composite objects uniformly</td>
              </tr>
              <tr>
                <td>Notifying multiple objects of state changes</td>
                <td>Observer</td>
                <td>Establishes one-to-many dependencies</td>
              </tr>
              <tr>
                <td>Implementing undo/redo functionality</td>
                <td>Command, Memento</td>
                <td>Encapsulates requests as objects, saves state</td>
              </tr>
              <tr>
                <td>Changing behavior based on state</td>
                <td>State</td>
                <td>Encapsulates state-specific behavior</td>
              </tr>
              <tr>
                <td>Selecting algorithm at runtime</td>
                <td>Strategy</td>
                <td>Encapsulates interchangeable algorithms</td>
              </tr>
              <tr>
                <td>Defining algorithm skeleton with varying steps</td>
                <td>Template Method</td>
                <td>Defers some steps to subclasses</td>
              </tr>
              <tr>
                <td>Reducing coupling in complex interactions</td>
                <td>Mediator</td>
                <td>Centralizes object communication</td>
              </tr>
              <tr>
                <td>Processing requests through multiple handlers</td>
                <td>Chain of Responsibility</td>
                <td>Decouples sender from receiver</td>
              </tr>
            </tbody>
          </table>
          
          <h2>‚ö° Best Practices</h2>
          
          <div class="callout">
            <strong>‚úÖ Do's:</strong>
            <ul>
              <li>Start simple - don't over-engineer with patterns</li>
              <li>Understand the problem before applying a pattern</li>
              <li>Combine patterns when appropriate (e.g., Abstract Factory + Singleton)</li>
              <li>Refactor to patterns when complexity grows</li>
              <li>Consider SOLID principles alongside patterns</li>
              <li>Document which patterns you're using and why</li>
              <li>Use patterns as communication tools within your team</li>
            </ul>
          </div>
          
          <div class="callout">
            <strong>‚ùå Don'ts:</strong>
            <ul>
              <li>Don't force patterns where they don't fit</li>
              <li>Don't use patterns just to show off knowledge</li>
              <li>Don't apply patterns prematurely (YAGNI - You Ain't Gonna Need It)</li>
              <li>Don't ignore modern language features (use DI instead of manual Singleton)</li>
              <li>Don't cargo cult - understand trade-offs</li>
              <li>Don't forget that simplicity is a virtue</li>
            </ul>
          </div>
          
          <h2>üéì Learning Path</h2>
          
          <h3>Beginner Level (Weeks 1-2)</h3>
          <ol>
            <li>Read overview and understand pattern categories</li>
            <li>Focus on most common patterns first:
              <ul>
                <li>Creational: Factory Method, Singleton</li>
                <li>Structural: Adapter, Decorator, Facade</li>
                <li>Behavioral: Observer, Strategy, Command</li>
              </ul>
            </li>
            <li>Implement simple examples for each pattern</li>
            <li>Identify patterns in frameworks you use (ASP.NET, Entity Framework)</li>
          </ol>
          
          <h3>Intermediate Level (Weeks 3-4)</h3>
          <ol>
            <li>Study remaining patterns in depth</li>
            <li>Complete kata exercises for each pattern</li>
            <li>Refactor existing code to use appropriate patterns</li>
            <li>Build a small project incorporating multiple patterns</li>
            <li>Read "Head First Design Patterns" or equivalent</li>
          </ol>
          
          <h3>Advanced Level (Ongoing)</h3>
          <ol>
            <li>Study pattern combinations and relationships</li>
            <li>Read the original GoF book for deep understanding</li>
            <li>Explore enterprise patterns (Martin Fowler's book)</li>
            <li>Contribute to open-source projects using patterns</li>
            <li>Teach patterns to others (best way to solidify knowledge)</li>
            <li>Study anti-patterns and when NOT to use patterns</li>
          </ol>
          
          <h2>üîç Patterns in Popular Frameworks</h2>
          
          <h3>.NET / C# Examples</h3>
          <ul>
            <li><strong>Factory Method:</strong> <code>DbProviderFactory</code>, <code>ControllerFactory</code> in ASP.NET MVC</li>
            <li><strong>Singleton:</strong> <code>HttpContext.Current</code>, DI container lifetimes</li>
            <li><strong>Builder:</strong> <code>StringBuilder</code>, <code>UriBuilder</code>, EF Core Fluent API</li>
            <li><strong>Adapter:</strong> ADO.NET providers, middleware adapters</li>
            <li><strong>Decorator:</strong> <code>Stream</code> classes (<code>FileStream</code>, <code>BufferedStream</code>, <code>CryptoStream</code>)</li>
            <li><strong>Facade:</strong> <code>HttpClient</code>, simplified APIs over complex subsystems</li>
            <li><strong>Composite:</strong> WPF/MAUI controls, HTML DOM</li>
            <li><strong>Proxy:</strong> Entity Framework lazy loading, WCF proxies</li>
            <li><strong>Observer:</strong> C# events and delegates, <code>INotifyPropertyChanged</code></li>
            <li><strong>Strategy:</strong> <code>IComparer&lt;T&gt;</code>, LINQ providers</li>
            <li><strong>Template Method:</strong> ASP.NET page lifecycle, test framework setup/teardown</li>
            <li><strong>Iterator:</strong> <code>IEnumerable&lt;T&gt;</code> and <code>IEnumerator&lt;T&gt;</code></li>
            <li><strong>Command:</strong> <code>ICommand</code> in WPF/MAUI, CQRS with MediatR</li>
          </ul>
          
          <h2>üí° Next Steps</h2>
          
          <div class="callout">
            <strong>Continue Your Journey:</strong>
            <ol>
              <li><strong>Practice Regularly:</strong> Implement one pattern per week in a pet project</li>
              <li><strong>Code Reviews:</strong> Look for pattern opportunities in your team's code</li>
              <li><strong>Study Anti-Patterns:</strong> Learn what NOT to do and why</li>
              <li><strong>Architectural Patterns:</strong> Move beyond GoF to CQRS, Event Sourcing, Microservices patterns</li>
              <li><strong>Domain-Driven Design:</strong> Combine patterns with DDD tactical patterns</li>
              <li><strong>Cloud Patterns:</strong> Study Azure/AWS architecture patterns for distributed systems</li>
              <li><strong>Join Communities:</strong> Participate in design discussions on Stack Overflow, Reddit, Twitter</li>
            </ol>
          </div>
          
          <div class="callout">
            <strong>üìå Remember:</strong> Design patterns are tools, not rules. Use them to solve problems, not to create them. The goal is to write maintainable, flexible code that solves real business problems. Start simple, refactor when needed, and always prioritize clarity over cleverness.
          </div>
          
          <h2>üôè Acknowledgments</h2>
          <p>This guide is inspired by the work of the Gang of Four and countless developers who have shared their knowledge about design patterns. Special thanks to the open-source community and educational resources that make learning accessible to everyone.</p>
          
          <p class="text-center"><strong>Happy Coding! üöÄ</strong></p>
          
          <hr />
          <div class="document-footer">
            <p>
              <strong>Last Updated:</strong> January 2026 | 
              <strong>Curated by:</strong> Murthy Vepa with ‚ù§Ô∏è | <strong>Powered by:</strong> GitHub Copilot
            </p>
          </div>
        
        </section>       
        </div>
      </main>
    </div>
    
    <nav class="controls" role="navigation" aria-label="Pagination">
      <div class="btn-group" role="group">
        <button class="btn btn-outline-info btn-sm" id="prevBtn" title="Previous" aria-label="Previous concept">&nbsp;&lt;&nbsp;</button>
        <button class="btn btn-outline-info btn-sm" id="nextBtn" title="Next" aria-label="Next concept">&nbsp;&gt;&nbsp;</button>
      </div>
    </nav>
  </div>  <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarOffcanvas" aria-labelledby="sidebarLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="sidebarLabel">Contents</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body p-0">
      <ul class="list-group list-group-flush w-100" id="tocMobile"></ul>
    </div>
  </div>

  <script>
    // ---- Mermaid Initialization ----
    document.addEventListener('DOMContentLoaded', () => {
      if (window.mermaid) {
        window.mermaid.contentLoaded();
      }
    });

    // ---- Configuration ----
    const sectionConfig = [
      { id: "overview", title: "üé® Gang of Four Design Patterns", tags: ["intro", "overview", "gof"] },
      { id: "creational-patterns", title: "üèóÔ∏è Creational Patterns", tags: ["creational", "object-creation"] },
      { id: "factory-method", title: "üè≠ Factory Method", tags: ["creational", "factory"] },
      { id: "abstract-factory", title: "üè≠ Abstract Factory", tags: ["creational", "factory"] },
      { id: "builder", title: "üë∑ Builder", tags: ["creational", "construction"] },
      { id: "prototype", title: "üß¨ Prototype", tags: ["creational", "cloning"] },
      { id: "singleton", title: "üë§ Singleton", tags: ["creational", "instance"] },
      { id: "structural-patterns", title: "üîß Structural Patterns", tags: ["structural", "composition"] },
      { id: "adapter", title: "üîå Adapter", tags: ["structural", "wrapper"] },
      { id: "bridge", title: "üåâ Bridge", tags: ["structural", "abstraction"] },
      { id: "composite", title: "üå≤ Composite", tags: ["structural", "tree"] },
      { id: "decorator", title: "üéÅ Decorator", tags: ["structural", "wrapper"] },
      { id: "facade", title: "üé≠ Facade", tags: ["structural", "simplification"] },
      { id: "flyweight", title: "ü™∂ Flyweight", tags: ["structural", "optimization"] },
      { id: "proxy", title: "üö™ Proxy", tags: ["structural", "placeholder"] },
      { id: "behavioral-patterns", title: "üé≠ Behavioral Patterns", tags: ["behavioral", "communication"] },
      { id: "chain-of-responsibility", title: "‚õìÔ∏è Chain of Responsibility", tags: ["behavioral", "request"] },
      { id: "command", title: "üìù Command", tags: ["behavioral", "action"] },
      { id: "iterator", title: "üîÑ Iterator", tags: ["behavioral", "traversal"] },
      { id: "mediator", title: "ü§ù Mediator", tags: ["behavioral", "communication"] },
      { id: "memento", title: "üíæ Memento", tags: ["behavioral", "state"] },
      { id: "observer", title: "üëÄ Observer", tags: ["behavioral", "subscription"] },
      { id: "state", title: "üö¶ State", tags: ["behavioral", "fsm"] },
      { id: "strategy", title: "üéØ Strategy", tags: ["behavioral", "algorithm"] },
      { id: "template-method", title: "üìã Template Method", tags: ["behavioral", "skeleton"] },
      { id: "visitor", title: "üö∂ Visitor", tags: ["behavioral", "operation"] },
      { id: "interpreter", title: "üó£Ô∏è Interpreter", tags: ["behavioral", "language"] },
      { id: "resources", title: "üìö Resources", tags: ["docs", "links"] }
    ];

    // ---- State & rendering ----
    const state = {
      index: 0,
      filtered: sectionConfig.map((_, i) => i), // indices
    };

    const els = {
      toc: document.getElementById('toc'),
      tocMobile: document.getElementById('tocMobile'),
      prev: document.getElementById('prevBtn'),
      next: document.getElementById('nextBtn'),
      toggleSidebar: document.getElementById('toggleSidebar'),
      themeToggle: document.getElementById('themeToggle'),
      main: document.getElementById('main'),
      sidebar: document.querySelector('nav.sidebar'),
      sidebarOffcanvas: document.getElementById('sidebarOffcanvas')
    };

    function buildTOC(){
      // Clear both TOC lists
      els.toc.innerHTML = '';
      els.tocMobile.innerHTML = '';
      
      state.filtered.forEach((idx) => {
        const s = sectionConfig[idx];
        
        // Check if this is a sub-item (design patterns)
        const creationalPatterns = ['factory-method', 'abstract-factory', 'builder', 'prototype', 'singleton'];
        const structuralPatterns = ['adapter', 'bridge', 'composite', 'decorator', 'facade', 'flyweight', 'proxy'];
        const behavioralPatterns = ['chain-of-responsibility', 'command', 'iterator', 'mediator', 'memento', 'observer', 'state', 'strategy', 'template-method', 'visitor', 'interpreter'];
        const isSubItem = [...creationalPatterns, ...structuralPatterns, ...behavioralPatterns].includes(s.id);
        
        // Desktop sidebar
        const liDesktop = document.createElement('li');
        liDesktop.className = isSubItem ? 'list-group-sub-item' : 'list-group-item';
        const aDesktop = document.createElement('a');
        aDesktop.href = `#${s.id}`;
        aDesktop.textContent = s.title;
        aDesktop.addEventListener('click', (e) => {
          e.preventDefault();
          navigateToId(s.id);
          closeSidebar();
        });
        liDesktop.appendChild(aDesktop);
        els.toc.appendChild(liDesktop);
        
        // Mobile offcanvas
        const liMobile = document.createElement('li');
        liMobile.className = isSubItem ? 'list-group-sub-item' : 'list-group-item';
        const aMobile = document.createElement('a');
        aMobile.href = `#${s.id}`;
        aMobile.textContent = s.title;
        aMobile.addEventListener('click', (e) => {
          e.preventDefault();
          navigateToId(s.id);
          closeSidebar();
        });
        liMobile.appendChild(aMobile);
        els.tocMobile.appendChild(liMobile);
      });
      highlightActiveTOC();
    }

    function setActiveByIndex(i){
      const ids = state.filtered.map(idx => sectionConfig[idx].id);
      document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
      const id = ids[i];
      const active = document.getElementById(id);
      if (active){
        active.classList.add('active');
        active.setAttribute('tabindex', '-1');
        active.focus({preventScroll:true});
      }
      updateControls();
      highlightActiveTOC();
      updateURLHash(id);
    }

    function updateControls(){
      const count = state.filtered.length;
      els.prev.disabled = state.index <= 0;
      els.next.disabled = state.index >= count - 1;
    }

    function filterTOC(query){
      const q = query.trim().toLowerCase();
      state.filtered = sectionConfig
        .map((s, i) => ({s, i}))
        .filter(({s}) => s.title.toLowerCase().includes(q) || s.tags.some(t => t.toLowerCase().includes(q)))
        .map(({i}) => i);

      state.index = Math.min(state.index, Math.max(0, state.filtered.length - 1));
      buildTOC();
      setActiveByIndex(state.index);
    }

    function navigate(delta){
      const count = state.filtered.length;
      const nextIndex = Math.min(Math.max(state.index + delta, 0), count - 1);
      if (nextIndex !== state.index){
        state.index = nextIndex;
        setActiveByIndex(state.index);
        // Scroll content to top
        const contentEl = document.querySelector('.content');
        if (contentEl) contentEl.scrollTop = 0;
      }
    }

    function navigateToId(id){
      const idxInFiltered = state.filtered.findIndex(fi => sectionConfig[fi].id === id);
      if (idxInFiltered !== -1){
        state.index = idxInFiltered;
        setActiveByIndex(state.index);
        // Scroll content to top
        const contentEl = document.querySelector('.content');
        if (contentEl) contentEl.scrollTop = 0;
      } else {
        state.filtered = sectionConfig.map((_, i) => i);
        buildTOC();
        navigateToId(id);
      }
    }

    function updateURLHash(id){
      const url = new URL(window.location);
      url.hash = id;
      history.replaceState(null, '', url);
    }

    function highlightActiveTOC(){
      const ids = state.filtered.map(idx => sectionConfig[idx].id);
      const activeId = ids[state.index];
      // Highlight desktop sidebar
      els.toc.querySelectorAll('a').forEach(a => {
        const isActive = a.getAttribute('href') === `#${activeId}`;
        a.classList.toggle('active', isActive);
        // Also toggle active on parent li for sub-items
        if (a.parentElement.classList.contains('list-group-sub-item')) {
          a.parentElement.classList.toggle('active', isActive);
        }
      });
      // Highlight mobile offcanvas
      els.tocMobile.querySelectorAll('a').forEach(a => {
        const isActive = a.getAttribute('href') === `#${activeId}`;
        a.classList.toggle('active', isActive);
        // Also toggle active on parent li for sub-items
        if (a.parentElement.classList.contains('list-group-sub-item')) {
          a.parentElement.classList.toggle('active', isActive);
        }
      });
    }

    function openSidebar(){
      const offcanvas = new bootstrap.Offcanvas(document.getElementById('sidebarOffcanvas'));
      offcanvas.show();
    }
    function closeSidebar(){
      const offcanvasElement = document.getElementById('sidebarOffcanvas');
      const offcanvas = bootstrap.Offcanvas.getInstance(offcanvasElement);
      if(offcanvas) offcanvas.hide();
    }

    // ---- Events ----
    els.prev.addEventListener('click', () => navigate(-1));
    els.next.addEventListener('click', () => navigate(1));

    // Keyboard navigation
    window.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') navigate(-1);
      else if (e.key === 'ArrowRight') navigate(1);
      else if (e.key === 'Escape') closeSidebar();
    });

    // Deep linking on load/hash change
    window.addEventListener('hashchange', () => {
      const id = location.hash.replace('#','');
      if (id) navigateToId(id);
    });

    // Sidebar toggle (mobile)
    els.toggleSidebar.addEventListener('click', () => {
      openSidebar();
    });

    // Restore theme
    (function(){
      try {
        const saved = localStorage.getItem('concepts-theme');
        if (saved) { 
          document.documentElement.setAttribute('data-theme', saved);
          els.themeToggle.textContent = saved === 'light' ? 'üåó' : 'üåô';
        }
      } catch {}
    })();

    // Initial render
    buildTOC();
    
    // Navigate to hash if present, otherwise show first section
    const initialId = location.hash.replace('#','');
    if (initialId){ 
    navigateToId(initialId); 
    } else {
    setActiveByIndex(0);
    // Scroll content to top on initial load
    const contentEl = document.querySelector('.content');
    if (contentEl) contentEl.scrollTop = 0;
    }

  </script>
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>